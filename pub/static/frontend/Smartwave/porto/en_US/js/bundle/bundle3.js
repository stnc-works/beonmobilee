require.config({"config": {
        "jsbuild":{"popper/esm/popper-utils.js":"/**!\n * @fileOverview Kickass library to create and place poppers near their reference elements.\n * @version 1.12.5\n * @license\n * Copyright (c) 2016 Federico Zivolo and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nfunction getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  var css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n\n/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nfunction getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nfunction getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element || ['HTML', 'BODY', '#document'].indexOf(element.nodeName) !== -1) {\n    return window.document.body;\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n\n  var _getStyleComputedProp = getStyleComputedProperty(element),\n      overflow = _getStyleComputedProp.overflow,\n      overflowX = _getStyleComputedProp.overflowX,\n      overflowY = _getStyleComputedProp.overflowY;\n\n  if (/(auto|scroll)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nfunction getOffsetParent(element) {\n  // NOTE: 1 DOM access here\n  var offsetParent = element && element.offsetParent;\n  var nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return window.document.documentElement;\n  }\n\n  // .offsetParent will return the closest TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (['TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 && getStyleComputedProperty(offsetParent, 'position') === 'static') {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n\nfunction isOffsetContainer(element) {\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element;\n}\n\n/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nfunction getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nfunction findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return window.document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  var order = element1.compareDocumentPosition(element2) & Node.DOCUMENT_POSITION_FOLLOWING;\n  var start = order ? element1 : element2;\n  var end = order ? element2 : element1;\n\n  // Get common ancestor container\n  var range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  var commonAncestorContainer = range.commonAncestorContainer;\n\n  // Both nodes are inside #document\n\n  if (element1 !== commonAncestorContainer && element2 !== commonAncestorContainer || start.contains(end)) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  var element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n\n/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nfunction getScroll(element) {\n  var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'top';\n\n  var upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    var html = window.document.documentElement;\n    var scrollingElement = window.document.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nfunction includeScroll(rect, element) {\n  var subtract = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var scrollTop = getScroll(element, 'top');\n  var scrollLeft = getScroll(element, 'left');\n  var modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n\n/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nfunction getBordersSize(styles, axis) {\n  var sideA = axis === 'x' ? 'Left' : 'Top';\n  var sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return +styles['border' + sideA + 'Width'].split('px')[0] + +styles['border' + sideB + 'Width'].split('px')[0];\n}\n\n/**\n * Tells if you are running Internet Explorer 10\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean} isIE10\n */\nvar isIE10 = undefined;\n\nvar isIE10$1 = function () {\n  if (isIE10 === undefined) {\n    isIE10 = navigator.appVersion.indexOf('MSIE 10') !== -1;\n  }\n  return isIE10;\n};\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(body['offset' + axis], body['scroll' + axis], html['client' + axis], html['offset' + axis], html['scroll' + axis], isIE10$1() ? html['offset' + axis] + computedStyle['margin' + (axis === 'Height' ? 'Top' : 'Left')] + computedStyle['margin' + (axis === 'Height' ? 'Bottom' : 'Right')] : 0);\n}\n\nfunction getWindowSizes() {\n  var body = window.document.body;\n  var html = window.document.documentElement;\n  var computedStyle = isIE10$1() && window.getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle)\n  };\n}\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nfunction getClientRect(offsets) {\n  return _extends({}, offsets, {\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height\n  });\n}\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nfunction getBoundingClientRect(element) {\n  var rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  if (isIE10$1()) {\n    try {\n      rect = element.getBoundingClientRect();\n      var scrollTop = getScroll(element, 'top');\n      var scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    } catch (err) {}\n  } else {\n    rect = element.getBoundingClientRect();\n  }\n\n  var result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top\n  };\n\n  // subtract scrollbar size from sizes\n  var sizes = element.nodeName === 'HTML' ? getWindowSizes() : {};\n  var width = sizes.width || element.clientWidth || result.right - result.left;\n  var height = sizes.height || element.clientHeight || result.bottom - result.top;\n\n  var horizScrollbar = element.offsetWidth - width;\n  var vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    var styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n\nfunction getOffsetRectRelativeToArbitraryNode(children, parent) {\n  var isIE10 = isIE10$1();\n  var isHTML = parent.nodeName === 'HTML';\n  var childrenRect = getBoundingClientRect(children);\n  var parentRect = getBoundingClientRect(parent);\n  var scrollParent = getScrollParent(children);\n\n  var styles = getStyleComputedProperty(parent);\n  var borderTopWidth = +styles.borderTopWidth.split('px')[0];\n  var borderLeftWidth = +styles.borderLeftWidth.split('px')[0];\n\n  var offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    var marginTop = +styles.marginTop.split('px')[0];\n    var marginLeft = +styles.marginLeft.split('px')[0];\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (isIE10 ? parent.contains(scrollParent) : parent === scrollParent && scrollParent.nodeName !== 'BODY') {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n\nfunction getViewportOffsetRectRelativeToArtbitraryNode(element) {\n  var html = window.document.documentElement;\n  var relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  var width = Math.max(html.clientWidth, window.innerWidth || 0);\n  var height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  var scrollTop = getScroll(html);\n  var scrollLeft = getScroll(html, 'left');\n\n  var offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width: width,\n    height: height\n  };\n\n  return getClientRect(offset);\n}\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nfunction isFixed(element) {\n  var nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  return isFixed(getParentNode(element));\n}\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @returns {Object} Coordinates of the boundaries\n */\nfunction getBoundaries(popper, reference, padding, boundariesElement) {\n  // NOTE: 1 DOM access here\n  var boundaries = { top: 0, left: 0 };\n  var offsetParent = findCommonOffsetParent(popper, reference);\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport') {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent);\n  } else {\n    // Handle other cases based on DOM element used as boundaries\n    var boundariesNode = void 0;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(popper));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = window.document.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = window.document.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    var offsets = getOffsetRectRelativeToArbitraryNode(boundariesNode, offsetParent);\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      var _getWindowSizes = getWindowSizes(),\n          height = _getWindowSizes.height,\n          width = _getWindowSizes.width;\n\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  boundaries.left += padding;\n  boundaries.top += padding;\n  boundaries.right -= padding;\n  boundaries.bottom -= padding;\n\n  return boundaries;\n}\n\nfunction getArea(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeAutoPlacement(placement, refRect, popper, reference, boundariesElement) {\n  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  var boundaries = getBoundaries(popper, reference, padding, boundariesElement);\n\n  var rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height\n    }\n  };\n\n  var sortedAreas = Object.keys(rects).map(function (key) {\n    return _extends({\n      key: key\n    }, rects[key], {\n      area: getArea(rects[key])\n    });\n  }).sort(function (a, b) {\n    return b.area - a.area;\n  });\n\n  var filteredAreas = sortedAreas.filter(function (_ref2) {\n    var width = _ref2.width,\n        height = _ref2.height;\n    return width >= popper.clientWidth && height >= popper.clientHeight;\n  });\n\n  var computedPlacement = filteredAreas.length > 0 ? filteredAreas[0].key : sortedAreas[0].key;\n\n  var variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? '-' + variation : '');\n}\n\nvar nativeHints = ['native code', '[object MutationObserverConstructor]'];\n\n/**\n * Determine if a function is implemented natively (as opposed to a polyfill).\n * @method\n * @memberof Popper.Utils\n * @argument {Function | undefined} fn the function to check\n * @returns {Boolean}\n */\nvar isNative = (function (fn) {\n  return nativeHints.some(function (hint) {\n    return (fn || '').toString().indexOf(hint) > -1;\n  });\n});\n\nvar isBrowser = typeof window !== 'undefined';\nvar longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\nvar timeoutDuration = 0;\nfor (var i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n    timeoutDuration = 1;\n    break;\n  }\n}\n\nfunction microtaskDebounce(fn) {\n  var scheduled = false;\n  var i = 0;\n  var elem = document.createElement('span');\n\n  // MutationObserver provides a mechanism for scheduling microtasks, which\n  // are scheduled *before* the next task. This gives us a way to debounce\n  // a function but ensure it's called *before* the next paint.\n  var observer = new MutationObserver(function () {\n    fn();\n    scheduled = false;\n  });\n\n  observer.observe(elem, { attributes: true });\n\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      elem.setAttribute('x-index', i);\n      i = i + 1; // don't use compund (+=) because it doesn't get optimized in V8\n    }\n  };\n}\n\nfunction taskDebounce(fn) {\n  var scheduled = false;\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(function () {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\n// It's common for MutationObserver polyfills to be seen in the wild, however\n// these rely on Mutation Events which only occur when an element is connected\n// to the DOM. The algorithm used in this module does not use a connected element,\n// and so we must ensure that a *native* MutationObserver is available.\nvar supportsNativeMutationObserver = isBrowser && isNative(window.MutationObserver);\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nvar debounce = supportsNativeMutationObserver ? microtaskDebounce : taskDebounce;\n\n/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(function (cur) {\n      return cur[prop] === value;\n    });\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  var match = find(arr, function (obj) {\n    return obj[prop] === value;\n  });\n  return arr.indexOf(match);\n}\n\n/**\n * Get the position of the given element, relative to its offset parent\n * @method\n * @memberof Popper.Utils\n * @param {Element} element\n * @return {Object} position - Coordinates of the element and its `scrollTop`\n */\nfunction getOffsetRect(element) {\n  var elementRect = void 0;\n  if (element.nodeName === 'HTML') {\n    var _getWindowSizes = getWindowSizes(),\n        width = _getWindowSizes.width,\n        height = _getWindowSizes.height;\n\n    elementRect = {\n      width: width,\n      height: height,\n      left: 0,\n      top: 0\n    };\n  } else {\n    elementRect = {\n      width: element.offsetWidth,\n      height: element.offsetHeight,\n      left: element.offsetLeft,\n      top: element.offsetTop\n    };\n  }\n\n  // position\n  return getClientRect(elementRect);\n}\n\n/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nfunction getOuterSizes(element) {\n  var styles = window.getComputedStyle(element);\n  var x = parseFloat(styles.marginTop) + parseFloat(styles.marginBottom);\n  var y = parseFloat(styles.marginLeft) + parseFloat(styles.marginRight);\n  var result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x\n  };\n  return result;\n}\n\n/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nfunction getOppositePlacement(placement) {\n  var hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nfunction getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  var popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  var popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  var isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  var mainSide = isHoriz ? 'top' : 'left';\n  var secondarySide = isHoriz ? 'left' : 'top';\n  var measurement = isHoriz ? 'height' : 'width';\n  var secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] = referenceOffsets[mainSide] + referenceOffsets[measurement] / 2 - popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] = referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] = referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nfunction getReferenceOffsets(state, popper, reference) {\n  var commonOffsetParent = findCommonOffsetParent(popper, reference);\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent);\n}\n\n/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nfunction getSupportedPropertyName(property) {\n  var prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  var upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (var i = 0; i < prefixes.length - 1; i++) {\n    var prefix = prefixes[i];\n    var toCheck = prefix ? '' + prefix + upperProp : property;\n    if (typeof window.document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n\n/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nfunction isFunction(functionToCheck) {\n  var getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\n/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nfunction isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(function (_ref) {\n    var name = _ref.name,\n        enabled = _ref.enabled;\n    return enabled && name === modifierName;\n  });\n}\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nfunction isModifierRequired(modifiers, requestingName, requestedName) {\n  var requesting = find(modifiers, function (_ref) {\n    var name = _ref.name;\n    return name === requestingName;\n  });\n\n  var isRequired = !!requesting && modifiers.some(function (modifier) {\n    return modifier.name === requestedName && modifier.enabled && modifier.order < requesting.order;\n  });\n\n  if (!isRequired) {\n    var _requesting = '`' + requestingName + '`';\n    var requested = '`' + requestedName + '`';\n    console.warn(requested + ' modifier is required by ' + _requesting + ' modifier in order to work, be sure to include it before ' + _requesting + '!');\n  }\n  return isRequired;\n}\n\n/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nfunction isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  window.removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(function (target) {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nfunction runModifiers(modifiers, data, ends) {\n  var modifiersToRun = ends === undefined ? modifiers : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(function (modifier) {\n    if (modifier.function) {\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    var fn = modifier.function || modifier.fn;\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n\n/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function (prop) {\n    var value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setStyles(element, styles) {\n  Object.keys(styles).forEach(function (prop) {\n    var unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 && isNumeric(styles[prop])) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  var isBody = scrollParent.nodeName === 'BODY';\n  var target = isBody ? window : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(getScrollParent(target.parentNode), event, callback, scrollParents);\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction setupEventListeners(reference, options, state, updateBound) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  window.addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  var scrollElement = getScrollParent(reference);\n  attachToScrollParents(scrollElement, 'scroll', state.updateBound, state.scrollParents);\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n\n// This is here just for backward compatibility with versions lower than v1.10.3\n// you should import the utilities using named exports, if you want them all use:\n// ```\n// import * as PopperUtils from 'popper-utils';\n// ```\n// The default export will be removed in the next major version.\nvar index = {\n  computeAutoPlacement: computeAutoPlacement,\n  debounce: debounce,\n  findIndex: findIndex,\n  getBordersSize: getBordersSize,\n  getBoundaries: getBoundaries,\n  getBoundingClientRect: getBoundingClientRect,\n  getClientRect: getClientRect,\n  getOffsetParent: getOffsetParent,\n  getOffsetRect: getOffsetRect,\n  getOffsetRectRelativeToArbitraryNode: getOffsetRectRelativeToArbitraryNode,\n  getOuterSizes: getOuterSizes,\n  getParentNode: getParentNode,\n  getPopperOffsets: getPopperOffsets,\n  getReferenceOffsets: getReferenceOffsets,\n  getScroll: getScroll,\n  getScrollParent: getScrollParent,\n  getStyleComputedProperty: getStyleComputedProperty,\n  getSupportedPropertyName: getSupportedPropertyName,\n  getWindowSizes: getWindowSizes,\n  isFixed: isFixed,\n  isFunction: isFunction,\n  isModifierEnabled: isModifierEnabled,\n  isModifierRequired: isModifierRequired,\n  isNative: isNative,\n  isNumeric: isNumeric,\n  removeEventListeners: removeEventListeners,\n  runModifiers: runModifiers,\n  setAttributes: setAttributes,\n  setStyles: setStyles,\n  setupEventListeners: setupEventListeners\n};\n\nexport { computeAutoPlacement, debounce, findIndex, getBordersSize, getBoundaries, getBoundingClientRect, getClientRect, getOffsetParent, getOffsetRect, getOffsetRectRelativeToArbitraryNode, getOuterSizes, getParentNode, getPopperOffsets, getReferenceOffsets, getScroll, getScrollParent, getStyleComputedProperty, getSupportedPropertyName, getWindowSizes, isFixed, isFunction, isModifierEnabled, isModifierRequired, isNative, isNumeric, removeEventListeners, runModifiers, setAttributes, setStyles, setupEventListeners };export default index;\n//# sourceMappingURL=popper-utils.js.map\n","popper/umd/popper.min.js":"/*\n Copyright (C) Federico Zivolo 2017\n Distributed under the MIT License (license terms are at http://opensource.org/licenses/MIT).\n */(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?module.exports=t():'function'==typeof define&&define.amd?define(t):e.Popper=t()})(this,function(){'use strict';function e(e){return e&&'[object Function]'==={}.toString.call(e)}function t(e,t){if(1!==e.nodeType)return[];var o=window.getComputedStyle(e,null);return t?o[t]:o}function o(e){return'HTML'===e.nodeName?e:e.parentNode||e.host}function n(e){if(!e||-1!==['HTML','BODY','#document'].indexOf(e.nodeName))return window.document.body;var i=t(e),r=i.overflow,p=i.overflowX,s=i.overflowY;return /(auto|scroll)/.test(r+s+p)?e:n(o(e))}function r(e){var o=e&&e.offsetParent,i=o&&o.nodeName;return i&&'BODY'!==i&&'HTML'!==i?-1!==['TD','TABLE'].indexOf(o.nodeName)&&'static'===t(o,'position')?r(o):o:window.document.documentElement}function p(e){var t=e.nodeName;return'BODY'!==t&&('HTML'===t||r(e.firstElementChild)===e)}function s(e){return null===e.parentNode?e:s(e.parentNode)}function d(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return window.document.documentElement;var o=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=o?e:t,n=o?t:e,a=document.createRange();a.setStart(i,0),a.setEnd(n,0);var l=a.commonAncestorContainer;if(e!==l&&t!==l||i.contains(n))return p(l)?l:r(l);var f=s(e);return f.host?d(f.host,t):d(e,s(t).host)}function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'top',o='top'===t?'scrollTop':'scrollLeft',i=e.nodeName;if('BODY'===i||'HTML'===i){var n=window.document.documentElement,r=window.document.scrollingElement||n;return r[o]}return e[o]}function l(e,t){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=a(t,'top'),n=a(t,'left'),r=o?-1:1;return e.top+=i*r,e.bottom+=i*r,e.left+=n*r,e.right+=n*r,e}function f(e,t){var o='x'===t?'Left':'Top',i='Left'==o?'Right':'Bottom';return+e['border'+o+'Width'].split('px')[0]+ +e['border'+i+'Width'].split('px')[0]}function m(e,t,o,i){return X(t['offset'+e],t['scroll'+e],o['client'+e],o['offset'+e],o['scroll'+e],ne()?o['offset'+e]+i['margin'+('Height'===e?'Top':'Left')]+i['margin'+('Height'===e?'Bottom':'Right')]:0)}function c(){var e=window.document.body,t=window.document.documentElement,o=ne()&&window.getComputedStyle(t);return{height:m('Height',e,t,o),width:m('Width',e,t,o)}}function h(e){return de({},e,{right:e.left+e.width,bottom:e.top+e.height})}function g(e){var o={};if(ne())try{o=e.getBoundingClientRect();var i=a(e,'top'),n=a(e,'left');o.top+=i,o.left+=n,o.bottom+=i,o.right+=n}catch(e){}else o=e.getBoundingClientRect();var r={left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top},p='HTML'===e.nodeName?c():{},s=p.width||e.clientWidth||r.right-r.left,d=p.height||e.clientHeight||r.bottom-r.top,l=e.offsetWidth-s,m=e.offsetHeight-d;if(l||m){var g=t(e);l-=f(g,'x'),m-=f(g,'y'),r.width-=l,r.height-=m}return h(r)}function u(e,o){var i=ne(),r='HTML'===o.nodeName,p=g(e),s=g(o),d=n(e),a=t(o),f=+a.borderTopWidth.split('px')[0],m=+a.borderLeftWidth.split('px')[0],c=h({top:p.top-s.top-f,left:p.left-s.left-m,width:p.width,height:p.height});if(c.marginTop=0,c.marginLeft=0,!i&&r){var u=+a.marginTop.split('px')[0],b=+a.marginLeft.split('px')[0];c.top-=f-u,c.bottom-=f-u,c.left-=m-b,c.right-=m-b,c.marginTop=u,c.marginLeft=b}return(i?o.contains(d):o===d&&'BODY'!==d.nodeName)&&(c=l(c,o)),c}function b(e){var t=window.document.documentElement,o=u(e,t),i=X(t.clientWidth,window.innerWidth||0),n=X(t.clientHeight,window.innerHeight||0),r=a(t),p=a(t,'left'),s={top:r-o.top+o.marginTop,left:p-o.left+o.marginLeft,width:i,height:n};return h(s)}function y(e){var i=e.nodeName;return'BODY'===i||'HTML'===i?!1:'fixed'===t(e,'position')||y(o(e))}function w(e,t,i,r){var p={top:0,left:0},s=d(e,t);if('viewport'===r)p=b(s);else{var a;'scrollParent'===r?(a=n(o(e)),'BODY'===a.nodeName&&(a=window.document.documentElement)):'window'===r?a=window.document.documentElement:a=r;var l=u(a,s);if('HTML'===a.nodeName&&!y(s)){var f=c(),m=f.height,h=f.width;p.top+=l.top-l.marginTop,p.bottom=m+l.top,p.left+=l.left-l.marginLeft,p.right=h+l.left}else p=l}return p.left+=i,p.top+=i,p.right-=i,p.bottom-=i,p}function E(e){var t=e.width,o=e.height;return t*o}function v(e,t,o,i,n){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf('auto'))return e;var p=w(o,i,r,n),s={top:{width:p.width,height:t.top-p.top},right:{width:p.right-t.right,height:p.height},bottom:{width:p.width,height:p.bottom-t.bottom},left:{width:t.left-p.left,height:p.height}},d=Object.keys(s).map(function(e){return de({key:e},s[e],{area:E(s[e])})}).sort(function(e,t){return t.area-e.area}),a=d.filter(function(e){var t=e.width,i=e.height;return t>=o.clientWidth&&i>=o.clientHeight}),l=0<a.length?a[0].key:d[0].key,f=e.split('-')[1];return l+(f?'-'+f:'')}function x(e,t,o){var i=d(t,o);return u(o,i)}function O(e){var t=window.getComputedStyle(e),o=parseFloat(t.marginTop)+parseFloat(t.marginBottom),i=parseFloat(t.marginLeft)+parseFloat(t.marginRight),n={width:e.offsetWidth+i,height:e.offsetHeight+o};return n}function L(e){var t={left:'right',right:'left',bottom:'top',top:'bottom'};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function S(e,t,o){o=o.split('-')[0];var i=O(e),n={width:i.width,height:i.height},r=-1!==['right','left'].indexOf(o),p=r?'top':'left',s=r?'left':'top',d=r?'height':'width',a=r?'width':'height';return n[p]=t[p]+t[d]/2-i[d]/2,n[s]=o===s?t[s]-i[a]:t[L(s)],n}function T(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function C(e,t,o){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===o});var i=T(e,function(e){return e[t]===o});return e.indexOf(i)}function N(t,o,i){var n=void 0===i?t:t.slice(0,C(t,'name',i));return n.forEach(function(t){t.function&&console.warn('`modifier.function` is deprecated, use `modifier.fn`!');var i=t.function||t.fn;t.enabled&&e(i)&&(o.offsets.popper=h(o.offsets.popper),o.offsets.reference=h(o.offsets.reference),o=i(o,t))}),o}function k(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=x(this.state,this.popper,this.reference),e.placement=v(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.offsets.popper=S(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position='absolute',e=N(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function W(e,t){return e.some(function(e){var o=e.name,i=e.enabled;return i&&o===t})}function B(e){for(var t=[!1,'ms','Webkit','Moz','O'],o=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length-1;n++){var i=t[n],r=i?''+i+o:e;if('undefined'!=typeof window.document.body.style[r])return r}return null}function P(){return this.state.isDestroyed=!0,W(this.modifiers,'applyStyle')&&(this.popper.removeAttribute('x-placement'),this.popper.style.left='',this.popper.style.position='',this.popper.style.top='',this.popper.style[B('transform')]=''),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function D(e,t,o,i){var r='BODY'===e.nodeName,p=r?window:e;p.addEventListener(t,o,{passive:!0}),r||D(n(p.parentNode),t,o,i),i.push(p)}function H(e,t,o,i){o.updateBound=i,window.addEventListener('resize',o.updateBound,{passive:!0});var r=n(e);return D(r,'scroll',o.updateBound,o.scrollParents),o.scrollElement=r,o.eventsEnabled=!0,o}function A(){this.state.eventsEnabled||(this.state=H(this.reference,this.options,this.state,this.scheduleUpdate))}function M(e,t){return window.removeEventListener('resize',t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener('scroll',t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function I(){this.state.eventsEnabled&&(window.cancelAnimationFrame(this.scheduleUpdate),this.state=M(this.reference,this.state))}function R(e){return''!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function U(e,t){Object.keys(t).forEach(function(o){var i='';-1!==['width','height','top','right','bottom','left'].indexOf(o)&&R(t[o])&&(i='px'),e.style[o]=t[o]+i})}function Y(e,t){Object.keys(t).forEach(function(o){var i=t[o];!1===i?e.removeAttribute(o):e.setAttribute(o,t[o])})}function F(e,t,o){var i=T(e,function(e){var o=e.name;return o===t}),n=!!i&&e.some(function(e){return e.name===o&&e.enabled&&e.order<i.order});if(!n){var r='`'+t+'`';console.warn('`'+o+'`'+' modifier is required by '+r+' modifier in order to work, be sure to include it before '+r+'!')}return n}function j(e){return'end'===e?'start':'start'===e?'end':e}function K(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=le.indexOf(e),i=le.slice(o+1).concat(le.slice(0,o));return t?i.reverse():i}function q(e,t,o,i){var n=e.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/),r=+n[1],p=n[2];if(!r)return e;if(0===p.indexOf('%')){var s;switch(p){case'%p':s=o;break;case'%':case'%r':default:s=i;}var d=h(s);return d[t]/100*r}if('vh'===p||'vw'===p){var a;return a='vh'===p?X(document.documentElement.clientHeight,window.innerHeight||0):X(document.documentElement.clientWidth,window.innerWidth||0),a/100*r}return r}function G(e,t,o,i){var n=[0,0],r=-1!==['right','left'].indexOf(i),p=e.split(/(\\+|\\-)/).map(function(e){return e.trim()}),s=p.indexOf(T(p,function(e){return-1!==e.search(/,|\\s/)}));p[s]&&-1===p[s].indexOf(',')&&console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');var d=/\\s*,\\s*|\\s+/,a=-1===s?[p]:[p.slice(0,s).concat([p[s].split(d)[0]]),[p[s].split(d)[1]].concat(p.slice(s+1))];return a=a.map(function(e,i){var n=(1===i?!r:r)?'height':'width',p=!1;return e.reduce(function(e,t){return''===e[e.length-1]&&-1!==['+','-'].indexOf(t)?(e[e.length-1]=t,p=!0,e):p?(e[e.length-1]+=t,p=!1,e):e.concat(t)},[]).map(function(e){return q(e,n,t,o)})}),a.forEach(function(e,t){e.forEach(function(o,i){R(o)&&(n[t]+=o*('-'===e[i-1]?-1:1))})}),n}function z(e,t){var o,i=t.offset,n=e.placement,r=e.offsets,p=r.popper,s=r.reference,d=n.split('-')[0];return o=R(+i)?[+i,0]:G(i,p,s,d),'left'===d?(p.top+=o[0],p.left-=o[1]):'right'===d?(p.top+=o[0],p.left+=o[1]):'top'===d?(p.left+=o[0],p.top-=o[1]):'bottom'===d&&(p.left+=o[0],p.top+=o[1]),e.popper=p,e}for(var V=Math.min,_=Math.floor,X=Math.max,Q=['native code','[object MutationObserverConstructor]'],J=function(e){return Q.some(function(t){return-1<(e||'').toString().indexOf(t)})},Z='undefined'!=typeof window,$=['Edge','Trident','Firefox'],ee=0,te=0;te<$.length;te+=1)if(Z&&0<=navigator.userAgent.indexOf($[te])){ee=1;break}var i,oe=Z&&J(window.MutationObserver),ie=oe?function(e){var t=!1,o=0,i=document.createElement('span'),n=new MutationObserver(function(){e(),t=!1});return n.observe(i,{attributes:!0}),function(){t||(t=!0,i.setAttribute('x-index',o),++o)}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},ee))}},ne=function(){return void 0==i&&(i=-1!==navigator.appVersion.indexOf('MSIE 10')),i},re=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},pe=function(){function e(e,t){for(var o,n=0;n<t.length;n++)o=t[n],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),se=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},de=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var i in t=arguments[o],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ae=['auto-start','auto','auto-end','top-start','top','top-end','right-start','right','right-end','bottom-end','bottom','bottom-start','left-end','left','left-start'],le=ae.slice(3),fe={FLIP:'flip',CLOCKWISE:'clockwise',COUNTERCLOCKWISE:'counterclockwise'},me=function(){function t(o,i){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};re(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=ie(this.update.bind(this)),this.options=de({},t.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=o.jquery?o[0]:o,this.popper=i.jquery?i[0]:i,this.options.modifiers={},Object.keys(de({},t.Defaults.modifiers,r.modifiers)).forEach(function(e){n.options.modifiers[e]=de({},t.Defaults.modifiers[e]||{},r.modifiers?r.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return de({name:e},n.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(t){t.enabled&&e(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)}),this.update();var p=this.options.eventsEnabled;p&&this.enableEventListeners(),this.state.eventsEnabled=p}return pe(t,[{key:'update',value:function(){return k.call(this)}},{key:'destroy',value:function(){return P.call(this)}},{key:'enableEventListeners',value:function(){return A.call(this)}},{key:'disableEventListeners',value:function(){return I.call(this)}}]),t}();return me.Utils=('undefined'==typeof window?global:window).PopperUtils,me.placements=ae,me.Defaults={placement:'bottom',eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,o=t.split('-')[0],i=t.split('-')[1];if(i){var n=e.offsets,r=n.reference,p=n.popper,s=-1!==['bottom','top'].indexOf(o),d=s?'left':'top',a=s?'width':'height',l={start:se({},d,r[d]),end:se({},d,r[d]+r[a]-p[a])};e.offsets.popper=de({},p,l[i])}return e}},offset:{order:200,enabled:!0,fn:z,offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var o=t.boundariesElement||r(e.instance.popper);e.instance.reference===o&&(o=r(o));var i=w(e.instance.popper,e.instance.reference,t.padding,o);t.boundaries=i;var n=t.priority,p=e.offsets.popper,s={primary:function(e){var o=p[e];return p[e]<i[e]&&!t.escapeWithReference&&(o=X(p[e],i[e])),se({},e,o)},secondary:function(e){var o='right'===e?'left':'top',n=p[o];return p[e]>i[e]&&!t.escapeWithReference&&(n=V(p[o],i[e]-('right'===e?p.width:p.height))),se({},o,n)}};return n.forEach(function(e){var t=-1===['left','top'].indexOf(e)?'secondary':'primary';p=de({},p,s[t](e))}),e.offsets.popper=p,e},priority:['left','right','top','bottom'],padding:5,boundariesElement:'scrollParent'},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,o=t.popper,i=t.reference,n=e.placement.split('-')[0],r=_,p=-1!==['top','bottom'].indexOf(n),s=p?'right':'bottom',d=p?'left':'top',a=p?'width':'height';return o[s]<r(i[d])&&(e.offsets.popper[d]=r(i[d])-o[a]),o[d]>r(i[s])&&(e.offsets.popper[d]=r(i[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,o){if(!F(e.instance.modifiers,'arrow','keepTogether'))return e;var i=o.element;if('string'==typeof i){if(i=e.instance.popper.querySelector(i),!i)return e;}else if(!e.instance.popper.contains(i))return console.warn('WARNING: `arrow.element` must be child of its popper element!'),e;var n=e.placement.split('-')[0],r=e.offsets,p=r.popper,s=r.reference,d=-1!==['left','right'].indexOf(n),a=d?'height':'width',l=d?'Top':'Left',f=l.toLowerCase(),m=d?'left':'top',c=d?'bottom':'right',g=O(i)[a];s[c]-g<p[f]&&(e.offsets.popper[f]-=p[f]-(s[c]-g)),s[f]+g>p[c]&&(e.offsets.popper[f]+=s[f]+g-p[c]);var u=s[f]+s[a]/2-g/2,b=t(e.instance.popper,'margin'+l).replace('px',''),y=u-h(e.offsets.popper)[f]-b;return y=X(V(p[a]-g,y),0),e.arrowElement=i,e.offsets.arrow={},e.offsets.arrow[f]=Math.round(y),e.offsets.arrow[m]='',e},element:'[x-arrow]'},flip:{order:600,enabled:!0,fn:function(e,t){if(W(e.instance.modifiers,'inner'))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var o=w(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement),i=e.placement.split('-')[0],n=L(i),r=e.placement.split('-')[1]||'',p=[];switch(t.behavior){case fe.FLIP:p=[i,n];break;case fe.CLOCKWISE:p=K(i);break;case fe.COUNTERCLOCKWISE:p=K(i,!0);break;default:p=t.behavior;}return p.forEach(function(s,d){if(i!==s||p.length===d+1)return e;i=e.placement.split('-')[0],n=L(i);var a=e.offsets.popper,l=e.offsets.reference,f=_,m='left'===i&&f(a.right)>f(l.left)||'right'===i&&f(a.left)<f(l.right)||'top'===i&&f(a.bottom)>f(l.top)||'bottom'===i&&f(a.top)<f(l.bottom),c=f(a.left)<f(o.left),h=f(a.right)>f(o.right),g=f(a.top)<f(o.top),u=f(a.bottom)>f(o.bottom),b='left'===i&&c||'right'===i&&h||'top'===i&&g||'bottom'===i&&u,y=-1!==['top','bottom'].indexOf(i),w=!!t.flipVariations&&(y&&'start'===r&&c||y&&'end'===r&&h||!y&&'start'===r&&g||!y&&'end'===r&&u);(m||b||w)&&(e.flipped=!0,(m||b)&&(i=p[d+1]),w&&(r=j(r)),e.placement=i+(r?'-'+r:''),e.offsets.popper=de({},e.offsets.popper,S(e.instance.popper,e.offsets.reference,e.placement)),e=N(e.instance.modifiers,e,'flip'))}),e},behavior:'flip',padding:5,boundariesElement:'viewport'},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,o=t.split('-')[0],i=e.offsets,n=i.popper,r=i.reference,p=-1!==['left','right'].indexOf(o),s=-1===['top','left'].indexOf(o);return n[p?'left':'top']=r[o]-(s?n[p?'width':'height']:0),e.placement=L(t),e.offsets.popper=h(n),e}},hide:{order:800,enabled:!0,fn:function(e){if(!F(e.instance.modifiers,'hide','preventOverflow'))return e;var t=e.offsets.reference,o=T(e.instance.modifiers,function(e){return'preventOverflow'===e.name}).boundaries;if(t.bottom<o.top||t.left>o.right||t.top>o.bottom||t.right<o.left){if(!0===e.hide)return e;e.hide=!0,e.attributes['x-out-of-boundaries']=''}else{if(!1===e.hide)return e;e.hide=!1,e.attributes['x-out-of-boundaries']=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var o=t.x,i=t.y,n=e.offsets.popper,p=T(e.instance.modifiers,function(e){return'applyStyle'===e.name}).gpuAcceleration;void 0!==p&&console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');var s,d,a=void 0===p?t.gpuAcceleration:p,l=r(e.instance.popper),f=g(l),m={position:n.position},c={left:_(n.left),top:_(n.top),bottom:_(n.bottom),right:_(n.right)},h='bottom'===o?'top':'bottom',u='right'===i?'left':'right',b=B('transform');if(d='bottom'==h?-f.height+c.bottom:c.top,s='right'==u?-f.width+c.right:c.left,a&&b)m[b]='translate3d('+s+'px, '+d+'px, 0)',m[h]=0,m[u]=0,m.willChange='transform';else{var y='bottom'==h?-1:1,w='right'==u?-1:1;m[h]=d*y,m[u]=s*w,m.willChange=h+', '+u}var E={\"x-placement\":e.placement};return e.attributes=de({},E,e.attributes),e.styles=de({},m,e.styles),e.arrowStyles=de({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:'bottom',y:'right'},applyStyle:{order:900,enabled:!0,fn:function(e){return U(e.instance.popper,e.styles),Y(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&U(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,o,i,n){var r=x(n,t,e),p=v(o.placement,r,t,e,o.modifiers.flip.boundariesElement,o.modifiers.flip.padding);return t.setAttribute('x-placement',p),U(t,{position:'absolute'}),o},gpuAcceleration:void 0}}},me});\n//# sourceMappingURL=popper.min.js.map\n","popper/umd/popper-utils.min.js":"/*\n Copyright (C) Federico Zivolo 2017\n Distributed under the MIT License (license terms are at http://opensource.org/licenses/MIT).\n */(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?b(exports):'function'==typeof define&&define.amd?define(['exports'],b):b(a.PopperUtils=a.PopperUtils||{})})(this,function(a){'use strict';function b(a,b){if(1!==a.nodeType)return[];var c=window.getComputedStyle(a,null);return b?c[b]:c}function c(a){return'HTML'===a.nodeName?a:a.parentNode||a.host}function d(a){if(!a||-1!==['HTML','BODY','#document'].indexOf(a.nodeName))return window.document.body;var e=b(a),f=e.overflow,g=e.overflowX,h=e.overflowY;return /(auto|scroll)/.test(f+h+g)?a:d(c(a))}function e(a){var c=a&&a.offsetParent,d=c&&c.nodeName;return d&&'BODY'!==d&&'HTML'!==d?-1!==['TD','TABLE'].indexOf(c.nodeName)&&'static'===b(c,'position')?e(c):c:window.document.documentElement}function f(a){var b=a.nodeName;return'BODY'!==b&&('HTML'===b||e(a.firstElementChild)===a)}function g(a){return null===a.parentNode?a:g(a.parentNode)}function h(a,b){if(!a||!a.nodeType||!b||!b.nodeType)return window.document.documentElement;var c=a.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING,d=c?a:b,i=c?b:a,j=document.createRange();j.setStart(d,0),j.setEnd(i,0);var k=j.commonAncestorContainer;if(a!==k&&b!==k||d.contains(i))return f(k)?k:e(k);var l=g(a);return l.host?h(l.host,b):h(a,g(b).host)}function j(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'top',c='top'===b?'scrollTop':'scrollLeft',d=a.nodeName;if('BODY'===d||'HTML'===d){var e=window.document.documentElement,f=window.document.scrollingElement||e;return f[c]}return a[c]}function k(a,b){var c=2<arguments.length&&void 0!==arguments[2]&&arguments[2],d=j(b,'top'),e=j(b,'left'),f=c?-1:1;return a.top+=d*f,a.bottom+=d*f,a.left+=e*f,a.right+=e*f,a}function l(a,b){var c='x'===b?'Left':'Top',d='Left'==c?'Right':'Bottom';return+a['border'+c+'Width'].split('px')[0]+ +a['border'+d+'Width'].split('px')[0]}function m(a,b,c,d){return O(b['offset'+a],b['scroll'+a],c['client'+a],c['offset'+a],c['scroll'+a],Q()?c['offset'+a]+d['margin'+('Height'===a?'Top':'Left')]+d['margin'+('Height'===a?'Bottom':'Right')]:0)}function n(){var a=window.document.body,b=window.document.documentElement,c=Q()&&window.getComputedStyle(b);return{height:m('Height',a,b,c),width:m('Width',a,b,c)}}function o(a){return R({},a,{right:a.left+a.width,bottom:a.top+a.height})}function p(a){var c={};if(Q())try{c=a.getBoundingClientRect();var d=j(a,'top'),e=j(a,'left');c.top+=d,c.left+=e,c.bottom+=d,c.right+=e}catch(a){}else c=a.getBoundingClientRect();var f={left:c.left,top:c.top,width:c.right-c.left,height:c.bottom-c.top},g='HTML'===a.nodeName?n():{},h=g.width||a.clientWidth||f.right-f.left,i=g.height||a.clientHeight||f.bottom-f.top,k=a.offsetWidth-h,m=a.offsetHeight-i;if(k||m){var p=b(a);k-=l(p,'x'),m-=l(p,'y'),f.width-=k,f.height-=m}return o(f)}function q(a,c){var e=Q(),f='HTML'===c.nodeName,g=p(a),h=p(c),i=d(a),j=b(c),l=+j.borderTopWidth.split('px')[0],m=+j.borderLeftWidth.split('px')[0],n=o({top:g.top-h.top-l,left:g.left-h.left-m,width:g.width,height:g.height});if(n.marginTop=0,n.marginLeft=0,!e&&f){var q=+j.marginTop.split('px')[0],r=+j.marginLeft.split('px')[0];n.top-=l-q,n.bottom-=l-q,n.left-=m-r,n.right-=m-r,n.marginTop=q,n.marginLeft=r}return(e?c.contains(i):c===i&&'BODY'!==i.nodeName)&&(n=k(n,c)),n}function r(a){var b=window.document.documentElement,c=q(a,b),d=O(b.clientWidth,window.innerWidth||0),e=O(b.clientHeight,window.innerHeight||0),f=j(b),g=j(b,'left'),h={top:f-c.top+c.marginTop,left:g-c.left+c.marginLeft,width:d,height:e};return o(h)}function s(a){var d=a.nodeName;return'BODY'===d||'HTML'===d?!1:!('fixed'!==b(a,'position'))||s(c(a))}function t(a,b,e,f){var g={top:0,left:0},i=h(a,b);if('viewport'===f)g=r(i);else{var j;'scrollParent'===f?(j=d(c(a)),'BODY'===j.nodeName&&(j=window.document.documentElement)):'window'===f?j=window.document.documentElement:j=f;var k=q(j,i);if('HTML'===j.nodeName&&!s(i)){var l=n(),m=l.height,o=l.width;g.top+=k.top-k.marginTop,g.bottom=m+k.top,g.left+=k.left-k.marginLeft,g.right=o+k.left}else g=k}return g.left+=e,g.top+=e,g.right-=e,g.bottom-=e,g}function u(a){var b=a.width,c=a.height;return b*c}function v(a,b,c,d,e){var f=5<arguments.length&&arguments[5]!==void 0?arguments[5]:0;if(-1===a.indexOf('auto'))return a;var g=t(c,d,f,e),h={top:{width:g.width,height:b.top-g.top},right:{width:g.right-b.right,height:g.height},bottom:{width:g.width,height:g.bottom-b.bottom},left:{width:b.left-g.left,height:g.height}},i=Object.keys(h).map(function(a){return R({key:a},h[a],{area:u(h[a])})}).sort(function(c,a){return a.area-c.area}),j=i.filter(function(a){var b=a.width,d=a.height;return b>=c.clientWidth&&d>=c.clientHeight}),k=0<j.length?j[0].key:i[0].key,l=a.split('-')[1];return k+(l?'-'+l:'')}function w(a,b){return Array.prototype.find?a.find(b):a.filter(b)[0]}function x(a,b,c){if(Array.prototype.findIndex)return a.findIndex(function(a){return a[b]===c});var d=w(a,function(a){return a[b]===c});return a.indexOf(d)}function y(a){var b;if('HTML'===a.nodeName){var c=n(),d=c.width,e=c.height;b={width:d,height:e,left:0,top:0}}else b={width:a.offsetWidth,height:a.offsetHeight,left:a.offsetLeft,top:a.offsetTop};return o(b)}function z(a){var b=window.getComputedStyle(a),c=parseFloat(b.marginTop)+parseFloat(b.marginBottom),d=parseFloat(b.marginLeft)+parseFloat(b.marginRight),e={width:a.offsetWidth+d,height:a.offsetHeight+c};return e}function A(a){var b={left:'right',right:'left',bottom:'top',top:'bottom'};return a.replace(/left|right|bottom|top/g,function(a){return b[a]})}function B(a,b,c){c=c.split('-')[0];var d=z(a),e={width:d.width,height:d.height},f=-1!==['right','left'].indexOf(c),g=f?'top':'left',h=f?'left':'top',i=f?'height':'width',j=f?'width':'height';return e[g]=b[g]+b[i]/2-d[i]/2,e[h]=c===h?b[h]-d[j]:b[A(h)],e}function C(a,b,c){var d=h(b,c);return q(c,d)}function D(a){for(var b=[!1,'ms','Webkit','Moz','O'],c=a.charAt(0).toUpperCase()+a.slice(1),d=0;d<b.length-1;d++){var e=b[d],f=e?''+e+c:a;if('undefined'!=typeof window.document.body.style[f])return f}return null}function E(a){return a&&'[object Function]'==={}.toString.call(a)}function F(a,b){return a.some(function(a){var c=a.name,d=a.enabled;return d&&c===b})}function G(a,b,c){var d=w(a,function(a){var c=a.name;return c===b}),e=!!d&&a.some(function(a){return a.name===c&&a.enabled&&a.order<d.order});if(!e){var f='`'+b+'`';console.warn('`'+c+'`'+' modifier is required by '+f+' modifier in order to work, be sure to include it before '+f+'!')}return e}function H(a){return''!==a&&!isNaN(parseFloat(a))&&isFinite(a)}function I(a,b){return window.removeEventListener('resize',b.updateBound),b.scrollParents.forEach(function(a){a.removeEventListener('scroll',b.updateBound)}),b.updateBound=null,b.scrollParents=[],b.scrollElement=null,b.eventsEnabled=!1,b}function J(a,b,c){var d=void 0===c?a:a.slice(0,x(a,'name',c));return d.forEach(function(a){a.function&&console.warn('`modifier.function` is deprecated, use `modifier.fn`!');var c=a.function||a.fn;a.enabled&&E(c)&&(b.offsets.popper=o(b.offsets.popper),b.offsets.reference=o(b.offsets.reference),b=c(b,a))}),b}function K(a,b){Object.keys(b).forEach(function(c){var d=b[c];!1===d?a.removeAttribute(c):a.setAttribute(c,b[c])})}function L(a,b){Object.keys(b).forEach(function(c){var d='';-1!==['width','height','top','right','bottom','left'].indexOf(c)&&H(b[c])&&(d='px'),a.style[c]=b[c]+d})}function M(a,b,c,e){var f='BODY'===a.nodeName,g=f?window:a;g.addEventListener(b,c,{passive:!0}),f||M(d(g.parentNode),b,c,e),e.push(g)}function N(a,b,c,e){c.updateBound=e,window.addEventListener('resize',c.updateBound,{passive:!0});var f=d(a);return M(f,'scroll',c.updateBound,c.scrollParents),c.scrollElement=f,c.eventsEnabled=!0,c}for(var O=Math.max,P=void 0,Q=function(){return void 0==P&&(P=-1!==navigator.appVersion.indexOf('MSIE 10')),P},R=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},S=['native code','[object MutationObserverConstructor]'],T=function(a){return S.some(function(b){return-1<(a||'').toString().indexOf(b)})},U='undefined'!=typeof window,V=['Edge','Trident','Firefox'],W=0,X=0;X<V.length;X+=1)if(U&&0<=navigator.userAgent.indexOf(V[X])){W=1;break}var i=U&&T(window.MutationObserver),Y=i?function(a){var b=!1,c=0,d=document.createElement('span'),e=new MutationObserver(function(){a(),b=!1});return e.observe(d,{attributes:!0}),function(){b||(b=!0,d.setAttribute('x-index',c),++c)}}:function(a){var b=!1;return function(){b||(b=!0,setTimeout(function(){b=!1,a()},W))}};a.computeAutoPlacement=v,a.debounce=Y,a.findIndex=x,a.getBordersSize=l,a.getBoundaries=t,a.getBoundingClientRect=p,a.getClientRect=o,a.getOffsetParent=e,a.getOffsetRect=y,a.getOffsetRectRelativeToArbitraryNode=q,a.getOuterSizes=z,a.getParentNode=c,a.getPopperOffsets=B,a.getReferenceOffsets=C,a.getScroll=j,a.getScrollParent=d,a.getStyleComputedProperty=b,a.getSupportedPropertyName=D,a.getWindowSizes=n,a.isFixed=s,a.isFunction=E,a.isModifierEnabled=F,a.isModifierRequired=G,a.isNative=T,a.isNumeric=H,a.removeEventListeners=I,a.runModifiers=J,a.setAttributes=K,a.setStyles=L,a.setupEventListeners=N,a['default']={computeAutoPlacement:v,debounce:Y,findIndex:x,getBordersSize:l,getBoundaries:t,getBoundingClientRect:p,getClientRect:o,getOffsetParent:e,getOffsetRect:y,getOffsetRectRelativeToArbitraryNode:q,getOuterSizes:z,getParentNode:c,getPopperOffsets:B,getReferenceOffsets:C,getScroll:j,getScrollParent:d,getStyleComputedProperty:b,getSupportedPropertyName:D,getWindowSizes:n,isFixed:s,isFunction:E,isModifierEnabled:F,isModifierRequired:G,isNative:T,isNumeric:H,removeEventListeners:I,runModifiers:J,setAttributes:K,setStyles:L,setupEventListeners:N},Object.defineProperty(a,'__esModule',{value:!0})});\n//# sourceMappingURL=popper-utils.min.js.map\n","popper/umd/popper.js":"/**!\n * @fileOverview Kickass library to create and place poppers near their reference elements.\n * @version 1.12.5\n * @license\n * Copyright (c) 2016 Federico Zivolo and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.Popper = factory());\n}(this, (function () { 'use strict';\n\nvar nativeHints = ['native code', '[object MutationObserverConstructor]'];\n\n/**\n * Determine if a function is implemented natively (as opposed to a polyfill).\n * @method\n * @memberof Popper.Utils\n * @argument {Function | undefined} fn the function to check\n * @returns {Boolean}\n */\nvar isNative = (function (fn) {\n  return nativeHints.some(function (hint) {\n    return (fn || '').toString().indexOf(hint) > -1;\n  });\n});\n\nvar isBrowser = typeof window !== 'undefined';\nvar longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\nvar timeoutDuration = 0;\nfor (var i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n    timeoutDuration = 1;\n    break;\n  }\n}\n\nfunction microtaskDebounce(fn) {\n  var scheduled = false;\n  var i = 0;\n  var elem = document.createElement('span');\n\n  // MutationObserver provides a mechanism for scheduling microtasks, which\n  // are scheduled *before* the next task. This gives us a way to debounce\n  // a function but ensure it's called *before* the next paint.\n  var observer = new MutationObserver(function () {\n    fn();\n    scheduled = false;\n  });\n\n  observer.observe(elem, { attributes: true });\n\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      elem.setAttribute('x-index', i);\n      i = i + 1; // don't use compund (+=) because it doesn't get optimized in V8\n    }\n  };\n}\n\nfunction taskDebounce(fn) {\n  var scheduled = false;\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(function () {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\n// It's common for MutationObserver polyfills to be seen in the wild, however\n// these rely on Mutation Events which only occur when an element is connected\n// to the DOM. The algorithm used in this module does not use a connected element,\n// and so we must ensure that a *native* MutationObserver is available.\nvar supportsNativeMutationObserver = isBrowser && isNative(window.MutationObserver);\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nvar debounce = supportsNativeMutationObserver ? microtaskDebounce : taskDebounce;\n\n/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nfunction isFunction(functionToCheck) {\n  var getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\n/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nfunction getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  var css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n\n/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nfunction getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nfunction getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element || ['HTML', 'BODY', '#document'].indexOf(element.nodeName) !== -1) {\n    return window.document.body;\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n\n  var _getStyleComputedProp = getStyleComputedProperty(element),\n      overflow = _getStyleComputedProp.overflow,\n      overflowX = _getStyleComputedProp.overflowX,\n      overflowY = _getStyleComputedProp.overflowY;\n\n  if (/(auto|scroll)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nfunction getOffsetParent(element) {\n  // NOTE: 1 DOM access here\n  var offsetParent = element && element.offsetParent;\n  var nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return window.document.documentElement;\n  }\n\n  // .offsetParent will return the closest TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (['TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 && getStyleComputedProperty(offsetParent, 'position') === 'static') {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n\nfunction isOffsetContainer(element) {\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element;\n}\n\n/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nfunction getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nfunction findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return window.document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  var order = element1.compareDocumentPosition(element2) & Node.DOCUMENT_POSITION_FOLLOWING;\n  var start = order ? element1 : element2;\n  var end = order ? element2 : element1;\n\n  // Get common ancestor container\n  var range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  var commonAncestorContainer = range.commonAncestorContainer;\n\n  // Both nodes are inside #document\n\n  if (element1 !== commonAncestorContainer && element2 !== commonAncestorContainer || start.contains(end)) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  var element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n\n/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nfunction getScroll(element) {\n  var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'top';\n\n  var upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    var html = window.document.documentElement;\n    var scrollingElement = window.document.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nfunction includeScroll(rect, element) {\n  var subtract = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var scrollTop = getScroll(element, 'top');\n  var scrollLeft = getScroll(element, 'left');\n  var modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n\n/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nfunction getBordersSize(styles, axis) {\n  var sideA = axis === 'x' ? 'Left' : 'Top';\n  var sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return +styles['border' + sideA + 'Width'].split('px')[0] + +styles['border' + sideB + 'Width'].split('px')[0];\n}\n\n/**\n * Tells if you are running Internet Explorer 10\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean} isIE10\n */\nvar isIE10 = undefined;\n\nvar isIE10$1 = function () {\n  if (isIE10 === undefined) {\n    isIE10 = navigator.appVersion.indexOf('MSIE 10') !== -1;\n  }\n  return isIE10;\n};\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(body['offset' + axis], body['scroll' + axis], html['client' + axis], html['offset' + axis], html['scroll' + axis], isIE10$1() ? html['offset' + axis] + computedStyle['margin' + (axis === 'Height' ? 'Top' : 'Left')] + computedStyle['margin' + (axis === 'Height' ? 'Bottom' : 'Right')] : 0);\n}\n\nfunction getWindowSizes() {\n  var body = window.document.body;\n  var html = window.document.documentElement;\n  var computedStyle = isIE10$1() && window.getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle)\n  };\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nfunction getClientRect(offsets) {\n  return _extends({}, offsets, {\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height\n  });\n}\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nfunction getBoundingClientRect(element) {\n  var rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  if (isIE10$1()) {\n    try {\n      rect = element.getBoundingClientRect();\n      var scrollTop = getScroll(element, 'top');\n      var scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    } catch (err) {}\n  } else {\n    rect = element.getBoundingClientRect();\n  }\n\n  var result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top\n  };\n\n  // subtract scrollbar size from sizes\n  var sizes = element.nodeName === 'HTML' ? getWindowSizes() : {};\n  var width = sizes.width || element.clientWidth || result.right - result.left;\n  var height = sizes.height || element.clientHeight || result.bottom - result.top;\n\n  var horizScrollbar = element.offsetWidth - width;\n  var vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    var styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n\nfunction getOffsetRectRelativeToArbitraryNode(children, parent) {\n  var isIE10 = isIE10$1();\n  var isHTML = parent.nodeName === 'HTML';\n  var childrenRect = getBoundingClientRect(children);\n  var parentRect = getBoundingClientRect(parent);\n  var scrollParent = getScrollParent(children);\n\n  var styles = getStyleComputedProperty(parent);\n  var borderTopWidth = +styles.borderTopWidth.split('px')[0];\n  var borderLeftWidth = +styles.borderLeftWidth.split('px')[0];\n\n  var offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    var marginTop = +styles.marginTop.split('px')[0];\n    var marginLeft = +styles.marginLeft.split('px')[0];\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (isIE10 ? parent.contains(scrollParent) : parent === scrollParent && scrollParent.nodeName !== 'BODY') {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n\nfunction getViewportOffsetRectRelativeToArtbitraryNode(element) {\n  var html = window.document.documentElement;\n  var relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  var width = Math.max(html.clientWidth, window.innerWidth || 0);\n  var height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  var scrollTop = getScroll(html);\n  var scrollLeft = getScroll(html, 'left');\n\n  var offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width: width,\n    height: height\n  };\n\n  return getClientRect(offset);\n}\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nfunction isFixed(element) {\n  var nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  return isFixed(getParentNode(element));\n}\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @returns {Object} Coordinates of the boundaries\n */\nfunction getBoundaries(popper, reference, padding, boundariesElement) {\n  // NOTE: 1 DOM access here\n  var boundaries = { top: 0, left: 0 };\n  var offsetParent = findCommonOffsetParent(popper, reference);\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport') {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent);\n  } else {\n    // Handle other cases based on DOM element used as boundaries\n    var boundariesNode = void 0;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(popper));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = window.document.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = window.document.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    var offsets = getOffsetRectRelativeToArbitraryNode(boundariesNode, offsetParent);\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      var _getWindowSizes = getWindowSizes(),\n          height = _getWindowSizes.height,\n          width = _getWindowSizes.width;\n\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  boundaries.left += padding;\n  boundaries.top += padding;\n  boundaries.right -= padding;\n  boundaries.bottom -= padding;\n\n  return boundaries;\n}\n\nfunction getArea(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeAutoPlacement(placement, refRect, popper, reference, boundariesElement) {\n  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  var boundaries = getBoundaries(popper, reference, padding, boundariesElement);\n\n  var rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height\n    }\n  };\n\n  var sortedAreas = Object.keys(rects).map(function (key) {\n    return _extends({\n      key: key\n    }, rects[key], {\n      area: getArea(rects[key])\n    });\n  }).sort(function (a, b) {\n    return b.area - a.area;\n  });\n\n  var filteredAreas = sortedAreas.filter(function (_ref2) {\n    var width = _ref2.width,\n        height = _ref2.height;\n    return width >= popper.clientWidth && height >= popper.clientHeight;\n  });\n\n  var computedPlacement = filteredAreas.length > 0 ? filteredAreas[0].key : sortedAreas[0].key;\n\n  var variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? '-' + variation : '');\n}\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nfunction getReferenceOffsets(state, popper, reference) {\n  var commonOffsetParent = findCommonOffsetParent(popper, reference);\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent);\n}\n\n/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nfunction getOuterSizes(element) {\n  var styles = window.getComputedStyle(element);\n  var x = parseFloat(styles.marginTop) + parseFloat(styles.marginBottom);\n  var y = parseFloat(styles.marginLeft) + parseFloat(styles.marginRight);\n  var result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x\n  };\n  return result;\n}\n\n/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nfunction getOppositePlacement(placement) {\n  var hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nfunction getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  var popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  var popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  var isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  var mainSide = isHoriz ? 'top' : 'left';\n  var secondarySide = isHoriz ? 'left' : 'top';\n  var measurement = isHoriz ? 'height' : 'width';\n  var secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] = referenceOffsets[mainSide] + referenceOffsets[measurement] / 2 - popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] = referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] = referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n\n/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(function (cur) {\n      return cur[prop] === value;\n    });\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  var match = find(arr, function (obj) {\n    return obj[prop] === value;\n  });\n  return arr.indexOf(match);\n}\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nfunction runModifiers(modifiers, data, ends) {\n  var modifiersToRun = ends === undefined ? modifiers : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(function (modifier) {\n    if (modifier.function) {\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    var fn = modifier.function || modifier.fn;\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nfunction update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  var data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {}\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(this.state, this.popper, this.reference);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(this.options.placement, data.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding);\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(this.popper, data.offsets.reference, data.placement);\n  data.offsets.popper.position = 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n\n/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nfunction isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(function (_ref) {\n    var name = _ref.name,\n        enabled = _ref.enabled;\n    return enabled && name === modifierName;\n  });\n}\n\n/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nfunction getSupportedPropertyName(property) {\n  var prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  var upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (var i = 0; i < prefixes.length - 1; i++) {\n    var prefix = prefixes[i];\n    var toCheck = prefix ? '' + prefix + upperProp : property;\n    if (typeof window.document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n\n/**\n * Destroy the popper\n * @method\n * @memberof Popper\n */\nfunction destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.left = '';\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicity asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  var isBody = scrollParent.nodeName === 'BODY';\n  var target = isBody ? window : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(getScrollParent(target.parentNode), event, callback, scrollParents);\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction setupEventListeners(reference, options, state, updateBound) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  window.addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  var scrollElement = getScrollParent(reference);\n  attachToScrollParents(scrollElement, 'scroll', state.updateBound, state.scrollParents);\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nfunction enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(this.reference, this.options, this.state, this.scheduleUpdate);\n  }\n}\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  window.removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(function (target) {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger onUpdate callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nfunction disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    window.cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n\n/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nfunction isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setStyles(element, styles) {\n  Object.keys(styles).forEach(function (prop) {\n    var unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 && isNumeric(styles[prop])) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n\n/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function (prop) {\n    var value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nfunction applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper.\n * @param {Object} options - Popper.js options\n */\nfunction applyStyleOnLoad(reference, popper, options, modifierOptions, state) {\n  // compute reference element offsets\n  var referenceOffsets = getReferenceOffsets(state, popper, reference);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  var placement = computeAutoPlacement(options.placement, referenceOffsets, popper, reference, options.modifiers.flip.boundariesElement, options.modifiers.flip.padding);\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: 'absolute' });\n\n  return options;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeStyle(data, options) {\n  var x = options.x,\n      y = options.y;\n  var popper = data.offsets.popper;\n\n  // Remove this legacy support in Popper.js v2\n\n  var legacyGpuAccelerationOption = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'applyStyle';\n  }).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');\n  }\n  var gpuAcceleration = legacyGpuAccelerationOption !== undefined ? legacyGpuAccelerationOption : options.gpuAcceleration;\n\n  var offsetParent = getOffsetParent(data.instance.popper);\n  var offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  var styles = {\n    position: popper.position\n  };\n\n  // floor sides to avoid blurry text\n  var offsets = {\n    left: Math.floor(popper.left),\n    top: Math.floor(popper.top),\n    bottom: Math.floor(popper.bottom),\n    right: Math.floor(popper.right)\n  };\n\n  var sideA = x === 'bottom' ? 'top' : 'bottom';\n  var sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  var prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  var left = void 0,\n      top = void 0;\n  if (sideA === 'bottom') {\n    top = -offsetParentRect.height + offsets.bottom;\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    left = -offsetParentRect.width + offsets.right;\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = 'translate3d(' + left + 'px, ' + top + 'px, 0)';\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    var invertTop = sideA === 'bottom' ? -1 : 1;\n    var invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = sideA + ', ' + sideB;\n  }\n\n  // Attributes\n  var attributes = {\n    'x-placement': data.placement\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = _extends({}, attributes, data.attributes);\n  data.styles = _extends({}, styles, data.styles);\n  data.arrowStyles = _extends({}, data.offsets.arrow, data.arrowStyles);\n\n  return data;\n}\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nfunction isModifierRequired(modifiers, requestingName, requestedName) {\n  var requesting = find(modifiers, function (_ref) {\n    var name = _ref.name;\n    return name === requestingName;\n  });\n\n  var isRequired = !!requesting && modifiers.some(function (modifier) {\n    return modifier.name === requestedName && modifier.enabled && modifier.order < requesting.order;\n  });\n\n  if (!isRequired) {\n    var _requesting = '`' + requestingName + '`';\n    var requested = '`' + requestedName + '`';\n    console.warn(requested + ' modifier is required by ' + _requesting + ' modifier in order to work, be sure to include it before ' + _requesting + '!');\n  }\n  return isRequired;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction arrow(data, options) {\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  var arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn('WARNING: `arrow.element` must be child of its popper element!');\n      return data;\n    }\n  }\n\n  var placement = data.placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  var len = isVertical ? 'height' : 'width';\n  var sideCapitalized = isVertical ? 'Top' : 'Left';\n  var side = sideCapitalized.toLowerCase();\n  var altSide = isVertical ? 'left' : 'top';\n  var opSide = isVertical ? 'bottom' : 'right';\n  var arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjuction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -= popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n  if (reference[side] + arrowElementSize > popper[opSide]) {\n    data.offsets.popper[side] += reference[side] + arrowElementSize - popper[opSide];\n  }\n\n  // compute center of the popper\n  var center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  var popperMarginSide = getStyleComputedProperty(data.instance.popper, 'margin' + sideCapitalized).replace('px', '');\n  var sideValue = center - getClientRect(data.offsets.popper)[side] - popperMarginSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = {};\n  data.offsets.arrow[side] = Math.round(sideValue);\n  data.offsets.arrow[altSide] = ''; // make sure to unset any eventual altSide value from the DOM node\n\n  return data;\n}\n\n/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nfunction getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n\n/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-right` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nvar placements = ['auto-start', 'auto', 'auto-end', 'top-start', 'top', 'top-end', 'right-start', 'right', 'right-end', 'bottom-end', 'bottom', 'bottom-start', 'left-end', 'left', 'left-start'];\n\n// Get rid of `auto` `auto-start` and `auto-end`\nvar validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nfunction clockwise(placement) {\n  var counter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var index = validPlacements.indexOf(placement);\n  var arr = validPlacements.slice(index + 1).concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n\nvar BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise'\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, options.boundariesElement);\n\n  var placement = data.placement.split('-')[0];\n  var placementOpposite = getOppositePlacement(placement);\n  var variation = data.placement.split('-')[1] || '';\n\n  var flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach(function (step, index) {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    var popperOffsets = data.offsets.popper;\n    var refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    var floor = Math.floor;\n    var overlapsRef = placement === 'left' && floor(popperOffsets.right) > floor(refOffsets.left) || placement === 'right' && floor(popperOffsets.left) < floor(refOffsets.right) || placement === 'top' && floor(popperOffsets.bottom) > floor(refOffsets.top) || placement === 'bottom' && floor(popperOffsets.top) < floor(refOffsets.bottom);\n\n    var overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    var overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    var overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    var overflowsBottom = floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    var overflowsBoundaries = placement === 'left' && overflowsLeft || placement === 'right' && overflowsRight || placement === 'top' && overflowsTop || placement === 'bottom' && overflowsBottom;\n\n    // flip the variation if required\n    var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n    var flippedVariation = !!options.flipVariations && (isVertical && variation === 'start' && overflowsLeft || isVertical && variation === 'end' && overflowsRight || !isVertical && variation === 'start' && overflowsTop || !isVertical && variation === 'end' && overflowsBottom);\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = _extends({}, data.offsets.popper, getPopperOffsets(data.instance.popper, data.offsets.reference, data.placement));\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction keepTogether(data) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var placement = data.placement.split('-')[0];\n  var floor = Math.floor;\n  var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  var side = isVertical ? 'right' : 'bottom';\n  var opSide = isVertical ? 'left' : 'top';\n  var measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] = floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nfunction toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  var split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  var value = +split[1];\n  var unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    var element = void 0;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    var rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    var size = void 0;\n    if (unit === 'vh') {\n      size = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    } else {\n      size = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nfunction parseOffset(offset, popperOffsets, referenceOffsets, basePlacement) {\n  var offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  var useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  var fragments = offset.split(/(\\+|\\-)/).map(function (frag) {\n    return frag.trim();\n  });\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  var divider = fragments.indexOf(find(fragments, function (frag) {\n    return frag.search(/,|\\s/) !== -1;\n  }));\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  var splitRegex = /\\s*,\\s*|\\s+/;\n  var ops = divider !== -1 ? [fragments.slice(0, divider).concat([fragments[divider].split(splitRegex)[0]]), [fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider + 1))] : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map(function (op, index) {\n    // Most of the units rely on the orientation of the popper\n    var measurement = (index === 1 ? !useHeight : useHeight) ? 'height' : 'width';\n    var mergeWithPrevious = false;\n    return op\n    // This aggregates any `+` or `-` sign that aren't considered operators\n    // e.g.: 10 + +5 => [10, +, +5]\n    .reduce(function (a, b) {\n      if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n        a[a.length - 1] = b;\n        mergeWithPrevious = true;\n        return a;\n      } else if (mergeWithPrevious) {\n        a[a.length - 1] += b;\n        mergeWithPrevious = false;\n        return a;\n      } else {\n        return a.concat(b);\n      }\n    }, [])\n    // Here we convert the string values into number values (in px)\n    .map(function (str) {\n      return toValue(str, measurement, popperOffsets, referenceOffsets);\n    });\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach(function (op, index) {\n    op.forEach(function (frag, index2) {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nfunction offset(data, _ref) {\n  var offset = _ref.offset;\n  var placement = data.placement,\n      _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var basePlacement = placement.split('-')[0];\n\n  var offsets = void 0;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction preventOverflow(data, options) {\n  var boundariesElement = options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, boundariesElement);\n  options.boundaries = boundaries;\n\n  var order = options.priority;\n  var popper = data.offsets.popper;\n\n  var check = {\n    primary: function primary(placement) {\n      var value = popper[placement];\n      if (popper[placement] < boundaries[placement] && !options.escapeWithReference) {\n        value = Math.max(popper[placement], boundaries[placement]);\n      }\n      return defineProperty({}, placement, value);\n    },\n    secondary: function secondary(placement) {\n      var mainSide = placement === 'right' ? 'left' : 'top';\n      var value = popper[mainSide];\n      if (popper[placement] > boundaries[placement] && !options.escapeWithReference) {\n        value = Math.min(popper[mainSide], boundaries[placement] - (placement === 'right' ? popper.width : popper.height));\n      }\n      return defineProperty({}, mainSide, value);\n    }\n  };\n\n  order.forEach(function (placement) {\n    var side = ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = _extends({}, popper, check[side](placement));\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction shift(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    var _data$offsets = data.offsets,\n        reference = _data$offsets.reference,\n        popper = _data$offsets.popper;\n\n    var isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    var side = isVertical ? 'left' : 'top';\n    var measurement = isVertical ? 'width' : 'height';\n\n    var shiftOffsets = {\n      start: defineProperty({}, side, reference[side]),\n      end: defineProperty({}, side, reference[side] + reference[measurement] - popper[measurement])\n    };\n\n    data.offsets.popper = _extends({}, popper, shiftOffsets[shiftvariation]);\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  var refRect = data.offsets.reference;\n  var bound = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'preventOverflow';\n  }).boundaries;\n\n  if (refRect.bottom < bound.top || refRect.left > bound.right || refRect.top > bound.bottom || refRect.right < bound.left) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction inner(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  var subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] = reference[basePlacement] - (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nvar modifiers = {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unitless, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the height.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > More on this [reading this issue](https://github.com/FezVrasta/popper.js/issues/373)\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * An scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\" \u2014 or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper this makes sure the popper has always a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier, can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent'\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near eachothers\n   * without leaving any gap between the two. Expecially useful when the arrow is\n   * enabled and you want to assure it to point to its reference element.\n   * It cares only about the first axis, you can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjuction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]'\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations).\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position,\n     * the popper will never be placed outside of the defined boundaries\n     * (except if keepTogether is enabled)\n     */\n    boundariesElement: 'viewport'\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3d transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties.\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right'\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define you own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3d transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties.\n     */\n    gpuAcceleration: undefined\n  }\n};\n\n/**\n * The `dataObject` is an object containing all the informations used by Popper.js\n * this object get passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper.\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper, it expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow, it expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements.\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overriden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass as 3rd argument an object with the same\n * structure of this object, example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nvar Defaults = {\n  /**\n   * Popper's placement\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Whether events (resize, scroll) are initially enabled\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: function onCreate() {},\n\n  /**\n   * Callback called when the popper is updated, this callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: function onUpdate() {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js\n   * @prop {modifiers}\n   */\n  modifiers: modifiers\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n\n// Utils\n// Methods\nvar Popper = function () {\n  /**\n   * Create a new Popper.js instance\n   * @class Popper\n   * @param {HTMLElement|referenceObject} reference - The reference element used to position the popper\n   * @param {HTMLElement} popper - The HTML element used as popper.\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  function Popper(reference, popper) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    classCallCheck(this, Popper);\n\n    this.scheduleUpdate = function () {\n      return requestAnimationFrame(_this.update);\n    };\n\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = _extends({}, Popper.Defaults, options);\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: []\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference.jquery ? reference[0] : reference;\n    this.popper = popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys(_extends({}, Popper.Defaults.modifiers, options.modifiers)).forEach(function (name) {\n      _this.options.modifiers[name] = _extends({}, Popper.Defaults.modifiers[name] || {}, options.modifiers ? options.modifiers[name] : {});\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers).map(function (name) {\n      return _extends({\n        name: name\n      }, _this.options.modifiers[name]);\n    })\n    // sort the modifiers by order\n    .sort(function (a, b) {\n      return a.order - b.order;\n    });\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(function (modifierOptions) {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(_this.reference, _this.popper, _this.options, modifierOptions, _this.state);\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    var eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n\n\n  createClass(Popper, [{\n    key: 'update',\n    value: function update$$1() {\n      return update.call(this);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy$$1() {\n      return destroy.call(this);\n    }\n  }, {\n    key: 'enableEventListeners',\n    value: function enableEventListeners$$1() {\n      return enableEventListeners.call(this);\n    }\n  }, {\n    key: 'disableEventListeners',\n    value: function disableEventListeners$$1() {\n      return disableEventListeners.call(this);\n    }\n\n    /**\n     * Schedule an update, it will run on the next UI update available\n     * @method scheduleUpdate\n     * @memberof Popper\n     */\n\n\n    /**\n     * Collection of utilities useful when writing custom modifiers.\n     * Starting from version 1.7, this method is available only if you\n     * include `popper-utils.js` before `popper.js`.\n     *\n     * **DEPRECATION**: This way to access PopperUtils is deprecated\n     * and will be removed in v2! Use the PopperUtils module directly instead.\n     * Due to the high instability of the methods contained in Utils, we can't\n     * guarantee them to follow semver. Use them at your own risk!\n     * @static\n     * @private\n     * @type {Object}\n     * @deprecated since version 1.8\n     * @member Utils\n     * @memberof Popper\n     */\n\n  }]);\n  return Popper;\n}();\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n\n\nPopper.Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\nPopper.placements = placements;\nPopper.Defaults = Defaults;\n\nreturn Popper;\n\n})));\n//# sourceMappingURL=popper.js.map\n","popper/umd/popper-utils.js":"/**!\n * @fileOverview Kickass library to create and place poppers near their reference elements.\n * @version 1.12.5\n * @license\n * Copyright (c) 2016 Federico Zivolo and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.PopperUtils = global.PopperUtils || {})));\n}(this, (function (exports) { 'use strict';\n\n/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nfunction getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  var css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n\n/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nfunction getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nfunction getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element || ['HTML', 'BODY', '#document'].indexOf(element.nodeName) !== -1) {\n    return window.document.body;\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n\n  var _getStyleComputedProp = getStyleComputedProperty(element),\n      overflow = _getStyleComputedProp.overflow,\n      overflowX = _getStyleComputedProp.overflowX,\n      overflowY = _getStyleComputedProp.overflowY;\n\n  if (/(auto|scroll)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nfunction getOffsetParent(element) {\n  // NOTE: 1 DOM access here\n  var offsetParent = element && element.offsetParent;\n  var nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return window.document.documentElement;\n  }\n\n  // .offsetParent will return the closest TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (['TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 && getStyleComputedProperty(offsetParent, 'position') === 'static') {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n\nfunction isOffsetContainer(element) {\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element;\n}\n\n/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nfunction getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nfunction findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return window.document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  var order = element1.compareDocumentPosition(element2) & Node.DOCUMENT_POSITION_FOLLOWING;\n  var start = order ? element1 : element2;\n  var end = order ? element2 : element1;\n\n  // Get common ancestor container\n  var range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  var commonAncestorContainer = range.commonAncestorContainer;\n\n  // Both nodes are inside #document\n\n  if (element1 !== commonAncestorContainer && element2 !== commonAncestorContainer || start.contains(end)) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  var element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n\n/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nfunction getScroll(element) {\n  var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'top';\n\n  var upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    var html = window.document.documentElement;\n    var scrollingElement = window.document.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nfunction includeScroll(rect, element) {\n  var subtract = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var scrollTop = getScroll(element, 'top');\n  var scrollLeft = getScroll(element, 'left');\n  var modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n\n/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nfunction getBordersSize(styles, axis) {\n  var sideA = axis === 'x' ? 'Left' : 'Top';\n  var sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return +styles['border' + sideA + 'Width'].split('px')[0] + +styles['border' + sideB + 'Width'].split('px')[0];\n}\n\n/**\n * Tells if you are running Internet Explorer 10\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean} isIE10\n */\nvar isIE10 = undefined;\n\nvar isIE10$1 = function () {\n  if (isIE10 === undefined) {\n    isIE10 = navigator.appVersion.indexOf('MSIE 10') !== -1;\n  }\n  return isIE10;\n};\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(body['offset' + axis], body['scroll' + axis], html['client' + axis], html['offset' + axis], html['scroll' + axis], isIE10$1() ? html['offset' + axis] + computedStyle['margin' + (axis === 'Height' ? 'Top' : 'Left')] + computedStyle['margin' + (axis === 'Height' ? 'Bottom' : 'Right')] : 0);\n}\n\nfunction getWindowSizes() {\n  var body = window.document.body;\n  var html = window.document.documentElement;\n  var computedStyle = isIE10$1() && window.getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle)\n  };\n}\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nfunction getClientRect(offsets) {\n  return _extends({}, offsets, {\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height\n  });\n}\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nfunction getBoundingClientRect(element) {\n  var rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  if (isIE10$1()) {\n    try {\n      rect = element.getBoundingClientRect();\n      var scrollTop = getScroll(element, 'top');\n      var scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    } catch (err) {}\n  } else {\n    rect = element.getBoundingClientRect();\n  }\n\n  var result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top\n  };\n\n  // subtract scrollbar size from sizes\n  var sizes = element.nodeName === 'HTML' ? getWindowSizes() : {};\n  var width = sizes.width || element.clientWidth || result.right - result.left;\n  var height = sizes.height || element.clientHeight || result.bottom - result.top;\n\n  var horizScrollbar = element.offsetWidth - width;\n  var vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    var styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n\nfunction getOffsetRectRelativeToArbitraryNode(children, parent) {\n  var isIE10 = isIE10$1();\n  var isHTML = parent.nodeName === 'HTML';\n  var childrenRect = getBoundingClientRect(children);\n  var parentRect = getBoundingClientRect(parent);\n  var scrollParent = getScrollParent(children);\n\n  var styles = getStyleComputedProperty(parent);\n  var borderTopWidth = +styles.borderTopWidth.split('px')[0];\n  var borderLeftWidth = +styles.borderLeftWidth.split('px')[0];\n\n  var offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    var marginTop = +styles.marginTop.split('px')[0];\n    var marginLeft = +styles.marginLeft.split('px')[0];\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (isIE10 ? parent.contains(scrollParent) : parent === scrollParent && scrollParent.nodeName !== 'BODY') {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n\nfunction getViewportOffsetRectRelativeToArtbitraryNode(element) {\n  var html = window.document.documentElement;\n  var relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  var width = Math.max(html.clientWidth, window.innerWidth || 0);\n  var height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  var scrollTop = getScroll(html);\n  var scrollLeft = getScroll(html, 'left');\n\n  var offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width: width,\n    height: height\n  };\n\n  return getClientRect(offset);\n}\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nfunction isFixed(element) {\n  var nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  return isFixed(getParentNode(element));\n}\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @returns {Object} Coordinates of the boundaries\n */\nfunction getBoundaries(popper, reference, padding, boundariesElement) {\n  // NOTE: 1 DOM access here\n  var boundaries = { top: 0, left: 0 };\n  var offsetParent = findCommonOffsetParent(popper, reference);\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport') {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent);\n  } else {\n    // Handle other cases based on DOM element used as boundaries\n    var boundariesNode = void 0;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(popper));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = window.document.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = window.document.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    var offsets = getOffsetRectRelativeToArbitraryNode(boundariesNode, offsetParent);\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      var _getWindowSizes = getWindowSizes(),\n          height = _getWindowSizes.height,\n          width = _getWindowSizes.width;\n\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  boundaries.left += padding;\n  boundaries.top += padding;\n  boundaries.right -= padding;\n  boundaries.bottom -= padding;\n\n  return boundaries;\n}\n\nfunction getArea(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeAutoPlacement(placement, refRect, popper, reference, boundariesElement) {\n  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  var boundaries = getBoundaries(popper, reference, padding, boundariesElement);\n\n  var rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height\n    }\n  };\n\n  var sortedAreas = Object.keys(rects).map(function (key) {\n    return _extends({\n      key: key\n    }, rects[key], {\n      area: getArea(rects[key])\n    });\n  }).sort(function (a, b) {\n    return b.area - a.area;\n  });\n\n  var filteredAreas = sortedAreas.filter(function (_ref2) {\n    var width = _ref2.width,\n        height = _ref2.height;\n    return width >= popper.clientWidth && height >= popper.clientHeight;\n  });\n\n  var computedPlacement = filteredAreas.length > 0 ? filteredAreas[0].key : sortedAreas[0].key;\n\n  var variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? '-' + variation : '');\n}\n\nvar nativeHints = ['native code', '[object MutationObserverConstructor]'];\n\n/**\n * Determine if a function is implemented natively (as opposed to a polyfill).\n * @method\n * @memberof Popper.Utils\n * @argument {Function | undefined} fn the function to check\n * @returns {Boolean}\n */\nvar isNative = (function (fn) {\n  return nativeHints.some(function (hint) {\n    return (fn || '').toString().indexOf(hint) > -1;\n  });\n});\n\nvar isBrowser = typeof window !== 'undefined';\nvar longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\nvar timeoutDuration = 0;\nfor (var i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n    timeoutDuration = 1;\n    break;\n  }\n}\n\nfunction microtaskDebounce(fn) {\n  var scheduled = false;\n  var i = 0;\n  var elem = document.createElement('span');\n\n  // MutationObserver provides a mechanism for scheduling microtasks, which\n  // are scheduled *before* the next task. This gives us a way to debounce\n  // a function but ensure it's called *before* the next paint.\n  var observer = new MutationObserver(function () {\n    fn();\n    scheduled = false;\n  });\n\n  observer.observe(elem, { attributes: true });\n\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      elem.setAttribute('x-index', i);\n      i = i + 1; // don't use compund (+=) because it doesn't get optimized in V8\n    }\n  };\n}\n\nfunction taskDebounce(fn) {\n  var scheduled = false;\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(function () {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\n// It's common for MutationObserver polyfills to be seen in the wild, however\n// these rely on Mutation Events which only occur when an element is connected\n// to the DOM. The algorithm used in this module does not use a connected element,\n// and so we must ensure that a *native* MutationObserver is available.\nvar supportsNativeMutationObserver = isBrowser && isNative(window.MutationObserver);\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nvar debounce = supportsNativeMutationObserver ? microtaskDebounce : taskDebounce;\n\n/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(function (cur) {\n      return cur[prop] === value;\n    });\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  var match = find(arr, function (obj) {\n    return obj[prop] === value;\n  });\n  return arr.indexOf(match);\n}\n\n/**\n * Get the position of the given element, relative to its offset parent\n * @method\n * @memberof Popper.Utils\n * @param {Element} element\n * @return {Object} position - Coordinates of the element and its `scrollTop`\n */\nfunction getOffsetRect(element) {\n  var elementRect = void 0;\n  if (element.nodeName === 'HTML') {\n    var _getWindowSizes = getWindowSizes(),\n        width = _getWindowSizes.width,\n        height = _getWindowSizes.height;\n\n    elementRect = {\n      width: width,\n      height: height,\n      left: 0,\n      top: 0\n    };\n  } else {\n    elementRect = {\n      width: element.offsetWidth,\n      height: element.offsetHeight,\n      left: element.offsetLeft,\n      top: element.offsetTop\n    };\n  }\n\n  // position\n  return getClientRect(elementRect);\n}\n\n/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nfunction getOuterSizes(element) {\n  var styles = window.getComputedStyle(element);\n  var x = parseFloat(styles.marginTop) + parseFloat(styles.marginBottom);\n  var y = parseFloat(styles.marginLeft) + parseFloat(styles.marginRight);\n  var result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x\n  };\n  return result;\n}\n\n/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nfunction getOppositePlacement(placement) {\n  var hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nfunction getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  var popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  var popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  var isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  var mainSide = isHoriz ? 'top' : 'left';\n  var secondarySide = isHoriz ? 'left' : 'top';\n  var measurement = isHoriz ? 'height' : 'width';\n  var secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] = referenceOffsets[mainSide] + referenceOffsets[measurement] / 2 - popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] = referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] = referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nfunction getReferenceOffsets(state, popper, reference) {\n  var commonOffsetParent = findCommonOffsetParent(popper, reference);\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent);\n}\n\n/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nfunction getSupportedPropertyName(property) {\n  var prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  var upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (var i = 0; i < prefixes.length - 1; i++) {\n    var prefix = prefixes[i];\n    var toCheck = prefix ? '' + prefix + upperProp : property;\n    if (typeof window.document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n\n/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nfunction isFunction(functionToCheck) {\n  var getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\n/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nfunction isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(function (_ref) {\n    var name = _ref.name,\n        enabled = _ref.enabled;\n    return enabled && name === modifierName;\n  });\n}\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nfunction isModifierRequired(modifiers, requestingName, requestedName) {\n  var requesting = find(modifiers, function (_ref) {\n    var name = _ref.name;\n    return name === requestingName;\n  });\n\n  var isRequired = !!requesting && modifiers.some(function (modifier) {\n    return modifier.name === requestedName && modifier.enabled && modifier.order < requesting.order;\n  });\n\n  if (!isRequired) {\n    var _requesting = '`' + requestingName + '`';\n    var requested = '`' + requestedName + '`';\n    console.warn(requested + ' modifier is required by ' + _requesting + ' modifier in order to work, be sure to include it before ' + _requesting + '!');\n  }\n  return isRequired;\n}\n\n/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nfunction isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  window.removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(function (target) {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nfunction runModifiers(modifiers, data, ends) {\n  var modifiersToRun = ends === undefined ? modifiers : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(function (modifier) {\n    if (modifier.function) {\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    var fn = modifier.function || modifier.fn;\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n\n/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function (prop) {\n    var value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setStyles(element, styles) {\n  Object.keys(styles).forEach(function (prop) {\n    var unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 && isNumeric(styles[prop])) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  var isBody = scrollParent.nodeName === 'BODY';\n  var target = isBody ? window : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(getScrollParent(target.parentNode), event, callback, scrollParents);\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction setupEventListeners(reference, options, state, updateBound) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  window.addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  var scrollElement = getScrollParent(reference);\n  attachToScrollParents(scrollElement, 'scroll', state.updateBound, state.scrollParents);\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n\n// This is here just for backward compatibility with versions lower than v1.10.3\n// you should import the utilities using named exports, if you want them all use:\n// ```\n// import * as PopperUtils from 'popper-utils';\n// ```\n// The default export will be removed in the next major version.\nvar index = {\n  computeAutoPlacement: computeAutoPlacement,\n  debounce: debounce,\n  findIndex: findIndex,\n  getBordersSize: getBordersSize,\n  getBoundaries: getBoundaries,\n  getBoundingClientRect: getBoundingClientRect,\n  getClientRect: getClientRect,\n  getOffsetParent: getOffsetParent,\n  getOffsetRect: getOffsetRect,\n  getOffsetRectRelativeToArbitraryNode: getOffsetRectRelativeToArbitraryNode,\n  getOuterSizes: getOuterSizes,\n  getParentNode: getParentNode,\n  getPopperOffsets: getPopperOffsets,\n  getReferenceOffsets: getReferenceOffsets,\n  getScroll: getScroll,\n  getScrollParent: getScrollParent,\n  getStyleComputedProperty: getStyleComputedProperty,\n  getSupportedPropertyName: getSupportedPropertyName,\n  getWindowSizes: getWindowSizes,\n  isFixed: isFixed,\n  isFunction: isFunction,\n  isModifierEnabled: isModifierEnabled,\n  isModifierRequired: isModifierRequired,\n  isNative: isNative,\n  isNumeric: isNumeric,\n  removeEventListeners: removeEventListeners,\n  runModifiers: runModifiers,\n  setAttributes: setAttributes,\n  setStyles: setStyles,\n  setupEventListeners: setupEventListeners\n};\n\nexports.computeAutoPlacement = computeAutoPlacement;\nexports.debounce = debounce;\nexports.findIndex = findIndex;\nexports.getBordersSize = getBordersSize;\nexports.getBoundaries = getBoundaries;\nexports.getBoundingClientRect = getBoundingClientRect;\nexports.getClientRect = getClientRect;\nexports.getOffsetParent = getOffsetParent;\nexports.getOffsetRect = getOffsetRect;\nexports.getOffsetRectRelativeToArbitraryNode = getOffsetRectRelativeToArbitraryNode;\nexports.getOuterSizes = getOuterSizes;\nexports.getParentNode = getParentNode;\nexports.getPopperOffsets = getPopperOffsets;\nexports.getReferenceOffsets = getReferenceOffsets;\nexports.getScroll = getScroll;\nexports.getScrollParent = getScrollParent;\nexports.getStyleComputedProperty = getStyleComputedProperty;\nexports.getSupportedPropertyName = getSupportedPropertyName;\nexports.getWindowSizes = getWindowSizes;\nexports.isFixed = isFixed;\nexports.isFunction = isFunction;\nexports.isModifierEnabled = isModifierEnabled;\nexports.isModifierRequired = isModifierRequired;\nexports.isNative = isNative;\nexports.isNumeric = isNumeric;\nexports.removeEventListeners = removeEventListeners;\nexports.runModifiers = runModifiers;\nexports.setAttributes = setAttributes;\nexports.setStyles = setStyles;\nexports.setupEventListeners = setupEventListeners;\nexports['default'] = index;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=popper-utils.js.map\n","WeltPixel_GoogleTagManager/js/weltpixel_persistentlayer.js":"define([\r\n    'jquery', 'underscore', 'Magento_Ui/js/lib/core/storage/local', 'uiRegistry'\r\n], function ($, _, localStorage, registry) {\r\n    \"use strict\";\r\n\r\n    var persistentLayer = {\r\n        storageExpiryTime : 30, // specify in seconds;\r\n        locStorage : registry.get('localStorage'),\r\n\r\n        init: function(options) {\r\n            this.storageExpiryTime = options.storageExpiryTime || this.storageExpiryTime;\r\n\r\n            var persistentObject = {\r\n                persist: {}\r\n            };\r\n            var pushToDatalayer = false;\r\n\r\n            var promoClickObj = this.getPromotionClick();\r\n            if (promoClickObj) {\r\n                persistentObject.persist.persist_promotion = {};\r\n                persistentObject.persist.persist_promotion.promotion = promoClickObj;\r\n                pushToDatalayer = true;\r\n            }\r\n\r\n            if (pushToDatalayer) {\r\n                window.dataLayer.push(persistentObject);\r\n            }\r\n        },\r\n\r\n        setItem: function(key, value) {\r\n            var storedValue = {\r\n                expiryTime: new Date(),\r\n                value: value\r\n            };\r\n\r\n            this.locStorage.set(key, storedValue);\r\n        },\r\n\r\n        getItem: function(key) {\r\n            var storedValue = this.locStorage.get(key);\r\n            if (typeof storedValue !== 'undefined') {\r\n\r\n                if (this.isExpired(storedValue.expiryTime)) {\r\n                    this.removeItem(key);\r\n                    return false;\r\n                }\r\n\r\n                return storedValue.value;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        removeItem: function(key) {\r\n            this.locStorage.remove(key);\r\n        },\r\n\r\n        isExpired: function(date) {\r\n            var currDate = new Date();\r\n            var startDate = new Date(date);\r\n\r\n            var difference = (currDate.getTime() - startDate.getTime()) / 1000;\r\n            difference /= 60;\r\n            difference = Math.abs(Math.round(difference));\r\n\r\n            return difference > this.storageExpiryTime;\r\n        },\r\n\r\n        setPromotionClick: function(promoClick) {\r\n            this.setItem('promo_click', promoClick);\r\n        },\r\n\r\n        getPromotionClick: function() {\r\n            return this.getItem('promo_click');\r\n        }\r\n    };\r\n\r\n    return persistentLayer;\r\n});","WeltPixel_GoogleTagManager/js/weltpixel_gtm.js":"define([\r\n    'jquery',\r\n    ], function ($) {\r\n    \"use strict\";\r\n\r\n    return {\r\n        trackPromotion: function(options) {\r\n            if (options.enabled) {\r\n                $(document).ready(function() {\r\n\r\n                    var wpPersDl = options.persDataLayer;\r\n                    \r\n                    /**  Track the promotion clicks   */\r\n                    $('[data-track-promo-id]').click(function() {\r\n                        var promoId = $(this).attr('data-track-promo-id'),\r\n                            promoName = $(this).attr('data-track-promo-name'),\r\n                            promoCreative = $(this).attr('data-track-promo-creative'),\r\n                            promoPosition = $(this).attr('data-track-promo-position');\r\n\r\n                        var promoObj = {\r\n                            'id': promoId,\r\n                            'name': promoName,\r\n                            'creative': promoCreative,\r\n                            'position': promoPosition\r\n                        };\r\n\r\n\r\n                        window.dataLayer.push({\r\n                            'event': 'promotionClick',\r\n                            'ecommerce': {\r\n                                'promoClick': {\r\n                                    'promotions': [promoObj]\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                        wpPersDl.setPromotionClick(promoObj);\r\n\r\n                    });\r\n                    /** Track the promotion views */\r\n                    var promotionViews = [];\r\n                    $('[data-track-promo-id]').each(function() {\r\n                        var promoId = $(this).attr('data-track-promo-id'),\r\n                            promoName = $(this).attr('data-track-promo-name'),\r\n                            promoCreative = $(this).attr('data-track-promo-creative'),\r\n                            promoPosition = $(this).attr('data-track-promo-position');\r\n\r\n                        promotionViews.push({\r\n                            'id': promoId,\r\n                            'name': promoName,\r\n                            'creative': promoCreative,\r\n                            'position': promoPosition\r\n                        });\r\n                    });\r\n                    if (promotionViews.length) {\r\n                        window.dataLayer.push({\r\n                            'event': 'promotionView',\r\n                            'ecommerce': {\r\n                                'promoView': {\r\n                                    'promotions': promotionViews\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n});","js/jquery.parallax.min.js":"//============================================================\n//\n// The MIT License\n//\n// Copyright (C) 2014 Matthew Wagerfield - @wagerfield\n//\n// Permission is hereby granted, free of charge, to any\n// person obtaining a copy of this software and associated\n// documentation files (the \"Software\"), to deal in the\n// Software without restriction, including without limitation\n// the rights to use, copy, modify, merge, publish, distribute,\n// sublicense, and/or sell copies of the Software, and to\n// permit persons to whom the Software is furnished to do\n// so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice\n// shall be included in all copies or substantial portions\n// of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY\n// OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT\n// LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n// FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO\n// EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE\n// FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN\n// AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE\n// OR OTHER DEALINGS IN THE SOFTWARE.\n//\n//============================================================\n\n/**\n * jQuery || Zepto Parallax Plugin\n * @author Matthew Wagerfield - @wagerfield\n * @description Creates a parallax effect between an array of layers,\n *              driving the motion from the gyroscope output of a smartdevice.\n *              If no gyroscope is available, the cursor position is used.\n */\n;(function($, window, document, undefined) {\n\n  // Strict Mode\n  'use strict';\n\n  // Constants\n  var NAME = 'parallax';\n  var MAGIC_NUMBER = 30;\n  var DEFAULTS = {\n    relativeInput: false,\n    clipRelativeInput: false,\n    calibrationThreshold: 100,\n    calibrationDelay: 500,\n    supportDelay: 500,\n    calibrateX: false,\n    calibrateY: true,\n    invertX: true,\n    invertY: true,\n    limitX: false,\n    limitY: false,\n    scalarX: 10.0,\n    scalarY: 10.0,\n    frictionX: 0.1,\n    frictionY: 0.1,\n    originX: 0.5,\n    originY: 0.5\n  };\n\n  function Plugin(element, options) {\n\n    // DOM Context\n    this.element = element;\n\n    // Selections\n    this.$context = $(element).data('api', this);\n    this.$layers = this.$context.find('.layer');\n\n    // Data Extraction\n    var data = {\n      calibrateX: this.$context.data('calibrate-x') || null,\n      calibrateY: this.$context.data('calibrate-y') || null,\n      invertX: this.$context.data('invert-x') || null,\n      invertY: this.$context.data('invert-y') || null,\n      limitX: parseFloat(this.$context.data('limit-x')) || null,\n      limitY: parseFloat(this.$context.data('limit-y')) || null,\n      scalarX: parseFloat(this.$context.data('scalar-x')) || null,\n      scalarY: parseFloat(this.$context.data('scalar-y')) || null,\n      frictionX: parseFloat(this.$context.data('friction-x')) || null,\n      frictionY: parseFloat(this.$context.data('friction-y')) || null,\n      originX: parseFloat(this.$context.data('origin-x')) || null,\n      originY: parseFloat(this.$context.data('origin-y')) || null\n    };\n\n    // Delete Null Data Values\n    for (var key in data) {\n      if (data[key] === null) delete data[key];\n    }\n\n    // Compose Settings Object\n    $.extend(this, DEFAULTS, options, data);\n\n    // States\n    this.calibrationTimer = null;\n    this.calibrationFlag = true;\n    this.enabled = false;\n    this.depths = [];\n    this.raf = null;\n\n    // Element Bounds\n    this.bounds = null;\n    this.ex = 0;\n    this.ey = 0;\n    this.ew = 0;\n    this.eh = 0;\n\n    // Element Center\n    this.ecx = 0;\n    this.ecy = 0;\n\n    // Element Range\n    this.erx = 0;\n    this.ery = 0;\n\n    // Calibration\n    this.cx = 0;\n    this.cy = 0;\n\n    // Input\n    this.ix = 0;\n    this.iy = 0;\n\n    // Motion\n    this.mx = 0;\n    this.my = 0;\n\n    // Velocity\n    this.vx = 0;\n    this.vy = 0;\n\n    // Callbacks\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onDeviceOrientation = this.onDeviceOrientation.bind(this);\n    this.onOrientationTimer = this.onOrientationTimer.bind(this);\n    this.onCalibrationTimer = this.onCalibrationTimer.bind(this);\n    this.onAnimationFrame = this.onAnimationFrame.bind(this);\n    this.onWindowResize = this.onWindowResize.bind(this);\n\n    // Initialise\n    this.initialise();\n  }\n\n  Plugin.prototype.transformSupport = function(value) {\n    var element = document.createElement('div');\n    var propertySupport = false;\n    var propertyValue = null;\n    var featureSupport = false;\n    var cssProperty = null;\n    var jsProperty = null;\n    for (var i = 0, l = this.vendors.length; i < l; i++) {\n      if (this.vendors[i] !== null) {\n        cssProperty = this.vendors[i][0] + 'transform';\n        jsProperty = this.vendors[i][1] + 'Transform';\n      } else {\n        cssProperty = 'transform';\n        jsProperty = 'transform';\n      }\n      if (element.style[jsProperty] !== undefined) {\n        propertySupport = true;\n        break;\n      }\n    }\n    switch(value) {\n      case '2D':\n        featureSupport = propertySupport;\n        break;\n      case '3D':\n        if (propertySupport) {\n          var body = document.body || document.createElement('body');\n          var documentElement = document.documentElement;\n          var documentOverflow = documentElement.style.overflow;\n          if (!document.body) {\n            documentElement.appendChild(body);\n          }\n          body.appendChild(element);\n          element.style[jsProperty] = 'translate3d(1px,1px,1px)';\n          propertyValue = window.getComputedStyle(element).getPropertyValue(cssProperty);\n          featureSupport = propertyValue !== undefined && propertyValue.length > 0 && propertyValue !== \"none\";\n          documentElement.style.overflow = documentOverflow;\n          body.removeChild(element);\n        }\n        break;\n    }\n    return featureSupport;\n  };\n\n  Plugin.prototype.ww = null;\n  Plugin.prototype.wh = null;\n  Plugin.prototype.wcx = null;\n  Plugin.prototype.wcy = null;\n  Plugin.prototype.wrx = null;\n  Plugin.prototype.wry = null;\n  Plugin.prototype.portrait = null;\n  Plugin.prototype.desktop = !navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i);\n  Plugin.prototype.vendors = [null,['-webkit-','webkit'],['-moz-','Moz'],['-o-','O'],['-ms-','ms']];\n  Plugin.prototype.motionSupport = !!window.DeviceMotionEvent;\n  Plugin.prototype.orientationSupport = !!window.DeviceOrientationEvent;\n  Plugin.prototype.orientationStatus = 0;\n  Plugin.prototype.transform2DSupport = Plugin.prototype.transformSupport('2D');\n  Plugin.prototype.transform3DSupport = Plugin.prototype.transformSupport('3D');\n  Plugin.prototype.propertyCache = {};\n\n  Plugin.prototype.initialise = function() {\n\n    // Configure Styles\n    if (this.$context.css('position') === 'static') {\n      this.$context.css({\n        position:'relative'\n      });\n    }\n\n    // Hardware Accelerate Context\n    this.accelerate(this.$context);\n\n    // Setup\n    this.updateLayers();\n    this.updateDimensions();\n    this.enable();\n    this.queueCalibration(this.calibrationDelay);\n  };\n\n  Plugin.prototype.updateLayers = function() {\n\n    // Cache Layer Elements\n    this.$layers = this.$context.find('.layer');\n    this.depths = [];\n\n    // Configure Layer Styles\n    this.$layers.css({\n      position:'absolute',\n      display:'block',\n      left: 0,\n      top: 0\n    });\n    this.$layers.first().css({\n      position:'relative'\n    });\n\n    // Hardware Accelerate Layers\n    this.accelerate(this.$layers);\n\n    // Cache Depths\n    this.$layers.each($.proxy(function(index, element) {\n      this.depths.push($(element).data('depth') || 0);\n    }, this));\n  };\n\n  Plugin.prototype.updateDimensions = function() {\n    this.ww = window.innerWidth;\n    this.wh = window.innerHeight;\n    this.wcx = this.ww * this.originX;\n    this.wcy = this.wh * this.originY;\n    this.wrx = Math.max(this.wcx, this.ww - this.wcx);\n    this.wry = Math.max(this.wcy, this.wh - this.wcy);\n  };\n\n  Plugin.prototype.updateBounds = function() {\n    this.bounds = this.element.getBoundingClientRect();\n    this.ex = this.bounds.left;\n    this.ey = this.bounds.top;\n    this.ew = this.bounds.width;\n    this.eh = this.bounds.height;\n    this.ecx = this.ew * this.originX;\n    this.ecy = this.eh * this.originY;\n    this.erx = Math.max(this.ecx, this.ew - this.ecx);\n    this.ery = Math.max(this.ecy, this.eh - this.ecy);\n  };\n\n  Plugin.prototype.queueCalibration = function(delay) {\n    clearTimeout(this.calibrationTimer);\n    this.calibrationTimer = setTimeout(this.onCalibrationTimer, delay);\n  };\n\n  Plugin.prototype.enable = function() {\n    if (!this.enabled) {\n      this.enabled = true;\n      if (this.orientationSupport) {\n        this.portrait = null;\n        window.addEventListener('deviceorientation', this.onDeviceOrientation);\n        setTimeout(this.onOrientationTimer, this.supportDelay);\n      } else {\n        this.cx = 0;\n        this.cy = 0;\n        this.portrait = false;\n        window.addEventListener('mousemove', this.onMouseMove);\n      }\n      window.addEventListener('resize', this.onWindowResize);\n      this.raf = requestAnimationFrame(this.onAnimationFrame);\n    }\n  };\n\n  Plugin.prototype.disable = function() {\n    if (this.enabled) {\n      this.enabled = false;\n      if (this.orientationSupport) {\n        window.removeEventListener('deviceorientation', this.onDeviceOrientation);\n      } else {\n        window.removeEventListener('mousemove', this.onMouseMove);\n      }\n      window.removeEventListener('resize', this.onWindowResize);\n      cancelAnimationFrame(this.raf);\n    }\n  };\n\n  Plugin.prototype.calibrate = function(x, y) {\n    this.calibrateX = x === undefined ? this.calibrateX : x;\n    this.calibrateY = y === undefined ? this.calibrateY : y;\n  };\n\n  Plugin.prototype.invert = function(x, y) {\n    this.invertX = x === undefined ? this.invertX : x;\n    this.invertY = y === undefined ? this.invertY : y;\n  };\n\n  Plugin.prototype.friction = function(x, y) {\n    this.frictionX = x === undefined ? this.frictionX : x;\n    this.frictionY = y === undefined ? this.frictionY : y;\n  };\n\n  Plugin.prototype.scalar = function(x, y) {\n    this.scalarX = x === undefined ? this.scalarX : x;\n    this.scalarY = y === undefined ? this.scalarY : y;\n  };\n\n  Plugin.prototype.limit = function(x, y) {\n    this.limitX = x === undefined ? this.limitX : x;\n    this.limitY = y === undefined ? this.limitY : y;\n  };\n\n  Plugin.prototype.origin = function(x, y) {\n    this.originX = x === undefined ? this.originX : x;\n    this.originY = y === undefined ? this.originY : y;\n  };\n\n  Plugin.prototype.clamp = function(value, min, max) {\n    value = Math.max(value, min);\n    value = Math.min(value, max);\n    return value;\n  };\n\n  Plugin.prototype.css = function(element, property, value) {\n    var jsProperty = this.propertyCache[property];\n    if (!jsProperty) {\n      for (var i = 0, l = this.vendors.length; i < l; i++) {\n        if (this.vendors[i] !== null) {\n          jsProperty = $.camelCase(this.vendors[i][1] + '-' + property);\n        } else {\n          jsProperty = property;\n        }\n        if (element.style[jsProperty] !== undefined) {\n          this.propertyCache[property] = jsProperty;\n          break;\n        }\n      }\n    }\n    element.style[jsProperty] = value;\n  };\n\n  Plugin.prototype.accelerate = function($element) {\n    for (var i = 0, l = $element.length; i < l; i++) {\n      var element = $element[i];\n      this.css(element, 'transform', 'translate3d(0,0,0)');\n      this.css(element, 'transform-style', 'preserve-3d');\n      this.css(element, 'backface-visibility', 'hidden');\n    }\n  };\n\n  Plugin.prototype.setPosition = function(element, x, y) {\n    x += 'px';\n    y += 'px';\n    if (this.transform3DSupport) {\n      this.css(element, 'transform', 'translate3d('+x+','+y+',0)');\n    } else if (this.transform2DSupport) {\n      this.css(element, 'transform', 'translate('+x+','+y+')');\n    } else {\n      element.style.left = x;\n      element.style.top = y;\n    }\n  };\n\n  Plugin.prototype.onOrientationTimer = function(event) {\n    if (this.orientationSupport && this.orientationStatus === 0) {\n      this.disable();\n      this.orientationSupport = false;\n      this.enable();\n    }\n  };\n\n  Plugin.prototype.onCalibrationTimer = function(event) {\n    this.calibrationFlag = true;\n  };\n\n  Plugin.prototype.onWindowResize = function(event) {\n    this.updateDimensions();\n  };\n\n  Plugin.prototype.onAnimationFrame = function() {\n    this.updateBounds();\n    var dx = this.ix - this.cx;\n    var dy = this.iy - this.cy;\n    if ((Math.abs(dx) > this.calibrationThreshold) || (Math.abs(dy) > this.calibrationThreshold)) {\n      this.queueCalibration(0);\n    }\n    if (this.portrait) {\n      this.mx = this.calibrateX ? dy : this.iy;\n      this.my = this.calibrateY ? dx : this.ix;\n    } else {\n      this.mx = this.calibrateX ? dx : this.ix;\n      this.my = this.calibrateY ? dy : this.iy;\n    }\n    this.mx *= this.ew * (this.scalarX / 100);\n    this.my *= this.eh * (this.scalarY / 100);\n    if (!isNaN(parseFloat(this.limitX))) {\n      this.mx = this.clamp(this.mx, -this.limitX, this.limitX);\n    }\n    if (!isNaN(parseFloat(this.limitY))) {\n      this.my = this.clamp(this.my, -this.limitY, this.limitY);\n    }\n    this.vx += (this.mx - this.vx) * this.frictionX;\n    this.vy += (this.my - this.vy) * this.frictionY;\n    for (var i = 0, l = this.$layers.length; i < l; i++) {\n      var depth = this.depths[i];\n      var layer = this.$layers[i];\n      var xOffset = this.vx * depth * (this.invertX ? -1 : 1);\n      var yOffset = this.vy * depth * (this.invertY ? -1 : 1);\n      this.setPosition(layer, xOffset, yOffset);\n    }\n    this.raf = requestAnimationFrame(this.onAnimationFrame);\n  };\n\n  Plugin.prototype.onDeviceOrientation = function(event) {\n\n    // Validate environment and event properties.\n    if (!this.desktop && event.beta !== null && event.gamma !== null) {\n\n      // Set orientation status.\n      this.orientationStatus = 1;\n\n      // Extract Rotation\n      var x = (event.beta  || 0) / MAGIC_NUMBER; //  -90 :: 90\n      var y = (event.gamma || 0) / MAGIC_NUMBER; // -180 :: 180\n\n      // Detect Orientation Change\n      var portrait = window.innerHeight > window.innerWidth;\n      if (this.portrait !== portrait) {\n        this.portrait = portrait;\n        this.calibrationFlag = true;\n      }\n\n      // Set Calibration\n      if (this.calibrationFlag) {\n        this.calibrationFlag = false;\n        this.cx = x;\n        this.cy = y;\n      }\n\n      // Set Input\n      this.ix = x;\n      this.iy = y;\n    }\n  };\n\n  Plugin.prototype.onMouseMove = function(event) {\n\n    // Cache mouse coordinates.\n    var clientX = event.clientX;\n    var clientY = event.clientY;\n\n    // Calculate Mouse Input\n    if (!this.orientationSupport && this.relativeInput) {\n\n      // Clip mouse coordinates inside element bounds.\n      if (this.clipRelativeInput) {\n        clientX = Math.max(clientX, this.ex);\n        clientX = Math.min(clientX, this.ex + this.ew);\n        clientY = Math.max(clientY, this.ey);\n        clientY = Math.min(clientY, this.ey + this.eh);\n      }\n\n      // Calculate input relative to the element.\n      this.ix = (clientX - this.ex - this.ecx) / this.erx;\n      this.iy = (clientY - this.ey - this.ecy) / this.ery;\n\n    } else {\n\n      // Calculate input relative to the window.\n      this.ix = (clientX - this.wcx) / this.wrx;\n      this.iy = (clientY - this.wcy) / this.wry;\n    }\n  };\n\n  var API = {\n    enable: Plugin.prototype.enable,\n    disable: Plugin.prototype.disable,\n    updateLayers: Plugin.prototype.updateLayers,\n    calibrate: Plugin.prototype.calibrate,\n    friction: Plugin.prototype.friction,\n    invert: Plugin.prototype.invert,\n    scalar: Plugin.prototype.scalar,\n    limit: Plugin.prototype.limit,\n    origin: Plugin.prototype.origin\n  };\n\n  $.fn[NAME] = function (value) {\n    var args = arguments;\n    return this.each(function () {\n      var $this = $(this);\n      var plugin = $this.data(NAME);\n      if (!plugin) {\n        plugin = new Plugin(this, value);\n        $this.data(NAME, plugin);\n      }\n      if (API[value]) {\n        plugin[value].apply(plugin, Array.prototype.slice.call(args, 1));\n      }\n    });\n  };\n\n})(window.jQuery || window.Zepto, window, document);\n\n/**\n * Request Animation Frame Polyfill.\n * @author Tino Zijdel\n * @author Paul Irish\n * @see https://gist.github.com/paulirish/1579671\n */\n;(function() {\n\n  var lastTime = 0;\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\n\n  for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n    window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];\n  }\n\n  if (!window.requestAnimationFrame) {\n    window.requestAnimationFrame = function(callback, element) {\n      var currTime = new Date().getTime();\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n      var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n        timeToCall);\n      lastTime = currTime + timeToCall;\n      return id;\n    };\n  }\n\n  if (!window.cancelAnimationFrame) {\n    window.cancelAnimationFrame = function(id) {\n      clearTimeout(id);\n    };\n  }\n\n}());\n","js/jquery.infinite-scroller.js":"define([\n    'jquery'\n], function ($) {\n    \"use strict\";\n    $.widget('smartwave.infiniteScroll', {\n        options: {\n            productsListSelector: '#layer-product-list',\n            next_page: '',\n            loading: false,\n            infinite_loaded_count: 0,\n            active: false\n        },\n        _create: function () {\n            this.inFinite();\n        },\n        inFinite: function(){\n            var self = this;\n            self.options.next_page = \"\";\n            if($(self.options.productsListSelector +' .infinite-loader').length > 0){\n                self.options.active = true;\n            }\n            $(\".pages-items li > a.next\").each(function(){\n                self.options.next_page = $(this).attr(\"href\");\n            });\n            $(window).scroll(function(){\n                if(!self.options.loading && self.options.active && self.options.next_page && $(window).scrollTop() >= $(\".infinite-loader\").offset().top-$(window).height()+100){\n                    if(self.options.infinite_loaded_count < 2){\n                        self.options.loading = true;\n                        $(\".pages-items li > a.next\").each(function(){\n                            self.options.next_page = $(this).attr(\"href\");\n                        });\n                        self.ajaxInfinite(self.options.next_page);\n                    }\n                }\n            });\n            $(\".infinite-loader .btn-load-more\").click(function(){\n                if(!self.options.loading && self.options.next_page && self.options.infinite_loaded_count >= 2){\n                    self.options.loading = true;\n                    self.ajaxInfinite(self.options.next_page);\n                }\n            });\n        },\n        ajaxInfinite: function (submitUrl) {\n            var self = this;\n            self.options.infinite_loaded_count++;\n            $('.infinite-loader .btn-load-more').hide();\n            $('.infinite-loader .loading').fadeIn(300);\n            $.ajax({\n                type: 'GET',\n                url: submitUrl,\n                dataType: \"html\",\n                beforeSend: function () {\n                    $('.infinite-loader .btn-load-more').hide();\n                    $('.infinite-loader .loading').fadeIn(300);\n                },\n                success: function (res) {\n                    self.options.loading = false;\n                    var items = $(res).find(self.options.productsListSelector +' .product-items .item');\n                    var b = $('<div/>').html($(res).find(self.options.productsListSelector));\n                    if (items.length > 0) {\n                        if($(b).find('div.products-grid')){\n                            $(self.options.productsListSelector + ' .products.wrapper').last()\n                                .after($(res).find(self.options.productsListSelector +' div.products-grid.wrapper').detach())\n                                .trigger('contentUpdated');\n                        }\n                        if($(b).find('div.products-list')){\n                            $(self.options.productsListSelector + ' .products.wrapper').last()\n                                .after($(res).find(self.options.productsListSelector +' div.products-list.wrapper').detach())\n                                .trigger('contentUpdated');\n                        }\n                        if($(b).find('.pages a.next').length>0){\n                            $(self.options.productsListSelector + ' .pages a.next').attr('href', $(res).find('.pages a.next').attr('href'));\n                        }else{\n                            $(self.options.productsListSelector + ' .pages a.next').remove();\n                        }\n                        $(b).remove();\n                        $(\"form[data-role=tocart-form]\").catalogAddToCart();\n                        $('.main .products.grid .product-items li.product-item:nth-child(2n)').addClass('nth-child-2n');\n                        $('.main .products.grid .product-items li.product-item:nth-child(2n+1)').addClass('nth-child-2np1');\n                        $('.main .products.grid .product-items li.product-item:nth-child(3n)').addClass('nth-child-3n');\n                        $('.main .products.grid .product-items li.product-item:nth-child(3n+1)').addClass('nth-child-3np1');\n                        $('.main .products.grid .product-items li.product-item:nth-child(4n)').addClass('nth-child-4n');\n                        $('.main .products.grid .product-items li.product-item:nth-child(4n+1)').addClass('nth-child-4np1');\n                        $('.main .products.grid .product-items li.product-item:nth-child(5n)').addClass('nth-child-5n');\n                        $('.main .products.grid .product-items li.product-item:nth-child(5n+1)').addClass('nth-child-5np1');\n                        $('.main .products.grid .product-items li.product-item:nth-child(6n)').addClass('nth-child-6n');\n                        $('.main .products.grid .product-items li.product-item:nth-child(6n+1)').addClass('nth-child-6np1');\n                        $('.main .products.grid .product-items li.product-item:nth-child(7n)').addClass('nth-child-7n');\n                        $('.main .products.grid .product-items li.product-item:nth-child(7n+1)').addClass('nth-child-7np1');\n                        $('.main .products.grid .product-items li.product-item:nth-child(8n)').addClass('nth-child-8n');\n                        $('.main .products.grid .product-items li.product-item:nth-child(8n+1)').addClass('nth-child-8np1');\n                        var hist = submitUrl;\n                        if(submitUrl.indexOf(\"p=\") > -1){\n                            var len = submitUrl.length-submitUrl.indexOf(\"p=\");\n                            var str_temp = submitUrl.substr(submitUrl.indexOf(\"p=\"),len);\n                            var page_param = \"\";\n                            if(str_temp.indexOf(\"&\") == -1){\n                                page_param = str_temp;\n                            } else {\n                                page_param = str_temp.substr(0,str_temp.indexOf(\"&\"));\n                            }\n                            hist = submitUrl.replace(page_param, \"\");\n                        }\n                        if (typeof window.history.pushState === 'function') {\n                            window.history.pushState({url: hist}, '', hist);\n                        }\n                        if(typeof enable_quickview != 'undefined' && enable_quickview == true) {\n                            requirejs(['jquery', 'weltpixel_quickview' ],\n                                function($, quickview) {\n                                    $('.weltpixel-quickview').off('click').on('click', function() {\n                                        var prodUrl = $(this).attr('data-quickview-url');\n                                        if (prodUrl.length) {\n                                            quickview.displayContent(prodUrl);\n                                        }\n                                    });\n                                });\n                        }\n                        $(\".products-grid .weltpixel-quickview\").each(function(){\n                            $(this).appendTo($(this).parent().parent().children(\".product-item-photo\"));\n                        });\n                        self.options.next_page = \"\";\n                        $(\".pages-items li > a.next\").each(function(){\n                            self.options.next_page = $(this).attr(\"href\");\n                        });\n                        if(self.options.infinite_loaded_count >= 2){\n                            $('.infinite-loader .loading').hide();\n                            if(self.options.next_page){\n                                $('.infinite-loader .btn-load-more').show();\n                                $(\".infinite-loader .btn-load-more\").unbind(\"click\").click(function(){\n                                    if(!self.options.loading && self.options.next_page && self.options.infinite_loaded_count >= 2){\n                                        self.options.loading = true;\n                                        self.ajaxInfinite(self.options.next_page);\n                                    }\n                                });\n                            }\n                        } else {\n                            $('.infinite-loader .loading').fadeOut(300);\n                        }\n                    }\n\n                },\n                error: function () {\n                    window.location.reload();\n                }\n            });\n        }\n    });\n    return $.smartwave.infiniteScroll;\n});","js/navigation-menu.js":"/**\n * Copyright \u00a9 2015 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint jquery:true*/\n\ndefine([\n    \"jquery\",\n    \"matchMedia\",\n    \"mage/template\",\n    \"mage/dropdowns\",\n    \"mage/terms\"\n],function($, mediaCheck, mageTemplate) {\n    'use strict';\n\n    $.widget('mage.navigationMenu', {\n        options: {\n            itemsContainer: '> ul',\n            topLevel: 'li.level0',\n            topLevelSubmenu: '> .submenu',\n            topLevelHoverClass: 'hover',\n            expandedTopLevel: '.more',\n            hoverInTimeout: 300,\n            hoverOutTimeout: 500,\n            submenuAnimationSpeed: 200,\n            collapsable: true,\n            collapsableDropdownTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<li class=\"level0 level-top more parent\">' +\n                        '<div class=\"submenu\">' +\n                            '<ul><%= elems %></ul>' +\n                        '</div>' +\n                    '</li>' +\n                '</script>'\n        },\n\n        _create: function() {\n            this.itemsContainer = $(this.options.itemsContainer, this.element);\n            this.topLevel = $(this.options.topLevel, this.element);\n            this.topLevelSubmenu = $(this.options.topLevelSubmenu, this.topLevel);\n\n            this._bind();\n        },\n\n        _init: function() {\n            if (this.options.collapsable) {\n                setTimeout($.proxy(function() {\n                    this._checkToCollapseOrExpand();\n                }, this), 100);\n            }\n        },\n\n        _bind: function() {\n            this._on({\n                'mouseenter > ul > li.level0': function(e) {\n                    if (!this.entered) { // fix IE bug with 'mouseenter' event\n                        this.timeoutId && clearTimeout(this.timeoutId);\n                        this.timeoutId = setTimeout($.proxy(function() {\n                            this._openSubmenu(e);\n                        }, this), this.options.hoverInTimeout);\n                        this.entered = true;\n                    }\n                },\n                'mouseleave > ul > li.level0': function(e) {\n                    this.entered = null;\n\n                    this.timeoutId && clearTimeout(this.timeoutId);\n                    this.timeoutId = setTimeout($.proxy(function() {\n                        this._closeSubmenu(e.currentTarget);\n                    }, this), this.options.hoverOutTimeout);\n                },\n                'click': function(e) {\n                    e.stopPropagation();\n                }\n            });\n\n            $(document)\n                .on('click.hideMenu', $.proxy(function(e) {\n                    var isOpened = this.topLevel.filter(function() {\n                        return $(this).data('opened');\n                    });\n\n                    if (isOpened) {\n                        this._closeSubmenu(null, false);\n                    }\n                }, this));\n\n            $(window)\n                .on('resize', $.proxy(function() {\n                    this.timeoutOnResize && clearTimeout(this.timeoutOnResize);\n                    this.timeoutOnResize = setTimeout($.proxy(function() {\n                        if (this.options.collapsable) {\n                            if ($(this.options.expandedTopLevel, this.element).length) {\n                                this._expandMenu();\n                            }\n                            this._checkToCollapseOrExpand();\n                        }\n                    }, this), 300);\n                }, this));\n        },\n\n        _openSubmenu: function(e) {\n            var menuItem = e.currentTarget;\n\n            if (!$(menuItem).data('opened')) {\n                this._closeSubmenu(menuItem, true, true);\n\n                $(this.options.topLevelSubmenu, menuItem)\n                    .slideDown(this.options.submenuAnimationSpeed, $.proxy(function() {\n                        $(menuItem).addClass(this.options.topLevelHoverClass);\n                        $(menuItem).data('opened', true);\n                    }, this));\n            } else if ($(e.target).closest(this.options.topLevel)) {\n                $(e.target)\n                    .addClass(this.options.topLevelHoverClass)\n                    .siblings(this.options.topLevel)\n                        .removeClass(this.options.topLevelHoverClass);\n            }\n        },\n\n        _closeSubmenu: function(menuItem, excludeCurrent, fast) {\n            var topLevel = $(this.options.topLevel, this.element),\n                activeSubmenu = $(this.options.topLevelSubmenu, menuItem || null);\n\n            $(this.options.topLevelSubmenu, topLevel)\n                .filter(function() {\n                    return excludeCurrent ? $(this).not(activeSubmenu) : true;\n                })\n                .slideUp(fast ? 0 : this.options.submenuAnimationSpeed);\n\n            topLevel\n                .removeClass(this.options.topLevelHoverClass)\n                .data('opened', false);\n        },\n\n        _checkToCollapseOrExpand: function() {\n            if ($(\"html\").hasClass(\"lt-640\") || $(\"html\").hasClass(\"w-640\")) {\n                return;\n            }\n\n            var navWidth = this.itemsContainer.width(),\n                totalWidth = 0,\n                startCollapseIndex = 0;\n\n            $.each($(this.options.topLevel, this.element), function(index, item) {\n                totalWidth = totalWidth + $(item).outerWidth(true);\n\n                if (totalWidth > navWidth && !startCollapseIndex) {\n                    startCollapseIndex = index - 2;\n                }\n            });\n\n            this[startCollapseIndex ? '_collapseMenu' : '_expandMenu'](startCollapseIndex);\n        },\n\n        _collapseMenu: function(startCollapseIndex) {\n            this.elemsToCollapse = this.topLevel.filter(function(index) {\n                return index > startCollapseIndex;\n            });\n            this.elemsToCollapseClone = $('<div></div>').append(this.elemsToCollapse.clone()).html();\n\n            this.collapsableDropdown = $(\n                mageTemplate(\n                    this.options.collapsableDropdownTemplate,\n                    {elems: this.elemsToCollapseClone}\n                )\n            );\n\n            this.itemsContainer.append(this.collapsableDropdown);\n            this.elemsToCollapse.detach();\n        },\n\n        _expandMenu: function() {\n            this.elemsToCollapse && this.elemsToCollapse.appendTo(this.itemsContainer);\n            this.collapsableDropdown && this.collapsableDropdown.remove();\n        },\n\n        _destroy: function() {\n            this._expandMenu();\n        }\n    });\n\n    /*\n     * Provides \"Continium\" effect for submenu\n     * */\n    $.widget('mage.navigationMenu', $.mage.navigationMenu, {\n        options: {\n            parentLevel: '> ul > li.level0',\n            submenuAnimationSpeed: 150,\n            submenuContiniumEffect: false\n        },\n\n        _init: function() {\n            this._super();\n            this._applySubmenuStyles();\n        },\n\n        _applySubmenuStyles: function() {\n            $(this.options.topLevelSubmenu, $(this.options.topLevel, this.element))\n                .removeAttr('style');\n\n            $(this.options.topLevelSubmenu, $(this.options.parentLevel, this.element))\n                .css({\n                    display: 'block',\n                    height: 0,\n                    overflow: 'hidden'\n                });\n        },\n\n        _openSubmenu: function(e) {\n            var menuItem = e.currentTarget,\n                submenu = $(this.options.topLevelSubmenu, menuItem),\n                openedItems = $(this.options.topLevel, this.element).filter(function() {\n                    return $(this).data('opened');\n                });\n\n            if (submenu.length) {\n                this.heightToAnimate = $(this.options.itemsContainer, submenu).outerHeight(true);\n\n                if (openedItems.length) {\n                    this._closeSubmenu(menuItem, true, this.heightToAnimate, $.proxy(function() {\n                        submenu.css({\n                            height: 'auto'\n                        });\n                        $(menuItem)\n                            .addClass(this.options.topLevelHoverClass);\n                    }, this), e);\n                } else {\n                    submenu.animate({\n                        height: this.heightToAnimate\n                    }, this.options.submenuAnimationSpeed, $.proxy(function() {\n                        $(menuItem)\n                            .addClass(this.options.topLevelHoverClass);\n                    }, this));\n                }\n\n                $(menuItem)\n                    .data('opened', true);\n            } else {\n                this._closeSubmenu(menuItem);\n            }\n        },\n\n        _closeSubmenu: function(menuItem, excludeCurrent, heightToAnimate, callback, e) {\n            var topLevel = $(this.options.topLevel, this.itemsContainer),\n                expandedTopLevel = e && $(e.target).closest(this.options.expandedTopLevel);\n\n            if (!excludeCurrent) {\n                $(this.options.topLevelSubmenu, $(this.options.parentLevel, this.element))\n                    .animate({\n                        height: 0\n                    });\n\n                topLevel\n                    .data('opened', false)\n                    .removeClass(this.options.topLevelHoverClass);\n            } else {\n                var prevOpenedItem = topLevel.filter(function() {\n                        return $(this).data('opened');\n                    }),\n                    prevOpenedSubmenu = $(this.options.topLevelSubmenu, prevOpenedItem);\n\n                prevOpenedSubmenu.animate({\n                    height: heightToAnimate\n                }, this.options.submenuAnimationSpeed, 'linear', function() {\n                    $(this).css({\n                        height: 0\n                    });\n                    callback && callback();\n                });\n\n                prevOpenedItem\n                    .data('opened', false)\n                    .removeClass(this.options.topLevelHoverClass);\n            }\n        },\n\n        _collapseMenu: function() {\n            this._superApply(arguments);\n            this._applySubmenuStyles();\n        }\n    });\n\n    //  Responsive menu\n    $.widget('mage.navigationMenu', $.mage.navigationMenu, {\n        options: {\n            responsive: false,\n            origNavPlaceholder: '.page-header',\n            mainContainer: 'body',\n            pageWrapper: '.page-wrapper',\n            openedMenuClass: 'opened',\n            toggleActionPlaceholder: '.block-search',\n            itemWithSubmenu: 'li.parent',\n            titleWithSubmenu: 'li.parent > a',\n            submenu: 'li.parent > .submenu',\n            toggleActionTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<span data-action=\"toggle-nav\" class=\"action toggle nav\">Toggle Nav</span>' +\n                '</script>',\n            submenuActionsTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<li class=\"action all\">' +\n                        '<a href=\"<%= categoryURL %>\"><span>All <%= category %></span></a>' +\n                    '</li>' +\n                '</script>',\n            navigationSectionsWrapperTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<dl class=\"navigation-tabs\" data-sections=\"tabs\">' +\n                    '</dl>' +\n                '</script>',\n            navigationItemWrapperTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<dt class=\"item title <% if (active) { %>active<% } %>\" data-section=\"title\">' +\n                        '<a class=\"switch\" data-toggle=\"switch\" href=\"#TODO\"><%= title %></a>' +\n                    '</dt>' +\n                    '<dd class=\"item content <% if (active) { %>active<%}%>\" data-section=\"content\">' +\n                    '</dd>' +\n                '</script>'\n        },\n\n        _init: function() {\n            this._super();\n\n            this.mainContainer = $(this.options.mainContainer);\n            this.pageWrapper = $(this.options.pageWrapper);\n            this.toggleAction = $(mageTemplate(this.options.toggleActionTemplate, {}));\n\n            if (this.options.responsive) {\n                mediaCheck({\n                    media: '(min-width: 768px)',\n                    entry: $.proxy(function() {\n                        this._toggleDesktopMode();\n                    }, this),\n                    exit: $.proxy(function() {\n                        this._toggleMobileMode();\n                    }, this)\n                });\n            }\n        },\n\n        _bind: function() {\n            this._super();\n            this._bindDocumentEvents();\n        },\n\n        _bindDocumentEvents: function() {\n            if (!this.eventsBound) {\n                $(document)\n                    .on('click.toggleMenu', '.action.toggle.nav', $.proxy(function(e) {\n                        if ($(this.element).data('opened')) {\n                            this._hideMenu();\n                        } else {\n                            this._showMenu();\n                        }\n                        e.stopPropagation();\n                        this.mobileNav.scrollTop(0);\n                        this._fixedBackLink();\n                    }, this))\n                    .on('click.hideMenu', this.options.pageWrapper, $.proxy(function() {\n                        if ($(this.element).data('opened')) {\n                            this._hideMenu();\n                            this.mobileNav.scrollTop(0);\n                            this._fixedBackLink();\n                        }\n                    }, this))\n                    .on('click.showSubmenu', this.options.titleWithSubmenu, $.proxy(function(e) {\n                        this._showSubmenu(e);\n\n                        e.preventDefault();\n                        this.mobileNav.scrollTop(0);\n                        this._fixedBackLink();\n                    }, this))\n                    .on('click.hideSubmenu', '.action.back', $.proxy(function(e) {\n                        this._hideSubmenu(e);\n                        this.mobileNav.scrollTop(0);\n                        this._fixedBackLink();\n                    }, this));\n\n                this.eventsBound = true;\n            }\n        },\n\n        _showMenu: function() {\n            $(this.element).data('opened', true);\n            this.mainContainer.add( \"html\" ).addClass(this.options.openedMenuClass);\n        },\n\n        _hideMenu: function() {\n            $(this.element).data('opened', false);\n            this.mainContainer.add( \"html\" ).removeClass(this.options.openedMenuClass);\n        },\n\n        _showSubmenu: function(e) {\n            $(e.currentTarget).addClass('action back');\n            var submenu = $(e.currentTarget).siblings('.submenu');\n\n            submenu.addClass('opened');\n        },\n\n        _hideSubmenu: function(e) {\n            var submenuSelector = '.submenu',\n                submenu = $(e.currentTarget).next(submenuSelector);\n            $(e.currentTarget).removeClass('action back');\n            submenu.removeClass('opened');\n        },\n\n        _renderSubmenuActions: function() {\n            $.each(\n                $(this.options.itemWithSubmenu),\n                $.proxy(\n                    function(index, item) {\n                        var actions = $(\n                            mageTemplate(\n                                this.options.submenuActionsTemplate,\n                                {\n                                    category: $('> a > span', item).text(),\n                                    categoryURL: $('> a', item).attr('href')\n                                }\n                            )\n                            ),\n                            submenu = $('> .submenu', item),\n                            items = $('> ul', submenu);\n                            items.prepend(actions);\n                    },\n                    this\n                )\n            );\n        },\n\n        _toggleMobileMode: function() {\n            this._expandMenu();\n\n            $(this.options.topLevelSubmenu, $(this.options.topLevel, this.element))\n                .removeAttr('style');\n\n            this.toggleAction.insertBefore(this.options.toggleActionPlaceholder);\n            this.mobileNav = $(this.element).detach().clone();\n            this.mainContainer.prepend(this.mobileNav);\n            this.mobileNav.find('> ul').addClass('nav');\n            this._insertExtraItems();\n            this._wrapItemsInSections();\n            this.mobileNav.scroll($.proxy(\n                function() {\n                    this._fixedBackLink();\n                }, this\n            ));\n\n            this._renderSubmenuActions();\n            this._bindDocumentEvents();\n        },\n\n        _toggleDesktopMode: function() {\n            this.mobileNav && this.mobileNav.remove();\n            this.toggleAction.detach();\n            $(this.element).insertAfter(this.options.origNavPlaceholder);\n\n            $(document)\n                .off('click.toggleMenu', '.action.toggle.nav')\n                .off('click.hideMenu', this.options.pageWrapper)\n                .off('click.showSubmenu', this.options.titleWithSubmenu)\n                .off('click.hideSubmenu', '.action.back');\n\n            this.eventsBound = false;\n\n            this._applySubmenuStyles();\n        },\n\n        _insertExtraItems: function() {\n            if ($('.header.panel .switcher').length) {\n                var settings = $('.header.panel .switcher')\n                    .clone()\n                    .addClass('settings');\n\n                this.mobileNav.prepend(settings);\n            }\n\n            if ($('.footer .switcher').length) {\n                var footerSettings = $('.footer .switcher')\n                    .clone()\n                    .addClass('settings');\n\n                this.mobileNav.prepend(footerSettings);\n            }\n\n\n            if ($('.header.panel .header.links li').length) {\n                var account = $('.header.panel > .header.links')\n                    .clone()\n                    .addClass('account');\n\n                this.mobileNav.prepend(account);\n            }\n        },\n\n        _wrapItemsInSections: function() {\n            var account = $('> .account', this.mobileNav),\n                settings = $('> .settings', this.mobileNav),\n                nav = $('> .nav', this.mobileNav),\n                navigationSectionsWrapper = $(mageTemplate(this.options.navigationSectionsWrapperTemplate, {})),\n                navigationItemWrapper;\n\n            this.mobileNav.append(navigationSectionsWrapper);\n\n            if (nav.length) {\n                navigationItemWrapper = $(mageTemplate(this.options.navigationItemWrapperTemplate, {title: 'Menu'}));\n                navigationSectionsWrapper.append(navigationItemWrapper);\n                navigationItemWrapper.eq(1).append(nav);\n            }\n\n            if (account.length) {\n                navigationItemWrapper = $(mageTemplate(this.options.navigationItemWrapperTemplate, {title: 'Account'}));\n                navigationSectionsWrapper.append(navigationItemWrapper);\n                navigationItemWrapper.eq(1).append(account);\n            }\n\n            if (settings.length) {\n                navigationItemWrapper = $(\n                    mageTemplate(this.options.navigationItemWrapperTemplate, {title: 'Settings'})\n                );\n                navigationSectionsWrapper.append(navigationItemWrapper);\n                navigationItemWrapper.eq(1).append(settings);\n            }\n\n            navigationSectionsWrapper.addClass(\"navigation-tabs-\" + navigationSectionsWrapper.find('[data-section=\"title\"]').length);\n            navigationSectionsWrapper.terms();\n        },\n\n        _fixedBackLink: function() {\n            var linksBack = this.mobileNav.find('.submenu .action.back');\n            var linkBack = this.mobileNav.find('.submenu.opened > ul > .action.back').last();\n\n            linksBack.removeClass('fixed');\n\n            if(linkBack.length) {\n                var subMenu = linkBack.parent(),\n                    navOffset = this.mobileNav.find('.nav').position().top,\n                    linkBackHeight = linkBack.height();\n\n                if (navOffset <= 0) {\n                    linkBack.addClass('fixed');\n                    subMenu.css({\n                        paddingTop: linkBackHeight\n                    })\n                } else {\n                    linkBack.removeClass('fixed');\n                    subMenu.css({\n                        paddingTop: 0\n                    })\n                }\n            }\n        }\n    });\n\n    return $.mage.navigationMenu;\n});\n","js/jquery.lazyload.js":"/*!\r\n * Lazy Load - jQuery plugin for lazy loading images\r\n *\r\n * Copyright (c) 2007-2015 Mika Tuupola\r\n *\r\n * Licensed under the MIT license:\r\n *   http://www.opensource.org/licenses/mit-license.php\r\n *\r\n * Project home:\r\n *   http://www.appelsiini.net/projects/lazyload\r\n *\r\n * Version:  1.9.7\r\n *\r\n */\r\n(function (factory) {\r\n    'use strict';\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define([\r\n            'jquery'\r\n        ], factory);\r\n    } else {\r\n        factory(window.jQuery);\r\n    }\r\n}(function ($) {\r\n    'use strict';\r\n\r\n    var $window = $(window);\r\n\r\n    $.fn.lazyload = function(options) {\r\n        var elements = this;\r\n        var $container;\r\n        var settings = {\r\n            threshold       : 0,\r\n            failure_limit   : 0,\r\n            event           : \"scroll\",\r\n            effect          : \"show\",\r\n            container       : window,\r\n            data_attribute  : \"src\",\r\n            data_srcset     : \"srcset\",\r\n            skip_invisible  : false,\r\n            appear          : null,\r\n            load            : null,\r\n            placeholder     : \"data:image/gif;base64,R0lGODlhAQABAIAAAPT09P///yH5BAEAAAEALAAAAAABAAEAAAICRAEAOw==\"\r\n        };\r\n\r\n        function update() {\r\n            var counter = 0;\r\n\r\n            elements.each(function() {\r\n                var $this = $(this);\r\n                if (settings.skip_invisible && !$this.is(\":visible\")) {\r\n                    return;\r\n                }\r\n                if ($.abovethetop(this, settings) ||\r\n                    $.leftofbegin(this, settings)) {\r\n                        /* Nothing. */\r\n                } else if (!$.belowthefold(this, settings) &&\r\n                    !$.rightoffold(this, settings)) {\r\n                        $this.trigger(\"appear\");\r\n                        /* if we found an image we'll load, reset the counter */\r\n                        counter = 0;\r\n                } else {\r\n                    if (++counter > settings.failure_limit) {\r\n                        return false;\r\n                    }\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        if(options) {\r\n            /* Maintain BC for a couple of versions. */\r\n            if (undefined !== options.failurelimit) {\r\n                options.failure_limit = options.failurelimit;\r\n                delete options.failurelimit;\r\n            }\r\n            if (undefined !== options.effectspeed) {\r\n                options.effect_speed = options.effectspeed;\r\n                delete options.effectspeed;\r\n            }\r\n\r\n            $.extend(settings, options);\r\n        }\r\n\r\n        /* Cache container as jQuery as object. */\r\n        $container = (settings.container === undefined ||\r\n                      settings.container === window) ? $window : $(settings.container);\r\n\r\n        /* Fire one scroll event per scroll. Not one scroll event per image. */\r\n        if (0 === settings.event.indexOf(\"scroll\")) {\r\n            $container.bind(settings.event, function() {\r\n                return update();\r\n            });\r\n        }\r\n\r\n        this.each(function() {\r\n            var self = this;\r\n            var $self = $(self);\r\n\r\n            self.loaded = false;\r\n\r\n            /* If no src attribute given use data:uri. */\r\n            //if ($self.attr(\"src\") === undefined || $self.attr(\"src\") === false) {\r\n                if ($self.is(\"img\")) {\r\n                    $self.attr(\"src\", settings.placeholder);\r\n                    if ($self.attr(\"width\"))\r\n                        $self.css(\"height\",$self.width()*$self.attr(\"height\")/$self.attr(\"width\") + \"px\");\r\n                }\r\n            //}\r\n\r\n            /* When appear is triggered load original image. */\r\n            $self.one(\"appear\", function() {\r\n                if (!this.loaded) {\r\n                    if (settings.appear) {\r\n                        var elements_left = elements.length;\r\n                        settings.appear.call(self, elements_left, settings);\r\n                    }\r\n                    $(\"<img />\")\r\n                        .bind(\"load\", function() {\r\n\r\n                            var original = $self.attr(\"data-\" + settings.data_attribute),\r\n                                srcset = $self.attr(\"data-\" + settings.data_srcset);\r\n                            $self.hide();\r\n                            if ($self.is(\"img\")) {\r\n                                $self.attr(\"src\", original);\r\n                                if(srcset) {\r\n                                    $self.attr(\"srcset\", srcset);\r\n                                }\r\n                            } else {\r\n                                $self.css(\"background-image\", \"url('\" + original + \"')\");\r\n                            }\r\n                            $self[settings.effect](settings.effect_speed);\r\n\r\n                            self.loaded = true;\r\n\r\n                            /* Remove image from array so it is not looped next time. */\r\n                            var temp = $.grep(elements, function(element) {\r\n                                return !element.loaded;\r\n                            });\r\n                            elements = $(temp);\r\n                            $self.addClass(\"porto-lazyload-loaded\");\r\n                            $self.css(\"height\",\"\");\r\n                            if (settings.load) {\r\n                                var elements_left = elements.length;\r\n                                settings.load.call(self, elements_left, settings);\r\n                            }\r\n                        })\r\n                        .attr(\"src\", $self.attr(\"data-\" + settings.data_attribute));\r\n                }\r\n            });\r\n\r\n            /* When wanted event is triggered load original image */\r\n            /* by triggering appear.                              */\r\n            if (0 !== settings.event.indexOf(\"scroll\")) {\r\n                $self.bind(settings.event, function() {\r\n                    if (!self.loaded) {\r\n                        $self.trigger(\"appear\");\r\n                    }\r\n                });\r\n            }\r\n\r\n            if ($self.is(\":hidden\") && !self.loaded) {\r\n                $self.trigger(\"appear\");\r\n            }\r\n        });\r\n\r\n        /* Check if something appears when window is resized. */\r\n        $window.bind(\"resize\", function() {\r\n            update();\r\n        });\r\n\r\n        /* With IOS5 force loading images when navigating with back button. */\r\n        /* Non optimal workaround. */\r\n        if ((/(?:iphone|ipod|ipad).*os 5/gi).test(navigator.appVersion)) {\r\n            $window.bind(\"pageshow\", function(event) {\r\n                if (event.originalEvent && event.originalEvent.persisted) {\r\n                    elements.each(function() {\r\n                        $(this).trigger(\"appear\");\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        /* Force initial check if images should appear. */\r\n        $(document).ready(function() {\r\n            update();\r\n        });\r\n\r\n        return this;\r\n    };\r\n\r\n    /* Convenience methods in jQuery namespace.           */\r\n    /* Use as  $.belowthefold(element, {threshold : 100, container : window}) */\r\n\r\n    $.belowthefold = function(element, settings) {\r\n        var fold;\r\n\r\n        if (settings.container === undefined || settings.container === window) {\r\n            fold = (window.innerHeight ? window.innerHeight : $window.height()) + $window.scrollTop();\r\n        } else {\r\n            fold = $(settings.container).offset().top + $(settings.container).height();\r\n        }\r\n\r\n        return fold <= $(element).offset().top - settings.threshold;\r\n    };\r\n\r\n    $.rightoffold = function(element, settings) {\r\n        var fold;\r\n\r\n        if (settings.container === undefined || settings.container === window) {\r\n            fold = $window.width() + $window.scrollLeft();\r\n        } else {\r\n            fold = $(settings.container).offset().left + $(settings.container).width();\r\n        }\r\n\r\n        return fold <= $(element).offset().left - settings.threshold;\r\n    };\r\n\r\n    $.abovethetop = function(element, settings) {\r\n        var fold;\r\n\r\n        if (settings.container === undefined || settings.container === window) {\r\n            fold = $window.scrollTop();\r\n        } else {\r\n            fold = $(settings.container).offset().top;\r\n        }\r\n\r\n        return fold >= $(element).offset().top + settings.threshold  + $(element).height();\r\n    };\r\n\r\n    $.leftofbegin = function(element, settings) {\r\n        var fold;\r\n\r\n        if (settings.container === undefined || settings.container === window) {\r\n            fold = $window.scrollLeft();\r\n        } else {\r\n            fold = $(settings.container).offset().left;\r\n        }\r\n\r\n        return fold >= $(element).offset().left + settings.threshold + $(element).width();\r\n    };\r\n\r\n    $.inviewport = function(element, settings) {\r\n         return !$.rightoffold(element, settings) && !$.leftofbegin(element, settings) &&\r\n                !$.belowthefold(element, settings) && !$.abovethetop(element, settings);\r\n     };\r\n\r\n    /* Custom selectors for your convenience.   */\r\n    /* Use as $(\"img:below-the-fold\").something() or */\r\n    /* $(\"img\").filter(\":below-the-fold\").something() which is faster */\r\n\r\n    $.extend($.expr[\":\"], {\r\n        \"below-the-fold\" : function(a) { return $.belowthefold(a, {threshold : 0}); },\r\n        \"above-the-top\"  : function(a) { return !$.belowthefold(a, {threshold : 0}); },\r\n        \"right-of-screen\": function(a) { return $.rightoffold(a, {threshold : 0}); },\r\n        \"left-of-screen\" : function(a) { return !$.rightoffold(a, {threshold : 0}); },\r\n        \"in-viewport\"    : function(a) { return $.inviewport(a, {threshold : 0}); },\r\n        /* Maintain BC for couple of versions. */\r\n        \"above-the-fold\" : function(a) { return !$.belowthefold(a, {threshold : 0}); },\r\n        \"right-of-fold\"  : function(a) { return $.rightoffold(a, {threshold : 0}); },\r\n        \"left-of-fold\"   : function(a) { return !$.rightoffold(a, {threshold : 0}); }\r\n    });\r\n\r\n}));","js/jquery.stellar.min.js":"/*! Stellar.js v0.6.2 | Copyright 2014, Mark Dalgleish | http://markdalgleish.com/projects/stellar.js | http://markdalgleish.mit-license.org */\n(function (factory) {\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery'\n        ], factory);\n    } else {\n        factory(window.jQuery);\n    }\n}(function ($) {\n!function(a,b,c,d){function e(b,c){this.element=b,this.options=a.extend({},g,c),this._defaults=g,this._name=f,this.init()}var f=\"stellar\",g={scrollProperty:\"scroll\",positionProperty:\"position\",horizontalScrolling:!0,verticalScrolling:!0,horizontalOffset:0,verticalOffset:0,responsive:!1,parallaxBackgrounds:!0,parallaxElements:!0,hideDistantElements:!0,hideElement:function(a){a.hide()},showElement:function(a){a.show()}},h={scroll:{getLeft:function(a){return a.scrollLeft()},setLeft:function(a,b){a.scrollLeft(b)},getTop:function(a){return a.scrollTop()},setTop:function(a,b){a.scrollTop(b)}},position:{getLeft:function(a){return-1*parseInt(a.css(\"left\"),10)},getTop:function(a){return-1*parseInt(a.css(\"top\"),10)}},margin:{getLeft:function(a){return-1*parseInt(a.css(\"margin-left\"),10)},getTop:function(a){return-1*parseInt(a.css(\"margin-top\"),10)}},transform:{getLeft:function(a){var b=getComputedStyle(a[0])[k];return\"none\"!==b?-1*parseInt(b.match(/(-?[0-9]+)/g)[4],10):0},getTop:function(a){var b=getComputedStyle(a[0])[k];return\"none\"!==b?-1*parseInt(b.match(/(-?[0-9]+)/g)[5],10):0}}},i={position:{setLeft:function(a,b){a.css(\"left\",b)},setTop:function(a,b){a.css(\"top\",b)}},transform:{setPosition:function(a,b,c,d,e){a[0].style[k]=\"translate3d(\"+(b-c)+\"px, \"+(d-e)+\"px, 0)\"}}},j=function(){var b,c=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,d=a(\"script\")[0].style,e=\"\";for(b in d)if(c.test(b)){e=b.match(c)[0];break}return\"WebkitOpacity\"in d&&(e=\"Webkit\"),\"KhtmlOpacity\"in d&&(e=\"Khtml\"),function(a){return e+(e.length>0?a.charAt(0).toUpperCase()+a.slice(1):a)}}(),k=j(\"transform\"),l=a(\"<div />\",{style:\"background:#fff\"}).css(\"background-position-x\")!==d,m=l?function(a,b,c){a.css({\"background-position-x\":b,\"background-position-y\":c})}:function(a,b,c){a.css(\"background-position\",b+\" \"+c)},n=l?function(a){return[a.css(\"background-position-x\"),a.css(\"background-position-y\")]}:function(a){return a.css(\"background-position\").split(\" \")},o=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||function(a){setTimeout(a,1e3/60)};e.prototype={init:function(){this.options.name=f+\"_\"+Math.floor(1e9*Math.random()),this._defineElements(),this._defineGetters(),this._defineSetters(),this._handleWindowLoadAndResize(),this._detectViewport(),this.refresh({firstLoad:!0}),\"scroll\"===this.options.scrollProperty?this._handleScrollEvent():this._startAnimationLoop()},_defineElements:function(){this.element===c.body&&(this.element=b),this.$scrollElement=a(this.element),this.$element=this.element===b?a(\"body\"):this.$scrollElement,this.$viewportElement=this.options.viewportElement!==d?a(this.options.viewportElement):this.$scrollElement[0]===b||\"scroll\"===this.options.scrollProperty?this.$scrollElement:this.$scrollElement.parent()},_defineGetters:function(){var a=this,b=h[a.options.scrollProperty];this._getScrollLeft=function(){return b.getLeft(a.$scrollElement)},this._getScrollTop=function(){return b.getTop(a.$scrollElement)}},_defineSetters:function(){var b=this,c=h[b.options.scrollProperty],d=i[b.options.positionProperty],e=c.setLeft,f=c.setTop;this._setScrollLeft=\"function\"==typeof e?function(a){e(b.$scrollElement,a)}:a.noop,this._setScrollTop=\"function\"==typeof f?function(a){f(b.$scrollElement,a)}:a.noop,this._setPosition=d.setPosition||function(a,c,e,f,g){b.options.horizontalScrolling&&d.setLeft(a,c,e),b.options.verticalScrolling&&d.setTop(a,f,g)}},_handleWindowLoadAndResize:function(){var c=this,d=a(b);c.options.responsive&&d.bind(\"load.\"+this.name,function(){c.refresh()}),d.bind(\"resize.\"+this.name,function(){c._detectViewport(),c.options.responsive&&c.refresh()})},refresh:function(c){var d=this,e=d._getScrollLeft(),f=d._getScrollTop();c&&c.firstLoad||this._reset(),this._setScrollLeft(0),this._setScrollTop(0),this._setOffsets(),this._findParticles(),this._findBackgrounds(),c&&c.firstLoad&&/WebKit/.test(navigator.userAgent)&&a(b).load(function(){var a=d._getScrollLeft(),b=d._getScrollTop();d._setScrollLeft(a+1),d._setScrollTop(b+1),d._setScrollLeft(a),d._setScrollTop(b)}),this._setScrollLeft(e),this._setScrollTop(f)},_detectViewport:function(){var a=this.$viewportElement.offset(),b=null!==a&&a!==d;this.viewportWidth=this.$viewportElement.width(),this.viewportHeight=this.$viewportElement.height(),this.viewportOffsetTop=b?a.top:0,this.viewportOffsetLeft=b?a.left:0},_findParticles:function(){{var b=this;this._getScrollLeft(),this._getScrollTop()}if(this.particles!==d)for(var c=this.particles.length-1;c>=0;c--)this.particles[c].$element.data(\"stellar-elementIsActive\",d);this.particles=[],this.options.parallaxElements&&this.$element.find(\"[data-stellar-ratio]\").each(function(){var c,e,f,g,h,i,j,k,l,m=a(this),n=0,o=0,p=0,q=0;if(m.data(\"stellar-elementIsActive\")){if(m.data(\"stellar-elementIsActive\")!==this)return}else m.data(\"stellar-elementIsActive\",this);b.options.showElement(m),m.data(\"stellar-startingLeft\")?(m.css(\"left\",m.data(\"stellar-startingLeft\")),m.css(\"top\",m.data(\"stellar-startingTop\"))):(m.data(\"stellar-startingLeft\",m.css(\"left\")),m.data(\"stellar-startingTop\",m.css(\"top\"))),f=m.position().left,g=m.position().top,h=\"auto\"===m.css(\"margin-left\")?0:parseInt(m.css(\"margin-left\"),10),i=\"auto\"===m.css(\"margin-top\")?0:parseInt(m.css(\"margin-top\"),10),k=m.offset().left-h,l=m.offset().top-i,m.parents().each(function(){var b=a(this);return b.data(\"stellar-offset-parent\")===!0?(n=p,o=q,j=b,!1):(p+=b.position().left,void(q+=b.position().top))}),c=m.data(\"stellar-horizontal-offset\")!==d?m.data(\"stellar-horizontal-offset\"):j!==d&&j.data(\"stellar-horizontal-offset\")!==d?j.data(\"stellar-horizontal-offset\"):b.horizontalOffset,e=m.data(\"stellar-vertical-offset\")!==d?m.data(\"stellar-vertical-offset\"):j!==d&&j.data(\"stellar-vertical-offset\")!==d?j.data(\"stellar-vertical-offset\"):b.verticalOffset,b.particles.push({$element:m,$offsetParent:j,isFixed:\"fixed\"===m.css(\"position\"),horizontalOffset:c,verticalOffset:e,startingPositionLeft:f,startingPositionTop:g,startingOffsetLeft:k,startingOffsetTop:l,parentOffsetLeft:n,parentOffsetTop:o,stellarRatio:m.data(\"stellar-ratio\")!==d?m.data(\"stellar-ratio\"):1,width:m.outerWidth(!0),height:m.outerHeight(!0),isHidden:!1})})},_findBackgrounds:function(){var b,c=this,e=this._getScrollLeft(),f=this._getScrollTop();this.backgrounds=[],this.options.parallaxBackgrounds&&(b=this.$element.find(\"[data-stellar-background-ratio]\"),this.$element.data(\"stellar-background-ratio\")&&(b=b.add(this.$element)),b.each(function(){var b,g,h,i,j,k,l,o=a(this),p=n(o),q=0,r=0,s=0,t=0;if(o.data(\"stellar-backgroundIsActive\")){if(o.data(\"stellar-backgroundIsActive\")!==this)return}else o.data(\"stellar-backgroundIsActive\",this);o.data(\"stellar-backgroundStartingLeft\")?m(o,o.data(\"stellar-backgroundStartingLeft\"),o.data(\"stellar-backgroundStartingTop\")):(o.data(\"stellar-backgroundStartingLeft\",p[0]),o.data(\"stellar-backgroundStartingTop\",p[1])),h=\"auto\"===o.css(\"margin-left\")?0:parseInt(o.css(\"margin-left\"),10),i=\"auto\"===o.css(\"margin-top\")?0:parseInt(o.css(\"margin-top\"),10),j=o.offset().left-h-e,k=o.offset().top-i-f,o.parents().each(function(){var b=a(this);return b.data(\"stellar-offset-parent\")===!0?(q=s,r=t,l=b,!1):(s+=b.position().left,void(t+=b.position().top))}),b=o.data(\"stellar-horizontal-offset\")!==d?o.data(\"stellar-horizontal-offset\"):l!==d&&l.data(\"stellar-horizontal-offset\")!==d?l.data(\"stellar-horizontal-offset\"):c.horizontalOffset,g=o.data(\"stellar-vertical-offset\")!==d?o.data(\"stellar-vertical-offset\"):l!==d&&l.data(\"stellar-vertical-offset\")!==d?l.data(\"stellar-vertical-offset\"):c.verticalOffset,c.backgrounds.push({$element:o,$offsetParent:l,isFixed:\"fixed\"===o.css(\"background-attachment\"),horizontalOffset:b,verticalOffset:g,startingValueLeft:p[0],startingValueTop:p[1],startingBackgroundPositionLeft:isNaN(parseInt(p[0],10))?0:parseInt(p[0],10),startingBackgroundPositionTop:isNaN(parseInt(p[1],10))?0:parseInt(p[1],10),startingPositionLeft:o.position().left,startingPositionTop:o.position().top,startingOffsetLeft:j,startingOffsetTop:k,parentOffsetLeft:q,parentOffsetTop:r,stellarRatio:o.data(\"stellar-background-ratio\")===d?1:o.data(\"stellar-background-ratio\")})}))},_reset:function(){var a,b,c,d,e;for(e=this.particles.length-1;e>=0;e--)a=this.particles[e],b=a.$element.data(\"stellar-startingLeft\"),c=a.$element.data(\"stellar-startingTop\"),this._setPosition(a.$element,b,b,c,c),this.options.showElement(a.$element),a.$element.data(\"stellar-startingLeft\",null).data(\"stellar-elementIsActive\",null).data(\"stellar-backgroundIsActive\",null);for(e=this.backgrounds.length-1;e>=0;e--)d=this.backgrounds[e],d.$element.data(\"stellar-backgroundStartingLeft\",null).data(\"stellar-backgroundStartingTop\",null),m(d.$element,d.startingValueLeft,d.startingValueTop)},destroy:function(){this._reset(),this.$scrollElement.unbind(\"resize.\"+this.name).unbind(\"scroll.\"+this.name),this._animationLoop=a.noop,a(b).unbind(\"load.\"+this.name).unbind(\"resize.\"+this.name)},_setOffsets:function(){var c=this,d=a(b);d.unbind(\"resize.horizontal-\"+this.name).unbind(\"resize.vertical-\"+this.name),\"function\"==typeof this.options.horizontalOffset?(this.horizontalOffset=this.options.horizontalOffset(),d.bind(\"resize.horizontal-\"+this.name,function(){c.horizontalOffset=c.options.horizontalOffset()})):this.horizontalOffset=this.options.horizontalOffset,\"function\"==typeof this.options.verticalOffset?(this.verticalOffset=this.options.verticalOffset(),d.bind(\"resize.vertical-\"+this.name,function(){c.verticalOffset=c.options.verticalOffset()})):this.verticalOffset=this.options.verticalOffset},_repositionElements:function(){var a,b,c,d,e,f,g,h,i,j,k=this._getScrollLeft(),l=this._getScrollTop(),n=!0,o=!0;if(this.currentScrollLeft!==k||this.currentScrollTop!==l||this.currentWidth!==this.viewportWidth||this.currentHeight!==this.viewportHeight){for(this.currentScrollLeft=k,this.currentScrollTop=l,this.currentWidth=this.viewportWidth,this.currentHeight=this.viewportHeight,j=this.particles.length-1;j>=0;j--)a=this.particles[j],b=a.isFixed?1:0,this.options.horizontalScrolling?(f=(k+a.horizontalOffset+this.viewportOffsetLeft+a.startingPositionLeft-a.startingOffsetLeft+a.parentOffsetLeft)*-(a.stellarRatio+b-1)+a.startingPositionLeft,h=f-a.startingPositionLeft+a.startingOffsetLeft):(f=a.startingPositionLeft,h=a.startingOffsetLeft),this.options.verticalScrolling?(g=(l+a.verticalOffset+this.viewportOffsetTop+a.startingPositionTop-a.startingOffsetTop+a.parentOffsetTop)*-(a.stellarRatio+b-1)+a.startingPositionTop,i=g-a.startingPositionTop+a.startingOffsetTop):(g=a.startingPositionTop,i=a.startingOffsetTop),this.options.hideDistantElements&&(o=!this.options.horizontalScrolling||h+a.width>(a.isFixed?0:k)&&h<(a.isFixed?0:k)+this.viewportWidth+this.viewportOffsetLeft,n=!this.options.verticalScrolling||i+a.height>(a.isFixed?0:l)&&i<(a.isFixed?0:l)+this.viewportHeight+this.viewportOffsetTop),o&&n?(a.isHidden&&(this.options.showElement(a.$element),a.isHidden=!1),this._setPosition(a.$element,f,a.startingPositionLeft,g,a.startingPositionTop)):a.isHidden||(this.options.hideElement(a.$element),a.isHidden=!0);for(j=this.backgrounds.length-1;j>=0;j--)c=this.backgrounds[j],b=c.isFixed?0:1,d=this.options.horizontalScrolling?(k+c.horizontalOffset-this.viewportOffsetLeft-c.startingOffsetLeft+c.parentOffsetLeft-c.startingBackgroundPositionLeft)*(b-c.stellarRatio)+\"px\":c.startingValueLeft,e=this.options.verticalScrolling?(l+c.verticalOffset-this.viewportOffsetTop-c.startingOffsetTop+c.parentOffsetTop-c.startingBackgroundPositionTop)*(b-c.stellarRatio)+\"px\":c.startingValueTop,m(c.$element,d,e)}},_handleScrollEvent:function(){var a=this,b=!1,c=function(){a._repositionElements(),b=!1},d=function(){b||(o(c),b=!0)};this.$scrollElement.bind(\"scroll.\"+this.name,d),d()},_startAnimationLoop:function(){var a=this;this._animationLoop=function(){o(a._animationLoop),a._repositionElements()},this._animationLoop()}},a.fn[f]=function(b){var c=arguments;return b===d||\"object\"==typeof b?this.each(function(){a.data(this,\"plugin_\"+f)||a.data(this,\"plugin_\"+f,new e(this,b))}):\"string\"==typeof b&&\"_\"!==b[0]&&\"init\"!==b?this.each(function(){var d=a.data(this,\"plugin_\"+f);d instanceof e&&\"function\"==typeof d[b]&&d[b].apply(d,Array.prototype.slice.call(c,1)),\"destroy\"===b&&a.data(this,\"plugin_\"+f,null)}):void 0},a[f]=function(){var c=a(b);return c.stellar.apply(c,Array.prototype.slice.call(arguments,0))},a[f].scrollProperty=h,a[f].positionProperty=i,b.Stellar=e}(jQuery,this,document);\n}));","js/theme.js":"/**\n * Copyright \u00a9 2015 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n//require([\n//    'jquery',\n//    'bootstrap/js/bootstrap.min'\n//], function ($) {\n\n//});\nrequire([\n    'jquery',\n    'mage/smart-keyboard-handler',\n    'mage/mage',\n    'mage/ie-class-fixer',\n    'domReady!'\n], function ($, keyboardHandler) {\n    'use strict';\n    $(document).ready(function(){\n        $('.cart-summary').mage('sticky', {\n            container: '#maincontent'\n        });\n\n        $('.panel.header .header.links').clone().appendTo('#store\\\\.links');\n    });\n    keyboardHandler.apply();\n});\n/******************** Init Parallax ***********************/\nrequire([\n    'jquery',\n    'js/jquery.stellar.min'\n], function ($) {\n    $(document).ready(function(){\n        $(window).stellar({\n            responsive: true,\n            scrollProperty: 'scroll',\n            parallaxElements: false,\n            horizontalScrolling: false,\n            horizontalOffset: 0,\n            verticalOffset: 0\n        });\n    });\n});\n\nrequire([\n    'jquery'\n], function ($) {\n    (function() {\n        var ev = new $.Event('classadded'),\n            orig = $.fn.addClass;\n        $.fn.addClass = function() {\n            $(this).trigger(ev, arguments);\n            return orig.apply(this, arguments);\n        }\n    })();\n    $.fn.extend({\n        scrollToMe: function(){\n            if($(this).length){\n                var top = $(this).offset().top - 100;\n                $('html,body').animate({scrollTop: top}, 300);\n            }\n        },\n        scrollToJustMe: function(){\n            if($(this).length){\n                var top = jQuery(this).offset().top;\n                $('html,body').animate({scrollTop: top}, 300);\n            }\n        }\n    });\n    $(document).ready(function(){\n        var windowScroll_t;\n        $(window).scroll(function(){\n            clearTimeout(windowScroll_t);\n            windowScroll_t = setTimeout(function(){\n                if(jQuery(this).scrollTop() > 100){\n                    $('#totop').fadeIn();\n                }else{\n                    $('#totop').fadeOut();\n                }\n            }, 500);\n        });\n        $('#totop').off(\"click\").on(\"click\",function(){\n            $('html, body').animate({scrollTop: 0}, 600);\n        });\n        if ($('body').hasClass('checkout-cart-index')) {\n            if ($('#co-shipping-method-form .fieldset.rates').length > 0 && $('#co-shipping-method-form .fieldset.rates :checked').length === 0) {\n                $('#block-shipping').on('collapsiblecreate', function () {\n                    $('#block-shipping').collapsible('forceActivate');\n                });\n            }\n        }\n        $(\".products-grid .weltpixel-quickview\").each(function(){\n            $(this).appendTo($(this).parent().parent().children(\".product-item-photo\"));\n        }); \n        $(\".word-rotate\").each(function() {\n\n            var $this = $(this),\n                itemsWrapper = $(this).find(\".word-rotate-items\"),\n                items = itemsWrapper.find(\"> span\"),\n                firstItem = items.eq(0),\n                firstItemClone = firstItem.clone(),\n                itemHeight = 0,\n                currentItem = 1,\n                currentTop = 0;\n\n            itemHeight = firstItem.height();\n\n            itemsWrapper.append(firstItemClone);\n\n            $this\n                .height(itemHeight)\n                .addClass(\"active\");\n\n            setInterval(function() {\n                currentTop = (currentItem * itemHeight);\n                \n                itemsWrapper.animate({\n                    top: -(currentTop) + \"px\"\n                }, 300, function() {\n                    currentItem++;\n                    if(currentItem > items.length) {\n                        itemsWrapper.css(\"top\", 0);\n                        currentItem = 1;\n                    }\n                });\n                \n            }, 2000);\n\n        });\n        $(\".top-links-icon\").off(\"click\").on(\"click\", function(e){\n            if($(this).parent().children(\"ul.links\").hasClass(\"show\")) {\n                $(this).parent().children(\"ul.links\").removeClass(\"show\");\n            } else {\n                $(this).parent().children(\"ul.links\").addClass(\"show\");\n            }\n            e.stopPropagation();\n        });\n        $(\".top-links-icon\").parent().click(function(e){\n            e.stopPropagation();\n        });\n        $(\".search-toggle-icon\").click(function(e){\n            if($(this).parent().children(\".block-search\").hasClass(\"show\")) {\n                $(this).parent().children(\".block-search\").removeClass(\"show\");\n            } else {\n                $(this).parent().children(\".block-search\").addClass(\"show\");\n            }\n            e.stopPropagation();\n        });\n        $(\".search-toggle-icon\").parent().click(function(e){\n            e.stopPropagation();\n        });\n        $(\"html,body\").click(function(){\n            $(\".search-toggle-icon\").parent().children(\".block-search\").removeClass(\"show\");\n            $(\".top-links-icon\").parent().children(\"ul.links\").removeClass(\"show\");\n        });\n\n        /********************* Qty Holder **************************/\n        $(document).on(\"click\", \".qtyplus\", function(e) {\n            // Stop acting like a button\n            e.preventDefault();\n            // Get its current value\n            var currentVal = parseInt($(this).parents('form').find('input[name=\"qty\"]').val());\n            // If is not undefined\n            if (!isNaN(currentVal)) {\n                // Increment\n                $(this).parents('form').find('input[name=\"qty\"]').val(currentVal + 1);\n            } else {\n                // Otherwise put a 0 there\n                $(this).parents('form').find('input[name=\"qty\"]').val(0);\n            }\n        });\n        // This button will decrement the value till 0\n        $(document).on(\"click\", \".qtyminus\", function(e) {\n            // Stop acting like a button\n            e.preventDefault();\n            // Get the field name\n            fieldName = $(this).attr('field');\n            // Get its current value\n            var currentVal = parseInt($(this).parents('form').find('input[name=\"qty\"]').val());\n            // If it isn't undefined or its greater than 0\n            if (!isNaN(currentVal) && currentVal > 0) {\n                // Decrement one\n                $(this).parents('form').find('input[name=\"qty\"]').val(currentVal - 1);\n            } else {\n                // Otherwise put a 0 there\n                $(this).parents('form').find('input[name=\"qty\"]').val(0);\n            }\n        });\n        $(\".qty-inc\").unbind('click').click(function(){\n            if($(this).parents('.field.qty').find(\"input.input-text.qty\").is(':enabled')){\n                $(this).parents('.field.qty').find(\"input.input-text.qty\").val((+$(this).parents('.field.qty').find(\"input.input-text.qty\").val() + 1) || 0);\n                $(this).parents('.field.qty').find(\"input.input-text.qty\").trigger('change');\n                $(this).focus();\n            }\n        });\n        $(\".qty-dec\").unbind('click').click(function(){\n            if($(this).parents('.field.qty').find(\"input.input-text.qty\").is(':enabled')){\n                $(this).parents('.field.qty').find(\"input.input-text.qty\").val(($(this).parents('.field.qty').find(\"input.input-text.qty\").val() - 1 > 0) ? ($(this).parents('.field.qty').find(\"input.input-text.qty\").val() - 1) : 0);\n                $(this).parents('.field.qty').find(\"input.input-text.qty\").trigger('change');\n                $(this).focus();\n            }\n        });\n        \n        /********** Fullscreen Slider ************/\n        var s_width = $(window).innerWidth();\n        var s_height = $(window).innerHeight();\n        var s_ratio = s_width/s_height;\n        var v_width=320;\n        var v_height=240;\n        var v_ratio = v_width/v_height;\n        $(\".full-screen-slider div.item\").css(\"position\",\"relative\");\n        $(\".full-screen-slider div.item\").css(\"overflow\",\"hidden\");\n        $(\".full-screen-slider div.item\").width(s_width);\n        $(\".full-screen-slider div.item\").height(s_height);\n        $(\".full-screen-slider div.item > video\").css(\"position\",\"absolute\");\n        $(\".full-screen-slider div.item > video\").bind(\"loadedmetadata\",function(){\n            v_width = this.videoWidth;\n            v_height = this.videoHeight;\n            v_ratio = v_width/v_height;\n            if(s_ratio>=v_ratio){\n                $(this).width(s_width);\n                $(this).height(\"\");\n                $(this).css(\"left\",\"0px\");\n                $(this).css(\"top\",(s_height-s_width/v_width*v_height)/2+\"px\");\n            }else{\n                $(this).width(\"\");\n                $(this).height(s_height);\n                $(this).css(\"left\",(s_width-s_height/v_height*v_width)/2+\"px\");\n                $(this).css(\"top\",\"0px\");\n            }\n            $(this).get(0).play();\n        });\n        if($(\".page-header\").hasClass(\"type10\") || $(\".page-header\").hasClass(\"type22\")) {\n            if(s_width >= 992){\n                $(\".navigation\").addClass(\"side-megamenu\")\n            } else {\n                $(\".navigation\").removeClass(\"side-megamenu\")\n            }\n        }\n        \n        $(window).resize(function(){\n            s_width = $(window).innerWidth();\n            s_height = $(window).innerHeight();\n            s_ratio = s_width/s_height;\n            $(\".full-screen-slider div.item\").width(s_width);\n            $(\".full-screen-slider div.item\").height(s_height);\n            $(\".full-screen-slider div.item > video\").each(function(){\n                if(s_ratio>=v_ratio){\n                    $(this).width(s_width);\n                    $(this).height(\"\");\n                    $(this).css(\"left\",\"0px\");\n                    $(this).css(\"top\",(s_height-s_width/v_width*v_height)/2+\"px\");\n                }else{\n                    $(this).width(\"\");\n                    $(this).height(s_height);\n                    $(this).css(\"left\",(s_width-s_height/v_height*v_width)/2+\"px\");\n                    $(this).css(\"top\",\"0px\");\n                }\n            });\n            if($(\".page-header\").hasClass(\"type10\") || $(\".page-header\").hasClass(\"type22\")) {\n                if(s_width >= 992){\n                    $(\".navigation\").addClass(\"side-megamenu\")\n                } else {\n                    $(\".navigation\").removeClass(\"side-megamenu\")\n                }\n            }\n        });\n        var breadcrumb_pos_top = 0;\n        $(window).scroll(function(){\n            if(!$(\"body\").hasClass(\"cms-index-index\")){\n                var side_header_height = $(\".page-header.type10, .page-header.type22\").innerHeight();\n                var window_height = $(window).height();\n                if(side_header_height-window_height<$(window).scrollTop()){\n                    if(!$(\".page-header.type10, .page-header.type22\").hasClass(\"fixed-bottom\"))\n                        $(\".page-header.type10, .page-header.type22\").addClass(\"fixed-bottom\");\n                }\n                if(side_header_height-window_height>=$(window).scrollTop()){\n                    if($(\".page-header.type10, .page-header.type22\").hasClass(\"fixed-bottom\"))\n                        $(\".page-header.type10, .page-header.type22\").removeClass(\"fixed-bottom\");\n                }\n            }\n            if($(\"body.side-header .page-wrapper > .breadcrumbs\").length){\n                if(!$(\"body.side-header .page-wrapper > .breadcrumbs\").hasClass(\"fixed-position\")){\n                    breadcrumb_pos_top = $(\"body.side-header .page-wrapper > .breadcrumbs\").offset().top;\n                    if($(\"body.side-header .page-wrapper > .breadcrumbs\").offset().top<$(window).scrollTop()){\n                        $(\"body.side-header .page-wrapper > .breadcrumbs\").addClass(\"fixed-position\");\n                    }\n                }else{\n                    if($(window).scrollTop()<=1){\n                        $(\"body.side-header .page-wrapper > .breadcrumbs\").removeClass(\"fixed-position\");\n                    }\n                }\n            }\n        });\n    });\n});\nrequire([\n    'jquery',\n    'js/jquery.lazyload'\n], function ($) {\n    $(document).ready(function(){\n        $(\"img.porto-lazyload:not(.porto-lazyload-loaded)\").lazyload({effect:\"fadeIn\"});\n        if ($('.porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').length) {\n            $('.porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').on('changed.owl.carousel', function() {\n                $(this).find('.porto-lazyload:not(.porto-lazyload-loaded)').trigger('appear');\n            });\n            $('.porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').on('initialized.owl.carousel', function() {\n                $(this).find('.porto-lazyload:not(.porto-lazyload-loaded)').trigger('appear');\n            });\n        }\n        window.setTimeout(function(){\n            $('.sidebar-filterproducts').find('.porto-lazyload:not(.porto-lazyload-loaded)').trigger('appear');\n        },500);\n    });\n});","js/responsive.js":"/**\n * Copyright \u00a9 2015 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'matchMedia',\n    'mage/tabs',\n    'domReady!'\n], function ($, mediaCheck) {\n    'use strict';\n\n    mediaCheck({\n        media: '(min-width: 768px)',\n        // Switch to Desktop Version\n        entry: function () {\n            (function () {\n\n                var productInfoMain = $('.product-info-main'),\n                    productInfoAdditional = $('#product-info-additional');\n\n                if (productInfoAdditional.length) {\n                    productInfoAdditional.addClass('hidden');\n                    productInfoMain.removeClass('responsive');\n                }\n\n            })();\n\n            var galleryElement = $('[data-role=media-gallery]');\n\n            if (galleryElement.length && galleryElement.data('mageZoom')) {\n                galleryElement.zoom('enable');\n            }\n\n            if (galleryElement.length && galleryElement.data('mageGallery')) {\n                galleryElement.gallery('option', 'disableLinks', true);\n                galleryElement.gallery('option', 'showNav', false);\n                galleryElement.gallery('option', 'showThumbs', true);\n            }\n\n            setTimeout(function () {\n\t\t\t\tif(!$('.product.info.detailed').hasClass(\"sticky\"))\n\t                $('.product.data.items').tabs('option', 'openOnFocus', true);\n            }, 500);\n        },\n        // Switch to Mobile Version\n        exit: function () {\n            $('.action.toggle.checkout.progress')\n                .on('click.gotoCheckoutProgress', function () {\n                    var myWrapper = '#checkout-progress-wrapper';\n                    scrollTo(myWrapper + ' .title');\n                    $(myWrapper + ' .title').addClass('active');\n                    $(myWrapper + ' .content').show();\n                });\n\n            $('body')\n                .on('click.checkoutProgress', '#checkout-progress-wrapper .title', function () {\n                    $(this).toggleClass('active');\n                    $('#checkout-progress-wrapper .content').toggle();\n                });\n\n            var galleryElement = $('[data-role=media-gallery]');\n\n            setTimeout(function () {\n                if (galleryElement.length && galleryElement.data('mageZoom')) {\n                    galleryElement.zoom('disable');\n                }\n\n                if (galleryElement.length && galleryElement.data('mageGallery')) {\n                    galleryElement.gallery('option', 'disableLinks', false);\n                    galleryElement.gallery('option', 'showNav', true);\n                    galleryElement.gallery('option', 'showThumbs', false);\n                }\n            }, 2000);\n\n            setTimeout(function () {\n\t\t\t\tif(!$('.product.info.detailed').hasClass(\"sticky\"))\n\t\t\t\t\t$('.product.data.items').tabs('option', 'openOnFocus', false);\n            }, 500);\n        }\n    });\n});\n","IWD_BluePaySubs/js/view/billing_address.js":"/*\n * Copyright \u00a9 2018 IWD Agency - All rights reserved.\n * See LICENSE.txt bundled with this module for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'underscore',\n        'uiComponent',\n        'mage/translate',\n        'jquery',\n        'jquery/ui'\n    ],\n    function (_, Component, $t, $) {\n\n        return Component.extend({\n            defaults: {\n                formId: 'subs_billing_address',\n                addresses: {},\n                selectedAddressId: ''\n            },\n\n            bindSubmit: function () {\n                var self = this;\n\n                $('#' + this.formId).on('submit', function (e) {\n                    e.preventDefault();\n                    self.submitForm($(this));\n                });\n            },\n\n            /**\n             * Handler for the form 'submit' event\n             *\n             * @param {Object} form\n             */\n            submitForm: function (form) {\n\n                var self = this;\n\n                form.submit();\n            },\n\n            initObservable: function () {\n                this._super()\n                    .observe([\n                        'selectedAddressId'\n                    ]);\n                return this;\n            },\n\n            initialize: function () {\n                var self = this,\n                    addressSelector = '.new_billing_address';\n                this._super();\n                if(this.selectedAddressId()) {\n                    $(addressSelector).hide();\n                }\n                else {\n                    $(addressSelector).show();\n                }\n\n                this.selectedAddressId.subscribe(function (id) {\n                    if(!id) {\n                        $(addressSelector).show();\n                        self.selectedAddressId('')\n                    } else {\n                        $(addressSelector).hide();\n                        self.selectedAddressId(id);\n                    }\n                });\n            },\n\n            getCode: function () {\n                return 'billing';\n            },\n\n            getAddresses: function () {\n                return this.addresses;\n            }\n        });\n    }\n);","IWD_BluePaySubs/js/view/payment_method.js":"/*\n * Copyright \u00a9 2018 IWD Agency - All rights reserved.\n * See LICENSE.txt bundled with this module for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'underscore',\n        'uiComponent',\n        'Magento_Payment/js/model/credit-card-validation/credit-card-data',\n        'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator',\n        'mage/translate',\n        'jquery',\n        'jquery/ui',\n        'Magento_Payment/js/model/credit-card-validation/validator'\n    ],\n    function (_, Component, creditCardData, cardNumberValidator, $t, $) {\n\n        (function ($) {\n            $.fn.selectRange = function (start, end) {\n                if (end === undefined) {\n                    end = start;\n                }\n                return this.each(function () {\n                    if ('selectionStart' in this) {\n                        this.selectionStart = start;\n                        this.selectionEnd = end;\n                    } else if (this.setSelectionRange) {\n                        this.setSelectionRange(start, end);\n                    } else if (this.createTextRange) {\n                        var range = this.createTextRange();\n                        range.collapse(true);\n                        range.moveEnd('character', end);\n                        range.moveStart('character', start);\n                        range.select();\n                    }\n                });\n            };\n        })($); // select range\n\n        return Component.extend({\n            defaults: {\n                formId: 'subs_payment_method',\n                creditCardType: '',\n                creditCardExpYear: '',\n                creditCardExpMonth: '',\n                creditCardNumber: '',\n                creditCardVerificationNumber: '',\n                selectedCardType: null,\n                availableTypes: {},\n                months: {},\n                years: {},\n                paymentType: 'CC',\n                storedAccounts: {},\n                hashStoredAccount: ''\n            },\n\n            bindSubmit: function () {\n                var self = this;\n\n                $('#' + this.formId).on('submit', function (e) {\n                    e.preventDefault();\n                    self.submitForm($(this));\n                });\n            },\n\n            /**\n             * Handler for the form 'submit' event\n             *\n             * @param {Object} form\n             */\n            submitForm: function (form) {\n\n                var self = this;\n\n                form.submit();\n            },\n\n            initObservable: function () {\n                this._super()\n                    .observe([\n                        'creditCardType',\n                        'creditCardExpYear',\n                        'creditCardExpMonth',\n                        'creditCardNumber',\n                        'creditCardVerificationNumber',\n                        'selectedCardType',\n                        'hashStoredAccount'\n                    ]);\n                return this;\n            },\n\n            initialize: function () {\n                var self = this;\n                this._super();\n                // this.bindSubmit();\n                $(document).on('input', '[name=\"payment[cc_number]\"]', function () {\n                    self.formatCcNumber($(this), self);\n                    // var v = $(this).val().replace(/\\s+/g, '').replace(/[^0-9]/gi, '');\n                    // self.fillCcNumberField($(this), v);\n                });\n\n                //Set credit card number to credit card data object\n                this.creditCardNumber.subscribe(function (value) {\n                    var result;\n                    self.selectedCardType(null);\n\n\n                    if (value == '' || value == null) {\n                        return false;\n                    }\n                    result = cardNumberValidator(value);\n\n                    if (!result.isPotentiallyValid && !result.isValid) {\n                        return false;\n                    }\n                    if (result.card !== null) {\n                        self.selectedCardType(result.card.type);\n                        creditCardData.creditCard = result.card;\n                    }\n\n                    if (result.isValid) {\n                        creditCardData.creditCardNumber = value;\n                        self.creditCardType(result.card.type);\n                    }\n                });\n\n                //Set expiration year to credit card data object\n                this.creditCardExpYear.subscribe(function (value) {\n                    creditCardData.expirationYear = value;\n                });\n\n                //Set expiration month to credit card data object\n                this.creditCardExpMonth.subscribe(function (value) {\n                    creditCardData.expirationMonth = value;\n                });\n\n                //Set cvv code to credit card data object\n                this.creditCardVerificationNumber.subscribe(function (value) {\n                    creditCardData.cvvCode = value;\n                });\n\n                this.hashStoredAccount.subscribe(function (hash) {\n                    parseInt(hash) === 0 ? self.hashStoredAccount('') : self.hashStoredAccount(hash);\n                });\n\n            },\n\n            getCode: function () {\n                return 'payment';\n            },\n            getData: function () {\n                var data;\n                data = {\n                    'method': this.item.method,\n                    'payment': {\n                        'cc_cid': this.creditCardVerificationNumber(),\n                        'cc_type': this.creditCardType(),\n                        'cc_exp_month': creditCardData.expirationMonth,\n                        'cc_exp_year': creditCardData.expirationYear,\n                        'cc_number': creditCardData.creditCardNumber,\n                        'hash': this.hashStoredAccount()\n                    }\n                };\n\n                return data;\n            },\n            getCcAvailableTypes: function () {\n                return this.availableTypes;\n            },\n\n            getCcMonths: function () {\n                return this.months;\n            },\n\n            getCcYears: function () {\n                return this.years;\n            },\n\n            getCcAvailableTypesValues: function () {\n                return _.map(this.getCcAvailableTypes(), function (value, key) {\n                    return {\n                        'value': key,\n                        'type': value\n                    }\n                });\n            },\n\n            getCcMonthsValues: function () {\n                return _.map(this.getCcMonths(), function (value, key) {\n                    if (key < 10) {\n                        key = '0' + key;\n                    }\n                    return {\n                        'value': key,\n                        'month': value\n                    }\n                });\n            },\n\n            getCcYearsValues: function () {\n                return _.map(this.getCcYears(), function (value, key) {\n                    return {\n                        'value': key.substring(2, 4),\n                        'year': value\n                    }\n                });\n            },\n\n            formatCcNumber: function (element, e) {\n                var value = element.val();\n                if (value) {\n                    var clear_value = value.replace(/\\s+/g, '').replace(/[^0-9]/gi, '');\n                    var formatted_value = clear_value;\n                    var cursorPosition = element.prop('selectionStart');\n                    var matches = clear_value.match(/\\d{4,24}/g);\n                    var match = matches && matches[0] || '';\n                    var parts = [];\n                    for (var i = 0; i < match.length; i += 4) {\n                        parts.push(match.substring(i, i + 4))\n                    }\n\n                    if (parts.length) {\n                        formatted_value = parts.join(' ');\n                        var test_value = value.substring(0, cursorPosition);\n                        var test_formatted_value = formatted_value.substring(0, cursorPosition);\n                        var test_value_length = test_value.match(/ /g) ? test_value.match(/ /g).length : 0;\n                        var test_formatted_value_length = test_formatted_value.match(/ /g) ? test_formatted_value.match(/ /g).length : 0;\n                        if (test_formatted_value_length > test_value_length) {\n                            cursorPosition = cursorPosition + test_formatted_value_length - test_value_length;\n                        }\n                    }\n\n                    if ((cursorPosition % 5) === 0) {\n                        cursorPosition = cursorPosition - 1;\n                    }\n\n                    element.val(formatted_value);\n                    element.selectRange(cursorPosition);\n                }\n            },\n\n            selectRange : function (start, end) {\n                if (end === undefined) {\n                    end = start;\n                }\n                return $.each(function () {\n                    if ('selectionStart' in this) {\n                        this.selectionStart = start;\n                        this.selectionEnd = end;\n                    } else if (this.setSelectionRange) {\n                        this.setSelectionRange(start, end);\n                    } else if (this.createTextRange) {\n                        var range = this.createTextRange();\n                        range.collapse(true);\n                        range.moveEnd('character', end);\n                        range.moveStart('character', start);\n                        range.select();\n                    }\n                });\n            },\n\n            getStoredAccounts: function () {\n                return this.storedAccounts;\n            }\n        });\n    }\n);","IWD_BluePaySubs/js/view/shipping_method.js":"/*\n * Copyright \u00a9 2018 IWD Agency - All rights reserved.\n * See LICENSE.txt bundled with this module for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'underscore',\n        'uiComponent',\n        'mage/translate',\n        'jquery'\n    ],\n    function (_, Component, $t, $) {\n\n        return Component.extend({\n            defaults: {\n                formId: 'subs_shipping_method',\n                shippingRates: {},\n                currentRate: ''\n            },\n\n            bindSubmit: function () {\n                var self = this;\n\n                $('#' + this.formId).on('submit', function (e) {\n                    e.preventDefault();\n                    self.submitForm($(this));\n                });\n            },\n\n            /**\n             * Handler for the form 'submit' event\n             *\n             * @param {Object} form\n             */\n            submitForm: function (form) {\n\n                var self = this;\n\n                form.submit();\n            },\n\n            initObservable: function () {\n                this._super()\n                    .observe([\n                        'currentRate'\n                    ]);\n                return this;\n            },\n\n            initialize: function () {\n                var self = this;\n                this._super();\n                // this.bindSubmit();\n\n                this.currentRate.subscribe(function (hash) {\n                    parseInt(hash) === 0 ? self.currentRate('') : self.currentRate(hash);\n                });\n\n            },\n\n            getCode: function () {\n                return 'shipping';\n            },\n\n            getShippingRates: function () {\n                return this.shippingRates;\n            }\n        });\n    }\n);","IWD_BluePaySubs/js/view/shipping_address.js":"/*\n * Copyright \u00a9 2018 IWD Agency - All rights reserved.\n * See LICENSE.txt bundled with this module for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'underscore',\n        'uiComponent',\n        'mage/translate',\n        'jquery',\n        'jquery/ui'\n    ],\n    function (_, Component, $t, $) {\n\n        return Component.extend({\n            defaults: {\n                formId: 'subs_shipping_address',\n                addresses: {},\n                selectedAddressId: ''\n            },\n\n            bindSubmit: function () {\n                var self = this;\n\n                $('#' + this.formId).on('submit', function (e) {\n                    e.preventDefault();\n                    self.submitForm($(this));\n                });\n            },\n\n            /**\n             * Handler for the form 'submit' event\n             *\n             * @param {Object} form\n             */\n            submitForm: function (form) {\n\n                var self = this;\n\n                form.submit();\n            },\n\n            initObservable: function () {\n                this._super()\n                    .observe([\n                        'selectedAddressId'\n                    ]);\n                return this;\n            },\n\n            initialize: function () {\n                var self = this,\n                    addressSelector = '.new_shipping_address';\n                this._super();\n                if(this.selectedAddressId()) {\n                    $(addressSelector).hide();\n                }\n                else {\n                    $(addressSelector).show();\n                }\n\n                this.selectedAddressId.subscribe(function (id) {\n                    if(!id) {\n                        $(addressSelector).show();\n                        self.selectedAddressId('')\n                    } else {\n                        $(addressSelector).hide();\n                        self.selectedAddressId(id);\n                    }\n                });\n            },\n\n            getCode: function () {\n                return 'shipping';\n            },\n\n            getAddresses: function () {\n                return this.addresses;\n            }\n        });\n    }\n);","IWD_Opc/js/helper.js":"define(['iwdOpcSelectize', 'jquery', 'underscore', 'uiRegistry'], function (selectize, $, _, registry) {\n    (function ($, window, document) {\n\n        var pluginName = \"textareaAutoSize\";\n        var pluginDataName = \"plugin_\" + pluginName;\n\n        var containsText = function (value) {\n            return (value.replace(/\\s/g, '').length > 0);\n        };\n\n        function Plugin(element, options) {\n            this.element = element;\n            this.$element = $(element);\n            this.init();\n        }\n\n        Plugin.prototype = {\n            init: function () {\n                var height = this.$element.outerHeight();\n                var diff = parseInt(this.$element.css('paddingBottom')) +\n                    parseInt(this.$element.css('paddingTop')) || 0;\n\n                if (containsText(this.element.value)) {\n                    this.$element.height(this.element.scrollHeight - diff);\n                }\n\n                // keyup is required for IE to properly reset height when deleting text\n                this.$element.on('input keyup', function (event) {\n                    var $window = $(window);\n                    var currentScrollPosition = $window.scrollTop();\n\n                    $(this)\n                        .height(0)\n                        .height(this.scrollHeight - diff);\n\n                    $window.scrollTop(currentScrollPosition);\n                });\n            }\n        };\n\n        $.fn[pluginName] = function (options) {\n            this.each(function () {\n                if (!$.data(this, pluginDataName)) {\n                    $.data(this, pluginDataName, new Plugin(this, options));\n                }\n            });\n            return this;\n        };\n\n    })($, window, document);// textarea autoresize\n\n    (function ($) {\n        $.fn.selectRange = function (start, end) {\n            if (end === undefined) {\n                end = start;\n            }\n            return this.each(function () {\n                if ('selectionStart' in this) {\n                    this.selectionStart = start;\n                    this.selectionEnd = end;\n                } else if (this.setSelectionRange) {\n                    this.setSelectionRange(start, end);\n                } else if (this.createTextRange) {\n                    var range = this.createTextRange();\n                    range.collapse(true);\n                    range.moveEnd('character', end);\n                    range.moveStart('character', start);\n                    range.select();\n                }\n            });\n        };\n    })($); // select range\n\n    (function ($) {\n        $.fn.getCursorPosition = function () {\n            var input = this.get(0);\n            if (!input) return; // No (input) element found\n            if ('selectionStart' in input) {\n                // Standard-compliant browsers\n                return input.selectionStart;\n            } else if (document.selection) {\n                // IE\n                input.focus();\n                var sel = document.selection.createRange();\n                var selLen = document.selection.createRange().text.length;\n                sel.moveStart('character', -input.value.length);\n                return sel.text.length - selLen;\n            }\n        }\n    })($); // get cursor position\n\n    $.fn.serializeAssoc = function () {\n        var data = {};\n        var dataArr = this.serializeArray();\n        dataArr = dataArr.concat(\n            $(this).find('input[type=checkbox]:not(:checked)').map(\n                function () {\n                    return {\"name\": this.name, \"value\": false}\n                }).get()\n        );\n        $.each(dataArr, function (key, obj) {\n            var a = obj.name.match(/(.*?)\\[(.*?)\\]/);\n            if (a !== null) {\n                var subName = a[1];\n                var subKey = a[2];\n\n                if (!data[subName]) {\n                    data[subName] = {};\n                }\n\n                if (!subKey.length) {\n                    subKey = data[subName].length;\n                }\n\n                if (data[subName][subKey]) {\n                    if ($.isArray(data[subName][subKey])) {\n                        data[subName][subKey].push(obj.value);\n                    } else {\n                        data[subName][subKey] = {};\n                        data[subName][subKey].push(obj.value);\n                    }\n                } else {\n                    data[subName][subKey] = obj.value;\n                }\n            } else {\n                if (data[obj.name]) {\n                    if ($.isArray(data[obj.name])) {\n                        data[obj.name].push(obj.value);\n                    } else {\n                        data[obj.name] = {};\n                        data[obj.name].push(obj.value);\n                    }\n                } else {\n                    data[obj.name] = obj.value;\n                }\n            }\n        });\n        return data;\n    };\n\n    (function ($) {\n        'use strict';\n\n        // init flags & variables\n        var debug = false;\n\n        var browser = {\n            data: {\n                index: 0,\n                name: 'scrollbar'\n            },\n            firefox: /firefox/i.test(navigator.userAgent),\n            macosx: /mac/i.test(navigator.platform),\n            msedge: /edge\\/\\d+/i.test(navigator.userAgent),\n            msie: /(msie|trident)/i.test(navigator.userAgent),\n            mobile: /android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent),\n            overlay: null,\n            scroll: null,\n            scrolls: [],\n            webkit: /webkit/i.test(navigator.userAgent) && !/edge\\/\\d+/i.test(navigator.userAgent)\n        };\n\n        browser.scrolls.add = function (instance) {\n            this.remove(instance).push(instance);\n        };\n        browser.scrolls.remove = function (instance) {\n            while ($.inArray(instance, this) >= 0) {\n                this.splice($.inArray(instance, this), 1);\n            }\n            return this;\n        };\n\n        var defaults = {\n            autoScrollSize: true, // automatically calculate scrollsize\n            autoUpdate: true, // update scrollbar if content/container size changed\n            debug: false, // debug mode\n            disableBodyScroll: false, // disable body scroll if mouse over container\n            duration: 150, // scroll animate duration in ms\n            ignoreMobile: false, // ignore mobile devices\n            ignoreOverlay: false, // ignore browsers with overlay scrollbars (mobile, MacOS)\n            isRtl: false, // is RTL\n            scrollStep: 36, // scroll step for scrollbar arrows\n            showArrows: false, // add class to show arrows\n            stepScrolling: true, // when scrolling to scrollbar mousedown position\n\n            scrollx: null, // horizontal scroll element\n            scrolly: null, // vertical scroll element\n\n            onDestroy: null, // callback function on destroy,\n            onFallback: null, // callback function if scrollbar is not initialized\n            onInit: null, // callback function on first initialization\n            onScroll: null, // callback function on content scrolling\n            onUpdate: null // callback function on init/resize (before scrollbar size calculation)\n        };\n\n\n        var BaseScrollbar = function (container) {\n\n            if (!browser.scroll) {\n                browser.overlay = isScrollOverlaysContent();\n                browser.scroll = getBrowserScrollSize();\n                updateScrollbars();\n\n                $(window).resize(function () {\n                    var forceUpdate = false;\n                    if (browser.scroll && (browser.scroll.height || browser.scroll.width)) {\n                        var scroll = getBrowserScrollSize();\n                        if (scroll.height !== browser.scroll.height || scroll.width !== browser.scroll.width) {\n                            browser.scroll = scroll;\n                            forceUpdate = true; // handle page zoom\n                        }\n                    }\n                    updateScrollbars(forceUpdate);\n                });\n            }\n\n            this.container = container;\n            this.namespace = '.scrollbar_' + browser.data.index++;\n            this.options = $.extend({}, defaults, window.jQueryScrollbarOptions || {});\n            this.scrollTo = null;\n            this.scrollx = {};\n            this.scrolly = {};\n\n            container.data(browser.data.name, this);\n            browser.scrolls.add(this);\n        };\n\n        BaseScrollbar.prototype = {\n            destroy: function () {\n\n                if (!this.wrapper) {\n                    return;\n                }\n\n                this.container.removeData(browser.data.name);\n                browser.scrolls.remove(this);\n\n                // init variables\n                var scrollLeft = this.container.scrollLeft();\n                var scrollTop = this.container.scrollTop();\n\n                this.container.insertBefore(this.wrapper).css({\n                    \"height\": \"\",\n                    \"margin\": \"\",\n                    \"max-height\": \"\"\n                })\n                    .removeClass('scroll-content scroll-scrollx_visible scroll-scrolly_visible')\n                    .removeAttr('tabindex')\n                    .off(this.namespace)\n                    .scrollLeft(scrollLeft)\n                    .scrollTop(scrollTop);\n\n                this.scrollx.scroll.removeClass('scroll-scrollx_visible').find('div').addBack().off(this.namespace);\n                this.scrolly.scroll.removeClass('scroll-scrolly_visible').find('div').addBack().off(this.namespace);\n\n                this.wrapper.remove();\n\n                $(document).add('body').off(this.namespace);\n\n                if ($.isFunction(this.options.onDestroy)) {\n                    this.options.onDestroy.apply(this, [this.container]);\n                }\n            },\n            init: function (options) {\n\n                // init variables\n                var S = this,\n                    c = this.container,\n                    cw = this.containerWrapper || c,\n                    namespace = this.namespace,\n                    o = $.extend(this.options, options || {}),\n                    s = {x: this.scrollx, y: this.scrolly},\n                    w = this.wrapper,\n                    cssOptions = {};\n\n                var initScroll = {\n                    scrollLeft: c.scrollLeft(),\n                    scrollTop: c.scrollTop()\n                };\n\n                // do not init if in ignorable browser\n                if ((browser.mobile && o.ignoreMobile)\n                    || (browser.overlay && o.ignoreOverlay)\n                    || (browser.macosx && !browser.webkit) // still required to ignore nonWebKit browsers on Mac\n                ) {\n                    if ($.isFunction(o.onFallback)) {\n                        o.onFallback.apply(this, [c]);\n                    }\n                    return false;\n                }\n\n                // init scroll container\n                if (!w) {\n                    this.wrapper = w = $('<div>').addClass('scroll-wrapper').attr('tabindex', 0)\n                    // .addClass(c.attr('class'))\n                    //     .attr('tabindex', 0)\n                        .css('position', c.css('position') === 'absolute' ? 'absolute' : 'relative')\n                        .insertBefore(c).append(c);\n\n                    if (o.isRtl) {\n                        w.addClass('scroll--rtl');\n                    }\n\n                    if (c.is('textarea')) {\n                        this.containerWrapper = cw = $('<div>').insertBefore(c).append(c);\n                        w.addClass('scroll-textarea');\n                    }\n\n                    cssOptions = {\n                        \"height\": \"auto\",\n                        // \"margin-bottom\": browser.scroll.height * -1 + 'px',\n                        \"max-height\": \"\"\n                    };\n                    cssOptions[o.isRtl ? 'margin-left' : 'margin-right'] = browser.scroll.width * -1 + 'px';\n\n                    cw.addClass('scroll-content').css(cssOptions).removeAttr('tabindex');\n\n                    c.on('scroll' + namespace, function (event) {\n                        var scrollLeft = c.scrollLeft();\n                        var scrollTop = c.scrollTop();\n                        if (o.isRtl) {\n                            // webkit   0:100\n                            // ie/edge  100:0\n                            // firefox -100:0\n                            switch (true) {\n                                case browser.firefox:\n                                    scrollLeft = Math.abs(scrollLeft);\n                                    break;\n                                case browser.msedge || browser.msie:\n                                    scrollLeft = c[0].scrollWidth - c[0].clientWidth - scrollLeft;\n                                    break;\n                            }\n                        }\n                        if ($.isFunction(o.onScroll)) {\n                            o.onScroll.call(S, {\n                                maxScroll: s.y.maxScrollOffset,\n                                scroll: scrollTop,\n                                size: s.y.size,\n                                visible: s.y.visible\n                            }, {\n                                maxScroll: s.x.maxScrollOffset,\n                                scroll: scrollLeft,\n                                size: s.x.size,\n                                visible: s.x.visible\n                            });\n                        }\n                        s.x.isVisible && s.x.scroll.bar.css('left', scrollLeft * s.x.kx + 'px');\n                        s.y.isVisible && s.y.scroll.bar.css('top', scrollTop * s.y.kx + 'px');\n                    });\n\n                    c.on('keydown', function (event) {\n                        var scrollLeft = c.scrollLeft();\n                        var scrollTop = c.scrollTop();\n                        s.x.isVisible && s.x.scroll.bar.css('left', scrollLeft * s.x.kx + 'px');\n                        s.y.isVisible && s.y.scroll.bar.css('top', scrollTop * s.y.kx + 'px');\n                    });\n\n                    w.on('keydown', function (event) {\n                        var scrollTop = c.scrollTop();\n                        if (event.keyCode === 40) { //bottom\n                            c.animate({\n                                scrollTop: scrollTop + 36\n                            }, 0);\n                            event.preventDefault();\n                        } else if (event.keyCode === 38) {//top\n                            c.animate({\n                                scrollTop: scrollTop - 36\n                            }, 0);\n                            event.preventDefault();\n                        }\n                    });\n\n                    /* prevent native scrollbars to be visible on #anchor click */\n                    w.on('scroll' + namespace, function () {\n                        w.scrollTop(0).scrollLeft(0);\n                    });\n\n                    if (o.disableBodyScroll) {\n                        var handleMouseScroll = function (event) {\n                            isVerticalScroll(event) ?\n                                s.y.isVisible && s.y.mousewheel(event) :\n                                s.x.isVisible && s.x.mousewheel(event);\n                        };\n                        w.on('MozMousePixelScroll' + namespace, handleMouseScroll);\n                        w.on('mousewheel' + namespace, handleMouseScroll);\n\n                        if (browser.mobile) {\n                            w.on('touchstart' + namespace, function (event) {\n                                var touch = event.originalEvent.touches && event.originalEvent.touches[0] || event;\n                                var originalTouch = {\n                                    pageX: touch.pageX,\n                                    pageY: touch.pageY\n                                };\n                                var originalScroll = {\n                                    left: c.scrollLeft(),\n                                    top: c.scrollTop()\n                                };\n                                $(document).on('touchmove' + namespace, function (event) {\n                                    var touch = event.originalEvent.targetTouches && event.originalEvent.targetTouches[0] || event;\n                                    c.scrollLeft(originalScroll.left + originalTouch.pageX - touch.pageX);\n                                    c.scrollTop(originalScroll.top + originalTouch.pageY - touch.pageY);\n                                    event.preventDefault();\n                                });\n                                $(document).on('touchend' + namespace, function () {\n                                    $(document).off(namespace);\n                                });\n                            });\n                        }\n                    }\n                    if ($.isFunction(o.onInit)) {\n                        o.onInit.apply(this, [c]);\n                    }\n                } else {\n                    cssOptions = {\n                        \"height\": \"auto\",\n                        // \"margin-bottom\": browser.scroll.height * -1 + 'px',\n                        \"max-height\": \"\"\n                    };\n                    cssOptions[o.isRtl ? 'margin-left' : 'margin-right'] = browser.scroll.width * -1 + 'px';\n                    cw.css(cssOptions);\n                }\n\n                // init scrollbars & recalculate sizes\n                $.each(s, function (d, scrollx) {\n\n                    var scrollCallback = null;\n                    var scrollForward = 1;\n                    var scrollOffset = (d === 'x') ? 'scrollLeft' : 'scrollTop';\n                    var scrollStep = o.scrollStep;\n                    var scrollTo = function () {\n                        var currentOffset = c[scrollOffset]();\n                        c[scrollOffset](currentOffset + scrollStep);\n                        if (scrollForward == 1 && (currentOffset + scrollStep) >= scrollToValue)\n                            currentOffset = c[scrollOffset]();\n                        if (scrollForward == -1 && (currentOffset + scrollStep) <= scrollToValue)\n                            currentOffset = c[scrollOffset]();\n                        if (c[scrollOffset]() == currentOffset && scrollCallback) {\n                            scrollCallback();\n                        }\n                    };\n                    var scrollToValue = 0;\n\n                    if (!scrollx.scroll) {\n\n                        scrollx.scroll = S._getScroll(o['scroll' + d]).addClass('scroll-' + d);\n\n                        if (o.showArrows) {\n                            scrollx.scroll.addClass('scroll-element_arrows_visible');\n                        }\n\n                        scrollx.mousewheel = function (event) {\n\n                            if (!scrollx.isVisible || (d === 'x' && isVerticalScroll(event))) {\n                                return true;\n                            }\n                            if (d === 'y' && !isVerticalScroll(event)) {\n                                s.x.mousewheel(event);\n                                return true;\n                            }\n\n                            var delta = event.originalEvent.wheelDelta * -1 || event.originalEvent.detail;\n                            var maxScrollValue = scrollx.size - scrollx.visible - scrollx.offset;\n\n                            // fix new mozilla\n                            if (!delta) {\n                                if (d === 'x' && !!event.originalEvent.deltaX) {\n                                    delta = event.originalEvent.deltaX * 40;\n                                } else if (d === 'y' && !!event.originalEvent.deltaY) {\n                                    delta = event.originalEvent.deltaY * 40;\n                                }\n                            }\n\n                            if ((delta > 0 && scrollToValue < maxScrollValue) || (delta < 0 && scrollToValue > 0)) {\n                                scrollToValue = scrollToValue + delta;\n                                if (scrollToValue < 0)\n                                    scrollToValue = 0;\n                                if (scrollToValue > maxScrollValue)\n                                    scrollToValue = maxScrollValue;\n\n                                S.scrollTo = S.scrollTo || {};\n                                S.scrollTo[scrollOffset] = scrollToValue;\n                                setTimeout(function () {\n                                    if (S.scrollTo) {\n                                        c.stop().animate(S.scrollTo, 240, 'linear', function () {\n                                            scrollToValue = c[scrollOffset]();\n                                        });\n                                        S.scrollTo = null;\n                                    }\n                                }, 1);\n                            }\n\n                            event.preventDefault();\n                            return false;\n                        };\n\n                        scrollx.scroll\n                            .on('MozMousePixelScroll' + namespace, scrollx.mousewheel)\n                            .on('mousewheel' + namespace, scrollx.mousewheel)\n                            .on('mouseenter' + namespace, function () {\n                                scrollToValue = c[scrollOffset]();\n                            });\n\n                        // handle arrows & scroll inner mousedown event\n                        scrollx.scroll.find('.scroll-arrow, .scroll-element_track')\n                            .on('mousedown' + namespace, function (event) {\n\n                                if (event.which != 1) // lmb\n                                    return true;\n\n                                scrollForward = 1;\n\n                                var data = {\n                                    eventOffset: event[(d === 'x') ? 'pageX' : 'pageY'],\n                                    maxScrollValue: scrollx.size - scrollx.visible - scrollx.offset,\n                                    scrollbarOffset: scrollx.scroll.bar.offset()[(d === 'x') ? 'left' : 'top'],\n                                    scrollbarSize: scrollx.scroll.bar[(d === 'x') ? 'outerWidth' : 'outerHeight']()\n                                };\n                                var timeout = 0, timer = 0;\n\n                                if ($(this).hasClass('scroll-arrow')) {\n                                    scrollForward = $(this).hasClass(\"scroll-arrow_more\") ? 1 : -1;\n                                    scrollStep = o.scrollStep * scrollForward;\n                                    scrollToValue = scrollForward > 0 ? data.maxScrollValue : 0;\n                                    if (o.isRtl) {\n                                        switch (true) {\n                                            case browser.firefox:\n                                                scrollToValue = scrollForward > 0 ? 0 : data.maxScrollValue * -1;\n                                                break;\n                                            case browser.msie || browser.msedge:\n                                                break;\n                                        }\n                                    }\n                                } else {\n                                    scrollForward = (data.eventOffset > (data.scrollbarOffset + data.scrollbarSize) ? 1\n                                        : (data.eventOffset < data.scrollbarOffset ? -1 : 0));\n                                    if (d === 'x' && o.isRtl && (browser.msie || browser.msedge))\n                                        scrollForward = scrollForward * -1;\n                                    scrollStep = Math.round(scrollx.visible * 0.75) * scrollForward;\n                                    scrollToValue = (data.eventOffset - data.scrollbarOffset -\n                                    (o.stepScrolling ? (scrollForward == 1 ? data.scrollbarSize : 0)\n                                        : Math.round(data.scrollbarSize / 2)));\n                                    scrollToValue = c[scrollOffset]() + (scrollToValue / scrollx.kx);\n                                }\n\n                                S.scrollTo = S.scrollTo || {};\n                                S.scrollTo[scrollOffset] = o.stepScrolling ? c[scrollOffset]() + scrollStep : scrollToValue;\n\n                                if (o.stepScrolling) {\n                                    scrollCallback = function () {\n                                        scrollToValue = c[scrollOffset]();\n                                        clearInterval(timer);\n                                        clearTimeout(timeout);\n                                        timeout = 0;\n                                        timer = 0;\n                                    };\n                                    timeout = setTimeout(function () {\n                                        timer = setInterval(scrollTo, 40);\n                                    }, o.duration + 100);\n                                }\n\n                                setTimeout(function () {\n                                    if (S.scrollTo) {\n                                        c.animate(S.scrollTo, o.duration);\n                                        S.scrollTo = null;\n                                    }\n                                }, 1);\n\n                                return S._handleMouseDown(scrollCallback, event);\n                            });\n\n                        // handle scrollbar drag'n'drop\n                        scrollx.scroll.bar.on('mousedown' + namespace, function (event) {\n\n                            if (event.which != 1) // lmb\n                                return true;\n\n                            var eventPosition = event[(d === 'x') ? 'pageX' : 'pageY'];\n                            var initOffset = c[scrollOffset]();\n\n                            scrollx.scroll.addClass('scroll-draggable');\n\n                            $(document).on('mousemove' + namespace, function (event) {\n                                var diff = parseInt((event[(d === 'x') ? 'pageX' : 'pageY'] - eventPosition) / scrollx.kx, 10);\n                                if (d === 'x' && o.isRtl && (browser.msie || browser.msedge))\n                                    diff = diff * -1;\n                                c[scrollOffset](initOffset + diff);\n                            });\n\n                            return S._handleMouseDown(function () {\n                                scrollx.scroll.removeClass('scroll-draggable');\n                                scrollToValue = c[scrollOffset]();\n                            }, event);\n                        });\n                    }\n                });\n\n                // remove classes & reset applied styles\n                $.each(s, function (d, scrollx) {\n                    var scrollClass = 'scroll-scroll' + d + '_visible';\n                    var scrolly = (d == \"x\") ? s.y : s.x;\n\n                    scrollx.scroll.removeClass(scrollClass);\n                    scrolly.scroll.removeClass(scrollClass);\n                    cw.removeClass(scrollClass);\n                });\n\n                // calculate init sizes\n                $.each(s, function (d, scrollx) {\n                    $.extend(scrollx, (d == \"x\") ? {\n                        offset: parseInt(c.css('left'), 10) || 0,\n                        size: c.prop('scrollWidth'),\n                        visible: w.width()\n                    } : {\n                        offset: parseInt(c.css('top'), 10) || 0,\n                        size: c.prop('scrollHeight'),\n                        visible: w.height()\n                    });\n                });\n\n                // update scrollbar visibility/dimensions\n                this._updateScroll('x', this.scrollx);\n                this._updateScroll('y', this.scrolly);\n\n                if ($.isFunction(o.onUpdate)) {\n                    o.onUpdate.apply(this, [c]);\n                }\n\n                // calculate scroll size\n                $.each(s, function (d, scrollx) {\n\n                    var cssOffset = (d === 'x') ? 'left' : 'top';\n                    var cssFullSize = (d === 'x') ? 'outerWidth' : 'outerHeight';\n                    var cssSize = (d === 'x') ? 'width' : 'height';\n                    var offset = parseInt(c.css(cssOffset), 10) || 0;\n\n                    var AreaSize = scrollx.size;\n                    var AreaVisible = scrollx.visible + offset;\n\n                    var scrollSize = scrollx.scroll.size[cssFullSize]() + (parseInt(scrollx.scroll.size.css(cssOffset), 10) || 0);\n\n                    if (o.autoScrollSize) {\n                        scrollx.scrollbarSize = parseInt(scrollSize * AreaVisible / AreaSize, 10);\n                        scrollx.scroll.bar.css(cssSize, scrollx.scrollbarSize + 'px');\n                    }\n\n                    scrollx.scrollbarSize = scrollx.scroll.bar[cssFullSize]();\n                    scrollx.kx = ((scrollSize - scrollx.scrollbarSize) / (AreaSize - AreaVisible)) || 1;\n                    scrollx.maxScrollOffset = AreaSize - AreaVisible;\n                });\n\n                c.scrollLeft(initScroll.scrollLeft).scrollTop(initScroll.scrollTop).trigger('scroll');\n            },\n\n            _getScroll: function (scroll) {\n                var types = {\n                    advanced: [\n                        '<div class=\"scroll-element\">',\n                        '<div class=\"scroll-element_corner\"></div>',\n                        '<div class=\"scroll-arrow scroll-arrow_less\"></div>',\n                        '<div class=\"scroll-arrow scroll-arrow_more\"></div>',\n                        '<div class=\"scroll-element_outer\">',\n                        '<div class=\"scroll-element_size\"></div>', // required! used for scrollbar size calculation !\n                        '<div class=\"scroll-element_inner-wrapper\">',\n                        '<div class=\"scroll-element_inner scroll-element_track\">', // used for handling scrollbar click\n                        '<div class=\"scroll-element_inner-bottom\"></div>',\n                        '</div>',\n                        '</div>',\n                        '<div class=\"scroll-bar\">', // required\n                        '<div class=\"scroll-bar_body\">',\n                        '<div class=\"scroll-bar_body-inner\"></div>',\n                        '</div>',\n                        '<div class=\"scroll-bar_bottom\"></div>',\n                        '<div class=\"scroll-bar_center\"></div>',\n                        '</div>',\n                        '</div>',\n                        '</div>'\n                    ].join(''),\n                    simple: [\n                        '<div class=\"scroll-element\">',\n                        '<div class=\"scroll-element_outer\">',\n                        '<div class=\"scroll-element_size\"></div>', // required! used for scrollbar size calculation !\n                        '<div class=\"scroll-element_track\"></div>', // used for handling scrollbar click\n                        '<div class=\"scroll-bar\"></div>', // required\n                        '</div>',\n                        '</div>'\n                    ].join('')\n                };\n                if (types[scroll]) {\n                    scroll = types[scroll];\n                }\n                if (!scroll) {\n                    scroll = types['simple'];\n                }\n                if (typeof (scroll) == 'string') {\n                    scroll = $(scroll).appendTo(this.wrapper);\n                } else {\n                    scroll = $(scroll);\n                }\n                $.extend(scroll, {\n                    bar: scroll.find('.scroll-bar'),\n                    size: scroll.find('.scroll-element_size'),\n                    track: scroll.find('.scroll-element_track')\n                });\n                return scroll;\n            },\n            _handleMouseDown: function (callback, event) {\n\n                var namespace = this.namespace;\n\n                $(document).on('blur' + namespace, function () {\n                    $(document).add('body').off(namespace);\n                    callback && callback();\n                });\n                $(document).on('dragstart' + namespace, function (event) {\n                    event.preventDefault();\n                    return false;\n                });\n                $(document).on('mouseup' + namespace, function () {\n                    $(document).add('body').off(namespace);\n                    callback && callback();\n                });\n                $('body').on('selectstart' + namespace, function (event) {\n                    event.preventDefault();\n                    return false;\n                });\n\n                event && event.preventDefault();\n                return false;\n            },\n            _updateScroll: function (d, scrollx) {\n\n                var container = this.container,\n                    containerWrapper = this.containerWrapper || container,\n                    scrollClass = 'scroll-scroll' + d + '_visible',\n                    scrolly = (d === 'x') ? this.scrolly : this.scrollx,\n                    offset = parseInt(this.container.css((d === 'x') ? 'left' : 'top'), 10) || 0,\n                    wrapper = this.wrapper;\n\n                var AreaSize = scrollx.size;\n                var AreaVisible = scrollx.visible + offset;\n\n                scrollx.isVisible = (AreaSize - AreaVisible) > 1; // bug in IE9/11 with 1px diff\n                if (scrollx.isVisible) {\n                    scrollx.scroll.addClass(scrollClass);\n                    scrolly.scroll.addClass(scrollClass);\n                    containerWrapper.addClass(scrollClass);\n                } else {\n                    scrollx.scroll.removeClass(scrollClass);\n                    scrolly.scroll.removeClass(scrollClass);\n                    containerWrapper.removeClass(scrollClass);\n                }\n\n                if (d === 'y') {\n                    if (container.is('textarea') || AreaSize < AreaVisible) {\n                        containerWrapper.css({\n                            \"height\": (AreaVisible + browser.scroll.height + browser.scroll.height) + 'px',\n                            \"max-height\": \"none\"\n                        });\n                    } else {\n                        containerWrapper.css({\n                            // \"height\": \"auto\", // do not reset height value: issue with height:100%!\n                            \"max-height\": (AreaVisible + browser.scroll.height + browser.scroll.height) + 'px'\n                            // \"height\": (AreaVisible) + 'px'\n                        });\n                    }\n                }\n\n                if (scrollx.size != container.prop('scrollWidth')\n                    || scrolly.size != container.prop('scrollHeight')\n                    || scrollx.visible != wrapper.width()\n                    || scrolly.visible != wrapper.height()\n                    || scrollx.offset != (parseInt(container.css('left'), 10) || 0)\n                    || scrolly.offset != (parseInt(container.css('top'), 10) || 0)\n                ) {\n                    $.extend(this.scrollx, {\n                        offset: parseInt(container.css('left'), 10) || 0,\n                        size: container.prop('scrollWidth'),\n                        visible: wrapper.width()\n                    });\n                    $.extend(this.scrolly, {\n                        offset: parseInt(container.css('top'), 10) || 0,\n                        size: this.container.prop('scrollHeight'),\n                        visible: wrapper.height()\n                    });\n                    this._updateScroll(d === 'x' ? 'y' : 'x', scrolly);\n                }\n            }\n        };\n\n        var CustomScrollbar = BaseScrollbar;\n\n        /*\n         * Extend jQuery as plugin\n         *\n         * @param {Mixed} command to execute\n         * @param {Mixed} arguments as Array\n         * @return {jQuery}\n         */\n        $.fn.scrollbar = function (command, args) {\n            if (typeof command !== 'string') {\n                args = command;\n                command = 'init';\n            }\n            if (typeof args === 'undefined') {\n                args = [];\n            }\n            if (!$.isArray(args)) {\n                args = [args];\n            }\n            this.not('body, .scroll-wrapper').each(function () {\n                var element = $(this),\n                    instance = element.data(browser.data.name);\n                if (instance || command === 'init') {\n                    if (!instance) {\n                        instance = new CustomScrollbar(element);\n                    }\n                    if (instance[command]) {\n                        instance[command].apply(instance, args);\n                    }\n                }\n            });\n            return this;\n        };\n\n        /**\n         * Connect default options to global object\n         */\n        $.fn.scrollbar.options = defaults;\n\n\n        /**\n         * Check if scroll content/container size is changed\n         */\n\n        var updateScrollbars = (function () {\n            var timer = 0,\n                timerCounter = 0;\n\n            return function (force) {\n                var i, container, options, scroll, wrapper, scrollx, scrolly;\n                for (i = 0; i < browser.scrolls.length; i++) {\n                    scroll = browser.scrolls[i];\n                    container = scroll.container;\n                    options = scroll.options;\n                    wrapper = scroll.wrapper;\n                    scrollx = scroll.scrollx;\n                    scrolly = scroll.scrolly;\n                    if (force || (options.autoUpdate && wrapper && wrapper.is(':visible') &&\n                        (container.prop('scrollWidth') != scrollx.size || container.prop('scrollHeight') != scrolly.size || wrapper.width() != scrollx.visible || wrapper.height() != scrolly.visible))) {\n                        scroll.init();\n\n                        if (options.debug) {\n                            window.console && console.log({\n                                scrollHeight: container.prop('scrollHeight') + ':' + scroll.scrolly.size,\n                                scrollWidth: container.prop('scrollWidth') + ':' + scroll.scrollx.size,\n                                visibleHeight: wrapper.height() + ':' + scroll.scrolly.visible,\n                                visibleWidth: wrapper.width() + ':' + scroll.scrollx.visible\n                            }, true);\n                            timerCounter++;\n                        }\n                    }\n                }\n                if (debug && timerCounter > 10) {\n                    window.console && console.log('Scroll updates exceed 10');\n                    updateScrollbars = function () {\n                    };\n                } else {\n                    clearTimeout(timer);\n                    timer = setTimeout(updateScrollbars, 300);\n                }\n            };\n        })();\n\n        function getBrowserScrollSize(actualSize) {\n\n            if (browser.webkit && !actualSize) {\n                return {\n                    height: 0,\n                    width: 0\n                };\n            }\n\n            if (!browser.data.outer) {\n                var css = {\n                    \"border\": \"none\",\n                    \"box-sizing\": \"content-box\",\n                    \"height\": \"200px\",\n                    \"margin\": \"0\",\n                    \"padding\": \"0\",\n                    \"width\": \"200px\"\n                };\n                browser.data.inner = $(\"<div>\").css($.extend({}, css));\n                browser.data.outer = $(\"<div>\").css($.extend({\n                    \"left\": \"-1000px\",\n                    \"overflow\": \"scroll\",\n                    \"position\": \"absolute\",\n                    \"top\": \"-1000px\"\n                }, css)).append(browser.data.inner).appendTo(\"body\");\n            }\n\n            browser.data.outer.scrollLeft(1000).scrollTop(1000);\n\n            return {\n                // height: Math.ceil((browser.data.outer.offset().top - browser.data.inner.offset().top) || 0),\n                height: 0,\n                width: Math.ceil((browser.data.outer.offset().left - browser.data.inner.offset().left) || 0)\n            };\n        }\n\n        /**\n         * Check if native browser scrollbars overlay content\n         *\n         * @returns {Boolean}\n         */\n        function isScrollOverlaysContent() {\n            var scrollSize = getBrowserScrollSize(true);\n            return !(scrollSize.height || scrollSize.width);\n        }\n\n        function isVerticalScroll(event) {\n            var e = event.originalEvent;\n            if (e.axis && e.axis === e.HORIZONTAL_AXIS){\n                return false;\n            }\n\n            return !e.wheelDeltaX;\n\n        }\n    })($); // custom scrollbar\n\n    (function ($) {\n        $.fn.addBack = $.fn.addBack || $.fn.andSelf;\n\n        $.fn.extend({\n\n            actualScrollHeight: function () {\n                var $target = this.eq(0);\n                var fix, restore;\n                var tmp = [];\n                var style = '';\n                var $hidden;\n                var $this = $(this);\n                fix = function () {\n                    // get all hidden parents\n                    $hidden = $target.parents().addBack().filter(':hidden');\n                    style += 'visibility: hidden !important; display: block !important; ';\n\n\n                    $hidden.each(function () {\n                        var $this = $(this);\n                        var thisStyle = $this.attr('style');\n\n                        tmp.push(thisStyle);\n                        $this.attr('style', thisStyle ? thisStyle + ';' + style : style);\n                    });\n                };\n\n                restore = function () {\n                    // restore origin style values\n                    $hidden.each(function (i) {\n                        var $this = $(this);\n                        var _tmp = tmp[i];\n\n                        if (_tmp === undefined) {\n                            $this.removeAttr('style');\n                        } else {\n                            $this.attr('style', _tmp);\n                        }\n                    });\n                };\n\n                fix();\n                var actual = $target.get(0).scrollHeight;\n                restore();\n\n                return actual;\n            }\n        });\n    })($);\n\n    (function ($, window, document) {\n        $.fn.decorateSelect = function (showEmptyOption, disableSearch) {\n            if (typeof showEmptyOption === 'undefined') { showEmptyOption = false; }\n            if (typeof disableSearch === 'undefined') { disableSearch = false; }\n            var $select = $(this),\n                $uiObject = registry.get('uid=' + $select.attr('id')),\n                $emptyOptions = $select.find('option[value=\"\"]'),\n                $text = '';\n\n            if ($uiObject && $uiObject.indexedOptions['']) {\n                $text = $uiObject.indexedOptions['']['label'];\n            } else if ($emptyOptions.length) {\n                $text = $emptyOptions.first().text();\n            }\n\n            if ($emptyOptions.length) {\n                var $newEmptyOption = $('<option/>').attr('value', '').text($text);\n                var currentVal = $select.val();\n\n                if (!currentVal) {\n                    $newEmptyOption.prop('selected', true);\n                }\n\n                $emptyOptions.remove();\n                $select.prepend($newEmptyOption);\n            }\n\n            $select.change(function(){\n                $select = $(this);\n\n                if ($select && $select[0] && $select[0].selectize) {\n                    $select[0].selectize.addItem($select.val(), true);\n                }\n            }).selectize({\n                selectOnTab: true,\n                persist: false,\n                placeholder: $text,\n                allowEmptyOption: showEmptyOption,\n                disableSearch: disableSearch,\n                onChange: function() {\n                    var value = this.$input.val(),\n                        changed = this.$input.html(),\n                        elements = $(\"select[name='\" + this.$input.attr('name') +\"']\");\n\n                    this.$input.val('');\n                    this.$input.val(value);\n\n                    this.$input.get(0).indeterminate = true;\n                    if (\"createEvent\" in document) {\n                        var c_event = document.createEvent(\"HTMLEvents\");\n                        c_event.initEvent(\"change\", false, true);\n                        this.$input.get(0).dispatchEvent(c_event);\n                    } else {\n                        this.$input.get(0).fireEvent(\"onchange\");\n                    }\n\n                    if (elements.length > 1) {\n                        elements.each(function() {\n                            $(this).html(changed);\n                        });\n                    }\n\n                    this.$input.trigger('change');\n                }\n            });\n\n            $('.selectize-input input').addClass('input-text');\n\n            return this;\n        };\n\n        $.fn.decorateSelectCustom = function() {\n            var select = this;\n            var parent = select.parent();\n            if (select.find('option').length) {\n                var options = select.find('option');\n                var newSelectClass = '';\n                var canUnselect = !!options.filter(function (index) {\n                    return !$(this).html().trim().length && !$(this).val();\n                }).length;\n                if (select.attr('data-can-unselect')) {\n                    canUnselect = select.attr('data-can-unselect');\n                }\n                var selectedOption = options.filter(':selected').first();\n                if (!select.attr('multiple') && (selectedOption.html().trim().length || (selectedOption.length && selectedOption.attr('data-image')))) {\n                    newSelectClass += ' selected';\n                }\n\n                newSelectClass += (select.is(':disabled') ? ' disabled' : '');\n                newSelectClass += (select.attr('multiple') ? ' multiple' : '');\n                var newSelect = $('<div></div>');\n                newSelect\n                    .attr('tabindex', 0)\n                    .attr('title', select.attr('title'))\n                    .attr('data-element-id', select.attr('id'))\n                    .attr('data-can-unselect', canUnselect)\n                    .addClass('iwd_opc_select_container' + newSelectClass);\n                options.each(function () {\n                    var option = $(this);\n                    if (option.html().trim().length) {\n                        var newOptionClass = (option.is(':selected') ? ' selected' : '');\n                        var newOption = $('<div></div>');\n                        var optionHtml = '';\n                        if (option.data('ccTypes')) {\n                            var ccTypes = option.data('ccTypes');\n                            var ccPreviewHtml = $('<div></div>');\n                            var i = 0;\n                            _.each(ccTypes, function (title, code) {\n                                if (i === 2) {\n                                    return false;\n                                }\n\n                                var ccTypeHtml = $('<div class=\"iwd_opc_cc_wrapper\"></div>').attr('data-cc-type', code).attr('title', title);\n                                ccPreviewHtml.append(ccTypeHtml);\n                                i++;\n                            });\n\n                            optionHtml += '<div class=\"iwd_opc_cc_preview\">' + ccPreviewHtml.html() + '</div>';\n                            if (Object.keys(ccTypes).length > 2) {\n                                newOption.addClass('iwd_opc_cc_option_long');\n                                var ccTypesHtml = $('<div class=\"iwd_opc_cc_types_tooltip_content\"></div>');\n                                _.each(ccTypes, function (title, code) {\n                                    var ccTypeHtml = $('<div class=\"iwd_opc_cc_wrapper\"></div>').attr('data-cc-type', code).attr('title', title);\n                                    ccTypesHtml.append(ccTypeHtml);\n                                });\n                                var tooltipContentClass = 'iwd_opc_cc_tooltip_content_small';\n                                if (Object.keys(ccTypes).length > 4) {\n                                    tooltipContentClass = 'iwd_opc_cc_tooltip_content_big';\n                                }\n\n                                optionHtml += '<div data-icon=\"&#xf196\" class=\"iwd_opc_field_tooltip iwd_opc_cc_types_tooltip\"><div class=\"' + tooltipContentClass + ' iwd_opc_field_tooltip_content\">' + ccTypesHtml.html() + '</div></div>';\n                            } else {\n                                newOption.addClass('iwd_opc_cc_option_short');\n                            }\n                        }\n\n                        optionHtml += option.html();\n                        if (option.attr('data-image')) {\n                            newOption.addClass('iwd_opc_option_with_image');\n                            optionHtml += '<img class=\"iwd_opc_option_image\" src=\"' + option.attr('data-image') + '\" />';\n                        }\n\n                        newOption\n                            .html(optionHtml)\n                            .attr('data-value', option.val())\n                            .attr('data-position-top', 0)\n                            .attr('data-first-letter', option.html().charAt(0).toLowerCase())\n                            .addClass('iwd_opc_select_option' + newOptionClass);\n                        newSelect.append(newOption);\n                    }\n                });\n\n                parent.find('.iwd_opc_select_container').scrollbar('destroy');\n                parent.find('.iwd_opc_select_container').remove();\n                parent.append(newSelect);\n                select.attr('tabindex', -1);\n                if (newSelect.hasClass('selected')) {\n                    newSelect.removeClass('selected');\n                    if (newSelect.children().length > 6 || newSelect.actualScrollHeight() > parseInt(newSelect.css('max-height').replace('px', ''))) {\n                        newSelect.scrollbar();\n                    }\n\n                    newSelect.addClass('selected');\n                    newSelect.css('height', 'auto');\n                } else {\n                    if (newSelect.children().length > 6 || newSelect.actualScrollHeight() > parseInt(newSelect.css('max-height').replace('px', ''))) {\n                        newSelect.scrollbar();\n                    }\n                }\n                select.hide();\n            } else {\n                parent.find('.iwd_opc_select_container').scrollbar('destroy');\n                parent.find('.iwd_opc_select_container').remove();\n            }\n\n            return this;\n        };\n    })($, window, document); //decorate select\n\n    function unSelectValueInCustomSelect(option, selectNative) {\n        var newSelect = option.parent();\n        if (typeof(selectNative) === 'undefined') {\n            selectNative = true;\n        }\n\n        if (newSelect.hasClass('multiple')) {\n            option.removeClass('selected');\n            if (selectNative) {\n                unSelectValueInNativeSelect(newSelect.attr('data-element-id'), option.attr('data-value'));\n            }\n\n            return;\n        }\n\n        if (newSelect.hasClass('selected')) {\n            newSelect.removeClass('selected');\n            newSelect.animate({\n                scrollTop: option.position().top - parseInt(option.attr('data-position-top'))\n            }, 0);\n            if (newSelect.attr('data-can-unselect') === \"true\") {\n                option.removeClass('selected');\n                if (selectNative) {\n                    selectValueInNativeSelect(newSelect.attr('data-element-id'), \"\");\n                }\n            }\n        } else {\n            option.attr('data-position-top', option.position().top);\n            newSelect.addClass('selected');\n        }\n\n        // }\n    }\n\n    function selectValueInCustomSelect(option, selectNative) {\n        if (typeof(selectNative) === 'undefined') {\n            selectNative = true;\n        }\n\n        var newSelect = option.parent();\n        option.attr('data-position-top', option.position().top);\n\n        if (!newSelect.hasClass('multiple')) {\n            newSelect.find('.iwd_opc_select_option').removeClass('selected');\n        }\n\n        option.addClass('selected');\n        if (!newSelect.hasClass('multiple')) {\n            newSelect.addClass('selected');\n        }\n\n        if (selectNative) {\n            selectValueInNativeSelect(newSelect.attr('data-element-id'), option.attr('data-value'));\n        }\n\n        newSelect.css('height', 'auto');\n    }\n\n    function selectValueInNativeSelect(elementId, value) {\n        var select = $('select[id=\"' + elementId + '\"]');\n        if (select.length) {\n            if (select.attr('multiple')) {\n                var selectValues = select.val() || [];\n                selectValues.push(value);\n                select.val(selectValues);\n            } else {\n                select.val(value);\n            }\n\n\n            select.get(0).indeterminate = true;\n            if (\"createEvent\" in document) {\n                var c_event = document.createEvent(\"HTMLEvents\");\n                c_event.initEvent(\"change\", false, true);\n                select.get(0).dispatchEvent(c_event);\n            } else {\n                select.get(0).fireEvent(\"onchange\");\n            }\n\n            select.trigger('change');\n        }\n    }\n\n    function unSelectValueInNativeSelect(elementId, value) { //only for multiple selects\n        var select = $('select[id=\"' + elementId + '\"][multiple]');\n        if (select.length) {\n            var selectValues = select.val();\n            selectValues.remove(value);\n            select.val(selectValues);\n            select.get(0).indeterminate = true;\n            if (\"createEvent\" in document) {\n                var c_event = document.createEvent(\"HTMLEvents\");\n                c_event.initEvent(\"change\", false, true);\n                select.get(0).dispatchEvent(c_event);\n            } else {\n                select.get(0).fireEvent(\"onchange\");\n            }\n\n            select.trigger('change');\n        }\n    }\n\n    var section = '.iwd_main_wrapper';\n\n    $(document).on('click',\n        section + ' .iwd_opc_select_container:not(.disabled) .iwd_opc_select_option', function () {\n            var option = $(this);\n            if (option.hasClass('selected')) {\n                unSelectValueInCustomSelect(option);\n            } else {\n                selectValueInCustomSelect(option);\n            }\n        });\n\n    $(document).on('change', section + ' select', function (e) {\n        if ($(this).attr('multiple')) {\n            return;\n        }\n\n        var option = $(section + ' .iwd_opc_select_container[data-element-id=\"' +\n            $(this).attr('id') + '\"] .iwd_opc_select_option[data-value=\"' + $(this).val() + '\"]');\n        if (option.length) {\n            selectValueInCustomSelect(option, false);\n        } else {\n            option = $(section + ' .iwd_opc_select_container[data-element-id=\"' +\n                $(this).attr('id') + '\"] .iwd_opc_select_option.selected');\n            if (option.length) {\n                unSelectValueInCustomSelect(option, false);\n            }\n        }\n    });\n\n    $(document).on('focusout', section + ' .iwd_opc_select_container:not(.disabled), '\n        + section + ' .scroll-wrapper',\n        function (event) {\n            var newSelect = $(this);\n            if (newSelect.hasClass('scroll-wrapper')) {\n                newSelect = newSelect.find('.iwd_opc_select_container').first();\n            }\n\n            if (!newSelect.hasClass('multiple')) {\n                setTimeout(function () {\n                    if (newSelect.find('.iwd_opc_select_option.selected').length) {\n                        newSelect.addClass('selected');\n                    }\n                }, 200);\n            }\n\n            $(section + ' select[id=\"' + $(this).attr('data-element-id') + '\"]')\n                .trigger('blur');\n        });\n\n    $(document).on('keydown', section + ' .iwd_opc_select_container:not(.disabled), '\n        + section + ' .scroll-wrapper', function (e) {\n        var newSelect = $(this);\n        if (newSelect.hasClass('scroll-wrapper')) {\n            newSelect = newSelect.find('.iwd_opc_select_container').first();\n        }\n\n        if (e.keyCode === 13) { //enter\n            if (newSelect.hasClass('selected')) {\n                newSelect.removeClass('selected');\n                if (newSelect.find('.iwd_opc_select_option.selected').length) {\n                    var option = newSelect.find('.iwd_opc_select_option.selected').first();\n                    newSelect.animate({\n                        scrollTop: option.position().top - parseInt(option.attr('data-position-top'))\n                    }, 0);\n                }\n            }\n        } else if (e.keyCode === 27) { //esc\n            if (newSelect.find('.iwd_opc_select_option.selected').length) {\n                newSelect.addClass('selected');\n            }\n        } else if (e.keyCode === 38 || e.keyCode === 40) {\n\n        } else {\n            var key = String.fromCharCode(e.keyCode).toLowerCase();\n            newSelect.find('.iwd_opc_select_option').each(function () {\n                var option = $(this);\n                if (option.attr('data-first-letter').indexOf(key) === 0) {\n                    option.parent().animate({\n                        scrollTop: option.get(0).offsetTop\n                    }, 0);\n                    return false;\n                }\n            });\n        }\n    });\n});\n\nArray.prototype.remove = function () {\n    var what, a = arguments, L = a.length, ax;\n    while (L && this.length) {\n        what = a[--L];\n        while ((ax = this.indexOf(what)) !== -1) {\n            this.splice(ax, 1);\n        }\n    }\n    return this;\n};","IWD_Opc/js/checkout-data.js":"define([\n    'jquery',\n    'Magento_Customer/js/customer-data',\n    'IWD_Opc/js/model/quote'\n], function ($, storage, quote) {\n    'use strict';\n\n    var cacheKey = 'checkout-data';\n\n    var getData = function () {\n        return storage.get(cacheKey)();\n    };\n\n    var saveData = function (checkoutData) {\n        storage.set(cacheKey, checkoutData);\n    };\n\n    /**\n     * @return {*}\n     */\n    getData = function () {\n        var data = storage.get(cacheKey)();\n\n        if ($.isEmptyObject(data)) {\n            data = {\n                'selectedShippingAddress': null,\n                'shippingAddressFromData': null,\n                'newCustomerShippingAddress': null,\n                'selectedShippingRate': null,\n                'selectedPaymentMethod': null,\n                'selectedBillingAddress': null,\n                'billingAddressFormData': null,\n                'newCustomerBillingAddress': null\n            };\n            saveData(data);\n        }\n\n        return data;\n    };\n\n    return {\n        setNeedEstimateShippingRates:function (data) {\n            var obj = getData();\n            obj.needEstimateShippingRates = data;\n            saveData(obj);\n        },\n\n        getNeedEstimateShippingRates: function () {\n            if(getData().needEstimateShippingRates === null || getData().needEstimateShippingRates === undefined){\n                this.setNeedEstimateShippingRates(true);\n            }\n            return getData().needEstimateShippingRates;\n        },\n\n        setSelectedShippingAddress: function (data) {\n            var obj = getData();\n            obj.selectedShippingAddress = data;\n            saveData(obj);\n        },\n\n        getSelectedShippingAddress: function () {\n            return getData().selectedShippingAddress;\n        },\n\n        setShippingAddressFromData: function (data) {\n            var obj = getData();\n            obj.shippingAddressFromData = data;\n            saveData(obj);\n        },\n\n        getShippingAddressFromData: function () {\n            return getData().shippingAddressFromData;\n        },\n\n        setNewCustomerShippingAddress: function (data) {\n            var obj = getData();\n            obj.newCustomerShippingAddress = data;\n            saveData(obj);\n        },\n\n        getNewCustomerShippingAddress: function () {\n            return getData().newCustomerShippingAddress;\n        },\n\n        setSelectedShippingRate: function (data) {\n            var obj = getData();\n            obj.selectedShippingRate = data;\n            saveData(obj);\n        },\n\n        getSelectedShippingRate: function () {\n            return getData().selectedShippingRate;\n        },\n\n        setSelectedPaymentMethod: function (data) {\n            var obj = getData();\n            obj.selectedPaymentMethod = data;\n            saveData(obj);\n        },\n\n        getSelectedPaymentMethod: function () {\n            return getData().selectedPaymentMethod;\n        },\n\n        setComment: function (data) {\n            var obj = getData();\n            obj.comment = data;\n            saveData(obj);\n        },\n\n        getComment: function () {\n            return getData().comment;\n        },\n\n        setIsSubscribe: function (data) {\n            var obj = getData();\n            obj.isSubscribe = data;\n            saveData(obj);\n        },\n\n        getIsSubscribe: function () {\n            if(getData().isSubscribe === null || getData().isSubscribe === undefined){\n                this.setIsSubscribe(quote.isSubscribeByDefault());\n            }\n\n            return getData().isSubscribe;\n        },\n\n        setSelectedBillingAddress: function (data) {\n            var obj = getData();\n            obj.selectedBillingAddress = data;\n            saveData(obj);\n        },\n\n        getSelectedBillingAddress: function () {\n            return getData().selectedBillingAddress;\n        },\n\n        setBillingAddressFromData: function (data) {\n            var obj = getData();\n            obj.billingAddressFromData = data;\n            saveData(obj);\n        },\n\n        getBillingAddressFromData: function () {\n            return getData().billingAddressFromData;\n        },\n\n        setNewCustomerBillingAddress: function (data) {\n            var obj = getData();\n            obj.newCustomerBillingAddress = data;\n            saveData(obj);\n        },\n\n        getNewCustomerBillingAddress: function () {\n            return getData().newCustomerBillingAddress;\n        },\n\n        getValidatedEmailValue: function () {\n            var obj = getData();\n            return (obj.validatedEmailValue) ? obj.validatedEmailValue : '';\n        },\n\n        setValidatedEmailValue: function (email) {\n            var obj = getData();\n            obj.validatedEmailValue = email;\n            saveData(obj);\n        },\n\n        getInputFieldEmailValue: function () {\n            var obj = getData();\n            return (obj.inputFieldEmailValue) ? obj.inputFieldEmailValue : '';\n        },\n\n        setInputFieldEmailValue: function (email) {\n            var obj = getData();\n            obj.inputFieldEmailValue = email;\n            saveData(obj);\n        },\n\n        setIsPasswordVisible: function (data) {\n            var obj = getData();\n            obj.isPasswordVisible = data;\n            saveData(obj);\n        },\n\n        getIsPasswordVisible: function () {\n            return getData().isPasswordVisible;\n        },\n\n        /**\n         * Pulling the checked email value from persistence storage\n         *\n         * @return {*}\n         */\n        getCheckedEmailValue: function () {\n            var obj = getData();\n\n            return obj.checkedEmailValue ? obj.checkedEmailValue : '';\n        },\n\n        /**\n         * Setting the checked email value pulled from persistence storage\n         *\n         * @param {String} email\n         */\n        setCheckedEmailValue: function (email) {\n            var obj = getData();\n\n            obj.checkedEmailValue = email;\n            saveData(obj);\n        }\n    }\n});\n","IWD_Opc/js/block-loader.js":"define([\n    'ko',\n    'jquery',\n    'Magento_Ui/js/lib/knockout/template/loader',\n    'mage/template'\n], function (ko, $, templateLoader, template) {\n    'use strict';\n\n    var blockLoaderTemplatePath = 'IWD_Opc/block-loader',\n        blockContentLoadingClass = '_block-content-loading',\n        iwdBlockLoader,\n        blockLoaderClass;\n\n    templateLoader.loadTemplate(blockLoaderTemplatePath).done(function (blockLoaderTemplate) {\n        iwdBlockLoader = template($.trim(blockLoaderTemplate), {});\n        iwdBlockLoader = $(iwdBlockLoader);\n        blockLoaderClass = '.' + iwdBlockLoader.attr('class');\n    });\n\n    $(document).off('keypress keydown change', '.iwd_main_wrapper input, .iwd_main_wrapper select, .iwd_main_wrapper textarea');\n    $(document).on('keypress keydown change', '.iwd_main_wrapper input, .iwd_main_wrapper select, .iwd_main_wrapper textarea', function (e) {\n        if ($(this).closest('._block-content-loading').length) {\n            e.preventDefault();\n            e.stopPropagation();\n            return false;\n        }\n    });\n    /**\n     * Helper function to check if blockContentLoading class should be applied.\n     * @param {Object} element\n     * @returns {Boolean}\n     */\n    function isLoadingClassRequired(element) {\n        var position = element.css('position');\n\n        return !(position === 'absolute' || position === 'fixed');\n    }\n\n    /**\n     * Add loader to block.\n     * @param {Object} element\n     */\n    function addBlockLoader(element) {\n        element.find(':focus').blur();\n        // element.find('input:disabled, select:disabled').addClass('_disabled');\n        // element.find('input, select').prop('disabled', true);\n\n        if (isLoadingClassRequired(element)) {\n            element.addClass(blockContentLoadingClass);\n        }\n        element.append(iwdBlockLoader.clone());\n    }\n\n    /**\n     * Remove loader from block.\n     * @param {Object} element\n     */\n    function removeBlockLoader(element) {\n        if (!element.has(blockLoaderClass).length) {\n            return;\n        }\n        element.find(blockLoaderClass).remove();\n        // element.find('input:not(\"._disabled\"), select:not(\"._disabled\")').prop('disabled', false);\n        // element.find('input:disabled, select:disabled').removeClass('_disabled');\n        element.removeClass(blockContentLoadingClass);\n    }\n\n    return function () {\n        ko.bindingHandlers.iwdBlockLoader = {\n            /**\n             * Process loader for block\n             * @param {String} element\n             * @param {Boolean} displayBlockLoader\n             */\n            update: function (element, displayBlockLoader) {\n                element = $(element);\n\n                if (ko.unwrap(displayBlockLoader())) {\n                    addBlockLoader(element);\n                } else {\n                    removeBlockLoader(element);\n                }\n            }\n        };\n    };\n});\n","IWD_Opc/js/view/payment.js":"define(\n    [\n        'jquery',\n        \"underscore\",\n        'uiComponent',\n        'ko',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/payment-service',\n        'Magento_Checkout/js/model/payment/method-converter',\n        'Magento_Checkout/js/action/get-payment-information',\n        'Magento_Checkout/js/model/checkout-data-resolver',\n        'mage/translate',\n        'Magento_Checkout/js/checkout-data',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/model/payment/method-list',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'uiRegistry',\n        'IWD_Opc/js/model/payment/is-loading',\n        'Magento_Checkout/js/action/set-billing-address',\n        'Magento_Ui/js/model/messageList',\n        'mage/validation'\n    ],\n    function ($,\n              _,\n              Component,\n              ko,\n              quote,\n              paymentService,\n              methodConverter,\n              getPaymentInformation,\n              checkoutDataResolver,\n              $t,\n              checkoutData,\n              fullScreenLoader,\n              methodList,\n              additionalValidators,\n              registry,\n              paymentIsLoading,\n              setBillingAddressAction,\n              globalMessageList) {\n        'use strict';\n\n        /** Set payment methods to collection */\n        paymentService.setPaymentMethods(methodConverter(window.checkoutConfig.paymentMethods));\n\n        $.validator.addMethod('validate-iwd-opc-cc-exp', function (value, element) {\n            var isValid = false;\n            var monthField = $(element).closest('.field').find('select[name=\"payment[cc_exp_month]\"]');\n            var yearField = $(element).closest('.field').find('select[name=\"payment[cc_exp_year]\"]');\n            if (monthField.length && yearField.length) {\n                isValid = monthField.val() && yearField.val();\n            }\n\n            return isValid;\n        }, 'This is a required field.');\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment',\n                activeMethod: ''\n            },\n            isLoading: paymentIsLoading.isLoading,\n            isShowSubscribe: quote.isShowSubscribe(),\n            isSubscribe: ko.observable(checkoutData.getIsSubscribe()),\n            quoteIsVirtual: quote.isVirtual(),\n            isPaymentMethodsAvailable: ko.computed(function () {\n                return paymentService.getAvailablePaymentMethods().length > 0;\n            }),\n            isPlaceOrderActionAllowed: ko.observable(true),\n\n            initialize: function () {\n                this._super();\n                this.navigate();\n                var self = this;\n                this.isSubscribe.subscribe(function (value) {\n                    checkoutData.setIsSubscribe(value);\n                });\n                $(document).on('mouseover', '.iwd_opc_cc_types_tooltip', function () {\n                    var fixedContent = $(this).find('.iwd_opc_field_tooltip_content');\n                    if (fixedContent.length) {\n                        fixedContent.offset({\n                            left: $(this).offset().left - fixedContent.width() - 44,\n                            top: $(this).offset().top - (fixedContent.height() / 2) + 2\n                        });\n                    }\n                });\n\n                $(document).on('input', '.iwd_opc_cc_wrapper .iwd_opc_cc_input', function (e) {\n                    self.formatCcNumber($(this), e);\n                    var v = $(this).val().replace(/\\s+/g, '').replace(/[^0-9]/gi, '');\n                    self.fillCcNumberField($(this), v);\n                });\n\n                $(document).on('keydown', '.iwd_opc_cc_exp, .iwd_opc_cc_wrapper .iwd_opc_cc_input', function (e) {\n                    self.checkNumberInput($(this), e);\n                });\n\n                $(document).on('input', '.iwd_opc_cc_exp', function (e) {\n                    var value = $(this).val();\n                    if (value.length > 2 && value[2] !== '/') {\n                        var cursorPosition = $(this).prop('selectionStart');\n                        value = value.replace('/', '');\n                        var month = value.substring(0, 2);\n                        var year = value.substring(2);\n                        value = month + '/' + year;\n                        value = value.substring(0, 7);\n                        $(this).val(value);\n                        $(this).selectRange(cursorPosition + 1);\n                    }\n\n                    var ccExpMonthYearArr = value.split('/');\n                    var is_valid = false;\n                    if (ccExpMonthYearArr[0] && ccExpMonthYearArr[1]) {\n                        var ccExpMonth = parseInt(ccExpMonthYearArr[0]);\n                        var ccExpYear = parseInt(ccExpMonthYearArr[1]);\n                        var currentTime = new Date();\n                        var currentMonth = currentTime.getMonth() + 1;\n                        var currentYear = currentTime.getFullYear();\n                        if (ccExpMonth > 12) {\n                            is_valid = false;\n                        } else if (ccExpYear > currentYear) {\n                            is_valid = true;\n                        } else if (ccExpMonth >= currentMonth && ccExpYear === currentYear) {\n                            is_valid = true;\n                        }\n\n                        if (is_valid) {\n                            self.fillCcExpDateFields($(this), ccExpMonth, ccExpYear);\n                        }\n                    }\n\n                    if (!is_valid) {\n                        self.fillCcExpDateFields($(this), '', '');\n                    }\n                });\n\n                return this;\n            },\n            formatCcNumber: function (element, e) {\n                var value = element.val();\n                if (value) {\n                    var clear_value = value.replace(/\\s+/g, '').replace(/[^0-9]/gi, '');\n                    var formatted_value = clear_value;\n                    var cursorPosition = element.prop('selectionStart');\n                    var matches = clear_value.match(/\\d{4,24}/g);\n                    var match = matches && matches[0] || '';\n                    var parts = [];\n                    for (var i = 0; i < match.length; i += 4) {\n                        parts.push(match.substring(i, i + 4))\n                    }\n\n                    if (parts.length) {\n                        formatted_value = parts.join(' ');\n                        var test_value = value.substring(0, cursorPosition);\n                        var test_formatted_value = formatted_value.substring(0, cursorPosition);\n                        var test_value_length = test_value.match(/ /g) ? test_value.match(/ /g).length : 0;\n                        var test_formatted_value_length = test_formatted_value.match(/ /g) ? test_formatted_value.match(/ /g).length : 0;\n                        if (test_formatted_value_length > test_value_length) {\n                            cursorPosition = cursorPosition + test_formatted_value_length - test_value_length;\n                        }\n                    }\n\n                    if ((cursorPosition % 5) === 0) {\n                        cursorPosition = cursorPosition - 1;\n                    }\n\n                    element.val(formatted_value);\n                    element.selectRange(cursorPosition);\n                }\n            },\n\n            fillCcNumberField: function (element, value) {\n                var ccNumberField = element.closest('.field').find('input.iwd_opc_cc_real_input');\n                if (ccNumberField.length) {\n                    ccNumberField.val(value);\n                    ccNumberField.trigger('keyup');\n                    ccNumberField.trigger('value');\n                    ccNumberField.trigger('input');\n                }\n            },\n\n            fillCcExpDateFields: function (element, expMonth, expYear) {\n                var monthField = element.closest('.field').find('select[name=\"payment[cc_exp_month]\"]');\n                var yearField = element.closest('.field').find('select[name=\"payment[cc_exp_year]\"]');\n\n                if (monthField.length && yearField.length) {\n                    monthField.val(expMonth).trigger('change');\n                    yearField.val(expYear).trigger('change');\n                }\n            },\n\n            checkNumberInput: function (element, e) {\n                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||\n                    (e.keyCode === 65 && e.ctrlKey === true) ||\n                    e.ctrlKey === true ||\n                    e.shiftKey === true ||\n                    (e.keyCode === 67 && e.ctrlKey === true) ||\n                    (e.keyCode === 88 && e.ctrlKey === true) ||\n                    (e.keyCode >= 35 && e.keyCode <= 39)) {\n                    return true;\n                } else if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {\n                    e.preventDefault();\n                    return false;\n                }\n\n                return null;\n            },\n            navigate: function () {\n                var self = this;\n                paymentIsLoading.isLoading(true);\n                getPaymentInformation().always(function () {\n                    paymentIsLoading.isLoading(false);\n                });\n            },\n\n            getFormKey: function () {\n                return window.checkoutConfig.formKey;\n            },\n\n            placeOrder: function (data, event) {\n                var self = this;\n                this.isPlaceOrderActionAllowed(false);\n                if (event) {\n                    event.preventDefault();\n                }\n\n                if (additionalValidators.validate()) {\n                    if (!quote.isVirtual()) {\n                        var shippingAddress = registry.get('checkout.steps.shipping-step.shippingAddress');\n                        shippingAddress.setShippingInformation().done(function () {\n\t\t\tlocalStorage.setItem('custom_attributes',JSON.stringify(shippingAddress.source.shippingAddress));\n\n\t\t\t\t\t\t\t\n                            self.clickNativePlaceOrder();\n                        }).fail(function () {\n                            self.isPlaceOrderActionAllowed(true);\n                        });\n                    } else {\n                        if (quote.paymentMethod() && quote.paymentMethod().method === 'braintree_paypal') {\n                            self.clickNativePlaceOrder();\n                        } else {\n                            setBillingAddressAction(globalMessageList).done(function () {\n                                self.clickNativePlaceOrder();\n                            }).fail(function () {\n                                self.isPlaceOrderActionAllowed(true);\n                            });\n                        }\n                    }\n                } else {\n                    this.isPlaceOrderActionAllowed(true);\n                }\n            },\n            clickNativePlaceOrder: function () {\n                this.isPlaceOrderActionAllowed(true);\n                $('.payment-method._active button[type=submit].checkout').click();\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/checkout-agreements.js":"define(\n    [\n        'ko',\n        'jquery',\n        'uiComponent'\n    ],\n    function (ko, $, Component) {\n        'use strict';\n        var checkoutConfig = window.checkoutConfig,\n            agreementManualMode = \"1\",\n            agreementsConfig = checkoutConfig ? checkoutConfig.checkoutAgreements : {};\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/checkout-agreements'\n            },\n            isVisible: agreementsConfig.isEnabled,\n            agreements: agreementsConfig.agreements,\n\n            appendScrollbar: function (element) {\n                $(element).scrollbar();\n            },\n\n            /**\n             * Checks if agreement required\n             *\n             * @param element\n             */\n            isAgreementRequired: function (element) {\n                return element.mode === agreementManualMode;\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/login-button.js":"define([\n    'ko',\n    'jquery',\n    'uiComponent',\n    'Magento_Checkout/js/model/quote',\n    'mage/translate'\n], function (ko, $, Component, quote, $t) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'IWD_Opc/login-button',\n            isShowLoginButton: quote.isShowLoginButton(),\n            isCustomerLoggedIn: quote.isCustomerLoggedIn(),\n            logoutUrl: quote.getLogoutUrl()\n        }\n    });\n});\n","IWD_Opc/js/view/shipping.js":"define(\n    [\n        'jquery',\n        'underscore',\n        'Magento_Ui/js/form/form',\n        'ko',\n        'Magento_Customer/js/model/customer',\n        'Magento_Customer/js/model/address-list',\n        'Magento_Checkout/js/model/address-converter',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/action/create-shipping-address',\n        'Magento_Checkout/js/action/select-shipping-address',\n        'Magento_Checkout/js/model/shipping-rates-validator',\n        'Magento_Checkout/js/model/shipping-service',\n        'Magento_Checkout/js/action/select-shipping-method',\n        'Magento_Checkout/js/model/shipping-rate-registry',\n        'Magento_Checkout/js/action/set-shipping-information',\n        'Magento_Checkout/js/model/checkout-data-resolver',\n        'Magento_Checkout/js/checkout-data',\n        'Magento_Catalog/js/price-utils',\n        'uiRegistry',\n        'mage/translate',\n        'Magento_Checkout/js/model/cart/totals-processor/default',\n        'IWD_Opc/js/model/payment/is-loading',\n        'Magento_Checkout/js/model/shipping-rate-service',\n        'iwdOpcHelper',\n        'mage/validation'\n    ],\n    function ($,\n              _,\n              Component,\n              ko,\n              customer,\n              addressList,\n              addressConverter,\n              quote,\n              createShippingAddress,\n              selectShippingAddress,\n              shippingRatesValidator,\n              shippingService,\n              selectShippingMethodAction,\n              rateRegistry,\n              setShippingInformationAction,\n              checkoutDataResolver,\n              checkoutData,\n              priceUtils,\n              registry,\n              $t,\n              totalsDefaultProvider,\n              paymentIsLoading) {\n        'use strict';\n\n        var inlineAddress = \"\",\n            newAddressOption = {\n            getAddressInline: function () {\n                return $t('New Address');\n            },\n            customerAddressId: null\n        }, addressOptions = addressList().filter(function (address) {\n            var isDublicate = inlineAddress === address.getAddressInline();\n                inlineAddress = address.getAddressInline();\n            return address.getType() === 'customer-address' && !isDublicate;\n        });\n        addressOptions.push(newAddressOption);\n\n        var setShippingInformationTimeout = null,\n            getTotalsTimeout = null,\n            instance = null,\n            totalsProcessors = [];\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/shipping'\n            },\n            canHideErrors: true,\n            isCustomerLoggedIn: customer.isLoggedIn,\n            customerHasAddresses: addressOptions.length > 1,\n            isAddressFormVisible: ko.observable(addressList().length === 0),\n            saveInAddressBook: 1,\n            addressOptions: addressOptions,\n            selectedAddress: ko.observable(),\n            displayAllMethods: window.checkoutConfig.iwdOpcSettings.displayAllMethods,\n            specificMethodsForDisplayAllMethods: ['iwdstorepickup'],\n\n            quoteIsVirtual: quote.isVirtual(),\n\n            isShowGiftMessage: quote.isShowGiftMessage(),\n            isShowDelimiterAfterShippingMethods: quote.isShowComment() || quote.isShowGiftMessage(),\n            isShowComment: quote.isShowComment(),\n            commentValue: ko.observable(checkoutData.getComment()),\n\n\n            rateBuilding: ko.observable(false),\n            shippingRateGroups: ko.observableArray([]),\n            shippingRates: ko.observableArray([]),\n            shippingRate: ko.observable(),\n            shippingRateGroup: ko.observable(),\n            rates: shippingService.getShippingRates(),\n            shippingRateGroupsCaption: ko.observable(null),\n            shippingRatesCaption: ko.observable(null),\n            isShippingRatesVisible: ko.observable(false),\n\n            isRatesLoading: shippingService.isLoading,\n            initialize: function () {\n                var self = this,\n                    fieldsetName = 'checkout.steps.shipping-step.shippingAddress.shipping-address-fieldset';\n                this._super();\n\n                instance = this;\n                shippingRatesValidator.initFields(fieldsetName);\n                checkoutDataResolver.resolveShippingAddress();\n                registry.async('checkoutProvider')(function (checkoutProvider) {\n                    var shippingAddressData = checkoutData.getShippingAddressFromData();\n                    if (shippingAddressData) {\n                        checkoutProvider.set(\n                            'shippingAddress',\n                            $.extend({}, checkoutProvider.get('shippingAddress'), shippingAddressData)\n                        );\n                    }\n\n                    checkoutProvider.on('shippingAddress', function (shippingAddressData) {\n                        checkoutData.setShippingAddressFromData(shippingAddressData);\n                    });\n                });\n\n                totalsProcessors['default'] = totalsDefaultProvider;\n\n                if (addressList().length !== 0) {\n                    this.selectedAddress.subscribe(function (addressId) {\n                        if (typeof addressId === 'undefined' || addressId === '') { addressId = null; }\n                        var address = _.filter(self.addressOptions, function (address) {\n                            return address.customerAddressId === addressId;\n                        })[0];\n                        self.isAddressFormVisible(address === newAddressOption);\n                        if (address && address.customerAddressId) {\n                            if (quote.shippingAddress() && quote.shippingAddress().getKey() === address.getKey()) {\n                                return;\n                            }\n\n                            selectShippingAddress(address);\n                            checkoutData.setSelectedShippingAddress(address.getKey());\n                        } else {\n                            var addressData,\n                                newShippingAddress;\n                            addressData = self.source.get('shippingAddress');\n                            addressData.save_in_address_book = self.saveInAddressBook ? 1 : 0;\n                            newShippingAddress = addressConverter.formAddressDataToQuoteAddress(addressData);\n                            selectShippingAddress(newShippingAddress);\n                            checkoutData.setSelectedShippingAddress(newShippingAddress.getKey());\n                            checkoutData.setNewCustomerShippingAddress(addressData);\n                        }\n                    });\n\n                    if (quote.shippingAddress()) {\n                        this.selectedAddress(quote.shippingAddress().customerAddressId);\n                    }\n                }\n\n                this.commentValue.subscribe(function (value) {\n                    checkoutData.setComment(value);\n                });\n\n                quote.shippingMethod.subscribe(function (shippingMethod) {\n                    clearTimeout(setShippingInformationTimeout);\n                    if (shippingMethod) {\n                        var carrierTitle = self.formatCarrierTitle(shippingMethod);\n                        self.shippingRateGroup(carrierTitle);\n                        self.shippingRate(shippingMethod.carrier_code + '_' + shippingMethod.method_code);\n                    } else {\n                        self.shippingRateGroup('');\n                        self.shippingRate('');\n                    }\n\n                    clearTimeout(setShippingInformationTimeout);\n                    clearTimeout(getTotalsTimeout);\n                    if (shippingMethod) {\n                        setShippingInformationTimeout = setTimeout(function () {\n                            clearTimeout(getTotalsTimeout);\n                            self.setShippingInformation();\n                        }, 400);\n                    } else {\n                        getTotalsTimeout = setTimeout(function () {\n                            clearTimeout(setShippingInformationTimeout);\n                            var type = quote.shippingAddress().getType();\n                            totalsProcessors[type]\n                                ? totalsProcessors[type].estimateTotals(quote.shippingAddress())\n                                : totalsProcessors['default'].estimateTotals(quote.shippingAddress());\n                        }, 400);\n                    }\n                    self.validateShippingInformation();\n                });\n\n                this.rates.subscribe(function (rates) {\n                    self.rateBuilding(true);\n                    self.shippingRateGroups([]);\n                    if (rates.length > 1) {\n                        self.shippingRateGroupsCaption('');\n                    } else {\n                        self.shippingRateGroupsCaption(null);\n                    }\n\n                    _.each(rates, function (rate) {\n                        if (rate) {\n                            var carrierTitle = self.formatCarrierTitle(rate);\n                            if (rate.error_message || !rate.method_code) {\n                                self.rates.remove(rate);\n                            }\n\n                            if (self.shippingRateGroups.indexOf(carrierTitle) === -1) {\n                                self.shippingRateGroups.push(carrierTitle);\n                            }\n                        }\n                    });\n                    self.rateBuilding(false);\n                });\n\n                this.shippingRateGroup.subscribe(function (carrierTitle) {\n                    if (carrierTitle == '') {\n                        return;\n                    }\n\n                    self.shippingRates([]);\n                    var ratesByGroup = _.filter(self.rates(), function (rate) {\n                        return carrierTitle === self.formatCarrierTitle(rate);\n                    });\n\n                    if (ratesByGroup.length === 0) {\n                        self.selectShippingMethod('');\n                    }\n\n                    if (ratesByGroup.length > 1) {\n                        self.shippingRatesCaption('');\n                    } else {\n                        self.shippingRatesCaption(null);\n                    }\n\n                    var $selectize = $('#iwd_opc_shipping_method_rates').length\n                        ? $('#iwd_opc_shipping_method_rates')[0].selectize\n                        : false;\n\n                    if ($selectize) {\n                        $selectize.loadedSearches = {};\n                        $selectize.userOptions = {};\n                        $selectize.renderCache = {};\n                        $selectize.options = $selectize.sifter.items = {};\n                        $selectize.lastQuery = null;\n                        $selectize.updateOriginalInput({silent: true});\n                    }\n\n                    _.each(ratesByGroup, function (rate) {\n                        if (self.shippingRates.indexOf(rate) === -1) {\n                            rate = self.formatShippingRatePrice(rate);\n                            self.shippingRates.push(rate);\n\n                            if (rate.available && $selectize) {\n                                $selectize.addOption({text: self.shippingRateTitle(rate), value: rate.carrier_code + '_' + rate.method_code})\n                            }\n                        }\n                    });\n\n                    if ($selectize) {\n                        $selectize.refreshOptions(false);\n                        $selectize.refreshItems();\n\n                        if (ratesByGroup.length) {\n                            $selectize.addItem(ratesByGroup[0].carrier_code + '_' + ratesByGroup[0].method_code);\n                        }\n                    }\n                });\n\n                this.shippingRates.subscribe(function (rate) {\n                    var minLength = (self.displayAllMethods) ? 1 : 0;\n\n                    if (self.shippingRates().length > minLength) {\n                        self.isShippingRatesVisible(true);\n                    } else {\n                        self.isShippingRatesVisible(false);\n                    }\n                });\n\n                return this;\n            },\n\n            optionsRenderCallback: [],\n\n            decorateSelect: function (uid) {\n                if (typeof(this.optionsRenderCallback[uid]) !== 'undefined') {\n                    clearTimeout(this.optionsRenderCallback[uid]);\n                }\n\n                this.optionsRenderCallback[uid] = setTimeout(function () {\n                    var select = $('#' + uid);\n                    if (select.length) {\n                        select.decorateSelectCustom();\n                    }\n                }, 0);\n            },\n\n            formatShippingRatePrice: function (rate) {\n                if (rate.price_excl_tax !== 0 && rate.price_incl_tax !== 0) {\n                    if (window.checkoutConfig.isDisplayShippingBothPrices && (rate.price_excl_tax !== rate.price_incl_tax)) {\n                        rate.formatted_price = priceUtils.formatPrice(rate.price_excl_tax, quote.getPriceFormat());\n                        rate.formatted_price += ' (' + $t('Incl. Tax') + ' ' + priceUtils.formatPrice(rate.price_incl_tax, quote.getPriceFormat()) + ')';\n                    } else {\n                        if (window.checkoutConfig.isDisplayShippingPriceExclTax) {\n                            rate.formatted_price = priceUtils.formatPrice(rate.price_excl_tax, quote.getPriceFormat());\n                        } else {\n                            rate.formatted_price = priceUtils.formatPrice(rate.price_incl_tax, quote.getPriceFormat());\n                        }\n                    }\n                }\n\n                return rate;\n            },\n\n            setShippingInformation: function () {\n                if (this.isAddressFormVisible()) {\n                    var shippingAddress,\n                        addressData;\n                    shippingAddress = quote.shippingAddress();\n                    addressData = addressConverter.formAddressDataToQuoteAddress(\n                        this.source.get('shippingAddress')\n                    );\n\n                    for (var field in addressData) {\n                        if (addressData.hasOwnProperty(field) &&\n                            shippingAddress.hasOwnProperty(field) &&\n                            typeof addressData[field] !== 'function' &&\n                            _.isEqual(shippingAddress[field], addressData[field])\n                        ) {\n                            shippingAddress[field] = addressData[field];\n                        } else if (typeof addressData[field] !== 'function' &&\n                            !_.isEqual(shippingAddress[field], addressData[field])) {\n                            shippingAddress = addressData;\n                            break;\n                        }\n                    }\n\n                    if (customer.isLoggedIn()) {\n                        shippingAddress.save_in_address_book = this.saveInAddressBook ? 1 : 0;\n                    }\n\n                    checkoutData.setNeedEstimateShippingRates(false);\n                    selectShippingAddress(shippingAddress);\n                    if (customer.isLoggedIn()) {\n                        checkoutData.setNewCustomerShippingAddress(shippingAddress);\n                    }\n\n                    checkoutData.setNeedEstimateShippingRates(true);\n                }\n\n                if (quote.shippingMethod()) {\n                    paymentIsLoading.isLoading(true);\n                    return setShippingInformationAction().always(function () {\n                        paymentIsLoading.isLoading(false);\n                    });\n                } else {\n                    return $.Deferred();\n                }\n            },\n\n            textareaAutoSize: function (element) {\n                $(element).textareaAutoSize();\n            },\n\n            shippingRateTitle: function (rate) {\n                var title = '';\n                if (rate) {\n                    if (rate.formatted_price) {\n                        title += rate.formatted_price + ' - ';\n                    }\n                }\n\n                title += rate.method_title;\n\n                return title;\n            },\n\n            shippingRateTitleFull: function(rate) {\n                var title = this.shippingRateTitle(rate);\n                if (rate.carrier_title) {\n                    title += ': ' + rate.carrier_title;\n                }\n\n                return title;\n            },\n\n            formatCarrierTitle: function (rate) {\n                var carrierTitle = rate['carrier_title'];\n\n                if (this.displayAllMethods && this.specificMethodsForDisplayAllMethods.indexOf(rate.carrier_code)) {\n                    rate = this.formatShippingRatePrice(rate);\n                    carrierTitle = this.shippingRateTitleFull(rate);\n                }\n\n                return carrierTitle\n            },\n\n            addressOptionsText: function (address) {\n                return address.getAddressInline();\n            },\n\n            selectShippingMethod: function (shippingMethod, shippingRates) {\n                if (instance.rateBuilding()) {\n                    return;\n                }\n\n                if (shippingMethod) {\n                    var shippingMethodObject = _.filter(shippingRates, function (rate) {\n                        return rate.carrier_code + '_' + rate.method_code === shippingMethod;\n                    });\n                    selectShippingMethodAction(shippingMethodObject[0]);\n                    checkoutData.setSelectedShippingRate(shippingMethod);\n                } else if (shippingMethod === '') {\n                    selectShippingMethodAction(null);\n                    checkoutData.setSelectedShippingRate(null);\n                    quote.setDefaultShippingMethod(null);\n                    quote.setSelectedShippingMethod(null);\n                }\n\n                return true;\n            },\n\n            validateShippingInformation: function (showErrors) {\n                var loginFormSelector = 'form[data-role=email-with-possible-login]',\n                    self = this,\n                    emailValidationResult = customer.isLoggedIn(),\n                    shippingMethodValidationResult = true;\n                showErrors = showErrors || false;\n                var shippingMethodForm = $('#co-shipping-method-form'),\n                    shippingMethodSelectors = shippingMethodForm.find('.select');\n                shippingMethodSelectors.removeClass('mage-error');\n                shippingMethodForm.validate({\n                    errorClass: 'mage-error',\n                    errorElement: 'div',\n                    meta: 'validate'\n                });\n                shippingMethodForm.validation();\n                //additional validation for non-selected shippingMethod\n                if(showErrors && !quote.shippingMethod()) {\n                    shippingMethodSelectors.addClass('mage-error');\n                }\n\n                if (!shippingMethodForm.validation('isValid') || !quote.shippingMethod()) {\n                    if (!showErrors && this.canHideErrors && shippingMethodForm.length) {\n                        shippingMethodForm.validate().resetForm();\n                    }\n\n                    shippingMethodValidationResult = false;\n                }\n\n                if (!customer.isLoggedIn() && $(loginFormSelector).length) {\n                    $(loginFormSelector).validation();\n                    emailValidationResult = Boolean($(loginFormSelector + ' input[name=username]').valid());\n                    if (!showErrors && this.canHideErrors) {\n                        $(loginFormSelector).validate().resetForm();\n                    }\n                }\n\n                if (this.isAddressFormVisible()) {\n                    this.source.set('params.invalid', false);\n                    this.source.trigger('shippingAddress.data.validate');\n\n                    if (this.source.get('shippingAddress.custom_attributes')) {\n                        this.source.trigger('shippingAddress.custom_attributes.data.validate');\n                    }\n\n                    if (this.source.get('params.invalid') ||\n                        !quote.shippingMethod() ||\n                        !emailValidationResult ||\n                        !shippingMethodValidationResult\n                    ) {\n                        if (!showErrors && this.canHideErrors) {\n                            var shippingAddress = this.source.get('shippingAddress');\n                            shippingAddress = _.extend({\n                                region_id: '',\n                                region_id_input: '',\n                                region: ''\n                            }, shippingAddress);\n                            _.each(shippingAddress, function (value, index) {\n                                self.hideErrorForElement(value, index);\n                            });\n                            this.source.set('params.invalid', false)\n                        }\n\n                        return false;\n                    }\n                }\n\n                return emailValidationResult && shippingMethodValidationResult;\n            },\n            hideErrorForElement: function (value, index) {\n                var self = this;\n                if (typeof(value) === 'object') {\n                    _.each(value, function (childValue, childIndex) {\n                        var newIndex = (index === 'custom_attributes' ? childIndex : index + '.' + childIndex);\n                        self.hideErrorForElement(childValue, newIndex);\n                    })\n                }\n\n                var fieldObj = registry.get('checkout.steps.shipping-step.shippingAddress.shipping-address-fieldset.' + index);\n                if (fieldObj) {\n                    if (typeof (fieldObj.error) === 'function') {\n                        fieldObj.error(false);\n                    }\n                }\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/gift-message.js":"define([\n    'ko',\n    'jquery',\n    'uiComponent',\n    'mage/translate',\n    'underscore',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Catalog/js/price-utils',\n    'IWD_Opc/js/action/gift-message',\n    'iwdOpcHelper'\n], function (ko, $, Component, $t, _, quote, priceUtils, giftMessageAction) {\n    'use strict';\n    var giftOptionsConfig = window.giftOptionsConfig ? window.giftOptionsConfig : null;\n\n    var giftWrappingConfig = giftOptionsConfig ?\n        giftOptionsConfig.giftWrapping :\n        window.checkoutConfig.giftWrapping;\n\n    var giftMessageConfig = giftOptionsConfig ? giftOptionsConfig.giftMessage : null;\n\n    return Component.extend({\n        defaults: {\n            template: 'IWD_Opc/gift-message'\n        },\n\n        isLoading: ko.observable(false),\n        saveMessageDelay: 1800,\n        saveMessageTimeouts: [],\n\n        optionsRenderCallback: [],\n\n        decorateSelect: function (uid) {\n            if (typeof(this.optionsRenderCallback[uid]) !== 'undefined') {\n                clearTimeout(this.optionsRenderCallback[uid]);\n            }\n\n            this.optionsRenderCallback[uid] = setTimeout(function () {\n                var select = $('#' + uid);\n                if (select.length) {\n                    select.decorateSelect();\n                }\n            }, 0);\n        },\n\n        initialize: function () {\n            var self = this;\n            this._super();\n\n            if (giftWrappingConfig) {\n                this.isAllowPrintedCard = ko.observable(!!giftWrappingConfig.isAllowPrintedCard);\n                this.isAllowGiftReceipt = ko.observable(!!giftWrappingConfig.isAllowGiftReceipt);\n                this.isGiftReceiptUsed = ko.observable(giftWrappingConfig.appliedGiftReceipt === '1');\n                this.isPrintedCardUsed = ko.observable(giftWrappingConfig.appliedPrintedCard === '1');\n                this.giftWrapForOrder = ko.observable(giftWrappingConfig.appliedWrapping.orderLevel);\n                this.giftWrapForItems = (!!giftWrappingConfig.appliedWrapping.itemLevel) ? giftWrappingConfig.appliedWrapping.itemLevel : false;\n            }\n\n\n            var isUsedForOrderLevel = giftMessageConfig && giftMessageConfig.hasOwnProperty('orderLevel');\n            if (isUsedForOrderLevel) {\n                if (giftMessageConfig.orderLevel.gift_message_id) {\n                    isUsedForOrderLevel = true;\n                } else if (giftWrappingConfig) {\n                    isUsedForOrderLevel = this.isGiftReceiptUsed() || this.isPrintedCardUsed() || this.giftWrapForOrder();\n                } else {\n                    isUsedForOrderLevel = false;\n                }\n            }\n\n            this.isUsedForOrderLevel = ko.observable(isUsedForOrderLevel);\n            this.isUsedForOrderLevel.subscribe(function (value) {\n                self.saveGiftMessage('orderLevel', value);\n            });\n\n            var isUsedForItemsLevel = false;\n            if (giftMessageConfig.hasOwnProperty('itemLevel')) {\n                isUsedForItemsLevel = !!_.find(giftMessageConfig.itemLevel, function (item) {\n                    return item.hasOwnProperty('message') && item.message.gift_message_id;\n                });\n            }\n\n            if (!isUsedForItemsLevel && giftWrappingConfig) {\n                isUsedForItemsLevel = this.giftWrapForItems;\n            }\n\n            this.isUsedForItemsLevel = ko.observable(isUsedForItemsLevel);\n            this.isUsedForItemsLevel.subscribe(function (value) {\n                _.each(self.getGiftMessageItems(), function (item) {\n                    if (self.isUsedForItemLevel[item.id]()) {\n                        self.saveGiftMessage(item.id, value);\n                    }\n                });\n            });\n            this.isUsedForCheckout = ko.observable(isUsedForOrderLevel || isUsedForItemsLevel);\n\n            this.isUsedForItemLevel = {};\n            _.each(this.getGiftMessageItems(), function (item) {\n                var isUsedForItem = !!item.message;\n                if (!isUsedForItem && giftWrappingConfig) {\n                    isUsedForItem = !!self.giftWrapForItems[item.id];\n                }\n\n                self.isUsedForItemLevel[item.id] = ko.observable(isUsedForItem);\n                self.isUsedForItemLevel[item.id].subscribe(function (value) {\n                    self.saveGiftMessage(item.id, value);\n                });\n            });\n\n            this.bindGiftMessageFields();\n        },\n\n        giftWrapForItem: function (itemId) {\n            return (!!giftWrappingConfig.appliedWrapping.itemLevel) ? giftWrappingConfig.appliedWrapping.itemLevel[itemId] : false;\n        },\n\n        bindGiftMessageFields: function () {\n            var self = this;\n            $(document).on('input change', '#iwd_opc_gift_message form input, #iwd_opc_gift_message form select, #iwd_opc_gift_message form textarea', function (e) {\n                self.saveGiftMessage($(this).closest('form').attr('data-iwd-gm-id'));\n            });\n        },\n\n        saveGiftMessage: function (itemId, save) {\n            var self = this;\n            if (typeof (save) === 'undefined') {\n                save = true;\n            }\n\n            if (typeof(self.saveMessageTimeouts[itemId]) !== 'undefined') {\n                clearTimeout(self.saveMessageTimeouts[itemId]);\n            }\n\n            self.saveMessageTimeouts[itemId] = setTimeout(function () {\n                var data = self.prepareData(itemId, save);\n                self.isLoading(true);\n                giftMessageAction(itemId, data, giftOptionsConfig).always(function () {\n                    self.isLoading(false);\n                })\n            }, self.saveMessageDelay);\n        },\n\n        prepareData: function (itemId, save) {\n            var form = $('#iwd_opc_gift_message form[data-iwd-gm-id=' + itemId + ']');\n            var data = form.serializeAssoc();\n            if (!save) {\n                data = this.resetData(data);\n            } else {\n                if (typeof(data.extension_attributes) !== 'undefined') {\n                    _.each(data.extension_attributes, function (value, index) {\n                        if (value === 'on') {\n                            data.extension_attributes[index] = true;\n                        } else if (value === '') {\n                            delete data.extension_attributes[index];\n                        }\n                    });\n                }\n            }\n\n            return data;\n        },\n\n        resetData: function (data) {\n            var self = this;\n            _.each(data, function (value, index) {\n                if (index === 'extension_attributes') {\n                    _.each(value, function (extV, extIndex) {\n                        if (extV === 'on') {\n                            value[extIndex] = false;\n                        } else {\n                            value[extIndex] = null;\n                        }\n\n                        data[index] = value;\n                    });\n                } else {\n                    if (typeof(data[index]) === 'boolean') {\n                        data[index] = false;\n                    } else {\n                        data[index] = null;\n                    }\n                }\n            });\n\n            return data;\n        },\n\n        getGiftMessageItems: function () {\n            var items = [];\n            var _this = this;\n            _.each(giftMessageConfig.itemLevel, function (item, index) {\n                if ((item.hasOwnProperty('is_available') && item.is_available) || giftOptionsConfig.isItemLevelGiftOptionsEnabled) {\n                    var quoteItem = _.find(quote.getItems(), function (quoteItem) {\n                        return quoteItem.item_id === index;\n                    });\n                    if (quoteItem) {\n                        var itemData = {\n                            name: quoteItem.name,\n                            id: quoteItem.item_id,\n                            message: item.message\n                        };\n                        items.push(itemData);\n                    }\n                }\n            });\n\n            return items;\n        },\n\n        getValue: function (key, itemId) {\n            var giftMessageValue = '';\n            if (!itemId) {\n                if (giftMessageConfig.orderLevel.hasOwnProperty('gift_message_id')) {\n                    return giftMessageConfig.orderLevel[key];\n                }\n            } else {\n                if (giftMessageConfig.itemLevel[itemId].hasOwnProperty('message') && giftMessageConfig.itemLevel[itemId].message.hasOwnProperty('gift_message_id')) {\n                    return giftMessageConfig.itemLevel[itemId].message[key];\n                }\n            }\n\n            return giftMessageValue;\n        },\n\n        textareaAutoSize: function (element) {\n            $(element).textareaAutoSize();\n        },\n\n        isGiftMessageAvailableForOrder: function () {\n            return giftOptionsConfig && giftOptionsConfig.isOrderLevelGiftOptionsEnabled;\n        },\n\n        isGiftMessageAvailableForItems: function () {\n            var isGloballyAvailable,\n                availableItem = false;\n\n            isGloballyAvailable = giftOptionsConfig && giftOptionsConfig.isItemLevelGiftOptionsEnabled;\n            if (giftMessageConfig.hasOwnProperty('itemLevel')) {\n                availableItem = _.find(giftMessageConfig.itemLevel, function (item) {\n                    return item.is_available === true;\n                });\n            }\n\n            return availableItem || isGloballyAvailable;\n        },\n\n        getPrintedCardPrice: function () {\n            var price = '';\n            var priceInclTax = giftWrappingConfig.cardInfo.hasOwnProperty('price_incl_tax') ?\n                giftWrappingConfig.cardInfo.price_incl_tax\n                : giftWrappingConfig.cardInfo.price;\n            var priceExclTax = giftWrappingConfig.cardInfo.hasOwnProperty('price_excl_tax') ?\n                giftWrappingConfig.cardInfo.price_excl_tax\n                : giftWrappingConfig.cardInfo.price;\n            var priceFormat = giftOptionsConfig.priceFormat;\n            if (giftWrappingConfig.displayCardBothPrices) {\n                price = priceUtils.formatPrice(\n                    priceExclTax,\n                    priceFormat\n                );\n                price += ' (' + priceUtils.formatPrice(\n                        priceInclTax,\n                        priceFormat\n                    ) + ')';\n            } else {\n                price = priceUtils.formatPrice(\n                    giftWrappingConfig.cardInfo.price,\n                    priceFormat\n                );\n            }\n\n            return price;\n        },\n\n        isWrappingAvailableForOrder: function () {\n            return giftWrappingConfig && giftWrappingConfig.allowForOrder\n                && (this.getWrappingItems().length > 0\n                    || this.isAllowGiftReceipt()\n                    || this.isAllowPrintedCard()\n                );\n        },\n\n        isWrappingAvailableForItems: function (cartItemId) {\n            return giftWrappingConfig && giftWrappingConfig.allowForItems\n                && this.getWrappingItems(cartItemId).length > 0;\n        },\n\n        getWrappingItems: function (cartItemId) {\n            return _.map(giftWrappingConfig.designsInfo, function (item, id) {\n                var cartItemsConfig = giftWrappingConfig.itemsInfo || {},\n                    price = 0,\n                    priceExclTax = 0,\n                    priceInclTax = 0,\n                    cartItemConfig = null;\n\n                if (cartItemId &&\n                    cartItemsConfig[cartItemId] &&\n                    (cartItemsConfig[cartItemId].hasOwnProperty('price') ||\n                    cartItemsConfig[cartItemId].hasOwnProperty('price_excl_tax') ||\n                    cartItemsConfig[cartItemId].hasOwnProperty('price_incl_tax'))\n                ) {\n                    cartItemConfig = cartItemsConfig[cartItemId];\n                    price = cartItemConfig.price;\n                    priceExclTax = cartItemConfig.hasOwnProperty('price_excl_tax') ?\n                        cartItemConfig['price_excl_tax'] :\n                        price;\n                    priceInclTax = cartItemConfig.hasOwnProperty('price_incl_tax') ?\n                        cartItemConfig['price_incl_tax'] :\n                        price;\n                } else {\n                    price = item.price;\n                    priceExclTax = item.hasOwnProperty('price_excl_tax') ? item['price_excl_tax'] : price;\n                    priceInclTax = item.hasOwnProperty('price_incl_tax') ? item['price_incl_tax'] : price;\n                }\n\n                var priceFormat = giftOptionsConfig.priceFormat;\n                if (giftWrappingConfig.displayWrappingBothPrices) {\n                    price = priceUtils.formatPrice(\n                        priceExclTax,\n                        priceFormat\n                    );\n                    price += ' (' + priceUtils.formatPrice(\n                            priceInclTax,\n                            priceFormat\n                        ) + ')';\n                } else {\n                    price = priceUtils.formatPrice(\n                        price,\n                        priceFormat\n                    );\n                }\n\n                return {\n                    'id': id,\n                    'label': item.label,\n                    'path': item.path,\n                    'price': price,\n                    'priceExclTax': priceExclTax,\n                    'priceInclTax': priceInclTax\n                };\n            });\n        }\n    });\n});\n","IWD_Opc/js/view/summary.js":"define(\n    [\n        'jquery',\n        'ko',\n        'uiComponent',\n        'Magento_Checkout/js/model/totals',\n        'iwdOpcHelper'\n    ],\n    function ($, ko, Component, totals) {\n        'use strict';\n        return Component.extend({\n            reviewHasFocus: false,\n            isLoading: totals.isLoading,\n            opened: ko.observable(false),\n            reviewFocus: ko.observable(false),\n            initialize: function () {\n                this._super();\n                var self = this;\n                this.reviewFocus.subscribe(function (value) {\n                    if (value === false) {\n                        self.opened(false);\n                    }\n                });\n                return this;\n            },\n            appendScrollbar: function (element) {\n                $(element).scrollbar({\n                    \"onInit\": function (scroll) {\n                        scroll.closest('.scroll-wrapper').removeAttr('tabindex');\n                    }\n                });\n            },\n            toggleReview: function () {\n                this.opened(!this.opened());\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/errors.js":"define([\n    'ko',\n    'jquery',\n    'uiComponent',\n    'Magento_Ui/js/model/messageList'\n], function (ko, $, Component, globalMessages) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'IWD_Opc/general-errors',\n            selector: '.iwd_opc_general_errors'\n        },\n\n        initialize: function (config, messageContainer) {\n            this._super();\n\n            this.messageContainer = messageContainer || config.messageContainer || globalMessages;\n\n            return this;\n        },\n\n        isVisible: function () {\n            return this.messageContainer.hasMessages();\n        },\n\n        removeAll: function () {\n            this.messageContainer.clear();\n        }\n    });\n});\n","IWD_Opc/js/view/billing-address.js":"define(\n    [\n        'jquery',\n        'ko',\n        'underscore',\n        'Magento_Ui/js/form/form',\n        'Magento_Customer/js/model/customer',\n        'Magento_Customer/js/model/address-list',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/action/create-billing-address',\n        'Magento_Checkout/js/action/select-billing-address',\n        'Magento_Checkout/js/checkout-data',\n        'Magento_Checkout/js/model/checkout-data-resolver',\n        'Magento_Customer/js/customer-data',\n        'Magento_Checkout/js/action/set-billing-address',\n        'Magento_Ui/js/model/messageList',\n        'mage/translate',\n        'uiRegistry',\n        'Magento_Checkout/js/model/postcode-validator',\n        'Magento_Checkout/js/model/address-converter'\n    ],\n    function ($,\n              ko,\n              _,\n              Component,\n              customer,\n              addressList,\n              quote,\n              createBillingAddress,\n              selectBillingAddress,\n              checkoutData,\n              checkoutDataResolver,\n              customerData,\n              setBillingAddressAction,\n              globalMessageList,\n              $t,\n              registry,\n              postcodeValidator,\n              addressConverter) {\n        'use strict';\n\n        var observedElements = [],\n            setBillingActionTimeout = 0,\n            inlineAddress = \"\",\n            newAddressOption = {\n                /**\n                 * Get new address label\n                 * @returns {String}\n                 */\n                getAddressInline: function () {\n                    return $t('New Address');\n                },\n                customerAddressId: null\n            },\n            countryData = customerData.get('directory-data'),\n            addressOptions = addressList().filter(function (address) {\n                var isDublicate = inlineAddress === address.getAddressInline();\n                inlineAddress = address.getAddressInline();\n                return address.getType() === 'customer-address' && !isDublicate;\n            });\n\n        addressOptions.push(newAddressOption);\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/billing-address'\n            },\n            canHideErrors: true,\n            postcodeElement: null,\n            addressOptions: addressOptions,\n            customerHasAddresses: addressOptions.length > 1,\n            selectedAddress: ko.observable(null),\n\n            quoteIsVirtual: quote.isVirtual(),\n            isAddressFormVisible: ko.observable((addressList().length === 0 || (checkoutData.getSelectedBillingAddress() === 'new-customer-address' && !!checkoutData.getNewCustomerBillingAddress()))),\n            isAddressSameAsShipping: ko.observable(!checkoutData.getSelectedBillingAddress()),\n            saveInAddressBook: ko.observable(true),\n            canUseShippingAddress: ko.computed(function () {\n                return !quote.isVirtual() && quote.shippingAddress() && quote.shippingAddress().canUseForBilling();\n            }),\n\n            optionsRenderCallback: 0,\n            validateAddressTimeout: 0,\n            validateDelay: 1400,\n\n            decorateSelect: function (uid, showEmptyOption) {\n                if (typeof showEmptyOption === 'undefined') { showEmptyOption = false; }\n                clearTimeout(this.optionsRenderCallback);\n                this.optionsRenderCallback = setTimeout(function () {\n                    var select = $('#' + uid);\n                    if (select.length) {\n                        select.decorateSelect(showEmptyOption, true);\n                    }\n                }, 0);\n            },\n            /**\n             * Get code\n             * @param {Object} parent\n             * @returns {String}\n             */\n            getCode: function (parent) {\n                return (parent && _.isFunction(parent.getCode)) ? parent.getCode() : 'shared';\n            },\n            getNameForSelect: function () {\n                return this.name.replace(/\\./g, '');\n            },\n            getCountryName: function (countryId) {\n                return countryData()[countryId] !== undefined ? countryData()[countryId].name : '';\n            },\n            /**\n             * @param {Object} address\n             * @return {*}\n             */\n            addressOptionsText: function (address) {\n                return address.getAddressInline();\n            },\n\n            /**\n             * Init component\n             */\n            initialize: function () {\n                var self = this;\n                this._super();\n                if (quote.isVirtual()) {\n                    self.isAddressSameAsShipping(false);\n                }\n\n                quote.shippingAddress.subscribe(function (address) {\n                    if (self.isAddressSameAsShipping()) {\n                        var billingAddress = $.extend({}, address);\n                        billingAddress.saveInAddressBook = 0;\n                        billingAddress.save_in_address_book = 0;\n                        selectBillingAddress(billingAddress);\n                        var origAddress = self.source.get(self.dataScopePrefix),\n                            convertedAddress = addressConverter.quoteAddressToFormAddressData(billingAddress);\n\n                        $.each(origAddress, function(key, val) {\n                            if (key === 'street') {\n                                if (typeof convertedAddress[key] === 'undefined') {\n                                    convertedAddress[key] = {};\n                                }\n\n                                $.each(origAddress[key], function(streetKey, streetVal) {\n                                    if (typeof streetVal !== 'undefined' && typeof convertedAddress[key][streetKey] === 'undefined') {\n                                        convertedAddress[key][streetKey] = '';\n                                    }\n                                });\n                            } else if (typeof val !== 'undefined' && typeof convertedAddress[key] === 'undefined') {\n                                convertedAddress[key] = '';\n                            }\n                        });\n\n                        self.source.set(self.dataScopePrefix, convertedAddress);\n                    }\n                });\n\n                quote.billingAddress.subscribe(function (address) {\n                    if (address.customerAddressId) {\n                        self.selectedAddress(address.customerAddressId);\n                    } else {\n                        self.selectedAddress('');\n                    }\n\n                    setTimeout(function () {\n                        $('select[name=billing_address_id]').change();\n                    }, 0);\n                });\n\n                self.isAddressSameAsShipping.subscribe(function (value) {\n                    if (!value) {\n                        $('.co-billing-form select').trigger('change');\n                    }\n                });\n\n                if (addressList().length !== 0) {\n                    this.selectedAddress.subscribe(function (addressId) {\n                        if (!addressId) { addressId = null; }\n                        if (!self.isAddressSameAsShipping()) {\n                            var address = _.filter(self.addressOptions, function (address) {\n                                return address.customerAddressId === addressId;\n                            })[0];\n\n                            self.isAddressFormVisible(address === newAddressOption);\n                            if (address && address.customerAddressId) {\n                                selectBillingAddress(address);\n                                checkoutData.setSelectedBillingAddress(address.getKey());\n                            } else {\n                                var addressData,\n                                    newBillingAddress;\n                                var countrySelect = $('.co-billing-form:visible').first().find('select[name=\"country_id\"]');\n                                if (countrySelect.length) {\n                                    var initialVal = countrySelect.val();\n                                    countrySelect.val('').trigger('change').val(initialVal).trigger('change');\n                                }\n\n                                addressData = self.source.get(self.dataScopePrefix);\n                                addressData.save_in_address_book = self.saveInAddressBook() && !self.isAddressSameAsShipping() ? 1 : 0;\n                                newBillingAddress = createBillingAddress(addressData);\n                                selectBillingAddress(newBillingAddress);\n                                checkoutData.setSelectedBillingAddress(newBillingAddress.getKey());\n                                checkoutData.setNewCustomerBillingAddress(addressData);\n                            }\n\n                            self.setBillingAddress();\n                        }\n                    });\n                }\n\n                if (this.dataScopePrefix === 'billingAddressshared') {\n                    checkoutDataResolver.resolveBillingAddress();\n                    var billingAddressCode = this.dataScopePrefix;\n                    setTimeout(function () {\n                        registry.async('checkoutProvider')(function (checkoutProvider) {\n                            var defaultAddressData = checkoutProvider.get(billingAddressCode);\n\n                            if (defaultAddressData === undefined) {\n                                return;\n                            }\n\n                            var billingAddressData = checkoutData.getBillingAddressFromData();\n\n                            if (billingAddressData) {\n                                checkoutProvider.set(\n                                    billingAddressCode,\n                                    $.extend(true, {}, defaultAddressData, billingAddressData)\n                                );\n                            }\n                            checkoutProvider.on(billingAddressCode, function (providerBillingAddressData) {\n                                checkoutData.setBillingAddressFromData(providerBillingAddressData);\n                            }, billingAddressCode);\n                        });\n                    }, 200);\n                }\n\n                if (quote.isVirtual()) {\n                    checkoutDataResolver.resolveBillingAddress();\n                }\n\n                self.initFields();\n            },\n\n            setBillingAddress: function () {\n                clearTimeout(setBillingActionTimeout);\n                setBillingActionTimeout = setTimeout(function () {\n                    setBillingAddressAction(globalMessageList);\n                }, 100);\n            },\n\n            useShippingAddress: function () {\n                if (!this.isAddressSameAsShipping()) {\n                    if (!checkoutDataResolver.applyBillingAddress()) {\n                        if (this.validateFields()) {\n                            this.setBillingAddress();\n                        }\n                    }\n                } else {\n                    checkoutData.setSelectedBillingAddress(null);\n                    selectBillingAddress(quote.shippingAddress());\n                }\n\n                return true;\n            },\n\n            initFields: function () {\n                var self = this;\n                var formPath = self.name + '.form-fields';\n                var elements = [\n                    'country_id',\n                    'postcode',\n                    'region_id',\n                    'region_input_id'\n                ];\n                _.each(elements, function (element) {\n                    registry.async(formPath + '.' + element)(self.bindHandler.bind(self));\n                });\n            },\n\n            bindHandler: function (element) {\n                var self = this;\n                var delay = self.validateDelay;\n                if (element.index === 'postcode') {\n                    self.postcodeElement = element;\n                }\n\n                if (element.component.indexOf('/group') !== -1) {\n                    $.each(element.elems(), function (index, elem) {\n                        self.bindHandler(elem);\n                    });\n                } else {\n                    element.on('value', function () {\n                        clearTimeout(self.validateAddressTimeout);\n                        self.validateAddressTimeout = setTimeout(function () {\n                            if (!self.isAddressSameAsShipping()) {\n                                if (self.postcodeValidation()) {\n                                    if (self.validateFields()) {\n                                        self.setBillingAddress();\n                                    }\n                                }\n                            }\n                        }, delay);\n                    });\n                    observedElements.push(element);\n                }\n            },\n\n            postcodeValidation: function () {\n                var self = this;\n                var countryId = $('.co-billing-form:visible').first().find('select[name=\"country_id\"]').val(),\n                    validationResult,\n                    warnMessage;\n\n                if (self.postcodeElement === null || self.postcodeElement.value() === null) {\n                    return true;\n                }\n\n                self.postcodeElement.warn(null);\n                validationResult = postcodeValidator.validate(self.postcodeElement.value(), countryId);\n\n                if (!validationResult) {\n                    warnMessage = $t('Provided Zip/Postal Code seems to be invalid.');\n\n                    if (postcodeValidator.validatedPostCodeExample.length) {\n                        warnMessage += $t(' Example: ') + postcodeValidator.validatedPostCodeExample.join('; ') + '. ';\n                    }\n                    warnMessage += $t('If you believe it is the right one you can ignore this notice.');\n                    self.postcodeElement.warn(warnMessage);\n                }\n\n                return validationResult;\n            },\n\n            validateFields: function (showErrors) {\n                showErrors = showErrors || false;\n                var self = this;\n                if (!this.isAddressFormVisible()) {\n                    return true;\n                }\n\n                this.source.set('params.invalid', false);\n                this.source.trigger(this.dataScopePrefix + '.data.validate');\n\n                if (this.source.get(this.dataScopePrefix + '.custom_attributes')) {\n                    this.source.trigger(this.dataScopePrefix + '.custom_attributes.data.validate');\n                }\n\n                if (!this.source.get('params.invalid')) {\n                    var addressData = this.source.get(this.dataScopePrefix),\n                        newBillingAddress;\n\n                    // if (customer.isLoggedIn() && !this.customerHasAddresses && !self.isAddressSameAsShipping()) {\n                    //     this.saveInAddressBook = 1;\n                    // }\n\n                    addressData['save_in_address_book'] = this.saveInAddressBook() && !self.isAddressSameAsShipping() ? 1 : 0;\n                    newBillingAddress = createBillingAddress(addressData);\n\n                    selectBillingAddress(newBillingAddress);\n                    checkoutData.setSelectedBillingAddress(newBillingAddress.getKey());\n                    checkoutData.setNewCustomerBillingAddress(addressData);\n                    return true;\n                } else {\n                    if (!showErrors && this.canHideErrors) {\n                        var billingAddress = this.source.get(this.dataScopePrefix);\n                        billingAddress = _.extend({\n                            region_id: '',\n                            region_id_input: '',\n                            region: ''\n                        }, billingAddress);\n                        _.each(billingAddress, function (value, index) {\n                            self.hideErrorForElement(value, index);\n                        });\n                        this.source.set('params.invalid', false);\n                    }\n                    return false;\n                }\n            },\n\n            hideErrorForElement: function (value, index) {\n                var self = this;\n                if (typeof(value) === 'object') {\n                    _.each(value, function (childValue, childIndex) {\n                        var newIndex = (index === 'custom_attributes' ? childIndex : index + '.' + childIndex);\n                        self.hideErrorForElement(childValue, newIndex);\n                    })\n                }\n\n                var fieldObj = registry.get(self.name + '.form-fields.' + index);\n                if (fieldObj) {\n                    if (typeof (fieldObj.error) === 'function') {\n                        fieldObj.error(false);\n                    }\n                }\n            },\n\n            collectObservedData: function () {\n                var observedValues = {};\n\n                $.each(observedElements, function (index, field) {\n                    observedValues[field.dataScope] = field.value();\n                });\n\n                return observedValues;\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/billing-step-virtual.js":"define(\n    [\n        'jquery',\n        'underscore',\n        'Magento_Ui/js/form/form',\n        'ko',\n        'Magento_Checkout/js/checkout-data',\n        'Magento_Checkout/js/model/quote',\n        'mage/translate',\n        'iwdOpcHelper'\n    ],\n    function ($,\n              _,\n              Component,\n              ko,\n              checkoutData,\n              quote,\n              $t) {\n        'use strict';\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/billing-step-virtual'\n            },\n            isShowComment: quote.isShowComment(),\n            commentValue: ko.observable(checkoutData.getComment()),\n            initialize: function () {\n                this._super();\n                this.commentValue.subscribe(function (value) {\n                    checkoutData.setComment(value);\n                });\n            },\n            textareaAutoSize: function (element) {\n                $(element).textareaAutoSize();\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/summary/abstract-total.js":"define(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Catalog/js/price-utils',\n        'Magento_Checkout/js/model/totals'\n    ],\n    function (Component, quote, priceUtils, totals) {\n        \"use strict\";\n        return Component.extend({\n            getFormattedPrice: function (price) {\n                return priceUtils.formatPrice(price, quote.getPriceFormat());\n            },\n            getTotals: function () {\n                return totals.totals();\n            },\n            isFullMode: function () {\n                return true;\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/shipping/shipping-information-validation.js":"define(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'IWD_Opc/js/model/shipping/shipping-information-validator',\n        'Magento_Checkout/js/model/quote'\n    ],\n    function (Component, additionalValidators, shippingValidator, quote) {\n        'use strict';\n        if (!quote.isVirtual()) {\n            additionalValidators.registerValidator(shippingValidator);\n        }\n\n        return Component.extend({});\n    }\n);\n","IWD_Opc/js/view/shipping/shipping-policy.js":"define([\n    'jquery',\n    'uiComponent',\n    'Magento_Shipping/js/model/config'\n\n], function ($, Component, config) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'IWD_Opc/shipping/shipping-policy'\n        },\n        config: config(),\n        appendScrollbar: function (element) {\n            $(element).scrollbar();\n        }\n    });\n});\n","IWD_Opc/js/view/payment/list.js":"define([\n    'jquery',\n    'underscore',\n    'ko',\n    'mageUtils',\n    'uiComponent',\n    'Magento_Checkout/js/model/payment/method-list',\n    'Magento_Checkout/js/model/payment/renderer-list',\n    'uiLayout',\n    'Magento_Checkout/js/model/checkout-data-resolver',\n    'mage/translate',\n    'uiRegistry',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/action/select-payment-method',\n    'Magento_Checkout/js/checkout-data'\n], function ($, _, ko, utils, Component, paymentMethods, rendererList, layout, checkoutDataResolver, $t, registry, quote, selectPaymentMethodAction, checkoutData) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'IWD_Opc/payment-methods/list',\n            visible: paymentMethods().length > 0,\n            configDefaultGroup: {\n                name: 'methodGroup',\n                component: 'Magento_Checkout/js/model/payment/method-group'\n            },\n            paymentGroupsList: ko.observable([]),\n            defaultGroupTitle: $t('Select a new payment method'),\n            paymentRenderersMap: {\n                iwd_saved_credit_card: 'IWD_Opc/js/view/payment/methods-renderers/iwd_saved_credit_card',\n                free: 'IWD_Opc/js/view/payment/methods-renderers/free-method',\n                checkmo: 'IWD_Opc/js/view/payment/methods-renderers/checkmo-method',\n                banktransfer: 'IWD_Opc/js/view/payment/methods-renderers/banktransfer-method',\n                cashondelivery: 'IWD_Opc/js/view/payment/methods-renderers/cashondelivery-method',\n                purchaseorder: 'IWD_Opc/js/view/payment/methods-renderers/purchaseorder-method',\n                braintree_paypal: 'IWD_Opc/js/view/payment/methods-renderers/braintree/paypal',\n                braintree: 'IWD_Opc/js/view/payment/methods-renderers/braintree/hosted-fields',\n                authorizenet_directpost: 'IWD_Opc/js/view/payment/methods-renderers/authorizenet-directpost',\n                paypal_express_bml: 'IWD_Opc/js/view/payment/methods-renderers/paypal-express-bml',\n\n                paypal_express: (window.checkoutConfig.payment.paypalExpress && window.checkoutConfig.payment.paypalExpress.isContextCheckout) ?\n                    'IWD_Opc/js/view/payment/methods-renderers/in-context/checkout-express' : 'IWD_Opc/js/view/payment/methods-renderers/paypal-express',\n\n                eway: (window.checkoutConfig.payment.eway && window.checkoutConfig.payment.eway.connectionType) ?\n                    'IWD_Opc/js/view/payment/methods-renderers/eway/' + window.checkoutConfig.payment.eway.connectionType : '',\n\n                iwd_authcim: (window.checkoutConfig.payment.iwd_authcim && window.checkoutConfig.payment.iwd_authcim.isAcceptjsEnabled) ?\n                    'IWD_Opc/js/view/payment/methods-renderers/iwd_authcim/acceptjs' : 'IWD_Opc/js/view/payment/methods-renderers/iwd_authcim/iframe',\n\n                worldpay: 'IWD_Opc/js/view/payment/methods-renderers/worldpay',\n                cybersource: 'IWD_Opc/js/view/payment/methods-renderers/cybersource',\n\n                payflow_express_bml: 'IWD_Opc/js/view/payment/methods-renderers/payflow-express-bml',\n                payflow_express: 'IWD_Opc/js/view/payment/methods-renderers/payflow-express',\n                payflow_link: 'IWD_Opc/js/view/payment/methods-renderers/iframe-methods',\n                payflow_advanced: 'IWD_Opc/js/view/payment/methods-renderers/iframe-methods',\n                hosted_pro: 'IWD_Opc/js/view/payment/methods-renderers/iframe-methods',\n                payflowpro: 'IWD_Opc/js/view/payment/methods-renderers/payflowpro-method',\n                paypal_billing_agreement: 'IWD_Opc/js/view/payment/methods-renderers/paypal-billing-agreement',\n\n                iwd_applepay: 'IWD_Opc/js/view/payment/methods-renderers/apple_pay',\n                opg_square: 'IWD_Opc/js/view/payment/methods-renderers/opg_square'\n            },\n            paymentImagesMap: {\n                braintree_paypal: 'paypal',\n                braintree_paypal_vault: 'paypal',\n\n                iwd_applepay: 'apple_pay',\n\n                paypal_express: 'paypal',\n                paypal_express_bml: 'paypal',\n                payflow_express: 'paypal',\n                payflow_express_bml: 'paypal',\n\n                paypal_billing_agreement: 'paypal',\n\n                payflow_link: 'paypal',\n                hosted_pro: 'paypal',\n                payflow_advanced: 'paypal'\n            }\n        },\n        selectedPaymentMethod: ko.observable(function () {\n            return quote.paymentMethod() ? quote.paymentMethod().method : null\n        }),\n        paymentMethods: ko.observableArray(),\n        optionsRenderCallback: 0,\n\n        decorateSelect: function (uid, option, item) {\n            clearTimeout(this.optionsRenderCallback);\n            if (option && item) {\n                if (item.image) {\n                    $(option).attr('data-image', item.image);\n                }\n                if (item.cc_types) {\n                    $(option).attr('data-cc-types', item.cc_types);\n                }\n            }\n            this.optionsRenderCallback = setTimeout(function () {\n                var select = $('#' + uid);\n                if (select.length) {\n                    select.decorateSelectCustom();\n                }\n            }, 0);\n        },\n        /**\n         * Initialize view.\n         *\n         * @returns {Component} Chainable.\n         */\n        initialize: function () {\n            this._super().initDefaultGroup().initChildren();\n            paymentMethods.subscribe(function (methods) {\n                checkoutDataResolver.resolvePaymentMethod();\n            });\n\n            paymentMethods.subscribe(\n                function (changes) {\n                    //remove renderer for \"deleted\" payment methods\n                    _.each(changes, function (change) {\n                        if (change.status === 'deleted') {\n                            var addedAfterDeleted = _.filter(changes, function (methodChange) {\n                                return methodChange.status === 'added' && methodChange.value.method === change.value.method;\n                            });\n                            if (!addedAfterDeleted.length) {\n                                this.removeRenderer(change.value.method);\n                            }\n                        }\n                    }, this);\n                    //add renderer for \"added\" payment methods\n                    _.each(changes, function (change) {\n                        if (change.status === 'added') {\n                            var wasRendered = _.filter(changes, function (methodChange) {\n                                return methodChange.status === 'deleted' && methodChange.value.method === change.value.method;\n                            });\n                            if (!wasRendered.length) {\n                                this.createRenderer(change.value);\n                            }\n                        }\n                    }, this);\n                }, this, 'arrayChange');\n\n            quote.paymentMethod.subscribe(function (method) {\n                if (method) {\n                    this.selectedPaymentMethod(method.method);\n                } else {\n                    this.selectedPaymentMethod(null);\n                }\n                $('#iwd_opc_payment_method_select').trigger('change');\n            }, this);\n\n            return this;\n        },\n\n        selectPaymentMethod: function (obj, event, method) {\n\t\t\t//console.log(obj);\n            if (!!event.originalEvent) {\n\t\t\t\t//console.log(method);\n                if (method) {\n\t\t\t\t\tif (document.getElementById('minicart-amazon-pay-button') !=null) {\n\t\t\t\t\t document.getElementById('minicart-amazon-pay-button').style.display = 'none';\t\n\t\t\t\t\t}\n\t\t\t\t\tif (document.getElementById('purchaseorder-form') !=null) {\n\t\t\t\t\t  document.getElementById('purchaseorder-form').style.display = 'block';\t\n\t\t\t\t\t}\n\t\t\t\t\t  $(\".payment-method _active\").show();\n\t\t\t\t\t  \t\n                    $('.payment-method input[value=\"' + method + '\"]').first().click();\n\t\t\t\t\tif(method==\"braintree\"){\n\t\t\t\t\t\n                   $(\"#braintree_cc_number\").addClass(\"braintree-hosted-fields-focused\");\t\t\t\t  \n                   document.getElementById('co-transparent-form-braintree').style.display = 'block';\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\tif(method==\"amazon_payment\"){      \n                 $('#OffAmazonPaymentsWidgets0').trigger('click');                       \t\t\t\t\n\t\t         $(\".payment-method _active\").hide();\n\t\t\t\t if (document.getElementById('co-transparent-form-braintree') !=null) {\n\t\t\t\t\tdocument.getElementById('co-transparent-form-braintree').style.display = 'none';\t\n\t\t\t\t\t}\n\t\t\t if (document.getElementById('purchaseorder-form') !=null) {\n\t\t\t\t\tdocument.getElementById('purchaseorder-form').style.display = 'none';\t\n\t\t\t\t\t}\n           \t\t\t\t if (document.getElementById('minicart-amazon-pay-button') !=null) {\n\t\t\t\t\t document.getElementById('minicart-amazon-pay-button').style.display = 'block';\n\t\t\t\t\t}\n\t       \t\n\t\t\t\t\t \n\t\t\t\t\t\n\t\t\t\n\t\t\t\t}\n\n                } else {\n                    selectPaymentMethodAction(null);\n                }\n            }\n        },\n\n        /**\n         * Creates default group\n         *\n         * @returns {Component} Chainable.\n         */\n        initDefaultGroup: function () {\n            layout([\n                this.configDefaultGroup\n            ]);\n\n            return this;\n        },\n\n        /**\n         * Create renders for child payment methods.\n         *\n         * @returns {Component} Chainable.\n         */\n        initChildren: function () {\n            var self = this;\n\n            _.each(paymentMethods(), function (paymentMethodData) {\n                self.createRenderer(paymentMethodData);\n            });\n\n            return this;\n        },\n\n        /**\n         * @returns\n         */\n        createComponent: function (payment) {\n            var rendererTemplate,\n                rendererComponent,\n                templateData;\n\n            templateData = {\n                parentName: this.name,\n                name: payment.name\n            };\n            rendererTemplate = {\n                parent: '${ $.$data.parentName }',\n                name: '${ $.$data.name }',\n                displayArea: payment.displayArea,\n                component: payment.component\n            };\n            rendererComponent = utils.template(rendererTemplate, templateData);\n            utils.extend(rendererComponent, {\n                item: payment.item,\n                config: payment.config\n            });\n\n            return rendererComponent;\n        },\n\n        getPaymentRenderers: function () {\n            var newRendererList = rendererList();\n            var renderersMap = this.paymentRenderersMap;\n            _.each(newRendererList, function (renderer, index) {\n                if (renderersMap[renderer.type]) {\n                    newRendererList[index]['component'] = renderersMap[renderer.type];\n                }\n            });\n            return newRendererList;\n        },\n\n        /**\n         * Create renderer.\n         *\n         * @param {Object} paymentMethodData\n         */\n        createRenderer: function (paymentMethodData) {\n            var isRendererForMethod = false,\n                currentGroup;\n\n            registry.get(this.configDefaultGroup.name, function (defaultGroup) {\n                _.each(this.getPaymentRenderers(), function (renderer) {\n\n                    if (renderer.hasOwnProperty('typeComparatorCallback') &&\n                        typeof renderer.typeComparatorCallback === 'function'\n                    ) {\n                        isRendererForMethod = renderer.typeComparatorCallback(renderer.type, paymentMethodData.method);\n                    } else {\n                        isRendererForMethod = renderer.type === paymentMethodData.method;\n                    }\n\n                    if (isRendererForMethod) {\n                        currentGroup = renderer.group ? renderer.group : defaultGroup;\n                        if (quote.paymentMethod()) {\n                            $('#iwd_opc_payment_method_select').val(quote.paymentMethod().method);\n                            $('#iwd_opc_payment_method_select').trigger('change');\n                        }\n                        this.collectPaymentGroups(currentGroup);\n\n\n                        var rendererComponent = this.createComponent(\n                            {\n                                config: renderer.config,\n                                component: renderer.component,\n                                name: renderer.type,\n                                method: paymentMethodData.method,\n                                item: paymentMethodData,\n                                displayArea: currentGroup.displayArea\n                            }\n                        );\n\n                        this.paymentMethods.push(this.getPaymentMethodData({\n                            method: rendererComponent.name,\n                            title: rendererComponent.item.title,\n                            displayArea: rendererComponent.displayArea,\n                            config: rendererComponent.config\n                        }));\n\n                        layout([\n                            rendererComponent\n                        ]);\n                    }\n                }.bind(this));\n            }.bind(this));\n        },\n\n        getPaymentMethodData: function (paymentMethodData) {\n            var paymentMethodTitleType = quote.getPaymentTitleType();\n\n            if (paymentMethodTitleType === 'logo_title') {\n                if (this.paymentImagesMap[paymentMethodData.method]) {\n                    paymentMethodData.image = quote.getPaymentImagePath(this.paymentImagesMap[paymentMethodData.method]);\n                }\n            }\n\n            if (window.checkoutConfig.payment.ccform.availableTypes && window.checkoutConfig.payment.ccform.availableTypes[paymentMethodData.method]) {\n                paymentMethodData.cc_types = JSON.stringify(window.checkoutConfig.payment.ccform.availableTypes[paymentMethodData.method]);\n            }\n\n            var paymentConfig = paymentMethodData.config;\n\n            if (paymentConfig && paymentConfig.details && paymentMethodData.displayArea === 'payment-methods-items-vault') {\n                if (paymentConfig.details.payerEmail) {\n                    paymentMethodData.title = paymentConfig.details.payerEmail;\n                    if (this.paymentImagesMap[paymentConfig.code]) {\n                        paymentMethodData.image = quote.getPaymentImagePath(this.paymentImagesMap[paymentConfig.code]);\n                    }\n                } else if (paymentConfig.details.type && paymentConfig.details.maskedCC && paymentConfig.details.expirationDate) {\n                    paymentMethodData.title = 'xxxx-xxxx-xxxx-' + paymentConfig.details.maskedCC + ' (' + $t('expires') + ': ' + paymentConfig.details.expirationDate + ')';\n                    var ccObj = {};\n                    ccObj[paymentConfig.details.type] = paymentConfig.details.type;\n                    paymentMethodData.cc_types = JSON.stringify(ccObj);\n                }\n            }\n\n            return paymentMethodData;\n        },\n        /**\n         * Collects unique groups of available payment methods\n         *\n         * @param {Object} group\n         */\n        collectPaymentGroups: function (group) {\n            var groupsList = this.paymentGroupsList(),\n                isGroupExists = _.some(groupsList, function (existsGroup) {\n                    return existsGroup.alias === group.alias;\n                });\n\n            if (!isGroupExists) {\n                groupsList.push(group);\n                groupsList = _.sortBy(groupsList, function (existsGroup) {\n                    return existsGroup.sortOrder;\n                });\n                this.paymentGroupsList(groupsList);\n            }\n        },\n\n\n        /**\n         * Returns payment group title\n         *\n         * @param {Object} group\n         * @returns {String}\n         */\n        getGroupTitle: function (group) {\n            var title = group().title;\n\n            if (group().isDefault() && this.paymentGroupsList().length > 1) {\n                title = this.defaultGroupTitle;\n            }\n\n            return title + ':';\n        },\n\n        /**\n         * Checks if at least one payment method available\n         *\n         * @returns {String}\n         */\n        isPaymentMethodsAvailable: function () {\n            return _.some(this.paymentGroupsList(), function (group) {\n                return this.getRegion(group.displayArea)().length;\n            }, this);\n        },\n\n        /**\n         * Remove view renderer.\n         *\n         * @param {String} paymentMethodCode\n         */\n        removeRenderer: function (paymentMethodCode) {\n            var items;\n\n            _.each(this.paymentGroupsList(), function (group) {\n                items = this.getRegion(group.displayArea);\n\n                _.find(items(), function (value) {\n                    if (value.item.method.indexOf(paymentMethodCode) === 0) {\n                        this.paymentMethods.remove(function (item) {\n                            return item.method === paymentMethodCode;\n                        });\n                        this.decorateSelect('iwd_opc_payment_method_select');\n                        value.disposeSubscriptions();\n                        value.destroy();\n                    }\n                }, this);\n            }, this);\n        }\n    });\n});\n","IWD_Opc/js/view/payment/reward.js":"define(\n    [\n        'jquery',\n        'ko',\n        'uiComponent',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Catalog/js/price-utils',\n        'IWD_Opc/js/action/set-use-reward-points',\n        'IWD_Opc/js/action/remove-reward-points',\n        'Magento_Checkout/js/model/totals'\n    ],\n    function ($, ko, Component, quote, priceUtils, setUseRewardPointsAction, removeRewardPointsAction, totals) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/reward'\n            },\n\n            isApplied: ko.observable(window.checkoutConfig.payment.reward.amountSubstracted),\n            usedAmount: ko.observable(window.checkoutConfig.payment.reward.usedAmount),\n            balance: window.checkoutConfig.payment.reward.balance,\n            initialize: function () {\n                this._super();\n                this.isAvailable = ko.computed(function () {\n                    if (!window.checkoutConfig.payment.reward.isAvailable) {\n                        return false;\n                    }\n\n                    if (quote.getTotals()().grand_total === 0) {\n                        return this.isApplied();\n                    }\n\n                    return true;\n                }.bind(this));\n\n                totals.totals.subscribe(function (value) {\n                    if (totals.getSegment('reward') && totals.getSegment('reward').value) {\n                        var segment = totals.getSegment('reward');\n                        this.usedAmount((segment.value * -1));\n                    } else {\n                        this.isApplied(false);\n                        this.usedAmount(0);\n                    }\n                }.bind(this));\n            },\n            formatBalance: function () {\n                return priceUtils.formatPrice(this.balance, quote.getPriceFormat());\n            },\n            formatBalanceUsed: function () {\n                return priceUtils.formatPrice((this.balance - this.usedAmount()), quote.getPriceFormat());\n            },\n            cancel: function () {\n                $('#iwd_opc_reward [data-role=trigger]').trigger('click');\n            },\n            useRewardPoints: function () {\n                setUseRewardPointsAction(this.usedAmount, this.isApplied);\n            },\n            remove: function () {\n                removeRewardPointsAction(this.usedAmount, this.isApplied);\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/payment-method-validation.js":"define(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'IWD_Opc/js/model/payment/payment-method-validator',\n        'Magento_Checkout/js/model/quote'\n    ],\n    function (Component, additionalValidators, paymentValidator, quote) {\n        'use strict';\n        additionalValidators.registerValidator(paymentValidator);\n\n        return Component.extend({});\n    }\n);\n","IWD_Opc/js/view/payment/customer-balance.js":"define(\n    [\n        'jquery',\n        'ko',\n        'uiComponent',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/totals',\n        'Magento_Catalog/js/price-utils',\n        'IWD_Opc/js/action/use-balance',\n        'IWD_Opc/js/action/remove-balance'\n    ],\n    function ($, ko, component, quote, totals, priceUtils, useBalanceAction, removeBalanceAction) {\n\n        return component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/customer-balance'\n            },\n\n            isApplied: ko.observable(window.checkoutConfig.payment.customerBalance.amountSubstracted), //isCustomerBalanceUsed\n            usedAmount: ko.observable(window.checkoutConfig.payment.customerBalance.usedAmount),\n            balance: window.checkoutConfig.payment.customerBalance.balance,\n            initialize: function () {\n                this._super();\n                this.isAvailable = ko.computed(function () {\n                    if (!window.checkoutConfig.payment.customerBalance.isAvailable) {\n                        return false;\n                    }\n\n                    if (quote.getTotals()().grand_total === 0) {\n                        return this.isApplied();\n                    }\n\n                    return true;\n                }.bind(this));\n\n                totals.totals.subscribe(function (value) {\n                    if (totals.getSegment('customerbalance') || totals.getSegment('storecredit')) {\n                        var segment = totals.getSegment('customerbalance') || totals.getSegment('storecredit');\n                        this.usedAmount((segment.value * -1));\n                    } else {\n                        this.usedAmount(window.checkoutConfig.payment.customerBalance.balance);\n                    }\n                }.bind(this));\n            },\n            /**\n             * Format customer balance\n             *\n             * @return {string}\n             */\n            formatBalance: function () {\n                return priceUtils.formatPrice(this.balance, quote.getPriceFormat());\n            },\n            formatBalanceUsed: function () {\n                return priceUtils.formatPrice((this.balance - this.usedAmount()), quote.getPriceFormat());\n            },\n            /**\n             * Send request to use balance\n             */\n            sendRequest: function () {\n                useBalanceAction(this.usedAmount, this.isApplied);\n            },\n            remove: function () {\n                removeBalanceAction(this.usedAmount, this.isApplied);\n            },\n            cancel: function () {\n                $('#iwd_opc_store_credit [data-role=trigger]').trigger('click');\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/gift-card-account.js":"define(\n    [\n        'jquery',\n        'ko',\n        'uiComponent',\n        'IWD_Opc/js/action/set-gift-card-information',\n        'Magento_GiftCardAccount/js/action/remove-gift-card-from-quote',\n        'Magento_Checkout/js/model/totals',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Catalog/js/price-utils',\n        'mage/translate',\n        'Magento_GiftCardAccount/js/model/payment/gift-card-messages',\n        'mage/validation'\n    ],\n    function ($,\n              ko,\n              Component,\n              setGiftCardAction,\n              removeGiftCardAction,\n              totals,\n              quote,\n              priceUtils,\n              $t,\n              messageList) {\n        \"use strict\";\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/gift-card-account',\n                giftCardCode: ko.observable('')\n            },\n            isGiftCardsUsed: window.checkoutConfig.payment.giftCardAccount.hasUsage,\n            giftCards: ko.observableArray([]),\n            isShowGiftCardForm: ko.observable(false),\n            initialize: function () {\n                this._super();\n\n                this.giftCardsCodes = ko.computed(function () {\n                    if (this.giftCards().length) {\n                        return this.giftCards().length > 1 ? $t('Multiple') : this.giftCards()[0].c;\n                    } else {\n                        return '';\n                    }\n                }.bind(this));\n\n                totals.totals.subscribe(function (value) {\n                    var giftCardAccountSegment = totals.getSegment('giftcardaccount');\n                    if (giftCardAccountSegment) {\n                        var giftCards = JSON.parse(giftCardAccountSegment.extension_attributes.gift_cards);\n                        this.giftCards(giftCards);\n                    } else {\n                        this.giftCards([]);\n                    }\n                }.bind(this));\n\n                return this;\n            },\n            getCardBalance: function (card) {\n                return priceUtils.formatPrice(card.oa, quote.getPriceFormat());\n            },\n            getNewCardBalance: function (card) {\n                return priceUtils.formatPrice(card.oa - card.a, quote.getPriceFormat());\n            },\n            apply: function () {\n                if (this.validate()) {\n                    setGiftCardAction([this.giftCardCode()]).done(function (response) {\n                        if (response) {\n                            this.giftCardCode('');\n                            this.isShowGiftCardForm(false);\n                        }\n                    }.bind(this));\n                }\n            },\n            remove: function (giftCardCode) {\n                messageList.clear();\n                removeGiftCardAction(giftCardCode);\n            },\n            addAnother: function () {\n                this.isShowGiftCardForm(true);\n            },\n            hideAnother: function () {\n                this.isShowGiftCardForm(false);\n            },\n            cancel: function () {\n                $('#iwd_opc_gift_card [data-role=trigger]').trigger('click');\n            },\n            validate: function () {\n                var form = '#giftcard-form';\n                return $(form).validation() && $(form).validation('isValid');\n            }\n        })\n    }\n);\n","IWD_Opc/js/view/payment/discount.js":"define(\n    [\n        'jquery',\n        'ko',\n        'uiComponent',\n        'Magento_Checkout/js/model/quote',\n        'Magento_SalesRule/js/action/set-coupon-code',\n        'Magento_SalesRule/js/action/cancel-coupon',\n        'Magento_Catalog/js/price-utils',\n        'Magento_Checkout/js/model/shipping-rate-registry'\n    ],\n    function ($, ko, Component, quote, setCouponCodeAction, cancelCouponAction, priceUtils, rateRegistry) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/discount'\n            },\n            isEnabled: quote.isShowDiscount(),\n            totals: quote.getTotals(),\n            couponCode: ko.observable(quote.getTotals()()['coupon_code']),\n\n            /**\n             * Applied flag\n             */\n            isApplied: ko.observable(!!quote.getTotals()()['coupon_code']),\n\n            /**\n             * Coupon code application procedure\n             */\n            apply: function () {\n                if (this.validate()) {\n                    setCouponCodeAction(this.couponCode(), this.isApplied).done(function () {\n                        if (!quote.isVirtual() && quote.isReloadShippingOnDiscount()) {\n                            rateRegistry.set(quote.shippingAddress().getCacheKey(), false);\n                            quote.shippingAddress(quote.shippingAddress()); //trigger getRates\n                        }\n                    });\n                }\n            },\n\n            /**\n             * Cancel using coupon\n             */\n            remove: function () {\n                if (this.validate()) {\n                    this.couponCode('');\n                    cancelCouponAction(this.isApplied).done(function () {\n                        if (!quote.isVirtual() && quote.isReloadShippingOnDiscount()) {\n                            rateRegistry.set(quote.shippingAddress().getCacheKey(), false);\n                            quote.shippingAddress(quote.shippingAddress()); //trigger getRates\n                        }\n                    });\n                }\n            },\n\n            cancel: function () {\n                $('#iwd_opc_discount [data-role=trigger]').trigger('click');\n            },\n\n            getDiscountAmount: function () {\n                var price = 0;\n                if (this.totals() && this.totals().discount_amount) {\n                    price = parseFloat(this.totals().discount_amount);\n                }\n\n                return priceUtils.formatPrice(price, quote.getPriceFormat());\n            },\n\n            /**\n             * Coupon form validation\n             *\n             * @returns {Boolean}\n             */\n            validate: function () {\n                var form = '#discount-form';\n                return $(form).validation() && $(form).validation('isValid');\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/discount/errors.js":"define([\n    'ko',\n    'jquery',\n    'uiComponent',\n    'Magento_SalesRule/js/model/payment/discount-messages'\n], function (ko, $, Component, messageList) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'IWD_Opc/errors'\n        },\n\n        initialize: function () {\n            this._super()\n                .initObservable();\n\n            this.messageContainer = messageList;\n            return this;\n        },\n\n        initObservable: function () {\n            this._super()\n                .observe('isHidden');\n            return this;\n        },\n\n        isVisible: function () {\n            return this.messageContainer.hasMessages();\n        },\n\n        removeAll: function () {\n            this.messageContainer.clear();\n        }\n    });\n});\n","IWD_Opc/js/view/payment/methods-renderers/paypal-billing-agreement.js":"define(\n    [\n        'jquery',\n        'Magento_Paypal/js/view/payment/method-renderer/paypal-billing-agreement'\n    ],\n    function ($, Component) {\n        'use strict';\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/paypal_billing_agreement-form'\n            },\n            optionsRenderCallback: 0,\n            decorateSelect: function (uid) {\n                clearTimeout(this.optionsRenderCallback);\n                this.optionsRenderCallback = setTimeout(function () {\n                    var select = $('#' + uid);\n                    if (select.length) {\n                        select.decorateSelect();\n                    }\n                }, 0);\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/worldpay.js":"define(\n    [\n        'Magento_Worldpay/js/view/payment/method-renderer/worldpay',\n        'mage/translate'\n    ],\n    function (Component, $t) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/worldpay-form'\n            },\n            getInstructions: function () {\n                return $t('After clicking \"Place Order\", you will be directed to one of our trusted partners to complete your purchase.');\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/free-method.js":"define(\n    [\n        'Magento_Payment/js/view/payment/method-renderer/free-method'\n    ],\n    function (Component) {\n        'use strict';\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/free'\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/apple_pay.js":"define([\n    'ko',\n    'jquery',\n    'IWD_ApplePay/js/view/payment/method-renderer/apple_pay',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'uiRegistry',\n    'Magento_Checkout/js/action/set-billing-address',\n    'Magento_Ui/js/model/messageList',\n    'Magento_Checkout/js/action/redirect-on-success'\n], function (ko, $, Component, quote, additionalValidators,\n             registry, setBillingAddressAction, globalMessageList, redirectOnSuccessAction) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'IWD_Opc/payment/methods-renderers/apple_pay'\n        },\n        quoteIsVirtual: quote.isVirtual(),\n\n        initialize: function () {\n            this._super();\n            var self = this;\n            this.isChecked.subscribe(function (value) {\n                self.togglePlaceOrderButton(value === self.getCode());\n            });\n            self.togglePlaceOrderButton(quote.paymentMethod().method === self.getCode());\n            return this;\n        },\n        togglePlaceOrderButton: function (showPaymentButton) {\n            if (showPaymentButton) {\n                $('.iwd_opc_place_order_button').hide();\n                $('#iwd_applepay_place_order').show();\n            } else {\n                $('.iwd_opc_place_order_button').show();\n                $('#iwd_applepay_place_order').hide();\n            }\n        },\n        placeOrder: function () {\n            var self = this;\n            if (!quote.isVirtual()) {\n                var shippingAddress = registry.get('checkout.steps.shipping-step.shippingAddress');\n                shippingAddress.setShippingInformation().done(function () {\n                    self.isPlaceOrderActionAllowed(false);\n                    self.getPlaceOrderDeferredObject()\n                        .fail(\n                            function () {\n                                self.isPlaceOrderActionAllowed(true);\n                            }\n                        ).done(\n                        function () {\n                            self.afterPlaceOrder();\n\n                            if (self.redirectAfterPlaceOrder) {\n                                redirectOnSuccessAction.execute();\n                            }\n                        }\n                    );\n                });\n            } else {\n                setBillingAddressAction(globalMessageList).done(function () {\n                    self.isPlaceOrderActionAllowed(false);\n                    self.getPlaceOrderDeferredObject()\n                        .fail(\n                            function () {\n                                self.isPlaceOrderActionAllowed(true);\n                            }\n                        ).done(\n                        function () {\n                            self.afterPlaceOrder();\n\n                            if (self.redirectAfterPlaceOrder) {\n                                redirectOnSuccessAction.execute();\n                            }\n                        }\n                    );\n                });\n            }\n        }\n    });\n});\n","IWD_Opc/js/view/payment/methods-renderers/opg_square.js":"define(\n    [\n        'jquery',\n        'OPG_Square/js/view/payment/method-renderer/opg_square'\n    ],\n    function ($, Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/opg_square',\n                isCurrentlySecure: window.checkoutConfig.iwdOpcSettings.isCurrentlySecure\n            },\n\n            getInputStyles: function () {\n                return {\n                    fontSize: '14px',\n                    padding: 0,\n                    lineHeight: '19px'\n                };\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/iwd_saved_credit_card.js":"define(\n    [\n        'mage/translate',\n        'IWD_SavedCreditCard/js/view/payment/method-renderer/iwd_saved_credit_card'\n    ],\n    function ($t, Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/iwd_saved_credit_card',\n                isCurrentlySecure: window.checkoutConfig.iwdOpcSettings.isCurrentlySecure\n\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/payflow-express-bml.js":"define(\n    [\n        'Magento_Paypal/js/view/payment/method-renderer/payflow-express-bml',\n        'mage/translate'\n    ],\n    function (Component, $t) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/payflow-express-bml'\n            },\n            getInstructions: function () {\n                return $t('After clicking \"Place Order\", you will be directed to one of our trusted partners to complete your purchase.');\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/purchaseorder-method.js":"define(\n    [\n        'Magento_OfflinePayments/js/view/payment/method-renderer/purchaseorder-method',\n        'jquery',\n        'mage/validation'\n    ],\n    function (Component, $) {\n        'use strict';\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/purchaseorder-form',\n                isCurrentlySecure: window.checkoutConfig.iwdOpcSettings.isCurrentlySecure\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/authorizenet-directpost.js":"define(\n    [\n        'jquery',\n        'Magento_Authorizenet/js/view/payment/method-renderer/authorizenet-directpost'\n    ],\n    function ($, Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/authorizenet-directpost',\n                isCurrentlySecure: window.checkoutConfig.iwdOpcSettings.isCurrentlySecure\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/checkmo-method.js":"define(\n    [\n        'Magento_OfflinePayments/js/view/payment/method-renderer/checkmo-method'],\n    function (Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/checkmo'\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/iframe-methods.js":"define(\n    [\n        'jquery',\n        'mage/translate',\n        'Magento_Paypal/js/view/payment/method-renderer/iframe-methods',\n        'Magento_Checkout/js/model/full-screen-loader'\n    ],\n    function ($, $t, Component, fullScreenLoader) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/iframe-methods'\n            },\n            initialize: function () {\n                var self = this;\n                self._super();\n                $(document).on('click', '#iwd_opc_iframe_container .iwd_opc_column_name', function () {\n                    $('#iwd_opc_iframe_container .iwd_opc_column_content iframe').appendTo('#' + self.getCode() + '-iframe-container');\n                    $('#iwd_opc_iframe_container').hide();\n                    $('#checkout').show();\n                    fullScreenLoader.stopLoader();\n                    self.paymentReady(false);\n                    self.isInAction(false);\n                    self.iframeIsLoaded = false;\n                });\n                return this;\n            },\n            afterPlaceOrder: function () {\n                this._super();\n                var self = this;\n                $('#checkout').hide();\n                $('#iwd_opc_iframe_container').show();\n                $('#' + self.getCode() + '-iframe-container iframe').appendTo($('#iwd_opc_iframe_container .iwd_opc_column_content'));\n                fullScreenLoader.stopLoader();\n                document.getElementById(self.getCode() + '-iframe')\n                    .contentWindow.location.reload();\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/payflow-express.js":"define(\n    [\n        'Magento_Paypal/js/view/payment/method-renderer/payflow-express',\n        'mage/translate'\n    ],\n    function (Component, $t) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/payflow-express'\n            },\n            getInstructions: function () {\n                return $t('After clicking \"Place Order\", you will be directed to one of our trusted partners to complete your purchase.');\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/paypal-express.js":"define(\n    [\n        'Magento_Paypal/js/view/payment/method-renderer/paypal-express',\n        'mage/translate'\n    ],\n    function (Component, $t) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/paypal-express'\n            },\n            getInstructions: function () {\n                return $t('After clicking \"Place Order\", you will be directed to one of our trusted partners to complete your purchase.');\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/banktransfer-method.js":"define(\n    [\n        'ko',\n        'Magento_OfflinePayments/js/view/payment/method-renderer/banktransfer-method'\n    ],\n    function (ko, Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/banktransfer'\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/paypal-express-bml.js":"define(\n    [\n        'Magento_Paypal/js/view/payment/method-renderer/paypal-express-bml',\n        'mage/translate'\n    ],\n    function (Component, $t) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/paypal-express-bml'\n            },\n            getInstructions: function () {\n                return $t('After clicking \"Place Order\", you will be directed to one of our trusted partners to complete your purchase.');\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/cashondelivery-method.js":"define(\n    [\n        'Magento_OfflinePayments/js/view/payment/method-renderer/cashondelivery-method'\n    ],\n    function (Component) {\n        'use strict';\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/cashondelivery'\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/cybersource.js":"define(\n    [\n        'Magento_Cybersource/js/view/payment/method-renderer/cybersource'\n    ],\n    function ($, Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/cybersource-form'\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/payflowpro-method.js":"define(\n    [\n        'mage/translate',\n        'Magento_Paypal/js/view/payment/method-renderer/payflowpro-method'\n    ],\n    function ($t, Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/payflowpro-form',\n                isCurrentlySecure: window.checkoutConfig.iwdOpcSettings.isCurrentlySecure\n\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/in-context/checkout-express.js":"define(\n    [\n        'Magento_Paypal/js/view/payment/method-renderer/in-context/checkout-express',\n        'mage/translate'\n    ],\n    function (Component, $t) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/paypal-express-in-context'\n            },\n            getInstructions: function () {\n                return $t('After clicking \"Place Order\", you will be directed to one of our trusted partners to complete your purchase.');\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/iwd_authcim/iframe.js":"define(\n    [\n        'jquery',\n        'IWD_AuthCIM/js/view/payment/method-renderer/iframe'\n    ],\n    function ($, Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/iwd_authcim/iframe',\n                isCurrentlySecure: window.checkoutConfig.iwdOpcSettings.isCurrentlySecure\n            },\n            optionsRenderCallback: 0,\n            decorateSelect: function (uid) {\n                clearTimeout(this.optionsRenderCallback);\n                this.optionsRenderCallback = setTimeout(function () {\n                    var select = $('#' + uid);\n                    if (select.length) {\n                        select.decorateSelect();\n                    }\n                }, 0);\n            }\n        });\n    }\n);","IWD_Opc/js/view/payment/methods-renderers/iwd_authcim/acceptjs.js":"define(\n    [\n        'jquery',\n        'IWD_AuthCIM/js/view/payment/method-renderer/acceptjs'\n    ],\n    function ($, Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/iwd_authcim/iframe',\n                isCurrentlySecure: window.checkoutConfig.iwdOpcSettings.isCurrentlySecure\n            },\n            optionsRenderCallback: 0,\n            decorateSelect: function (uid) {\n                clearTimeout(this.optionsRenderCallback);\n                this.optionsRenderCallback = setTimeout(function () {\n                    var select = $('#' + uid);\n                    if (select.length) {\n                        select.decorateSelect();\n                    }\n                }, 0);\n            }\n        });\n    }\n);","IWD_Opc/js/view/payment/methods-renderers/braintree/paypal.js":"define([\n    'Magento_Braintree/js/view/payment/method-renderer/paypal',\n    'mage/translate'\n], function (Component, $t) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'IWD_Opc/payment/methods-renderers/braintree/paypal'\n        },\n        getInstructions: function () {\n            return $t('After clicking \"Place Order\", you will be directed to one of our trusted partners to complete your purchase.');\n        },\n        isSkipOrderReview: function () {\n            return true;\n        }\n    });\n});\n","IWD_Opc/js/view/payment/methods-renderers/braintree/hosted-fields.js":"define([\n    'Magento_Braintree/js/view/payment/method-renderer/hosted-fields',\n    'mage/translate'\n], function (Component, $t) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'IWD_Opc/payment/methods-renderers/braintree/form',\n            isCurrentlySecure: window.checkoutConfig.iwdOpcSettings.isCurrentlySecure\n        },\n        getHostedFields: function () {\n            var self = this;\n            var fields = self._super();\n            if (fields.cvv) {\n                fields.cvv.placeholder = $t('CVV') + ' *';\n            }\n\n            fields.number.placeholder = $t('Credit Card Number') + ' *';\n            fields.expirationMonth.placeholder = $t('MM') + ' *';\n            fields.expirationYear.placeholder = $t('YY') + ' *';\n            fields.styles = {\n                \"input\": {\n                    \"font-size\": \"14px\",\n                    \"color\": \"rgb(52,52,52)\",\n                    \"font-family\": \"'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif\"\n                }\n            };\n\n            return fields;\n        }\n    });\n});\n","IWD_Opc/js/view/payment/methods-renderers/eway/direct.js":"define(\n    [\n        'Magento_Eway/js/view/payment/method-renderer/direct'\n    ],\n    function (ccFormComponent) {\n        'use strict';\n\n        return ccFormComponent.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/eway-direct-form'\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/methods-renderers/eway/shared.js":"define(\n    [\n        'Magento_Eway/js/view/payment/method-renderer/shared',\n        'mage/translate'\n    ],\n    function (Component,\n              $t) {\n        'use strict';\n        return Component.extend({\n            defaults: {\n                template: 'IWD_Opc/payment/methods-renderers/eway-shared-form'\n            },\n            getInstructions: function () {\n                return $t('After clicking \"Place Order\", you will be directed to one of our trusted partners to complete your purchase.');\n            }\n        });\n    }\n);\n","IWD_Opc/js/view/payment/gift-card/errors.js":"define([\n    'ko',\n    'jquery',\n    'uiComponent',\n    'Magento_GiftCardAccount/js/model/payment/gift-card-messages'\n], function (ko, $, Component, messageList) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'IWD_Opc/errors'\n        },\n\n        initialize: function () {\n            this._super()\n                .initObservable();\n\n            this.messageContainer = messageList;\n            return this;\n        },\n\n        initObservable: function () {\n            this._super()\n                .observe('isHidden');\n            return this;\n        },\n\n        isVisible: function () {\n            return this.messageContainer.hasMessages();\n        },\n\n        removeAll: function () {\n            this.messageContainer.clear();\n        }\n    });\n});\n","IWD_Opc/js/view/form/element/email.js":"define([\n    'jquery',\n    'uiComponent',\n    'uiRegistry',\n    'ko',\n    'Magento_Customer/js/action/check-email-availability',\n    'Magento_Customer/js/action/login',\n    'IWD_Opc/js/action/reset',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/checkout-data',\n    'IWD_Opc/js/model/login/messageList',\n    'mage/translate',\n    'mage/validation'\n], function ($, Component, registry, ko, checkEmailAvailability, loginAction, resetAction, quote, checkoutData, messageContainer, $t) {\n    'use strict';\n\n    var validatedEmail = checkoutData.getValidatedEmailValue();\n\n    if (validatedEmail && !quote.isCustomerLoggedIn()) {\n        quote.guestEmail = validatedEmail;\n    }\n\n    return Component.extend({\n        defaults: {\n            template: 'IWD_Opc/form/element/email',\n            email: checkoutData.getInputFieldEmailValue(),\n            emailFocused: false,\n            passwordFocused: false,\n            isLoading: false,\n            isPasswordVisible: checkoutData.getIsPasswordVisible(),\n            listens: {\n                email: 'emailHasChanged',\n                emailFocused: 'validateEmail'\n            }\n        },\n        passwordType: ko.observable('password'),\n        checkDelay: 1000,\n        checkRequest: null,\n        isEmailCheckComplete: null,\n        isCustomerLoggedIn: quote.isCustomerLoggedIn(),\n        forgotPasswordUrl: quote.getForgotPasswordUrl(),\n        emailCheckTimeout: 0,\n\n        // initialize: function () {\n        //     var self = this;\n        //     this._super();\n        //     loginAction.registerLoginCallback(function (loginData) {\n        //         self.isLoading(false);\n        //     });\n        // },\n\n        initObservable: function () {\n            var self = this;\n            this._super()\n                .observe(['email', 'emailFocused', 'passwordFocused', 'isLoading', 'isPasswordVisible']);\n\n            $(document).on('click', '#iwd_opc_top_login_button', function () {\n                self.isPasswordVisible(true);\n                if (!self.email()) {\n                    self.emailFocused(true);\n                } else {\n                    self.passwordFocused(true);\n                }\n            });\n\n            return this;\n        },\n\n        emailHasChanged: function () {\n            var self = this;\n\n            clearTimeout(this.emailCheckTimeout);\n\n            if (self.validateEmail()) {\n                quote.guestEmail = self.email();\n                checkoutData.setValidatedEmailValue(self.email());\n            }\n\n            this.emailCheckTimeout = setTimeout(function () {\n                if (self.validateEmail()) {\n                    self.checkEmailAvailability();\n                } else {\n                    self.isPasswordVisible(false);\n                    checkoutData.setIsPasswordVisible(false);\n                }\n            }, self.checkDelay);\n\n            checkoutData.setInputFieldEmailValue(self.email());\n        },\n\n        checkEmailAvailability: function () {\n            var self = this;\n            this.validateRequest();\n            this.isEmailCheckComplete = $.Deferred();\n            this.isLoading(true);\n            this.checkRequest = checkEmailAvailability(this.isEmailCheckComplete, this.email());\n\n            $.when(this.isEmailCheckComplete).done(function () {\n                self.isPasswordVisible(false);\n                checkoutData.setIsPasswordVisible(false);\n            }).fail(function () {\n                self.isPasswordVisible(true);\n                checkoutData.setIsPasswordVisible(true);\n            }).always(function () {\n                self.isLoading(false);\n            });\n        },\n\n        validateRequest: function () {\n            if (this.checkRequest !== null && $.inArray(this.checkRequest.readyState, [1, 2, 3])) {\n                this.checkRequest.abort();\n                this.checkRequest = null;\n            }\n        },\n\n        validateEmail: function (focused) {\n            var loginFormSelector = 'form[data-role=email-with-possible-login]',\n                usernameSelector = loginFormSelector + ' input[name=username]',\n                loginForm = $(loginFormSelector),\n                validator;\n\n            loginForm.validation();\n\n            if (focused === false && !!this.email()) {\n                return !!$(usernameSelector).valid();\n            }\n\n            validator = loginForm.validate();\n\n            return validator.check(usernameSelector);\n        },\n\n        toggleShowHidePassword: function (data, event) {\n            this.passwordType(this.passwordType() === 'text' ? 'password' : 'text');\n        },\n\n        reset: function () {\n            var resetData = {},\n                self = this;\n            resetData['email'] = self.email();\n\n            if (self.validateEmail()) {\n                self.isLoading(true);\n                resetAction(resetData, undefined, undefined, messageContainer).always(function () {\n                    self.isLoading(false);\n                });\n            }\n        },\n\n        login: function (loginForm) {\n            var loginData = {},\n                self = this,\n                formDataArray = $(loginForm).serializeArray();\n\n            formDataArray.forEach(function (entry) {\n                loginData[entry.name] = entry.value;\n            });\n\n            if (this.isPasswordVisible() && $(loginForm).validation() && $(loginForm).validation('isValid')) {\n                loginAction(loginData, undefined, undefined, messageContainer, self);\n            }\n        }\n    });\n});\n","IWD_Opc/js/view/form/element/email/errors.js":"define([\n    'ko',\n    'jquery',\n    'uiComponent',\n    'IWD_Opc/js/model/login/messageList'\n], function (ko, $, Component, messageList) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'IWD_Opc/errors'\n        },\n\n        initialize: function () {\n            this._super()\n                .initObservable();\n\n            this.messageContainer = messageList;\n            return this;\n        },\n\n        initObservable: function () {\n            this._super()\n                .observe('isHidden');\n            return this;\n        },\n\n        isVisible: function () {\n            return this.messageContainer.hasMessages();\n        },\n\n        removeAll: function () {\n            this.messageContainer.clear();\n        }\n    });\n});\n","IWD_Opc/js/view/billing/address-validation.js":"define(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'IWD_Opc/js/model/billing/address-validator',\n        'Magento_Checkout/js/model/quote'\n    ],\n    function (Component, additionalValidators, billingValidator, quote) {\n        'use strict';\n        additionalValidators.registerValidator(billingValidator);\n        return Component.extend({});\n    }\n);\n","IWD_Opc/js/action/set-gift-card-information.js":"define(\n    [\n        'jquery',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/url-builder',\n        'mage/storage',\n        'Magento_GiftCardAccount/js/model/payment/gift-card-messages',\n        'Magento_Checkout/js/model/error-processor',\n        'Magento_Customer/js/model/customer',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/action/get-payment-information',\n        'Magento_Checkout/js/model/totals'\n    ],\n    function (\n        $,\n        quote,\n        urlBuilder,\n        storage,\n        messageList,\n        errorProcessor,\n        customer,\n        fullScreenLoader,\n        getPaymentInformationAction,\n        totals\n    ) {\n        'use strict';\n\n        return function (giftCardCode) {\n            var serviceUrl,\n                payload,\n                message = 'Gift Card ' + giftCardCode + ' was added.';\n            /**\n             * Checkout for guest and registered customer.\n             */\n            if (!customer.isLoggedIn()) {\n                serviceUrl = urlBuilder.createUrl('/carts/guest-carts/:cartId/giftCards', {\n                    cartId: quote.getQuoteId()\n                });\n                payload = {\n                    cartId: quote.getQuoteId(),\n                    giftCardAccountData: {gift_cards: giftCardCode}\n                };\n            } else {\n                serviceUrl = urlBuilder.createUrl('/carts/mine/giftCards', {});\n                payload = {\n                    cartId: quote.getQuoteId(),\n                    giftCardAccountData: {gift_cards: giftCardCode}\n                };\n            }\n            messageList.clear();\n            fullScreenLoader.startLoader();\n            return storage.post(\n                serviceUrl, JSON.stringify(payload)\n            ).done(\n                function (response) {\n                    var deferred = $.Deferred();\n                    if (response) {\n                        totals.isLoading(true);\n                        getPaymentInformationAction(deferred);\n                        $.when(deferred).done(function () {\n                            totals.isLoading(false);\n                            fullScreenLoader.stopLoader();\n                        });\n                        messageList.addSuccessMessage({'message': message});\n                    }\n                }\n            ).fail(\n                function (response) {\n                    totals.isLoading(false);\n                    errorProcessor.process(response, messageList);\n                    fullScreenLoader.stopLoader();\n                }\n            );\n        };\n    }\n);\n","IWD_Opc/js/action/use-balance.js":"define(\n    [\n        'jquery',\n        'ko',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/url-builder',\n        'Magento_Checkout/js/model/error-processor',\n        'mage/storage',\n        'Magento_Ui/js/model/messageList',\n        'mage/translate',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/action/get-payment-information',\n        'Magento_Checkout/js/model/totals'\n    ],\n    function ($,\n              ko,\n              quote,\n              urlBuilder,\n              errorProcessor,\n              storage,\n              messageList,\n              $t,\n              fullScreenLoader,\n              getPaymentInformationAction,\n              totals) {\n        'use strict';\n        return function (usedAmount, isApplied) {\n            var message = $t('Your store credits were successfully applied');\n            messageList.clear();\n            fullScreenLoader.startLoader();\n            return storage.post(\n                urlBuilder.createUrl('/carts/mine/balance/apply', {})\n            ).done(\n                function (response) {\n                    if (response) {\n                        var deferred = $.Deferred();\n                        totals.isLoading(true);\n                        getPaymentInformationAction(deferred);\n                        $.when(deferred).done(function () {\n                            totals.isLoading(false);\n                            isApplied(true);\n                            fullScreenLoader.stopLoader();\n                        });\n                        messageList.addSuccessMessage({'message': message});\n                    } else {\n                        fullScreenLoader.stopLoader();\n                    }\n                }\n            ).fail(\n                function (response) {\n                    totals.isLoading(false);\n                    errorProcessor.process(response);\n                    fullScreenLoader.stopLoader();\n                }\n            )\n        };\n    }\n);\n","IWD_Opc/js/action/set-use-reward-points.js":"define(\n    [\n        'jquery',\n        'Magento_Checkout/js/model/url-builder',\n        'mage/storage',\n        'Magento_Checkout/js/model/error-processor',\n        'Magento_Ui/js/model/messageList',\n        'mage/translate',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/action/get-payment-information',\n        'Magento_Checkout/js/model/totals'\n    ],\n    function ($,\n              urlBuilder,\n              storage,\n              errorProcessor,\n              messageList,\n              $t,\n              fullScreenLoader,\n              getPaymentInformationAction,\n              totals) {\n        'use strict';\n        return function (usedAmount, isApplied) {\n            var message = $t('Your reward points were successfully applied');\n            messageList.clear();\n            fullScreenLoader.startLoader();\n            storage.post(\n                urlBuilder.createUrl('/reward/mine/use-reward', {}), {}\n            ).done(\n                function (response) {\n                    if (response) {\n                        var deferred = $.Deferred();\n                        totals.isLoading(true);\n                        getPaymentInformationAction(deferred);\n                        $.when(deferred).done(function () {\n                            totals.isLoading(false);\n                            if (totals.getSegment('reward')) {\n                                usedAmount((totals.getSegment('reward').value * -1));\n                            } else {\n                                usedAmount(window.checkoutConfig.payment.reward.balance);\n                            }\n\n                            isApplied(true);\n                            fullScreenLoader.stopLoader();\n                        });\n                        messageList.addSuccessMessage({'message': message});\n                    } else {\n                        fullScreenLoader.stopLoader();\n                    }\n                }\n            ).fail(\n                function (response) {\n                    totals.isLoading(false);\n                    errorProcessor.process(response);\n                    fullScreenLoader.stopLoader();\n                }\n            );\n        };\n    }\n);\n","IWD_Opc/js/action/remove-reward-points.js":"define(\n    [\n        'jquery',\n        'ko',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/url-builder',\n        'Magento_Checkout/js/model/error-processor',\n        'mage/storage',\n        'Magento_Ui/js/model/messageList',\n        'mage/translate',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/action/get-payment-information',\n        'Magento_Checkout/js/model/totals'\n    ],\n    function ($,\n              ko,\n              quote,\n              urlBuilder,\n              errorProcessor,\n              storage,\n              messageList,\n              $t,\n              fullScreenLoader,\n              getPaymentInformationAction,\n              totals) {\n        'use strict';\n        return function (usedAmount, isApplied) {\n            var message = $t('Your reward points were successfully removed');\n            messageList.clear();\n            fullScreenLoader.startLoader();\n            return storage.post(\n                urlBuilder.createUrl('/reward/mine/remove-reward', {})\n            ).done(\n                function (response) {\n                    if (response) {\n                        var deferred = $.Deferred();\n                        totals.isLoading(true);\n                        getPaymentInformationAction(deferred);\n                        $.when(deferred).done(function () {\n                            isApplied(false);\n                            usedAmount(0);\n                            totals.isLoading(false);\n                            fullScreenLoader.stopLoader();\n                        });\n                        messageList.addSuccessMessage({'message': message});\n                    } else {\n                        fullScreenLoader.stopLoader();\n                    }\n                }\n            ).fail(\n                function (response) {\n                    totals.isLoading(false);\n                    errorProcessor.process(response);\n                    fullScreenLoader.stopLoader();\n                }\n            );\n        };\n    }\n);\n","IWD_Opc/js/action/login.js":"define(\n    [\n        'jquery',\n        'mage/storage',\n        'Magento_Ui/js/model/messageList',\n        'Magento_Customer/js/customer-data',\n        'Magento_Checkout/js/model/full-screen-loader'\n    ],\n    function ($, storage, globalMessageList, customerData, fullScreenLoader) {\n        'use strict';\n        var callbacks = [],\n            action = function (loginData, redirectUrl, isGlobal, messageContainer, emailObj) {\n                messageContainer = messageContainer || globalMessageList;\n                if (emailObj) {\n                    emailObj.isLoading(true);\n                }\n\n                return storage.post(\n                    'customer/ajax/login',\n                    JSON.stringify(loginData),\n                    isGlobal\n                ).done(function (response) {\n                    if (emailObj) {\n                        emailObj.isLoading(false);\n                    }\n\n                    if (response.errors) {\n                        messageContainer.addErrorMessage(response);\n                        callbacks.forEach(function (callback) {\n                            callback(loginData);\n                        });\n                    } else {\n                        callbacks.forEach(function (callback) {\n                            callback(loginData);\n                        });\n                        customerData.invalidate(['customer']);\n                        fullScreenLoader.startLoader();\n                        if (redirectUrl) {\n                            window.location.href = redirectUrl;\n                        } else if (response.redirectUrl) {\n                            window.location.href = response.redirectUrl;\n                        } else {\n                            location.reload();\n                        }\n                    }\n                }).fail(function () {\n                    if (emailObj) {\n                        emailObj.isLoading(false);\n                    }\n\n                    messageContainer.addErrorMessage({'message': 'Could not authenticate. Please try again later'});\n                    callbacks.forEach(function (callback) {\n                        callback(loginData);\n                    });\n                })\n            };\n\n        action.registerLoginCallback = function (callback) {\n            callbacks.push(callback);\n        };\n\n        return action;\n    }\n);\n","IWD_Opc/js/action/remove-balance.js":"define(\n    [\n        'jquery',\n        'ko',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/url-builder',\n        'Magento_Checkout/js/model/error-processor',\n        'mage/storage',\n        'Magento_Ui/js/model/messageList',\n        'mage/translate',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/action/get-payment-information',\n        'Magento_Checkout/js/model/totals'\n    ],\n    function ($,\n              ko,\n              quote,\n              urlBuilder,\n              errorProcessor,\n              storage,\n              messageList,\n              $t,\n              fullScreenLoader,\n              getPaymentInformationAction,\n              totals) {\n        'use strict';\n        return function (usedAmount, isApplied) {\n            var message = $t('Your store credits were successfully removed');\n            messageList.clear();\n            fullScreenLoader.startLoader();\n            return storage.post(\n                urlBuilder.createUrl('/carts/mine/balance/remove', {})\n            ).done(\n                function (response) {\n                    if (response) {\n                        var deferred = $.Deferred();\n                        totals.isLoading(true);\n                        getPaymentInformationAction(deferred);\n                        $.when(deferred).done(function () {\n                            isApplied(false);\n                            usedAmount(0);\n                            totals.isLoading(false);\n                            fullScreenLoader.stopLoader();\n                        });\n                        messageList.addSuccessMessage({'message': message});\n                    } else {\n                        fullScreenLoader.stopLoader();\n                    }\n                }\n            ).fail(\n                function (response) {\n                    totals.isLoading(false);\n                    errorProcessor.process(response);\n                    fullScreenLoader.stopLoader();\n                }\n            );\n        };\n    }\n);\n","IWD_Opc/js/action/gift-message.js":"define(\n    [\n        'Magento_GiftMessage/js/model/url-builder',\n        'mage/storage',\n        'Magento_Ui/js/model/messageList',\n        'Magento_Checkout/js/model/error-processor',\n        'mage/url',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/cart/totals-processor/default'\n    ],\n    function (urlBuilder, storage, messageList, errorProcessor, url, quote, totalsDefaultProvider) {\n        'use strict';\n        var totalsProcessors = [];\n\n        return function (itemId, data, options) {\n            var serviceUrl;\n\n            url.setBaseUrl(options.baseUrl);\n\n            if (options.isCustomerLoggedIn) {\n                serviceUrl = urlBuilder.createUrl('/carts/mine/gift-message', {});\n                if (itemId !== 'orderLevel') {\n                    serviceUrl = urlBuilder.createUrl('/carts/mine/gift-message/:itemId', {\n                        itemId: itemId\n                    });\n                }\n            } else {\n                serviceUrl = urlBuilder.createUrl('/guest-carts/:cartId/gift-message', {\n                    cartId: quote.getQuoteId()\n                });\n                if (itemId !== 'orderLevel') {\n                    serviceUrl = urlBuilder.createUrl(\n                        '/guest-carts/:cartId/gift-message/:itemId',\n                        {\n                            cartId: quote.getQuoteId(), itemId: itemId\n                        }\n                    );\n                }\n            }\n            totalsProcessors['default'] = totalsDefaultProvider;\n\n            messageList.clear();\n            return storage.post(\n                serviceUrl,\n                JSON.stringify({\n                    gift_message: data\n                })\n            ).done(\n                function (response) {\n                    var type = quote.shippingAddress().getType();\n                    totalsProcessors[type]\n                        ? totalsProcessors[type].estimateTotals(quote.shippingAddress())\n                        : totalsProcessors['default'].estimateTotals(quote.shippingAddress());\n                }\n            ).fail(\n                function (response) {\n                    errorProcessor.process(response);\n                }\n            );\n        };\n    }\n);\n","IWD_Opc/js/action/reset.js":"define(\n    [\n        'jquery',\n        'mage/storage',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Ui/js/model/messageList'\n    ],\n    function ($, storage, quote, globalMessageList) {\n        'use strict';\n        var callbacks = [],\n            action = function (resetData, redirectUrl, isGlobal, messageContainer) {\n                messageContainer = messageContainer || globalMessageList;\n                return storage.post(\n                    quote.getForgotPasswordUrl(),\n                    JSON.stringify(resetData),\n                    isGlobal\n                ).done(function (response) {\n                    if (response.errors) {\n                        messageContainer.addErrorMessage(response);\n                        callbacks.forEach(function (callback) {\n                            callback(resetData);\n                        });\n                    } else {\n                        messageContainer.addSuccessMessage(response);\n                        callbacks.forEach(function (callback) {\n                            callback(resetData);\n                        });\n                    }\n                }).fail(function () {\n                    messageContainer.addErrorMessage({'message': 'Could not reset your password. Please try again later'});\n                    callbacks.forEach(function (callback) {\n                        callback(resetData);\n                    });\n                });\n            };\n\n        action.registerResetCallback = function (callback) {\n            callbacks.push(callback);\n        };\n\n        return action;\n    }\n);\n","IWD_Opc/js/action/paypal/set-payment-method.js":"define([\n    'jquery',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/url-builder',\n    'mage/storage',\n    'Magento_Checkout/js/model/error-processor',\n    'Magento_Customer/js/model/customer',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'IWD_Opc/js/model/comment-assigner',\n    'IWD_Opc/js/model/subscribe-assigner',\n    'Magento_CheckoutAgreements/js/model/agreements-assigner'\n], function ($, quote, urlBuilder, storage, errorProcessor, customer, fullScreenLoader, commentAssigner, subscribeAssigner, checkoutAgreementsAssigner) {\n    'use strict';\n\n    return function (messageContainer) {\n        var serviceUrl,\n            payload,\n            method = 'put',\n            paymentData = quote.paymentMethod();\n\n        commentAssigner(paymentData);\n        subscribeAssigner(paymentData);\n\n        /**\n         * Checkout for guest and registered customer.\n         */\n        if (!customer.isLoggedIn()) {\n            checkoutAgreementsAssigner(paymentData);\n            serviceUrl = urlBuilder.createUrl('/guest-carts/:cartId/set-payment-information', {\n                cartId: quote.getQuoteId()\n            });\n            payload = {\n                cartId: quote.getQuoteId(),\n                email: quote.guestEmail,\n                paymentMethod: paymentData\n            };\n            method = 'post';\n        } else {\n            serviceUrl = urlBuilder.createUrl('/carts/mine/selected-payment-method', {});\n            payload = {\n                cartId: quote.getQuoteId(),\n                method: paymentData\n            };\n        }\n        fullScreenLoader.startLoader();\n\n        return storage[method](\n            serviceUrl, JSON.stringify(payload)\n        ).fail(function (response) {\n            errorProcessor.process(response, messageContainer);\n        }).always(function () {\n            fullScreenLoader.stopLoader();\n        });\n    };\n});","IWD_Opc/js/form/element/textarea.js":"define([\n    'jquery',\n    'Magento_Ui/js/form/element/abstract',\n    'iwdOpcHelper'\n], function ($, Abstract) {\n    'use strict';\n\n    return Abstract.extend({\n        defaults: {\n            elementTmpl: 'IWD_Opc/form/element/textarea'\n        },\n        textareaAutoSize: function (element) {\n            $(element).textareaAutoSize();\n        }\n    });\n});\n","IWD_Opc/js/form/element/multiselect.js":"define([\n    'underscore',\n    'mageUtils',\n    './select'\n], function (_, utils, Select) {\n    'use strict';\n\n    return Select.extend({\n        defaults: {\n            size: 5,\n            elementTmpl: 'IWD_Opc/form/element/multiselect'\n        },\n\n        /**\n         * @inheritdoc\n         */\n        setInitialValue: function () {\n            this._super();\n\n            this.initialValue = utils.copy(this.initialValue);\n\n            return this;\n        },\n\n        /**\n         * @inheritdoc\n         */\n        normalizeData: function (value) {\n            if (utils.isEmpty(value)) {\n                value = [];\n            }\n\n            return _.isString(value) ? value.split(',') : value;\n        },\n\n        /**\n         * @inheritdoc\n         */\n        getInitialValue: function () {\n            var values = [\n                    this.normalizeData(this.source.get(this.dataScope)),\n                    this.normalizeData(this.default)\n                ],\n                value;\n\n            values.some(function (v) {\n                return _.isArray(v) && (value = utils.copy(v)) && !_.isEmpty(v);\n            });\n\n            return value;\n        },\n\n        /**\n         * @inheritdoc\n         */\n        hasChanged: function () {\n            var value = this.value(),\n                initial = this.initialValue;\n\n            return !utils.equalArrays(value, initial);\n        },\n\n        /**\n         * @inheritdoc\n         */\n        reset: function () {\n            this.value(utils.copy(this.initialValue));\n            this.error(false);\n\n            return this;\n        },\n\n        /**\n         * @inheritdoc\n         */\n        clear: function () {\n            this.value([]);\n            this.error(false);\n\n            return this;\n        }\n    });\n});\n","IWD_Opc/js/form/element/region.js":"define([\n    'underscore',\n    'uiRegistry',\n    'IWD_Opc/js/form/element/select',\n    'IWD_Opc/js/model/default-post-code-resolver'\n], function (_, registry, Select, defaultPostCodeResolver) {\n    'use strict';\n\n    return Select.extend({\n        defaults: {\n            skipValidation: false,\n            imports: {\n                update: '${ $.parentName }.country_id:value'\n            }\n        },\n\n        initialize: function () {\n            this._super()\n                .update(registry.get(this.parentName + '.' + 'country_id').initialValue)\n                .switchRequiredPlaceholder(this.validation['required-entry']);\n            return this;\n        },\n\n        /**\n         * @param {String} value\n         */\n        update: function (value) {\n            var country = registry.get(this.parentName + '.' + 'country_id'),\n                option;\n\n            if (!value || !country) {\n                return this;\n            }\n\n            var options = country.indexedOptions;\n            option = options[value];\n            if (option) {\n                defaultPostCodeResolver.setUseDefaultPostCode(!option['is_zipcode_optional']);\n            }\n\n            if (this.skipValidation) {\n                this.validation['required-entry'] = false;\n                this.required(false);\n                this.switchRequiredPlaceholder(false);\n            } else {\n                if (option && !option['is_region_required']) {\n                    this.error(false);\n                    this.validation = _.omit(this.validation, 'required-entry');\n                } else {\n                    this.validation['required-entry'] = true;\n                }\n\n                this.required(!!option['is_region_required']);\n                this.switchRequiredPlaceholder(!!option['is_region_required']);\n            }\n\n            return this;\n        },\n\n        /**\n         * Filters 'initialOptions' property by 'field' and 'value' passed,\n         * calls 'setOptions' passing the result to it\n         *\n         * @param {*} value\n         * @param {String} field\n         */\n        filter: function (value, field) {\n            var country = registry.get(this.parentName + '.' + 'country_id');\n\n            if (country) {\n                var option = country.indexedOptions[value];\n\n                this._super(value, field);\n\n                if (option && (option['is_region_required'] || option['is_region_visible'])) {\n                    var hasRegionOptions = false;\n\n                    var regions = [];\n\n                    if (country.source.dictionaries) {\n                        regions = country.source.dictionaries.region_id;\n                    } else {\n                        regions = this.initialOptions;\n                    }\n\n                    for (var i = 0; i < regions.length; i++) {\n                        if (regions[i].country_id == value) {\n                            hasRegionOptions = true;\n                            break;\n                        }\n                    }\n\n                    if (hasRegionOptions) {\n                        this.setVisible(true);\n                        this.toggleInput(false);\n                    } else {\n                        this.setVisible(false);\n                        this.toggleInput(true);\n                    }\n                } else {\n                    this.setVisible(false);\n                    this.toggleInput(false);\n                }\n            }\n        }\n    });\n});\n\n","IWD_Opc/js/form/element/select.js":"define([\n    'jquery',\n    'underscore',\n    'mageUtils',\n    'uiRegistry',\n    'Magento_Ui/js/form/element/abstract',\n    'uiLayout'\n], function ($, _, utils, registry, Abstract, layout) {\n    'use strict';\n\n    var inputNode = {\n        parent: '${ $.$data.parentName }',\n        component: 'Magento_Ui/js/form/element/abstract',\n        template: '${ $.$data.template }',\n        provider: '${ $.$data.provider }',\n        name: '${ $.$data.index }_input',\n        dataScope: '${ $.$data.customEntry }',\n        customScope: '${ $.$data.customScope }',\n        sortOrder: {\n            after: '${ $.$data.name }'\n        },\n        displayArea: 'body',\n        label: '${ $.$data.label }',\n        placeholder: '${ $.$data.placeholder }'\n    };\n\n    /**\n     * Parses incoming options, considers options with undefined value property\n     *     as caption\n     *\n     * @param  {Array} nodes\n     * @return {Object}\n     */\n    function parseOptions(nodes, captionValue) {\n        var caption,\n            value;\n\n        nodes = _.map(nodes, function (node) {\n            value = node.value;\n\n            if (value === null || value === captionValue) {\n                if (_.isUndefined(caption)) {\n                    caption = node.label;\n                }\n            }\n\n            return node;\n        });\n\n        return {\n            options: _.compact(nodes),\n            caption: _.isString(caption) ? caption : false\n        };\n    }\n\n    /**\n     * Recursively loops over data to find non-undefined, non-array value\n     *\n     * @param  {Array} data\n     * @return {*} - first non-undefined value in array\n     */\n    function findFirst(data) {\n        var value;\n\n        data.some(function (node) {\n            value = node.value;\n\n            if (Array.isArray(value)) {\n                value = findFirst(value);\n            }\n\n            return !_.isUndefined(value);\n        });\n\n        return value;\n    }\n\n    /**\n     * Recursively set to object item like value and item.value like key.\n     *\n     * @param {Array} data\n     * @param {Object} result\n     * @returns {Object}\n     */\n    function indexOptions(data, result) {\n        var value;\n\n        result = result || {};\n\n        data.forEach(function (item) {\n            value = item.value;\n\n            if (Array.isArray(value)) {\n                indexOptions(value, result);\n            } else {\n                result[value] = item;\n            }\n        });\n\n        return result;\n    }\n\n    return Abstract.extend({\n        defaults: {\n            customName: '${ $.parentName }.${ $.index }_input',\n            elementTmpl: 'IWD_Opc/form/element/select',\n            caption: '',\n            options: []\n        },\n\n        optionsRenderCallback: 0,\n\n        decorateSelect: function (uid, showEmptyOption) {\n            if (typeof showEmptyOption === 'undefined') { showEmptyOption = false; }\n            clearTimeout(this.optionsRenderCallback);\n            this.optionsRenderCallback = setTimeout(function () {\n                var select = $('#' + uid);\n                if (select.length) {\n                    select.decorateSelect(showEmptyOption);\n                }\n            }, 0);\n        },\n\n        /**\n         * Extends instance with defaults, extends config with formatted values\n         *     and options, and invokes initialize method of AbstractElement class.\n         *     If instance's 'customEntry' property is set to true, calls 'initInput'\n         */\n        initialize: function () {\n            this._super();\n\n            if (this.customEntry) {\n                registry.get(this.name, this.initInput.bind(this));\n            }\n\n            if (this.filterBy) {\n                this.initFilter();\n            }\n\n            return this;\n        },\n\n        /**\n         * Parses options and merges the result with instance\n         *\n         * @param  {Object} config\n         * @returns {Object} Chainable.\n         */\n        initConfig: function (config) {\n            var options = config.options,\n                captionValue = config.captionValue || '',\n                result = parseOptions(options, captionValue);\n\n            if (config.caption) {\n                delete result.caption;\n            }\n\n            _.extend(config, result);\n\n            this._super();\n\n            return this;\n        },\n\n        /**\n         * Calls 'initObservable' of parent, initializes 'options' and 'initialOptions'\n         *     properties, calls 'setOptions' passing options to it\n         *\n         * @returns {Object} Chainable.\n         */\n        initObservable: function () {\n            this._super();\n\n            this.initialOptions = this.options;\n\n            this.observe('options caption')\n                .setOptions(this.options());\n\n            return this;\n        },\n\n        /**\n         * Set link for filter.\n         *\n         * @returns {Object} Chainable\n         */\n        initFilter: function () {\n            var filter = this.filterBy;\n\n            this.filter(this.default, filter.field);\n            this.setLinks({\n                filter: filter.target\n            }, 'imports');\n\n            return this;\n        },\n\n        /**\n         * Creates input from template, renders it via renderer.\n         *\n         * @returns {Object} Chainable.\n         */\n        initInput: function () {\n            layout([utils.template(inputNode, this)]);\n\n            return this;\n        },\n\n        /**\n         * Matches specfied value with existing options\n         * or, if value is not specified, returns value of the first option.\n         *\n         * @returns {*}\n         */\n        normalizeData: function () {\n            var value = this._super(),\n                option;\n\n            if (value !== '') {\n                option = this.getOption(value);\n\n                return option && option.value;\n            }\n\n            if (!this.caption()) {\n                return findFirst(this.options);\n            }\n        },\n\n        /**\n         * Filters 'initialOptions' property by 'field' and 'value' passed,\n         * calls 'setOptions' passing the result to it\n         *\n         * @param {*} value\n         * @param {String} field\n         */\n        filter: function (value, field) {\n            var source = this.initialOptions,\n                $select = $('#' + this.uid),\n                result;\n\n            field = field || this.filterBy.field;\n\n            result = _.filter(source, function (item) {\n                return item[field] === value || item.value === '';\n            });\n\n            this.setOptions(result);\n\n            if ($select.length) {\n                var $selectize = $select[0].selectize;\n\n                if ($selectize) {\n                    $selectize.clearOptions();\n\n                    _.each(result, function($option) {\n                        if ($option.value) {\n                            $selectize.addOption({text: $option.label, value: $option.value})\n                        }\n                    });\n\n                    $selectize.refreshOptions(false);\n                    $selectize.refreshItems();\n                }\n            }\n        },\n\n        /**\n         * Change visibility for input.\n         *\n         * @param {Boolean} isVisible\n         */\n        toggleInput: function (isVisible) {\n            registry.get(this.customName, function (input) {\n                input.setVisible(isVisible);\n            });\n        },\n\n        /**\n         * Sets 'data' to 'options' observable array, if instance has\n         * 'customEntry' property set to true, calls 'setHidden' method\n         *  passing !options.length as a parameter\n         *\n         * @param {Array} data\n         * @returns {Object} Chainable\n         */\n        setOptions: function (data) {\n            var captionValue = this.captionValue || '',\n                result = parseOptions(data, captionValue),\n                isVisible;\n\n            this.indexedOptions = indexOptions(result.options);\n\n            this.options(result.options);\n\n            if (!this.caption()) {\n                this.caption(result.caption);\n            }\n\n            if (this.customEntry) {\n                isVisible = !!result.options.length;\n\n                this.setVisible(isVisible);\n                this.toggleInput(!isVisible);\n            }\n\n            return this;\n        },\n\n        /**\n         * Processes preview for option by it's value, and sets the result\n         * to 'preview' observable\n         *\n         * @returns {Object} Chainable.\n         */\n        getPreview: function () {\n            var value = this.value(),\n                option = this.indexedOptions[value],\n                preview = option ? option.label : '';\n\n            this.preview(preview);\n\n            return preview;\n        },\n\n        getOption: function (value) {\n            return this.indexedOptions[value];\n        },\n\n        /**\n         * Select first available option\n         *\n         * @returns {Object} Chainable.\n         */\n        clear: function () {\n            var value = this.caption() ? '' : findFirst(this.options);\n\n            this.value(value);\n\n            return this;\n        },\n\n        /**\n         * Initializes observable properties of instance.\n         *\n         * @returns {Object} Chainable.\n         */\n        setInitialValue: function () {\n            if (_.isUndefined(this.value()) && !this.default) {\n                this.clear();\n            }\n\n            return this._super();\n        },\n\n        switchRequiredPlaceholder: function (required) {\n            if (typeof required === 'undefined') {\n                required = true;\n            }\n\n            if (this.indexedOptions && this.indexedOptions['']) {\n                var $this = this,\n                    $select = $('#' + this.uid),\n                    $message = this.modifyRequiredMessage(this.indexedOptions['']['label'], required);\n\n                this.indexedOptions['']['label'] = $message;\n\n                registry.get(this.customName, function (input) {\n                    var $input = $('#' + input.uid),\n                        $message = $this.modifyRequiredMessage(input.placeholder, required);\n\n                    input.placeholder = $message;\n\n                    if ($input.length) {\n                        $input.attr('placeholder', $message);\n                    }\n                });\n\n                if ($select.length) {\n                    $select.children('option[value=\"\"]').text($message);\n                    var $selectize = $select[0].selectize;\n\n                    if ($selectize) {\n                        $selectize.settings.placeholder = $message;\n                        $selectize.updatePlaceholder();\n                    }\n                }\n            }\n\n            return this;\n        },\n\n        modifyRequiredMessage: function (message, required) {\n            if (required && !message.endsWith(' *')) {\n                message = message + ' *';\n            }\n            else if (!required) {\n                message = message.replace(/ \\*$/, '');\n            }\n\n            return message;\n        }\n    });\n});\n","IWD_Opc/js/form/element/post-code.js":"define([\n    'underscore',\n    'uiRegistry',\n    'Magento_Ui/js/form/element/abstract'\n], function (_, registry, Abstract) {\n    'use strict';\n\n    return Abstract.extend({\n        defaults: {\n            imports: {\n                update: '${ $.parentName }.country_id:value'\n            }\n        },\n        initObservable: function () {\n            this._super();\n            this.observe('placeholder');\n            return this;\n        },\n        /**\n         * @param {String} value\n         */\n        update: function (value) {\n            var country = registry.get(this.parentName + '.' + 'country_id'),\n                options = country.indexedOptions,\n                option;\n\n            if (!value) {\n                return;\n            }\n\n            option = options[value];\n            var placeholder = '';\n            if (option && option['is_zipcode_optional']) {\n                this.error(false);\n                this.validation = _.omit(this.validation, 'required-entry');\n                placeholder = this.placeholder().replace('*', '').trim();\n            } else {\n                this.validation['required-entry'] = true;\n                placeholder = this.placeholder().replace('*', '').trim();\n                placeholder += '\\xa0*';\n            }\n\n            this.placeholder(placeholder);\n            if (option) {\n                this.required(!option['is_zipcode_optional']);\n            } else {\n                this.required(false);\n            }\n        }\n    });\n});\n","IWD_Opc/js/libs/microplugin.js":"/**\n * microplugin.js\n * Copyright (c) 2013 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n(function(root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\troot.MicroPlugin = factory();\n\t}\n}(this, function() {\n\tvar MicroPlugin = {};\n\n\tMicroPlugin.mixin = function(Interface) {\n\t\tInterface.plugins = {};\n\n\t\t/**\n\t\t * Initializes the listed plugins (with options).\n\t\t * Acceptable formats:\n\t\t *\n\t\t * List (without options):\n\t\t *   ['a', 'b', 'c']\n\t\t *\n\t\t * List (with options):\n\t\t *   [{'name': 'a', options: {}}, {'name': 'b', options: {}}]\n\t\t *\n\t\t * Hash (with options):\n\t\t *   {'a': { ... }, 'b': { ... }, 'c': { ... }}\n\t\t *\n\t\t * @param {mixed} plugins\n\t\t */\n\t\tInterface.prototype.initializePlugins = function(plugins) {\n\t\t\tvar i, n, key;\n\t\t\tvar self  = this;\n\t\t\tvar queue = [];\n\n\t\t\tself.plugins = {\n\t\t\t\tnames     : [],\n\t\t\t\tsettings  : {},\n\t\t\t\trequested : {},\n\t\t\t\tloaded    : {}\n\t\t\t};\n\n\t\t\tif (utils.isArray(plugins)) {\n\t\t\t\tfor (i = 0, n = plugins.length; i < n; i++) {\n\t\t\t\t\tif (typeof plugins[i] === 'string') {\n\t\t\t\t\t\tqueue.push(plugins[i]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.plugins.settings[plugins[i].name] = plugins[i].options;\n\t\t\t\t\t\tqueue.push(plugins[i].name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (plugins) {\n\t\t\t\tfor (key in plugins) {\n\t\t\t\t\tif (plugins.hasOwnProperty(key)) {\n\t\t\t\t\t\tself.plugins.settings[key] = plugins[key];\n\t\t\t\t\t\tqueue.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twhile (queue.length) {\n\t\t\t\tself.require(queue.shift());\n\t\t\t}\n\t\t};\n\n\t\tInterface.prototype.loadPlugin = function(name) {\n\t\t\tvar self    = this;\n\t\t\tvar plugins = self.plugins;\n\t\t\tvar plugin  = Interface.plugins[name];\n\n\t\t\tif (!Interface.plugins.hasOwnProperty(name)) {\n\t\t\t\tthrow new Error('Unable to find \"' +  name + '\" plugin');\n\t\t\t}\n\n\t\t\tplugins.requested[name] = true;\n\t\t\tplugins.loaded[name] = plugin.fn.apply(self, [self.plugins.settings[name] || {}]);\n\t\t\tplugins.names.push(name);\n\t\t};\n\n\t\t/**\n\t\t * Initializes a plugin.\n\t\t *\n\t\t * @param {string} name\n\t\t */\n\t\tInterface.prototype.require = function(name) {\n\t\t\tvar self = this;\n\t\t\tvar plugins = self.plugins;\n\n\t\t\tif (!self.plugins.loaded.hasOwnProperty(name)) {\n\t\t\t\tif (plugins.requested[name]) {\n\t\t\t\t\tthrow new Error('Plugin has circular dependency (\"' + name + '\")');\n\t\t\t\t}\n\t\t\t\tself.loadPlugin(name);\n\t\t\t}\n\n\t\t\treturn plugins.loaded[name];\n\t\t};\n\n\t\t/**\n\t\t * Registers a plugin.\n\t\t *\n\t\t * @param {string} name\n\t\t * @param {function} fn\n\t\t */\n\t\tInterface.define = function(name, fn) {\n\t\t\tInterface.plugins[name] = {\n\t\t\t\t'name' : name,\n\t\t\t\t'fn'   : fn\n\t\t\t};\n\t\t};\n\t};\n\n\tvar utils = {\n\t\tisArray: Array.isArray || function(vArg) {\n\t\t\treturn Object.prototype.toString.call(vArg) === '[object Array]';\n\t\t}\n\t};\n\n\treturn MicroPlugin;\n}));","IWD_Opc/js/libs/sifter.js":"/**\n * sifter.js\n * Copyright (c) 2013 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n(function(root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\troot.Sifter = factory();\n\t}\n}(this, function() {\n\n\t/**\n\t * Textually searches arrays and hashes of objects\n\t * by property (or multiple properties). Designed\n\t * specifically for autocomplete.\n\t *\n\t * @constructor\n\t * @param {array|object} items\n\t * @param {object} items\n\t */\n\tvar Sifter = function(items, settings) {\n\t\tthis.items = items;\n\t\tthis.settings = settings || {diacritics: true};\n\t};\n\n\t/**\n\t * Splits a search string into an array of individual\n\t * regexps to be used to match results.\n\t *\n\t * @param {string} query\n\t * @returns {array}\n\t */\n\tSifter.prototype.tokenize = function(query) {\n\t\tquery = trim(String(query || '').toLowerCase());\n\t\tif (!query || !query.length) return [];\n\n\t\tvar i, n, regex, letter;\n\t\tvar tokens = [];\n\t\tvar words = query.split(/ +/);\n\n\t\tfor (i = 0, n = words.length; i < n; i++) {\n\t\t\tregex = escape_regex(words[i]);\n\t\t\tif (this.settings.diacritics) {\n\t\t\t\tfor (letter in DIACRITICS) {\n\t\t\t\t\tif (DIACRITICS.hasOwnProperty(letter)) {\n\t\t\t\t\t\tregex = regex.replace(new RegExp(letter, 'g'), DIACRITICS[letter]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\ttokens.push({\n\t\t\t\tstring : words[i],\n\t\t\t\tregex  : new RegExp(regex, 'i')\n\t\t\t});\n\t\t}\n\n\t\treturn tokens;\n\t};\n\n\t/**\n\t * Iterates over arrays and hashes.\n\t *\n\t * ```\n\t * this.iterator(this.items, function(item, id) {\n\t *    // invoked for each item\n\t * });\n\t * ```\n\t *\n\t * @param {array|object} object\n\t */\n\tSifter.prototype.iterator = function(object, callback) {\n\t\tvar iterator;\n\t\tif (is_array(object)) {\n\t\t\titerator = Array.prototype.forEach || function(callback) {\n\t\t\t\tfor (var i = 0, n = this.length; i < n; i++) {\n\t\t\t\t\tcallback(this[i], i, this);\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\titerator = function(callback) {\n\t\t\t\tfor (var key in this) {\n\t\t\t\t\tif (this.hasOwnProperty(key)) {\n\t\t\t\t\t\tcallback(this[key], key, this);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\titerator.apply(object, [callback]);\n\t};\n\n\t/**\n\t * Returns a function to be used to score individual results.\n\t *\n\t * Good matches will have a higher score than poor matches.\n\t * If an item is not a match, 0 will be returned by the function.\n\t *\n\t * @param {object|string} search\n\t * @param {object} options (optional)\n\t * @returns {function}\n\t */\n\tSifter.prototype.getScoreFunction = function(search, options) {\n\t\tvar self, fields, tokens, token_count, nesting;\n\n\t\tself        = this;\n\t\tsearch      = self.prepareSearch(search, options);\n\t\ttokens      = search.tokens;\n\t\tfields      = search.options.fields;\n\t\ttoken_count = tokens.length;\n\t\tnesting     = search.options.nesting;\n\n\t\t/**\n\t\t * Calculates how close of a match the\n\t\t * given value is against a search token.\n\t\t *\n\t\t * @param {mixed} value\n\t\t * @param {object} token\n\t\t * @return {number}\n\t\t */\n\t\tvar scoreValue = function(value, token) {\n\t\t\tvar score, pos;\n\n\t\t\tif (!value) return 0;\n\t\t\tvalue = String(value || '');\n\t\t\tpos = value.search(token.regex);\n\t\t\tif (pos === -1) return 0;\n\t\t\tscore = token.string.length / value.length;\n\t\t\tif (pos === 0) score += 0.5;\n\t\t\treturn score;\n\t\t};\n\n\t\t/**\n\t\t * Calculates the score of an object\n\t\t * against the search query.\n\t\t *\n\t\t * @param {object} token\n\t\t * @param {object} data\n\t\t * @return {number}\n\t\t */\n\t\tvar scoreObject = (function() {\n\t\t\tvar field_count = fields.length;\n\t\t\tif (!field_count) {\n\t\t\t\treturn function() { return 0; };\n\t\t\t}\n\t\t\tif (field_count === 1) {\n\t\t\t\treturn function(token, data) {\n\t\t\t\t\treturn scoreValue(getattr(data, fields[0], nesting), token);\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn function(token, data) {\n\t\t\t\tfor (var i = 0, sum = 0; i < field_count; i++) {\n\t\t\t\t\tsum += scoreValue(getattr(data, fields[i], nesting), token);\n\t\t\t\t}\n\t\t\t\treturn sum / field_count;\n\t\t\t};\n\t\t})();\n\n\t\tif (!token_count) {\n\t\t\treturn function() { return 0; };\n\t\t}\n\t\tif (token_count === 1) {\n\t\t\treturn function(data) {\n\t\t\t\treturn scoreObject(tokens[0], data);\n\t\t\t};\n\t\t}\n\n\t\tif (search.options.conjunction === 'and') {\n\t\t\treturn function(data) {\n\t\t\t\tvar score;\n\t\t\t\tfor (var i = 0, sum = 0; i < token_count; i++) {\n\t\t\t\t\tscore = scoreObject(tokens[i], data);\n\t\t\t\t\tif (score <= 0) return 0;\n\t\t\t\t\tsum += score;\n\t\t\t\t}\n\t\t\t\treturn sum / token_count;\n\t\t\t};\n\t\t} else {\n\t\t\treturn function(data) {\n\t\t\t\tfor (var i = 0, sum = 0; i < token_count; i++) {\n\t\t\t\t\tsum += scoreObject(tokens[i], data);\n\t\t\t\t}\n\t\t\t\treturn sum / token_count;\n\t\t\t};\n\t\t}\n\t};\n\n\t/**\n\t * Returns a function that can be used to compare two\n\t * results, for sorting purposes. If no sorting should\n\t * be performed, `null` will be returned.\n\t *\n\t * @param {string|object} search\n\t * @param {object} options\n\t * @return function(a,b)\n\t */\n\tSifter.prototype.getSortFunction = function(search, options) {\n\t\tvar i, n, self, field, fields, fields_count, multiplier, multipliers, get_field, implicit_score, sort;\n\n\t\tself   = this;\n\t\tsearch = self.prepareSearch(search, options);\n\t\tsort   = (!search.query && options.sort_empty) || options.sort;\n\n\t\t/**\n\t\t * Fetches the specified sort field value\n\t\t * from a search result item.\n\t\t *\n\t\t * @param  {string} name\n\t\t * @param  {object} result\n\t\t * @return {mixed}\n\t\t */\n\t\tget_field = function(name, result) {\n\t\t\tif (name === '$score') return result.score;\n\t\t\treturn getattr(self.items[result.id], name, options.nesting);\n\t\t};\n\n\t\t// parse options\n\t\tfields = [];\n\t\tif (sort) {\n\t\t\tfor (i = 0, n = sort.length; i < n; i++) {\n\t\t\t\tif (search.query || sort[i].field !== '$score') {\n\t\t\t\t\tfields.push(sort[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// the \"$score\" field is implied to be the primary\n\t\t// sort field, unless it's manually specified\n\t\tif (search.query) {\n\t\t\timplicit_score = true;\n\t\t\tfor (i = 0, n = fields.length; i < n; i++) {\n\t\t\t\tif (fields[i].field === '$score') {\n\t\t\t\t\timplicit_score = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (implicit_score) {\n\t\t\t\tfields.unshift({field: '$score', direction: 'desc'});\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i = 0, n = fields.length; i < n; i++) {\n\t\t\t\tif (fields[i].field === '$score') {\n\t\t\t\t\tfields.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmultipliers = [];\n\t\tfor (i = 0, n = fields.length; i < n; i++) {\n\t\t\tmultipliers.push(fields[i].direction === 'desc' ? -1 : 1);\n\t\t}\n\n\t\t// build function\n\t\tfields_count = fields.length;\n\t\tif (!fields_count) {\n\t\t\treturn null;\n\t\t} else if (fields_count === 1) {\n\t\t\tfield = fields[0].field;\n\t\t\tmultiplier = multipliers[0];\n\t\t\treturn function(a, b) {\n\t\t\t\treturn multiplier * cmp(\n\t\t\t\t\tget_field(field, a),\n\t\t\t\t\tget_field(field, b)\n\t\t\t\t);\n\t\t\t};\n\t\t} else {\n\t\t\treturn function(a, b) {\n\t\t\t\tvar i, result, a_value, b_value, field;\n\t\t\t\tfor (i = 0; i < fields_count; i++) {\n\t\t\t\t\tfield = fields[i].field;\n\t\t\t\t\tresult = multipliers[i] * cmp(\n\t\t\t\t\t\tget_field(field, a),\n\t\t\t\t\t\tget_field(field, b)\n\t\t\t\t\t);\n\t\t\t\t\tif (result) return result;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t};\n\t\t}\n\t};\n\n\t/**\n\t * Parses a search query and returns an object\n\t * with tokens and fields ready to be populated\n\t * with results.\n\t *\n\t * @param {string} query\n\t * @param {object} options\n\t * @returns {object}\n\t */\n\tSifter.prototype.prepareSearch = function(query, options) {\n\t\tif (typeof query === 'object') return query;\n\n\t\toptions = extend({}, options);\n\n\t\tvar option_fields     = options.fields;\n\t\tvar option_sort       = options.sort;\n\t\tvar option_sort_empty = options.sort_empty;\n\n\t\tif (option_fields && !is_array(option_fields)) options.fields = [option_fields];\n\t\tif (option_sort && !is_array(option_sort)) options.sort = [option_sort];\n\t\tif (option_sort_empty && !is_array(option_sort_empty)) options.sort_empty = [option_sort_empty];\n\n\t\treturn {\n\t\t\toptions : options,\n\t\t\tquery   : String(query || '').toLowerCase(),\n\t\t\ttokens  : this.tokenize(query),\n\t\t\ttotal   : 0,\n\t\t\titems   : []\n\t\t};\n\t};\n\n\t/**\n\t * Searches through all items and returns a sorted array of matches.\n\t *\n\t * The `options` parameter can contain:\n\t *\n\t *   - fields {string|array}\n\t *   - sort {array}\n\t *   - score {function}\n\t *   - filter {bool}\n\t *   - limit {integer}\n\t *\n\t * Returns an object containing:\n\t *\n\t *   - options {object}\n\t *   - query {string}\n\t *   - tokens {array}\n\t *   - total {int}\n\t *   - items {array}\n\t *\n\t * @param {string} query\n\t * @param {object} options\n\t * @returns {object}\n\t */\n\tSifter.prototype.search = function(query, options) {\n\t\tvar self = this, value, score, search, calculateScore;\n\t\tvar fn_sort;\n\t\tvar fn_score;\n\n\t\tsearch  = this.prepareSearch(query, options);\n\t\toptions = search.options;\n\t\tquery   = search.query;\n\n\t\t// generate result scoring function\n\t\tfn_score = options.score || self.getScoreFunction(search);\n\n\t\t// perform search and sort\n\t\tif (query.length) {\n\t\t\tself.iterator(self.items, function(item, id) {\n\t\t\t\tscore = fn_score(item);\n\t\t\t\tif (options.filter === false || score > 0) {\n\t\t\t\t\tsearch.items.push({'score': score, 'id': id});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tself.iterator(self.items, function(item, id) {\n\t\t\t\tsearch.items.push({'score': 1, 'id': id});\n\t\t\t});\n\t\t}\n\n\t\tfn_sort = self.getSortFunction(search, options);\n\t\tif (fn_sort) search.items.sort(fn_sort);\n\n\t\t// apply limits\n\t\tsearch.total = search.items.length;\n\t\tif (typeof options.limit === 'number') {\n\t\t\tsearch.items = search.items.slice(0, options.limit);\n\t\t}\n\n\t\treturn search;\n\t};\n\n\t// utilities\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n\tvar cmp = function(a, b) {\n\t\tif (typeof a === 'number' && typeof b === 'number') {\n\t\t\treturn a > b ? 1 : (a < b ? -1 : 0);\n\t\t}\n\t\ta = asciifold(String(a || ''));\n\t\tb = asciifold(String(b || ''));\n\t\tif (a > b) return 1;\n\t\tif (b > a) return -1;\n\t\treturn 0;\n\t};\n\n\tvar extend = function(a, b) {\n\t\tvar i, n, k, object;\n\t\tfor (i = 1, n = arguments.length; i < n; i++) {\n\t\t\tobject = arguments[i];\n\t\t\tif (!object) continue;\n\t\t\tfor (k in object) {\n\t\t\t\tif (object.hasOwnProperty(k)) {\n\t\t\t\t\ta[k] = object[k];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn a;\n\t};\n\n\t/**\n\t * A property getter resolving dot-notation\n\t * @param  {Object}  obj     The root object to fetch property on\n\t * @param  {String}  name    The optionally dotted property name to fetch\n\t * @param  {Boolean} nesting Handle nesting or not\n\t * @return {Object}          The resolved property value\n\t */\n\tvar getattr = function(obj, name, nesting) {\n\t    if (!obj || !name) return;\n\t    if (!nesting) return obj[name];\n\t    var names = name.split(\".\");\n\t    while(names.length && (obj = obj[names.shift()]));\n\t    return obj;\n\t};\n\n\tvar trim = function(str) {\n\t\treturn (str + '').replace(/^\\s+|\\s+$|/g, '');\n\t};\n\n\tvar escape_regex = function(str) {\n\t\treturn (str + '').replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n\t};\n\n\tvar is_array = Array.isArray || (typeof $ !== 'undefined' && $.isArray) || function(object) {\n\t\treturn Object.prototype.toString.call(object) === '[object Array]';\n\t};\n\n\tvar DIACRITICS = {\n\t\t'a': '[a\u1e00\u1e01\u0102\u0103\u00c2\u00e2\u01cd\u01ce\u023a\u2c65\u0226\u0227\u1ea0\u1ea1\u00c4\u00e4\u00c0\u00e0\u00c1\u00e1\u0100\u0101\u00c3\u00e3\u00c5\u00e5\u0105\u0104\u00c3\u0105\u0104]',\n\t\t'b': '[b\u2422\u03b2\u0392B\u0e3f\ud800\udf01\u16d2]',\n\t\t'c': '[c\u0106\u0107\u0108\u0109\u010c\u010d\u010a\u010bC\u0304c\u0304\u00c7\u00e7\u1e08\u1e09\u023b\u023c\u0187\u0188\u0255\u1d04\uff23\uff43]',\n\t\t'd': '[d\u010e\u010f\u1e0a\u1e0b\u1e10\u1e11\u1e0c\u1e0d\u1e12\u1e13\u1e0e\u1e0f\u0110\u0111D\u0326d\u0326\u0189\u0256\u018a\u0257\u018b\u018c\u1d6d\u1d81\u1d91\u0221\u1d05\uff24\uff44\u00f0]',\n\t\t'e': '[e\u00c9\u00e9\u00c8\u00e8\u00ca\u00ea\u1e18\u1e19\u011a\u011b\u0114\u0115\u1ebc\u1ebd\u1e1a\u1e1b\u1eba\u1ebb\u0116\u0117\u00cb\u00eb\u0112\u0113\u0228\u0229\u0118\u0119\u1d92\u0246\u0247\u0204\u0205\u1ebe\u1ebf\u1ec0\u1ec1\u1ec4\u1ec5\u1ec2\u1ec3\u1e1c\u1e1d\u1e16\u1e17\u1e14\u1e15\u0206\u0207\u1eb8\u1eb9\u1ec6\u1ec7\u2c78\u1d07\uff25\uff45\u0258\u01dd\u018f\u0190\u03b5]',\n\t\t'f': '[f\u0191\u0192\u1e1e\u1e1f]',\n\t\t'g': '[g\u0262\u20b2\u01e4\u01e5\u011c\u011d\u011e\u011f\u0122\u0123\u0193\u0260\u0120\u0121]',\n\t\t'h': '[h\u0124\u0125\u0126\u0127\u1e28\u1e29\u1e96\u1e96\u1e24\u1e25\u1e22\u1e23\u0266\u02b0\u01f6\u0195]',\n\t\t'i': '[i\u00cd\u00ed\u00cc\u00ec\u012c\u012d\u00ce\u00ee\u01cf\u01d0\u00cf\u00ef\u1e2e\u1e2f\u0128\u0129\u012e\u012f\u012a\u012b\u1ec8\u1ec9\u0208\u0209\u020a\u020b\u1eca\u1ecb\u1e2c\u1e2d\u0197\u0268\u0268\u0306\u1d7b\u1d96\u0130iI\u0131\u026a\uff29\uff49]',\n\t\t'j': '[j\u0237\u0134\u0135\u0248\u0249\u029d\u025f\u02b2]',\n\t\t'k': '[k\u0198\u0199\ua740\ua741\u1e30\u1e31\u01e8\u01e9\u1e32\u1e33\u1e34\u1e35\u03ba\u03f0\u20ad]',\n\t\t'l': '[l\u0141\u0142\u013d\u013e\u013b\u013c\u0139\u013a\u1e36\u1e37\u1e38\u1e39\u1e3c\u1e3d\u1e3a\u1e3b\u013f\u0140\u023d\u019a\u2c60\u2c61\u2c62\u026b\u026c\u1d85\u026d\u0234\u029f\uff2c\uff4c]',\n\t\t'n': '[n\u0143\u0144\u01f8\u01f9\u0147\u0148\u00d1\u00f1\u1e44\u1e45\u0145\u0146\u1e46\u1e47\u1e4a\u1e4b\u1e48\u1e49N\u0308n\u0308\u019d\u0272\u0220\u019e\u1d70\u1d87\u0273\u0235\u0274\uff2e\uff4e\u014a\u014b]',\n\t\t'o': '[o\u00d8\u00f8\u00d6\u00f6\u00d3\u00f3\u00d2\u00f2\u00d4\u00f4\u01d1\u01d2\u0150\u0151\u014e\u014f\u022e\u022f\u1ecc\u1ecd\u019f\u0275\u01a0\u01a1\u1ece\u1ecf\u014c\u014d\u00d5\u00f5\u01ea\u01eb\u020c\u020d\u0555\u0585]',\n\t\t'p': '[p\u1e54\u1e55\u1e56\u1e57\u2c63\u1d7d\u01a4\u01a5\u1d71]',\n\t\t'q': '[q\ua756\ua757\u02a0\u024a\u024b\ua758\ua759q\u0303]',\n\t\t'r': '[r\u0154\u0155\u024c\u024d\u0158\u0159\u0156\u0157\u1e58\u1e59\u0210\u0211\u0212\u0213\u1e5a\u1e5b\u2c64\u027d]',\n\t\t's': '[s\u015a\u015b\u1e60\u1e61\u1e62\u1e63\ua7a8\ua7a9\u015c\u015d\u0160\u0161\u015e\u015f\u0218\u0219S\u0308s\u0308]',\n\t\t't': '[t\u0164\u0165\u1e6a\u1e6b\u0162\u0163\u1e6c\u1e6d\u01ae\u0288\u021a\u021b\u1e70\u1e71\u1e6e\u1e6f\u01ac\u01ad]',\n\t\t'u': '[u\u016c\u016d\u0244\u0289\u1ee4\u1ee5\u00dc\u00fc\u00da\u00fa\u00d9\u00f9\u00db\u00fb\u01d3\u01d4\u0170\u0171\u016c\u016d\u01af\u01b0\u1ee6\u1ee7\u016a\u016b\u0168\u0169\u0172\u0173\u0214\u0215\u222a]',\n\t\t'v': '[v\u1e7c\u1e7d\u1e7e\u1e7f\u01b2\u028b\ua75e\ua75f\u2c71\u028b]',\n\t\t'w': '[w\u1e82\u1e83\u1e80\u1e81\u0174\u0175\u1e84\u1e85\u1e86\u1e87\u1e88\u1e89]',\n\t\t'x': '[x\u1e8c\u1e8d\u1e8a\u1e8b\u03c7]',\n\t\t'y': '[y\u00dd\u00fd\u1ef2\u1ef3\u0176\u0177\u0178\u00ff\u1ef8\u1ef9\u1e8e\u1e8f\u1ef4\u1ef5\u024e\u024f\u01b3\u01b4]',\n\t\t'z': '[z\u0179\u017a\u1e90\u1e91\u017d\u017e\u017b\u017c\u1e92\u1e93\u1e94\u1e95\u01b5\u01b6]'\n\t};\n\n\tvar asciifold = (function() {\n\t\tvar i, n, k, chunk;\n\t\tvar foreignletters = '';\n\t\tvar lookup = {};\n\t\tfor (k in DIACRITICS) {\n\t\t\tif (DIACRITICS.hasOwnProperty(k)) {\n\t\t\t\tchunk = DIACRITICS[k].substring(2, DIACRITICS[k].length - 1);\n\t\t\t\tforeignletters += chunk;\n\t\t\t\tfor (i = 0, n = chunk.length; i < n; i++) {\n\t\t\t\t\tlookup[chunk.charAt(i)] = k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar regexp = new RegExp('[' +  foreignletters + ']', 'g');\n\t\treturn function(str) {\n\t\t\treturn str.replace(regexp, function(foreignletter) {\n\t\t\t\treturn lookup[foreignletter];\n\t\t\t}).toLowerCase();\n\t\t};\n\t})();\n\n\n\t// export\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n\treturn Sifter;\n}));\n\n","IWD_Opc/js/libs/selectize.js":"/**\n * selectize.js (v0.8.5)\n * Copyright (c) 2013 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\n/*jshint curly:false */\n/*jshint browser:true */\n\n(function(root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(['jquery','sifter','microplugin'], factory);\n\t} else {\n\t\troot.Selectize = factory(root.jQuery, root.Sifter, root.MicroPlugin);\n\t}\n}(this, function($, Sifter, MicroPlugin) {\n\t'use strict';\n\n\tvar highlight = function($element, pattern) {\n\t\tif (typeof pattern === 'string' && !pattern.length) return;\n\t\tvar regex = (typeof pattern === 'string') ? new RegExp(pattern, 'i') : pattern;\n\t\n\t\tvar highlight = function(node) {\n\t\t\tvar skip = 0;\n            // Wrap matching part of text node with highlighting <span>, e.g.\n            // Soccer  ->  <span class=\"highlight\">Soc</span>cer  for regex = /soc/i\n\t\t\tif (node.nodeType === 3) {\n\t\t\t\tvar pos = node.data.search(regex);\n\t\t\t\tif (pos >= 0 && node.data.length > 0) {\n\t\t\t\t\tvar match = node.data.match(regex);\n\t\t\t\t\tvar spannode = document.createElement('span');\n\t\t\t\t\tspannode.className = 'highlight';\n\t\t\t\t\tvar middlebit = node.splitText(pos);\n\t\t\t\t\tvar endbit = middlebit.splitText(match[0].length);\n\t\t\t\t\tvar middleclone = middlebit.cloneNode(true);\n\t\t\t\t\tspannode.appendChild(middleclone);\n\t\t\t\t\tmiddlebit.parentNode.replaceChild(spannode, middlebit);\n\t\t\t\t\tskip = 1;\n\t\t\t\t}\n            }\n            // Recurse element node, looking for child text nodes to highlight, unless element\n            // is childless, <script>, <style>, or already highlighted: <span class=\"hightlight\">\n            else if (node.nodeType === 1 && node.childNodes && !/(script|style)/i.test(node.tagName) && ( node.className !== 'highlight' || node.tagName !== 'SPAN' )) {\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; ++i) {\n\t\t\t\t\ti += highlight(node.childNodes[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn skip;\n\t\t};\n\t\n\t\treturn $element.each(function() {\n\t\t\thighlight(this);\n\t\t});\n\t};\n\n    /**\n     * removeHighlight fn copied from highlight v5 and\n     * edited to remove with() and pass js strict mode\n     */\n    $.fn.removeHighlight = function() {\n        return this.find(\"span.highlight\").each(function() {\n            this.parentNode.firstChild.nodeName;\n            var parent = this.parentNode;\n            parent.replaceChild(this.firstChild, this);\n            parent.normalize();\n        }).end();\n    };\n\t\n\tvar MicroEvent = function() {};\n\tMicroEvent.prototype = {\n\t\ton: function(event, fct){\n\t\t\tthis._events = this._events || {};\n\t\t\tthis._events[event] = this._events[event] || [];\n\t\t\tthis._events[event].push(fct);\n\t\t},\n\t\toff: function(event, fct){\n\t\t\tvar n = arguments.length;\n\t\t\tif (n === 0) return delete this._events;\n\t\t\tif (n === 1) return delete this._events[event];\n\t\n\t\t\tthis._events = this._events || {};\n\t\t\tif (event in this._events === false) return;\n\t\t\tthis._events[event].splice(this._events[event].indexOf(fct), 1);\n\t\t},\n\t\ttrigger: function(event /* , args... */){\n\t\t\tthis._events = this._events || {};\n\t\t\tif (event in this._events === false) return;\n\t\t\tfor (var i = 0; i < this._events[event].length; i++){\n\t\t\t\tthis._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * Mixin will delegate all MicroEvent.js function in the destination object.\n\t *\n\t * - MicroEvent.mixin(Foobar) will make Foobar able to use MicroEvent\n\t *\n\t * @param {object} the object which will support MicroEvent\n\t */\n\tMicroEvent.mixin = function(destObject){\n\t\tvar props = ['on', 'off', 'trigger'];\n\t\tfor (var i = 0; i < props.length; i++){\n\t\t\tdestObject.prototype[props[i]] = MicroEvent.prototype[props[i]];\n\t\t}\n\t};\n\t\n\tvar IS_MAC        = /Mac/.test(navigator.userAgent);\n\t\n\tvar KEY_A         = 65;\n\tvar KEY_COMMA     = 188;\n\tvar KEY_RETURN    = 13;\n\tvar KEY_ESC       = 27;\n\tvar KEY_LEFT      = 37;\n\tvar KEY_UP        = 38;\n\tvar KEY_P         = 80;\n\tvar KEY_RIGHT     = 39;\n\tvar KEY_DOWN      = 40;\n    var KEY_N         = 78;\n\tvar KEY_BACKSPACE = 8;\n\tvar KEY_DELETE    = 46;\n\tvar KEY_SHIFT     = 16;\n\tvar KEY_CMD       = IS_MAC ? 91 : 17;\n\tvar KEY_CTRL      = IS_MAC ? 18 : 17;\n\tvar KEY_TAB       = 9;\n\t\n\tvar TAG_SELECT    = 1;\n\tvar TAG_INPUT     = 2;\n\n\t// for now, android support in general is too spotty to support validity\n\tvar SUPPORTS_VALIDITY_API = !/android/i.test(window.navigator.userAgent) && !!document.createElement('input').validity;\n\n    /**\n     * Determines if the provided value has been defined.\n     *\n     * @param {mixed} object\n     * @returns {boolean}\n     */\n\tvar isset = function(object) {\n\t\treturn typeof object !== 'undefined';\n\t};\n\t\n\t/**\n\t * Converts a scalar to its best string representation\n\t * for hash keys and HTML attribute values.\n\t *\n\t * Transformations:\n\t *   'str'     -> 'str'\n\t *   null      -> ''\n\t *   undefined -> ''\n\t *   true      -> '1'\n\t *   false     -> '0'\n\t *   0         -> '0'\n\t *   1         -> '1'\n\t *\n\t * @param {string} value\n     * @returns {string|null}\n\t */\n\tvar hash_key = function(value) {\n        if (typeof value === 'undefined' || value === null) return null;\n\t\tif (typeof value === 'boolean') return value ? '1' : '0';\n\t\treturn value + '';\n\t};\n\t\n\t/**\n\t * Escapes a string for use within HTML.\n\t *\n\t * @param {string} str\n\t * @returns {string}\n\t */\n\tvar escape_html = function(str) {\n\t\treturn (str + '')\n\t\t\t.replace(/&/g, '&amp;')\n\t\t\t.replace(/</g, '&lt;')\n\t\t\t.replace(/>/g, '&gt;')\n\t\t\t.replace(/\"/g, '&quot;');\n\t};\n\t\n\t/**\n\t * Escapes \"$\" characters in replacement strings.\n\t *\n\t * @param {string} str\n\t * @returns {string}\n\t */\n\tvar escape_replace = function(str) {\n\t\treturn (str + '').replace(/\\$/g, '$$$$');\n\t};\n\t\n\tvar hook = {};\n\t\n\t/**\n\t * Wraps `method` on `self` so that `fn`\n\t * is invoked before the original method.\n\t *\n\t * @param {object} self\n\t * @param {string} method\n\t * @param {function} fn\n\t */\n\thook.before = function(self, method, fn) {\n\t\tvar original = self[method];\n\t\tself[method] = function() {\n\t\t\tfn.apply(self, arguments);\n\t\t\treturn original.apply(self, arguments);\n\t\t};\n\t};\n\t\n\t/**\n\t * Wraps `method` on `self` so that `fn`\n\t * is invoked after the original method.\n\t *\n\t * @param {object} self\n\t * @param {string} method\n\t * @param {function} fn\n\t */\n\thook.after = function(self, method, fn) {\n\t\tvar original = self[method];\n\t\tself[method] = function() {\n\t\t\tvar result = original.apply(self, arguments);\n\t\t\tfn.apply(self, arguments);\n\t\t\treturn result;\n\t\t};\n\t};\n\n\t/**\n\t * Wraps `fn` so that it can only be invoked once.\n\t *\n\t * @param {function} fn\n\t * @returns {function}\n\t */\n\tvar once = function(fn) {\n\t\tvar called = false;\n\t\treturn function() {\n\t\t\tif (called) return;\n\t\t\tcalled = true;\n\t\t\tfn.apply(this, arguments);\n\t\t};\n\t};\n\t\n\t/**\n\t * Wraps `fn` so that it can only be called once\n\t * every `delay` milliseconds (invoked on the falling edge).\n\t *\n\t * @param {function} fn\n\t * @param {int} delay\n\t * @returns {function}\n\t */\n\tvar debounce = function(fn, delay) {\n\t\tvar timeout;\n\t\treturn function() {\n\t\t\tvar self = this;\n\t\t\tvar args = arguments;\n\t\t\twindow.clearTimeout(timeout);\n\t\t\ttimeout = window.setTimeout(function() {\n\t\t\t\tfn.apply(self, args);\n\t\t\t}, delay);\n\t\t};\n\t};\n\t\n\t/**\n\t * Debounce all fired events types listed in `types`\n\t * while executing the provided `fn`.\n\t *\n\t * @param {object} self\n\t * @param {array} types\n\t * @param {function} fn\n\t */\n\tvar debounce_events = function(self, types, fn) {\n\t\tvar type;\n\t\tvar trigger = self.trigger;\n\t\tvar event_args = {};\n\t\n\t\t// override trigger method\n\t\tself.trigger = function() {\n\t\t\tvar type = arguments[0];\n\t\t\tif (types.indexOf(type) !== -1) {\n\t\t\t\tevent_args[type] = arguments;\n\t\t\t} else {\n\t\t\t\treturn trigger.apply(self, arguments);\n\t\t\t}\n\t\t};\n\t\n\t\t// invoke provided function\n\t\tfn.apply(self, []);\n\t\tself.trigger = trigger;\n\t\n\t\t// trigger queued events\n\t\tfor (type in event_args) {\n\t\t\tif (event_args.hasOwnProperty(type)) {\n\t\t\t\ttrigger.apply(self, event_args[type]);\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * A workaround for http://bugs.jquery.com/ticket/6696\n\t *\n\t * @param {object} $parent - Parent element to listen on.\n\t * @param {string} event - Event name.\n\t * @param {string} selector - Descendant selector to filter by.\n\t * @param {function} fn - Event handler.\n\t */\n\tvar watchChildEvent = function($parent, event, selector, fn) {\n\t\t$parent.on(event, selector, function(e) {\n\t\t\tvar child = e.target;\n\t\t\twhile (child && child.parentNode !== $parent[0]) {\n\t\t\t\tchild = child.parentNode;\n\t\t\t}\n\t\t\te.currentTarget = child;\n\t\t\treturn fn.apply(this, [e]);\n\t\t});\n\t};\n\t\n\t/**\n\t * Determines the current selection within a text input control.\n\t * Returns an object containing:\n\t *   - start\n\t *   - length\n\t *\n\t * @param {object} input\n\t * @returns {object}\n\t */\n\tvar getSelection = function(input) {\n\t\tvar result = {};\n\t\tif ('selectionStart' in input) {\n\t\t\tresult.start = input.selectionStart;\n\t\t\tresult.length = input.selectionEnd - result.start;\n\t\t} else if (document.selection) {\n\t\t\tinput.focus();\n\t\t\tvar sel = document.selection.createRange();\n\t\t\tvar selLen = document.selection.createRange().text.length;\n\t\t\tsel.moveStart('character', -input.value.length);\n\t\t\tresult.start = sel.text.length - selLen;\n\t\t\tresult.length = selLen;\n\t\t}\n\t\treturn result;\n\t};\n\t\n\t/**\n\t * Copies CSS properties from one element to another.\n\t *\n\t * @param {object} $from\n\t * @param {object} $to\n\t * @param {array} properties\n\t */\n\tvar transferStyles = function($from, $to, properties) {\n\t\tvar i, n, styles = {};\n\t\tif (properties) {\n\t\t\tfor (i = 0, n = properties.length; i < n; i++) {\n\t\t\t\tstyles[properties[i]] = $from.css(properties[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tstyles = $from.css();\n\t\t}\n\t\t$to.css(styles);\n\t};\n\t\n\t/**\n\t * Measures the width of a string within a\n\t * parent element (in pixels).\n\t *\n\t * @param {string} str\n\t * @param {object} $parent\n\t * @returns {int}\n\t */\n\tvar measureString = function(str, $parent) {\n        if (!str) {\n            return 0;\n        }\n\n        if (!Selectize.$testInput) {\n            Selectize.$testInput = $('<span />').css({\n                position: 'absolute',\n                top: -99999,\n                left: -99999,\n                width: 'auto',\n                padding: 0,\n                whiteSpace: 'pre'\n            }).appendTo('body');\n        }\n\n        Selectize.$testInput.text(str);\n\n        transferStyles($parent, Selectize.$testInput, [\n            'letterSpacing',\n            'fontSize',\n            'fontFamily',\n            'fontWeight',\n            'textTransform'\n        ]);\n\n        return Selectize.$testInput.width();\n\t};\n\t\n\t/**\n\t * Sets up an input to grow horizontally as the user\n\t * types. If the value is changed manually, you can\n\t * trigger the \"update\" handler to resize:\n\t *\n\t * $input.trigger('update');\n\t *\n\t * @param {object} $input\n\t */\n\tvar autoGrow = function($input) {\n        var currentWidth = null;\n\n\t\tvar update = function(e, options) {\n\t\t\tvar value, keyCode, printable, placeholder, width;\n\t\t\tvar shift, character, selection;\n\t\t\te = e || window.event || {};\n            options = options || {};\n\n\t\t\tif (e.metaKey || e.altKey) return;\n\t\t\tif (!options.force && $input.data('grow') === false) return;\n\t\n\t\t\tvalue = $input.val();\n\t\t\tif (e.type && e.type.toLowerCase() === 'keydown') {\n\t\t\t\tkeyCode = e.keyCode;\n\t\t\t\tprintable = (\n\t\t\t\t\t(keyCode >= 48 && keyCode <= 57)  || // 0-9\n                    (keyCode >= 65 && keyCode <= 90)   || // a-z\n                    (keyCode >= 96 && keyCode <= 111)  || // numpad 0-9, numeric operators\n                    (keyCode >= 186 && keyCode <= 222) || // semicolon, equal, comma, dash, etc.\n\t\t\t\t\tkeyCode === 32 // space\n\t\t\t\t);\n\t\n\t\t\t\tif (keyCode === KEY_DELETE || keyCode === KEY_BACKSPACE) {\n\t\t\t\t\tselection = getSelection($input[0]);\n\t\t\t\t\tif (selection.length) {\n\t\t\t\t\t\tvalue = value.substring(0, selection.start) + value.substring(selection.start + selection.length);\n\t\t\t\t\t} else if (keyCode === KEY_BACKSPACE && selection.start) {\n\t\t\t\t\t\tvalue = value.substring(0, selection.start - 1) + value.substring(selection.start + 1);\n\t\t\t\t\t} else if (keyCode === KEY_DELETE && typeof selection.start !== 'undefined') {\n\t\t\t\t\t\tvalue = value.substring(0, selection.start) + value.substring(selection.start + 1);\n\t\t\t\t\t}\n\t\t\t\t} else if (printable) {\n\t\t\t\t\tshift = e.shiftKey;\n\t\t\t\t\tcharacter = String.fromCharCode(e.keyCode);\n\t\t\t\t\tif (shift) character = character.toUpperCase();\n\t\t\t\t\telse character = character.toLowerCase();\n\t\t\t\t\tvalue += character;\n\t\t\t\t}\n\t\t\t}\n\t\n            placeholder = $input.attr('placeholder');\n            if (!value && placeholder) {\n\t\t\t\tvalue = placeholder;\n\t\t\t}\n\t\n\t\t\twidth = measureString(value, $input) + 4 + 27; // 27 added by safari autocomplete\n            if (width !== currentWidth) {\n                currentWidth = width;\n\t\t\t\t$input.width(width);\n\t\t\t\t$input.triggerHandler('resize');\n\t\t\t}\n\t\t};\n\t\n\t\t$input.on('keydown keyup update blur', update);\n\t\tupdate();\n\t};\n\n    var domToString = function(d) {\n        var tmp = document.createElement('div');\n\n        tmp.appendChild(d.cloneNode(true));\n\n        return tmp.innerHTML;\n    };\n\n    var logError = function(message, options){\n        if(!options) options = {};\n        var component = \"Selectize\";\n\n        console.error(component + \": \" + message)\n\n        if(options.explanation){\n            // console.group is undefined in <IE11\n            if(console.group) console.group();\n            console.error(options.explanation);\n            if(console.group) console.groupEnd();\n        }\n    }\n\t\n\tvar Selectize = function($input, settings) {\n\t\tvar key, i, n, dir, input, self = this;\n\t\tinput = $input[0];\n\t\tinput.selectize = self;\n\t\n\t\t// detect rtl environment\n        var computedStyle = window.getComputedStyle && window.getComputedStyle(input, null);\n        dir = computedStyle ? computedStyle.getPropertyValue('direction') : input.currentStyle && input.currentStyle.direction;\n\t\tdir = dir || $input.parents('[dir]:first').attr('dir') || '';\n\t\n\t\t// setup default state\n\t\t$.extend(self, {\n            order            : 0,\n\t\t\tsettings         : settings,\n\t\t\t$input           : $input,\n            tabIndex         : $input.attr('tabindex') || '',\n\t\t\ttagType          : input.tagName.toLowerCase() === 'select' ? TAG_SELECT : TAG_INPUT,\n\t\t\trtl              : /rtl/i.test(dir),\n\t\n\t\t\teventNS          : '.selectize' + (++Selectize.count),\n\t\t\thighlightedValue : null,\n\t\t\tisOpen           : false,\n\t\t\tisDisabled       : false,\n\t\t\tisRequired       : $input.is('[required]'),\n\t\t\tisInvalid        : false,\n\t\t\tisLocked         : false,\n\t\t\tisFocused        : false,\n\t\t\tisInputHidden    : false,\n\t\t\tisSetup          : false,\n\t\t\tisShiftDown      : false,\n\t\t\tisCmdDown        : false,\n\t\t\tisCtrlDown       : false,\n\t\t\tignoreFocus      : false,\n            ignoreBlur       : false,\n\t\t\tignoreHover      : false,\n\t\t\thasOptions       : false,\n\t\t\tcurrentResults   : null,\n\t\t\tlastValue        : '',\n\t\t\tcaretPos         : 0,\n\t\t\tloading          : 0,\n\t\t\tloadedSearches   : {},\n\t\n\t\t\t$activeOption    : null,\n\t\t\t$activeItems     : [],\n\t\n\t\t\toptgroups        : {},\n\t\t\toptions          : {},\n\t\t\tuserOptions      : {},\n\t\t\titems            : [],\n\t\t\trenderCache      : {},\n            onSearchChange   : settings.loadThrottle === null ? self.onSearchChange : debounce(self.onSearchChange, settings.loadThrottle)\n\t\t});\n\t\n\t\t// search system\n\t\tself.sifter = new Sifter(this.options, {diacritics: settings.diacritics});\n\t\n\t\t// build options table\n        if (self.settings.options) {\n            for (i = 0, n = self.settings.options.length; i < n; i++) {\n                self.registerOption(self.settings.options[i]);\n            }\n            delete self.settings.options;\n        }\n\n            // build optgroup table\n        if (self.settings.optgroups) {\n            for (i = 0, n = self.settings.optgroups.length; i < n; i++) {\n                self.registerOptionGroup(self.settings.optgroups[i]);\n            }\n            delete self.settings.optgroups;\n        }\n\n\t\t// option-dependent defaults\n\t\tself.settings.mode = self.settings.mode || (self.settings.maxItems === 1 ? 'single' : 'multi');\n\t\tif (typeof self.settings.hideSelected !== 'boolean') {\n\t\t\tself.settings.hideSelected = self.settings.mode === 'multi';\n\t\t}\n\t\n\t\tself.initializePlugins(self.settings.plugins);\n\t\tself.setupCallbacks();\n\t\tself.setupTemplates();\n\t\tself.setup();\n\t};\n\t\n\t// mixins\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n\tMicroEvent.mixin(Selectize);\n\n    if(typeof MicroPlugin !== \"undefined\"){\n        MicroPlugin.mixin(Selectize);\n    }else{\n        logError(\"Dependency MicroPlugin is missing\",\n            {explanation:\n                \"Make sure you either: (1) are using the \\\"standalone\\\" \"+\n                \"version of Selectize, or (2) require MicroPlugin before you \"+\n                \"load Selectize.\"}\n        );\n    }\n\n\n\t// methods\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n\t$.extend(Selectize.prototype, {\n\n\t\t/**\n\t\t * Creates all elements and sets up event bindings.\n\t\t */\n\t\tsetup: function() {\n\t\t\tvar self      = this;\n\t\t\tvar settings  = self.settings;\n\t\t\tvar eventNS   = self.eventNS;\n\t\t\tvar $window   = $(window);\n\t\t\tvar $document = $(document);\n            var $input    = self.$input;\n\n\t\t\tvar $wrapper;\n\t\t\tvar $control;\n\t\t\tvar $control_input;\n\t\t\tvar $dropdown;\n\t\t\tvar $dropdown_content;\n\t\t\tvar $dropdown_parent;\n\t\t\tvar inputMode;\n\t\t\tvar timeout_blur;\n\t\t\tvar timeout_focus;\n\t\t\tvar classes;\n\t\t\tvar classes_plugins;\n            var inputId;\n\n\t\t\tinputMode         = self.settings.mode;\n            classes           = $input.attr('class') || '';\n\t\n\t\t\t$wrapper          = $('<div>').addClass(settings.wrapperClass).addClass(classes).addClass(inputMode);\n\t\t\t$control          = $('<div>').addClass(settings.inputClass).addClass('items').appendTo($wrapper);\n            $control_input    = $('<input type=\"text\" autocomplete=\"off\" />').appendTo($control).attr('tabindex', $input.is(':disabled') ? '-1' : self.tabIndex);\n\t\t\t$dropdown_parent  = $(settings.dropdownParent || $wrapper);\n\t\t\t$dropdown         = $('<div>').addClass(settings.dropdownClass).addClass(inputMode).hide().appendTo($dropdown_parent);\n\t\t\t$dropdown_content = $('<div>').addClass(settings.dropdownContentClass).appendTo($dropdown);\n\n\t\t\tif (self.settings.disableSearch) {\n\t\t\t\t$control_input.attr('readonly', 'readonly');\n\t\t\t}\n\t\n            if(inputId = $input.attr('id')) {\n                $control_input.attr('id', inputId + '-selectized');\n                $(\"label[for='\"+inputId+\"']\").attr('for', inputId + '-selectized');\n            }\n\n            if(self.settings.copyClassesToDropdown) {\n                $dropdown.addClass(classes);\n            }\n\n\t\t\t$wrapper.css({\n                width: $input[0].style.width\n\t\t\t});\n\t\n\t\t\tif (self.plugins.names.length) {\n\t\t\t\tclasses_plugins = 'plugin-' + self.plugins.names.join(' plugin-');\n\t\t\t\t$wrapper.addClass(classes_plugins);\n\t\t\t\t$dropdown.addClass(classes_plugins);\n\t\t\t}\n\t\n\t\t\tif ((settings.maxItems === null || settings.maxItems > 1) && self.tagType === TAG_SELECT) {\n                $input.attr('multiple', 'multiple');\n            }\n\t\n\t\t\tif (self.settings.placeholder) {\n\t\t\t\t$control_input.attr('placeholder', settings.placeholder);\n\t\t\t}\n\t\n            // if splitOn was not passed in, construct it from the delimiter to allow pasting universally\n            if (!self.settings.splitOn && self.settings.delimiter) {\n                var delimiterEscaped = self.settings.delimiter.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n                self.settings.splitOn = new RegExp('\\\\s*' + delimiterEscaped + '+\\\\s*');\n            }\n\n            if ($input.attr('autocorrect')) {\n                $control_input.attr('autocorrect', $input.attr('autocorrect'));\n            }\n\n            if ($input.attr('autocapitalize')) {\n                $control_input.attr('autocapitalize', $input.attr('autocapitalize'));\n            }\n            $control_input[0].type = $input[0].type;\n\n\t\t\tself.$wrapper          = $wrapper;\n\t\t\tself.$control          = $control;\n\t\t\tself.$control_input    = $control_input;\n\t\t\tself.$dropdown         = $dropdown;\n\t\t\tself.$dropdown_content = $dropdown_content;\n\t\n            $dropdown.on('mouseenter mousedown click', '[data-disabled]>[data-selectable]', function(e) { e.stopImmediatePropagation(); });\n\t\t\t$dropdown.on('mouseenter', '[data-selectable]', function() { return self.onOptionHover.apply(self, arguments); });\n            $dropdown.on('mousedown click', '[data-selectable]', function() { return self.onOptionSelect.apply(self, arguments); });\n            watchChildEvent($control, 'mousedown', '*:not(input)', function() { return self.onItemSelect.apply(self, arguments); });\n\t\t\tautoGrow($control_input);\n\t\n\t\t\t$control.on({\n\t\t\t\tmousedown : function() { return self.onMouseDown.apply(self, arguments); },\n\t\t\t\tclick     : function() { return self.onClick.apply(self, arguments); }\n\t\t\t});\n\t\n\t\t\t$control_input.on({\n\t\t\t\tmousedown : function(e) { e.stopPropagation(); },\n\t\t\t\tkeydown   : function() { return self.onKeyDown.apply(self, arguments); },\n\t\t\t\tkeyup     : function() { return self.onKeyUp.apply(self, arguments); },\n\t\t\t\tkeypress  : function() { return self.onKeyPress.apply(self, arguments); },\n\t\t\t\tresize    : function() { self.positionDropdown.apply(self, []); },\n\t\t\t\tblur      : function() { return self.onBlur.apply(self, arguments); },\n                focus     : function() { self.ignoreBlur = false; return self.onFocus.apply(self, arguments); },\n                paste     : function() { return self.onPaste.apply(self, arguments); }\n\t\t\t});\n\t\n\t\t\t$document.on('keydown' + eventNS, function(e) {\n\t\t\t\tself.isCmdDown = e[IS_MAC ? 'metaKey' : 'ctrlKey'];\n\t\t\t\tself.isCtrlDown = e[IS_MAC ? 'altKey' : 'ctrlKey'];\n\t\t\t\tself.isShiftDown = e.shiftKey;\n\t\t\t});\n\t\n\t\t\t$document.on('keyup' + eventNS, function(e) {\n\t\t\t\tif (e.keyCode === KEY_CTRL) self.isCtrlDown = false;\n\t\t\t\tif (e.keyCode === KEY_SHIFT) self.isShiftDown = false;\n\t\t\t\tif (e.keyCode === KEY_CMD) self.isCmdDown = false;\n\t\t\t});\n\t\n\t\t\t$document.on('mousedown' + eventNS, function(e) {\n\t\t\t\tif (self.isFocused) {\n\t\t\t\t\t// prevent events on the dropdown scrollbar from causing the control to blur\n\t\t\t\t\tif (e.target === self.$dropdown[0] || e.target.parentNode === self.$dropdown[0]) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t// blur on click outside\n\t\t\t\t\tif (!self.$control.has(e.target).length && e.target !== self.$control[0]) {\n                        self.blur(e.target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\t$window.on(['scroll' + eventNS, 'resize' + eventNS].join(' '), function() {\n\t\t\t\tif (self.isOpen) {\n\t\t\t\t\tself.positionDropdown.apply(self, arguments);\n\t\t\t\t}\n\t\t\t});\n\t\t\t$window.on('mousemove' + eventNS, function() {\n\t\t\t\tself.ignoreHover = false;\n\t\t\t});\n\t\n\t\t\t// store original children and tab index so that they can be\n\t\t\t// restored when the destroy() method is called.\n\t\t\tthis.revertSettings = {\n                $children : $input.children().detach(),\n                tabindex  : $input.attr('tabindex')\n\t\t\t};\n\t\n            $input.attr('tabindex', -1).css({'position': 'absolute', 'opacity': '0'}).after(self.$wrapper);\n\t\n\t\t\tif ($.isArray(settings.items)) {\n\t\t\t\tself.setValue(settings.items);\n\t\t\t\tdelete settings.items;\n\t\t\t}\n\t\n\t\t\t// feature detect for the validation API\n            if (SUPPORTS_VALIDITY_API) {\n                $input.on('invalid' + eventNS, function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tself.isInvalid = true;\n\t\t\t\t\tself.refreshState();\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tself.updateOriginalInput();\n\t\t\tself.refreshItems();\n\t\t\tself.refreshState();\n\t\t\tself.updatePlaceholder();\n\t\t\tself.isSetup = true;\n\t\n\t\t\tif ($input.is(':disabled')) {\n\t\t\t\tself.disable();\n\t\t\t}\n\t\n\t\t\tself.on('change', this.onChange);\n\n            $input.data('selectize', self);\n            $input.addClass('selectized');\n\t\t\tself.trigger('initialize');\n\t\n\t\t\t// preload options\n            if (settings.preload === true) {\n\t\t\t\tself.onSearchChange('');\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Sets up default rendering functions.\n\t\t */\n\t\tsetupTemplates: function() {\n\t\t\tvar self = this;\n\t\t\tvar field_label = self.settings.labelField;\n\t\t\tvar field_optgroup = self.settings.optgroupLabelField;\n\t\n\t\t\tvar templates = {\n\t\t\t\t'optgroup': function(data) {\n\t\t\t\t\treturn '<div class=\"optgroup\">' + data.html + '</div>';\n\t\t\t\t},\n\t\t\t\t'optgroup_header': function(data, escape) {\n\t\t\t\t\treturn '<div class=\"optgroup-header\">' + escape(data[field_optgroup]) + '</div>';\n\t\t\t\t},\n\t\t\t\t'option': function(data, escape) {\n\t\t\t\t\treturn '<div class=\"option\">' + escape(data[field_label]) + '</div>';\n\t\t\t\t},\n\t\t\t\t'item': function(data, escape) {\n\t\t\t\t\treturn '<div class=\"item\">' + escape(data[field_label]) + '</div>';\n\t\t\t\t},\n\t\t\t\t'option_create': function(data, escape) {\n\t\t\t\t\treturn '<div class=\"create\">Add <strong>' + escape(data.input) + '</strong>&hellip;</div>';\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tself.settings.render = $.extend({}, templates, self.settings.render);\n\t\t},\n\t\n\t\t/**\n\t\t * Maps fired events to callbacks provided\n\t\t * in the settings used when creating the control.\n\t\t */\n\t\tsetupCallbacks: function() {\n\t\t\tvar key, fn, callbacks = {\n\t\t\t\t'initialize'     : 'onInitialize',\n\t\t\t\t'change'         : 'onChange',\n\t\t\t\t'item_add'       : 'onItemAdd',\n\t\t\t\t'item_remove'    : 'onItemRemove',\n\t\t\t\t'clear'          : 'onClear',\n\t\t\t\t'option_add'     : 'onOptionAdd',\n\t\t\t\t'option_remove'  : 'onOptionRemove',\n\t\t\t\t'option_clear'   : 'onOptionClear',\n                'optgroup_add'    : 'onOptionGroupAdd',\n                'optgroup_remove' : 'onOptionGroupRemove',\n                'optgroup_clear'  : 'onOptionGroupClear',\n\t\t\t\t'dropdown_open'  : 'onDropdownOpen',\n\t\t\t\t'dropdown_close' : 'onDropdownClose',\n                'type'            : 'onType',\n                'load'            : 'onLoad',\n                'focus'           : 'onFocus',\n                'blur'            : 'onBlur'\n\t\t\t};\n\t\n\t\t\tfor (key in callbacks) {\n\t\t\t\tif (callbacks.hasOwnProperty(key)) {\n\t\t\t\t\tfn = this.settings[callbacks[key]];\n\t\t\t\t\tif (fn) this.on(key, fn);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered when the main control element\n\t\t * has a click event.\n\t\t *\n\t\t * @param {object} e\n\t\t * @return {boolean}\n\t\t */\n\t\tonClick: function(e) {\n\t\t\tvar self = this;\n\t\n\t\t\t// necessary for mobile webkit devices (manual focus triggering\n\t\t\t// is ignored unless invoked within a click event)\n\t\t\tif (!self.isFocused) {\n\t\t\t\tself.focus();\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered when the main control element\n\t\t * has a mouse down event.\n\t\t *\n\t\t * @param {object} e\n\t\t * @return {boolean}\n\t\t */\n\t\tonMouseDown: function(e) {\n\t\t\tvar self = this;\n\t\t\tvar defaultPrevented = e.isDefaultPrevented();\n\t\t\tvar $target = $(e.target);\n\t\n\t\t\tif (self.isFocused) {\n\t\t\t\t// retain focus by preventing native handling. if the\n\t\t\t\t// event target is the input it should not be modified.\n\t\t\t\t// otherwise, text selection within the input won't work.\n\t\t\t\tif (e.target !== self.$control_input[0]) {\n\t\t\t\t\tif (self.settings.mode === 'single') {\n\t\t\t\t\t\t// toggle dropdown\n\t\t\t\t\t\tself.isOpen ? self.close() : self.open();\n\t\t\t\t\t} else if (!defaultPrevented) {\n\t\t\t\t\t\tself.setActiveItem(null);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// give control focus\n\t\t\t\tif (!defaultPrevented) {\n\t\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\t\tself.focus();\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered when the value of the control has been changed.\n\t\t * This should propagate the event to the original DOM\n\t\t * input / select element.\n\t\t */\n\t\tonChange: function() {\n\t\t\tthis.$input.trigger('change');\n\t\t},\n\t\n        /**\n         * Triggered on <input> paste.\n         *\n         * @param {object} e\n         * @returns {boolean}\n         */\n        onPaste: function(e) {\n            var self = this;\n\n            if (self.isFull() || self.isInputHidden || self.isLocked) {\n                e.preventDefault();\n                return;\n            }\n\n            // If a regex or string is included, this will split the pasted\n            // input and create Items for each separate value\n            if (self.settings.splitOn) {\n\n                // Wait for pasted text to be recognized in value\n                setTimeout(function() {\n                    var pastedText = self.$control_input.val();\n                    if(!pastedText.match(self.settings.splitOn)){ return }\n\n                    var splitInput = $.trim(pastedText).split(self.settings.splitOn);\n                    for (var i = 0, n = splitInput.length; i < n; i++) {\n                        self.createItem(splitInput[i]);\n                    }\n                }, 0);\n            }\n        },\n\n\t\t/**\n\t\t * Triggered on <input> keypress.\n\t\t *\n\t\t * @param {object} e\n\t\t * @returns {boolean}\n\t\t */\n\t\tonKeyPress: function(e) {\n\t\t\tif (this.isLocked) return e && e.preventDefault();\n\t\t\tvar character = String.fromCharCode(e.keyCode || e.which);\n            if (this.settings.create && this.settings.mode === 'multi' && character === this.settings.delimiter) {\n\t\t\t\tthis.createItem();\n\t\t\t\te.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered on <input> keydown.\n\t\t *\n\t\t * @param {object} e\n\t\t * @returns {boolean}\n\t\t */\n\t\tonKeyDown: function(e) {\n\t\t\tvar isInput = e.target === this.$control_input[0];\n\t\t\tvar self = this;\n\t\n\t\t\tif (self.isLocked) {\n\t\t\t\tif (e.keyCode !== KEY_TAB) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase KEY_A:\n\t\t\t\t\tif (self.isCmdDown) {\n\t\t\t\t\t\tself.selectAll();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase KEY_ESC:\n                    if (self.isOpen) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        self.close();\n                    }\n                        return;\n                case KEY_N:\n                    if (!e.ctrlKey || e.altKey) break;\n\t\t\t\tcase KEY_DOWN:\n\t\t\t\t\tif (!self.isOpen && self.hasOptions) {\n\t\t\t\t\t\tself.open();\n\t\t\t\t\t} else if (self.$activeOption) {\n\t\t\t\t\t\tself.ignoreHover = true;\n\t\t\t\t\t\tvar $next = self.getAdjacentOption(self.$activeOption, 1);\n\t\t\t\t\t\tif ($next.length) self.setActiveOption($next, true, true);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n                case KEY_P:\n                    if (!e.ctrlKey || e.altKey) break;\n\t\t\t\tcase KEY_UP:\n\t\t\t\t\tif (self.$activeOption) {\n\t\t\t\t\t\tself.ignoreHover = true;\n\t\t\t\t\t\tvar $prev = self.getAdjacentOption(self.$activeOption, -1);\n\t\t\t\t\t\tif ($prev.length) self.setActiveOption($prev, true, true);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\tcase KEY_RETURN:\n\t\t\t\t\tif (self.isOpen && self.$activeOption) {\n\t\t\t\t\t\tself.onOptionSelect({currentTarget: self.$activeOption});\n                        e.preventDefault();\n                    }\n\t\t\t\t\treturn;\n\t\t\t\tcase KEY_LEFT:\n\t\t\t\t\tself.advanceSelection(-1, e);\n\t\t\t\t\treturn;\n\t\t\t\tcase KEY_RIGHT:\n\t\t\t\t\tself.advanceSelection(1, e);\n\t\t\t\t\treturn;\n\t\t\t\tcase KEY_TAB:\n                    if (self.settings.selectOnTab && self.isOpen && self.$activeOption) {\n                        self.onOptionSelect({currentTarget: self.$activeOption});\n\n                        // Default behaviour is to jump to the next field, we only want this\n                        // if the current field doesn't accept any more entries\n                        if (!self.isFull()) {\n                            e.preventDefault();\n                        }\n                    }\n\t\t\t\t\tif (self.settings.create && self.createItem()) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\tcase KEY_BACKSPACE:\n\t\t\t\tcase KEY_DELETE:\n\t\t\t\t\tif (!self.settings.disableSearch) {\n\t\t\t\t\t\tself.deleteSelection(e);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (self.isFull() && typeof e.keyCode !== 'undefined' && !self.settings.disableSearch) {\n\t\t\t\tself.deleteSelection(e);\n\t\t\t\treturn;\n\t\t\t}\n\n            if ((self.isFull() || self.isInputHidden) && !(IS_MAC ? e.metaKey : e.ctrlKey)) {\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered on <input> keyup.\n\t\t *\n\t\t * @param {object} e\n\t\t * @returns {boolean}\n\t\t */\n\t\tonKeyUp: function(e) {\n\t\t\tvar self = this;\n\t\n\t\t\tif (self.isLocked) return e && e.preventDefault();\n\t\t\tvar value = self.$control_input.val() || '';\n\t\t\tif (self.lastValue !== value) {\n\t\t\t\tself.lastValue = value;\n\t\t\t\tself.onSearchChange(value);\n\t\t\t\tself.refreshOptions();\n\t\t\t\tself.trigger('type', value);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Invokes the user-provide option provider / loader.\n\t\t *\n\t\t * Note: this function is debounced in the Selectize\n\t\t * constructor (by `settings.loadThrottle` milliseconds)\n\t\t *\n\t\t * @param {string} value\n\t\t */\n\t\tonSearchChange: function(value) {\n\t\t\tvar self = this;\n\t\t\tvar fn = self.settings.load;\n\t\t\tif (!fn) return;\n\t\t\tif (self.loadedSearches.hasOwnProperty(value)) return;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tself.load(function(callback) {\n\t\t\t\tfn.apply(self, [value, callback]);\n\t\t\t});\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered on <input> focus.\n\t\t *\n\t\t * @param {object} e (optional)\n\t\t * @returns {boolean}\n\t\t */\n\t\tonFocus: function(e) {\n\t\t\tvar self = this;\n            var wasFocused = self.isFocused;\n\n\t\t\tif (self.isDisabled) {\n\t\t\t\tself.blur();\n\t\t\t\te && e.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\tif (self.ignoreFocus) return;\n            self.isFocused = true;\n\t\t\tif (self.settings.preload === 'focus') self.onSearchChange('');\n\t\n            if (!wasFocused) self.trigger('focus');\n\n\t\t\tif (!self.$activeItems.length) {\n\t\t\t\tself.showInput();\n\t\t\t\tself.setActiveItem(null);\n\t\t\t\tself.refreshOptions(!!self.settings.openOnFocus);\n\t\t\t}\n\t\n\t\t\tself.refreshState();\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered on <input> blur.\n\t\t *\n\t\t * @param {object} e\n         * @param {Element} dest\n\t\t */\n        onBlur: function(e, dest) {\n\t\t\tvar self = this;\n            if (!self.isFocused) return;\n                self.isFocused = false;\n\n            if (self.ignoreFocus) {\n                return;\n            } else if (!self.ignoreBlur && document.activeElement === self.$dropdown_content[0]) {\n                // necessary to prevent IE closing the dropdown when the scrollbar is clicked\n                self.ignoreBlur = true;\n                self.onFocus(e);\n                return;\n\t\t\t}\n\t\n            var deactivate = function() {\n                self.close();\n                self.setTextboxValue('');\n                self.setActiveItem(null);\n                self.setActiveOption(null);\n                self.setCaret(self.items.length);\n                self.refreshState();\n\n                // IE11 bug: element still marked as active\n                dest && dest.focus && dest.focus();\n\n                self.ignoreFocus = false;\n                self.trigger('blur');\n            };\n\n            self.ignoreFocus = true;\n            if (self.settings.create && self.settings.createOnBlur) {\n                self.createItem(null, false, deactivate);\n            } else {\n                deactivate();\n            }\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered when the user rolls over\n\t\t * an option in the autocomplete dropdown menu.\n\t\t *\n\t\t * @param {object} e\n\t\t * @returns {boolean}\n\t\t */\n\t\tonOptionHover: function(e) {\n\t\t\tif (this.ignoreHover) return;\n\t\t\tthis.setActiveOption(e.currentTarget, false);\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered when the user clicks on an option\n\t\t * in the autocomplete dropdown menu.\n\t\t *\n\t\t * @param {object} e\n\t\t * @returns {boolean}\n\t\t */\n\t\tonOptionSelect: function(e) {\n\t\t\tvar value, $target, $option, self = this;\n\t\n\t\t\tif (e.preventDefault) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\n\t\t\t$target = $(e.currentTarget);\n\t\t\tif ($target.hasClass('create')) {\n                self.createItem(null, function() {\n                    if (self.settings.closeAfterSelect) {\n                        self.close();\n                    }\n                });\n\t\t\t} else {\n\t\t\t\tvalue = $target.attr('data-value');\n\t\t\t    if (typeof value !== 'undefined') {\n\t\t\t\t\tself.lastQuery = null;\n\t\t\t\t\tself.setTextboxValue('');\n\t\t\t\t\tself.addItem(value);\n                    if (self.settings.closeAfterSelect) {\n                        self.close();\n                    } else if (!self.settings.hideSelected && e.type && /mouse/.test(e.type)) {\n\t\t\t\t\t\tself.setActiveOption(self.getOption(value));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Triggered when the user clicks on an item\n\t\t * that has been selected.\n\t\t *\n\t\t * @param {object} e\n\t\t * @returns {boolean}\n\t\t */\n\t\tonItemSelect: function(e) {\n\t\t\tvar self = this;\n\t\n\t\t\tif (self.isLocked) return;\n\t\t\tif (self.settings.mode === 'multi') {\n\t\t\t\te.preventDefault();\n\t\t\t\tself.setActiveItem(e.currentTarget, e);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Invokes the provided method that provides\n\t\t * results to a callback---which are then added\n\t\t * as options to the control.\n\t\t *\n\t\t * @param {function} fn\n\t\t */\n\t\tload: function(fn) {\n\t\t\tvar self = this;\n            var $wrapper = self.$wrapper.addClass(self.settings.loadingClass);\n\t\n\t\t\tself.loading++;\n\t\t\tfn.apply(self, [function(results) {\n\t\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\t\tif (results && results.length) {\n\t\t\t\t\tself.addOption(results);\n\t\t\t\t\tself.refreshOptions(self.isFocused && !self.isInputHidden);\n\t\t\t\t}\n\t\t\t\tif (!self.loading) {\n                    $wrapper.removeClass(self.settings.loadingClass);\n\t\t\t\t}\n\t\t\t\tself.trigger('load', results);\n\t\t\t}]);\n\t\t},\n\t\n\t\t/**\n\t\t * Sets the input field of the control to the specified value.\n\t\t *\n\t\t * @param {string} value\n\t\t */\n\t\tsetTextboxValue: function(value) {\n            var $input = this.$control_input;\n            var changed = $input.val() !== value;\n            if (changed) {\n                $input.val(value).triggerHandler('update');\n                this.lastValue = value;\n            }\n\t\t},\n\t\n\t\t/**\n\t\t * Returns the value of the control. If multiple items\n\t\t * can be selected (e.g. <select multiple>), this returns\n\t\t * an array. If only one item can be selected, this\n\t\t * returns a string.\n\t\t *\n\t\t * @returns {mixed}\n\t\t */\n\t\tgetValue: function() {\n\t\t\tif (this.tagType === TAG_SELECT && this.$input.attr('multiple')) {\n\t\t\t\treturn this.items;\n\t\t\t} else {\n\t\t\t\treturn this.items.join(this.settings.delimiter);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Resets the selected items to the given value.\n\t\t *\n\t\t * @param {mixed} value\n\t\t */\n        setValue: function(value, silent) {\n            var events = silent ? [] : ['change'];\n\n            debounce_events(this, events, function() {\n                this.clear(silent);\n                this.addItems(value, silent);\n\t\t\t});\n\t\t},\n\t\n\t\t/**\n\t\t * Sets the selected item.\n\t\t *\n\t\t * @param {object} $item\n\t\t * @param {object} e (optional)\n\t\t */\n\t\tsetActiveItem: function($item, e) {\n\t\t\tvar self = this;\n\t\t\tvar eventName;\n\t\t\tvar i, idx, begin, end, item, swap;\n\t\t\tvar $last;\n\t\n\t\t\tif (self.settings.mode === 'single') return;\n\t\t\t$item = $($item);\n\t\n\t\t\t// clear the active selection\n\t\t\tif (!$item.length) {\n\t\t\t\t$(self.$activeItems).removeClass('active');\n\t\t\t\tself.$activeItems = [];\n\t\t\t\tif (self.isFocused) {\n\t\t\t\t\tself.showInput();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\t// modify selection\n\t\t\teventName = e && e.type.toLowerCase();\n\t\n\t\t\tif (eventName === 'mousedown' && self.isShiftDown && self.$activeItems.length) {\n\t\t\t\t$last = self.$control.children('.active:last');\n\t\t\t\tbegin = Array.prototype.indexOf.apply(self.$control[0].childNodes, [$last[0]]);\n\t\t\t\tend   = Array.prototype.indexOf.apply(self.$control[0].childNodes, [$item[0]]);\n\t\t\t\tif (begin > end) {\n\t\t\t\t\tswap  = begin;\n\t\t\t\t\tbegin = end;\n\t\t\t\t\tend   = swap;\n\t\t\t\t}\n\t\t\t\tfor (i = begin; i <= end; i++) {\n\t\t\t\t\titem = self.$control[0].childNodes[i];\n\t\t\t\t\tif (self.$activeItems.indexOf(item) === -1) {\n\t\t\t\t\t\t$(item).addClass('active');\n\t\t\t\t\t\tself.$activeItems.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t} else if ((eventName === 'mousedown' && self.isCtrlDown) || (eventName === 'keydown' && this.isShiftDown)) {\n\t\t\t\tif ($item.hasClass('active')) {\n\t\t\t\t\tidx = self.$activeItems.indexOf($item[0]);\n\t\t\t\t\tself.$activeItems.splice(idx, 1);\n\t\t\t\t\t$item.removeClass('active');\n\t\t\t\t} else {\n\t\t\t\t\tself.$activeItems.push($item.addClass('active')[0]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$(self.$activeItems).removeClass('active');\n\t\t\t\tself.$activeItems = [$item.addClass('active')[0]];\n\t\t\t}\n\t\n\t\t\t// ensure control has focus\n\t\t\tself.hideInput();\n\t\t\tif (!this.isFocused) {\n\t\t\t\tself.focus();\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Sets the selected item in the dropdown menu\n\t\t * of available options.\n\t\t *\n\t\t * @param {object} $object\n\t\t * @param {boolean} scroll\n\t\t * @param {boolean} animate\n\t\t */\n\t\tsetActiveOption: function($option, scroll, animate) {\n\t\t\tvar height_menu, height_item, y;\n\t\t\tvar scroll_top, scroll_bottom;\n\t\t\tvar self = this;\n\t\n\t\t\tif (self.$activeOption) self.$activeOption.removeClass('active');\n\t\t\tself.$activeOption = null;\n\t\n\t\t\t$option = $($option);\n\t\t\tif (!$option.length) return;\n\t\n\t\t\tself.$activeOption = $option.addClass('active');\n\t\n\t\t\tif (scroll || !isset(scroll)) {\n\t\n\t\t\t\theight_menu   = self.$dropdown_content.height();\n\t\t\t\theight_item   = self.$activeOption.outerHeight(true);\n\t\t\t\tscroll        = self.$dropdown_content.scrollTop() || 0;\n\t\t\t\ty             = self.$activeOption.offset().top - self.$dropdown_content.offset().top + scroll;\n\t\t\t\tscroll_top    = y;\n\t\t\t\tscroll_bottom = y - height_menu + height_item;\n\t\n\t\t\t\tif (y + height_item > height_menu + scroll) {\n\t\t\t\t\tself.$dropdown_content.stop().animate({scrollTop: scroll_bottom}, animate ? self.settings.scrollDuration : 0);\n\t\t\t\t} else if (y < scroll) {\n\t\t\t\t\tself.$dropdown_content.stop().animate({scrollTop: scroll_top}, animate ? self.settings.scrollDuration : 0);\n\t\t\t\t}\n\t\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Selects all items (CTRL + A).\n\t\t */\n\t\tselectAll: function() {\n\t\t\tvar self = this;\n\t\t\tif (self.settings.mode === 'single') return;\n\t\n\t\t\tself.$activeItems = Array.prototype.slice.apply(self.$control.children(':not(input)').addClass('active'));\n\t\t\tif (self.$activeItems.length) {\n\t\t\t\tself.hideInput();\n\t\t\t\tself.close();\n\t\t\t}\n\t\t\tself.focus();\n\t\t},\n\t\n\t\t/**\n\t\t * Hides the input element out of view, while\n\t\t * retaining its focus.\n\t\t */\n\t\thideInput: function() {\n\t\t\tvar self = this;\n\t\n\t\t\tself.setTextboxValue('');\n\t\t\tself.$control_input.css({opacity: 0, position: 'absolute', left: self.rtl ? 10000 : -10000});\n\t\t\tself.isInputHidden = true;\n\t\t},\n\t\n\t\t/**\n\t\t * Restores input visibility.\n\t\t */\n\t\tshowInput: function() {\n\t\t\tthis.$control_input.css({opacity: 1, position: 'relative', left: 0});\n\t\t\tthis.isInputHidden = false;\n\t\t},\n\t\n\t\t/**\n         * Gives the control focus.\n\t\t */\n\t\tfocus: function() {\n\t\t\tvar self = this;\n\t\t\tif (self.isDisabled) return;\n\t\n\t\t\tself.ignoreFocus = true;\n\t\t\tself.$control_input[0].focus();\n\t\t\twindow.setTimeout(function() {\n\t\t\t\tself.ignoreFocus = false;\n\t\t\t\tself.onFocus();\n\t\t\t}, 0);\n\t\t},\n\t\n\t\t/**\n\t\t * Forces the control out of focus.\n         *\n         * @param {Element} dest\n\t\t */\n        blur: function(dest) {\n\t\tthis.$control_input[0].blur();\n\t\tthis.onBlur(null, dest);\n\t\t},\n\t\n\t\t/**\n\t\t * Returns a function that scores an object\n\t\t * to show how good of a match it is to the\n\t\t * provided query.\n\t\t *\n\t\t * @param {string} query\n\t\t * @param {object} options\n\t\t * @return {function}\n\t\t */\n\t\tgetScoreFunction: function(query) {\n\t\t\treturn this.sifter.getScoreFunction(query, this.getSearchOptions());\n\t\t},\n\t\n\t\t/**\n\t\t * Returns search options for sifter (the system\n\t\t * for scoring and sorting results).\n\t\t *\n\t\t * @see https://github.com/brianreavis/sifter.js\n\t\t * @return {object}\n\t\t */\n\t\tgetSearchOptions: function() {\n\t\t\tvar settings = this.settings;\n\t\t\tvar sort = settings.sortField;\n\t\t\tif (typeof sort === 'string') {\n                sort = [{field: sort}];\n\t\t\t}\n\t\n\t\t\treturn {\n\t\t\t\tfields      : settings.searchField,\n\t\t\t\tconjunction : settings.searchConjunction,\n                sort        : sort,\n                nesting     : settings.nesting\n\t\t\t};\n\t\t},\n\t\n\t\t/**\n\t\t * Searches through available options and returns\n\t\t * a sorted array of matches.\n\t\t *\n\t\t * Returns an object containing:\n\t\t *\n\t\t *   - query {string}\n\t\t *   - tokens {array}\n\t\t *   - total {int}\n\t\t *   - items {array}\n\t\t *\n\t\t * @param {string} query\n\t\t * @returns {object}\n\t\t */\n\t\tsearch: function(query) {\n\t\t\tvar i, value, score, result, calculateScore;\n\t\t\tvar self     = this;\n\t\t\tvar settings = self.settings;\n\t\t\tvar options  = this.getSearchOptions();\n\t\n\t\t\t// validate user-provided result scoring function\n\t\t\tif (settings.score) {\n\t\t\t\tcalculateScore = self.settings.score.apply(this, [query]);\n\t\t\t\tif (typeof calculateScore !== 'function') {\n\t\t\t\t\tthrow new Error('Selectize \"score\" setting must be a function that returns a function');\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// perform search\n\t\t\tif (query !== self.lastQuery) {\n\t\t\t\tself.lastQuery = query;\n\t\t\t\tresult = self.sifter.search(query, $.extend(options, {score: calculateScore}));\n\t\t\t\tself.currentResults = result;\n\t\t\t} else {\n\t\t\t\tresult = $.extend(true, {}, self.currentResults);\n\t\t\t}\n\t\n\t\t\t// filter out selected items\n\t\t\tif (settings.hideSelected) {\n\t\t\t\tfor (i = result.items.length - 1; i >= 0; i--) {\n\t\t\t\t\tif (self.items.indexOf(hash_key(result.items[i].id)) !== -1) {\n\t\t\t\t\t\tresult.items.splice(i, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn result;\n\t\t},\n\t\n\t\t/**\n\t\t * Refreshes the list of available options shown\n\t\t * in the autocomplete dropdown menu.\n\t\t *\n\t\t * @param {boolean} triggerDropdown\n\t\t */\n\t\trefreshOptions: function(triggerDropdown) {\n\t\t\tvar i, j, k, n, groups, groups_order, option, option_html, optgroup, optgroups, html, html_children, has_create_option;\n\t\t\tvar $active, $active_before, $create;\n\t\n\t\t\tif (typeof triggerDropdown === 'undefined') {\n\t\t\t\ttriggerDropdown = true;\n\t\t\t}\n\t\n\t\t\tvar self              = this;\n            var query             = $.trim(self.$control_input.val());\n\t\t\tvar results           = self.search(query);\n\t\t\tvar $dropdown_content = self.$dropdown_content;\n\t\t\tvar active_before     = self.$activeOption && hash_key(self.$activeOption.attr('data-value'));\n\t\n\t\t\t// build markup\n\t\t\tn = results.items.length;\n\t\t\tif (typeof self.settings.maxOptions === 'number') {\n\t\t\t\tn = Math.min(n, self.settings.maxOptions);\n\t\t\t}\n\t\n\t\t\t// render and group available options individually\n\t\t\tgroups = {};\n            groups_order = [];\n\t\n\t\t\tfor (i = 0; i < n; i++) {\n\t\t\t\toption      = self.options[results.items[i].id];\n\t\t\t\toption_html = self.render('option', option);\n\t\t\t\toptgroup    = option[self.settings.optgroupField] || '';\n\t\t\t\toptgroups   = $.isArray(optgroup) ? optgroup : [optgroup];\n\t\n\t\t\t\tfor (j = 0, k = optgroups && optgroups.length; j < k; j++) {\n\t\t\t\t\toptgroup = optgroups[j];\n\t\t\t\t\tif (!self.optgroups.hasOwnProperty(optgroup)) {\n\t\t\t\t\t\toptgroup = '';\n\t\t\t\t\t}\n\t\t\t\t\tif (!groups.hasOwnProperty(optgroup)) {\n                        groups[optgroup] = document.createDocumentFragment();\n\t\t\t\t\t\tgroups_order.push(optgroup);\n\t\t\t\t\t}\n                    groups[optgroup].appendChild(option_html);\n\t\t\t\t}\n\t\t\t}\n\t\n            // sort optgroups\n            if (this.settings.lockOptgroupOrder) {\n                groups_order.sort(function(a, b) {\n                    var a_order = self.optgroups[a].$order || 0;\n                    var b_order = self.optgroups[b].$order || 0;\n                    return a_order - b_order;\n                });\n            }\n\n\t\t\t// render optgroup headers & join groups\n            html = document.createDocumentFragment();\n\t\t\tfor (i = 0, n = groups_order.length; i < n; i++) {\n\t\t\t\toptgroup = groups_order[i];\n                if (self.optgroups.hasOwnProperty(optgroup) && groups[optgroup].childNodes.length) {\n\t\t\t\t\t// render the optgroup header and options within it,\n\t\t\t\t\t// then pass it to the wrapper template\n                    html_children = document.createDocumentFragment();\n                    html_children.appendChild(self.render('optgroup_header', self.optgroups[optgroup]));\n                    html_children.appendChild(groups[optgroup]);\n\n                    html.appendChild(self.render('optgroup', $.extend({}, self.optgroups[optgroup], {\n                        html: domToString(html_children),\n                        dom:  html_children\n\t\t\t\t\t})));\n\t\t\t\t} else {\n                    html.appendChild(groups[optgroup]);\n\t\t\t\t}\n\t\t\t}\n\t\n            $dropdown_content.html(html);\n\t\n\t\t\t// highlight matching terms inline\n            if (self.settings.highlight) {\n                $dropdown_content.removeHighlight();\n                if (results.query.length && results.tokens.length) {\n                    for (i = 0, n = results.tokens.length; i < n; i++) {\n                        highlight($dropdown_content, results.tokens[i].regex);\n                    }\n                }\n            }\n\n\t\t\t// add \"selected\" class to selected options\n\t\t\tif (!self.settings.hideSelected) {\n\t\t\t\tfor (i = 0, n = self.items.length; i < n; i++) {\n\t\t\t\t\tself.getOption(self.items[i]).addClass('selected');\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// add create option\n            has_create_option = self.canCreate(query);\n\t\t\tif (has_create_option) {\n\t\t\t\t$dropdown_content.prepend(self.render('option_create', {input: query}));\n\t\t\t\t$create = $($dropdown_content[0].childNodes[0]);\n\t\t\t}\n\t\n\t\t\t// activate\n\t\t\tself.hasOptions = results.items.length > 0 || has_create_option;\n\t\t\tif (self.hasOptions) {\n\t\t\t\tif (results.items.length > 0) {\n\t\t\t\t\t$active_before = active_before && self.getOption(active_before);\n\t\t\t\t\tif ($active_before && $active_before.length) {\n\t\t\t\t\t\t$active = $active_before;\n\t\t\t\t\t} else if (self.settings.mode === 'single' && self.items.length) {\n\t\t\t\t\t\t$active = self.getOption(self.items[0]);\n\t\t\t\t\t}\n\t\t\t\t\tif (!$active || !$active.length) {\n\t\t\t\t\t\tif ($create && !self.settings.addPrecedence) {\n\t\t\t\t\t\t\t$active = self.getAdjacentOption($create, 1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$active = $dropdown_content.find('[data-selectable]:first');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$active = $create;\n\t\t\t\t}\n\t\t\t\tself.setActiveOption($active);\n\t\t\t\tif (triggerDropdown && !self.isOpen) { self.open(); }\n\t\t\t} else {\n\t\t\t\tself.setActiveOption(null);\n\t\t\t\tif (triggerDropdown && self.isOpen) { self.close(); }\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Adds an available option. If it already exists,\n\t\t * nothing will happen. Note: this does not refresh\n\t\t * the options list dropdown (use `refreshOptions`\n\t\t * for that).\n\t\t *\n\t\t * Usage:\n\t\t *\n\t\t *   this.addOption(data)\n\t\t *\n         * @param {object|array} data\n\t\t */\n\t\taddOption: function(data) {\n            var i, n, value, self = this;\n\t\n\t\t\tif ($.isArray(data)) {\n\t\t\t\tfor (i = 0, n = data.length; i < n; i++) {\n\t\t\t\t\tself.addOption(data[i]);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\n            if (value = self.registerOption(data)) {\n                self.userOptions[value] = true;\n                self.lastQuery = null;\n                self.trigger('option_add', value, data);\n            }\n        },\n\n        /**\n         * Registers an option to the pool of options.\n         *\n         * @param {object} data\n         * @return {boolean|string}\n         */\n        registerOption: function(data) {\n            var key = hash_key(data[this.settings.valueField]);\n            if (typeof key === 'undefined' || key === null || this.options.hasOwnProperty(key)) return false;\n            data.$order = data.$order || ++this.order;\n            this.options[key] = data;\n            return key;\n        },\n\n        /**\n         * Registers an option group to the pool of option groups.\n         *\n         * @param {object} data\n         * @return {boolean|string}\n         */\n        registerOptionGroup: function(data) {\n            var key = hash_key(data[this.settings.optgroupValueField]);\n            if (!key) return false;\n\n            data.$order = data.$order || ++this.order;\n            this.optgroups[key] = data;\n            return key;\n            },\n\n            /**\n             * Registers a new optgroup for options\n             * to be bucketed into.\n             *\n             * @param {string} id\n             * @param {object} data\n             */\n            addOptionGroup: function(id, data) {\n            data[this.settings.optgroupValueField] = id;\n            if (id = this.registerOptionGroup(data)) {\n                this.trigger('optgroup_add', id, data);\n            }\n        },\n\n        /**\n         * Removes an existing option group.\n         *\n         * @param {string} id\n         */\n        removeOptionGroup: function(id) {\n            if (this.optgroups.hasOwnProperty(id)) {\n                delete this.optgroups[id];\n                this.renderCache = {};\n                this.trigger('optgroup_remove', id);\n            }\n        },\n\n        /**\n         * Clears all existing option groups.\n         */\n        clearOptionGroups: function() {\n            this.optgroups = {};\n            this.renderCache = {};\n            this.trigger('optgroup_clear');\n\t\t},\n\t\n\t\t/**\n\t\t * Updates an option available for selection. If\n\t\t * it is visible in the selected items or options\n\t\t * dropdown, it will be re-rendered automatically.\n\t\t *\n\t\t * @param {string} value\n\t\t * @param {object} data\n\t\t */\n\t\tupdateOption: function(value, data) {\n\t\t\tvar self = this;\n\t\t\tvar $item, $item_new;\n            var value_new, index_item, cache_items, cache_options, order_old;\n\t\n\t\t\tvalue     = hash_key(value);\n\t\t\tvalue_new = hash_key(data[self.settings.valueField]);\n\t\n\t\t\t// sanity checks\n            if (value === null) return;\n\t\t\tif (!self.options.hasOwnProperty(value)) return;\n            if (typeof value_new !== 'string') throw new Error('Value must be set in option data');\n\n            order_old = self.options[value].$order;\n\t\n\t\t\t// update references\n\t\t\tif (value_new !== value) {\n\t\t\t\tdelete self.options[value];\n\t\t\t\tindex_item = self.items.indexOf(value);\n\t\t\t\tif (index_item !== -1) {\n\t\t\t\t\tself.items.splice(index_item, 1, value_new);\n\t\t\t\t}\n\t\t\t}\n            data.$order = data.$order || order_old;\n\t\t\tself.options[value_new] = data;\n\t\n\t\t\t// invalidate render cache\n\t\t\tcache_items = self.renderCache['item'];\n\t\t\tcache_options = self.renderCache['option'];\n\t\n            if (cache_items) {\n\t\t\t\tdelete cache_items[value];\n\t\t\t\tdelete cache_items[value_new];\n\t\t\t}\n            if (cache_options) {\n\t\t\t\tdelete cache_options[value];\n\t\t\t\tdelete cache_options[value_new];\n\t\t\t}\n\t\n\t\t\t// update the item if it's selected\n\t\t\tif (self.items.indexOf(value_new) !== -1) {\n\t\t\t\t$item = self.getItem(value);\n\t\t\t\t$item_new = $(self.render('item', data));\n\t\t\t\tif ($item.hasClass('active')) $item_new.addClass('active');\n\t\t\t\t$item.replaceWith($item_new);\n\t\t\t}\n\t\n            // invalidate last query because we might have updated the sortField\n            self.lastQuery = null;\n\n\t\t\t// update dropdown contents\n\t\t\tif (self.isOpen) {\n\t\t\t\tself.refreshOptions(false);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Removes a single option.\n\t\t *\n\t\t * @param {string} value\n         * @param {boolean} silent\n\t\t */\n        removeOption: function(value, silent) {\n\t\t\tvar self = this;\n\t\n\t\t\tvalue = hash_key(value);\n\n            var cache_items = self.renderCache['item'];\n            var cache_options = self.renderCache['option'];\n            if (cache_items) delete cache_items[value];\n            if (cache_options) delete cache_options[value];\n\n\t\t\tdelete self.userOptions[value];\n\t\t\tdelete self.options[value];\n\t\t\tself.lastQuery = null;\n\t\t\tself.trigger('option_remove', value);\n\t\t    self.removeItem(value, silent);\n\t\t},\n\t\n\t\t/**\n\t\t * Clears all options.\n\t\t */\n\t\tclearOptions: function() {\n\t\t\tvar self = this;\n\t\n\t\t\tself.loadedSearches = {};\n\t\t\tself.userOptions = {};\n\t\t    self.renderCache = {};\n\t\t\tself.options = self.sifter.items = {};\n\t\t\tself.lastQuery = null;\n\t\t\tself.trigger('option_clear');\n\t\t\tself.clear();\n\t\t},\n\t\n\t\t/**\n\t\t * Returns the jQuery element of the option\n\t\t * matching the given value.\n\t\t *\n\t\t * @param {string} value\n\t\t * @returns {object}\n\t\t */\n\t\tgetOption: function(value) {\n\t\t\treturn this.getElementWithValue(value, this.$dropdown_content.find('[data-selectable]'));\n\t\t},\n\t\n\t\t/**\n\t\t * Returns the jQuery element of the next or\n\t\t * previous selectable option.\n\t\t *\n\t\t * @param {object} $option\n\t\t * @param {int} direction  can be 1 for next or -1 for previous\n\t\t * @return {object}\n\t\t */\n\t\tgetAdjacentOption: function($option, direction) {\n\t\t\tvar $options = this.$dropdown.find('[data-selectable]');\n\t\t\tvar index    = $options.index($option) + direction;\n\t\n\t\t\treturn index >= 0 && index < $options.length ? $options.eq(index) : $();\n\t\t},\n\t\n\t\t/**\n\t\t * Finds the first element with a \"data-value\" attribute\n\t\t * that matches the given value.\n\t\t *\n\t\t * @param {mixed} value\n\t\t * @param {object} $els\n\t\t * @return {object}\n\t\t */\n\t\tgetElementWithValue: function(value, $els) {\n\t\t\tvalue = hash_key(value);\n\t\n            if (typeof value !== 'undefined' && value !== null) {\n\t\t\t\tfor (var i = 0, n = $els.length; i < n; i++) {\n\t\t\t\t\tif ($els[i].getAttribute('data-value') === value) {\n\t\t\t\t\t\treturn $($els[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn $();\n\t\t},\n\t\n\t\t/**\n\t\t * Returns the jQuery element of the item\n\t\t * matching the given value.\n\t\t *\n\t\t * @param {string} value\n\t\t * @returns {object}\n\t\t */\n\t\tgetItem: function(value) {\n\t\t\treturn this.getElementWithValue(value, this.$control.children());\n\t\t},\n\t\n        /**\n         * \"Selects\" multiple items at once. Adds them to the list\n         * at the current caret position.\n         *\n         * @param {string} value\n         * @param {boolean} silent\n         */\n        addItems: function(values, silent) {\n            this.buffer = document.createDocumentFragment();\n\n            var childNodes = this.$control[0].childNodes;\n            for (var i = 0; i < childNodes.length; i++) {\n                this.buffer.appendChild(childNodes[i]);\n            }\n\n            var items = $.isArray(values) ? values : [values];\n            for (var i = 0, n = items.length; i < n; i++) {\n                this.isPending = (i < n - 1);\n                this.addItem(items[i], silent);\n            }\n\n            var control = this.$control[0];\n            control.insertBefore(this.buffer, control.firstChild);\n\n            this.buffer = null;\n        },\n\n\t\t/**\n\t\t * \"Selects\" an item. Adds it to the list\n\t\t * at the current caret position.\n\t\t *\n\t\t * @param {string} value\n         * @param {boolean} silent\n\t\t */\n\t\taddItem: function(value, silent) {\n            var events = silent ? [] : ['change'];\n\n            debounce_events(this, events, function() {\n\t\t\t\tvar $item, $option, $options;\n\t\t\t\tvar self = this;\n\t\t\t\tvar inputMode = self.settings.mode;\n\t\t\t\tvar i, active, value_next, wasFull;\n\t\t\t\tvalue = hash_key(value);\n\t\n\t\t\t\tif (self.items.indexOf(value) !== -1) {\n\t\t\t\t\tif (inputMode === 'single') self.close();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tif (!self.options.hasOwnProperty(value)) return;\n\t\t\t\tif (inputMode === 'single') self.clear(silent);\n\t\t\t\tif (inputMode === 'multi' && self.isFull()) return;\n\t\n\t\t\t\t$item = $(self.render('item', self.options[value]));\n                wasFull = self.isFull();\n\t\t\t\tself.items.splice(self.caretPos, 0, value);\n\t\t\t\tself.insertAtCaret($item);\n                if (!self.isPending || (!wasFull && self.isFull())) {\n                    self.refreshState();\n                }\n\n\t\t\t\tif (self.isSetup) {\n                    $options = self.$dropdown_content.find('[data-selectable]');\n\t\n                    // update menu / remove the option (if this is not one item being added as part of series)\n                    if (!self.isPending) {\n                        $option = self.getOption(value);\n                        value_next = self.getAdjacentOption($option, 1).attr('data-value');\n                        self.refreshOptions(self.isFocused && inputMode !== 'single');\n                        if (value_next) {\n                            self.setActiveOption(self.getOption(value_next));\n                        }\n                    }\n\n\t\t\t\t\t// hide the menu if the maximum number of items have been selected or no options are left\n                    if (!$options.length || self.isFull()) {\n                            self.close();\n                    } else if (!self.isPending) {\n\t\t\t\t\t\tself.positionDropdown();\n\t\t\t\t\t}\n\t\n\t\t\t\t\tself.updatePlaceholder();\n\t\t\t\t\tself.trigger('item_add', value, $item);\n\n                    if (!self.isPending) {\n                        self.updateOriginalInput({silent: silent});\n                    }\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\n\t\t/**\n\t\t * Removes the selected item matching\n\t\t * the provided value.\n\t\t *\n\t\t * @param {string} value\n\t\t */\n        removeItem: function(value, silent) {\n\t\t\tvar self = this;\n\t\t\tvar $item, i, idx;\n\t\n            $item = (value instanceof $) ? value : self.getItem(value);\n\t\t\tvalue = hash_key($item.attr('data-value'));\n\t\t\ti = self.items.indexOf(value);\n\t\n\t\t\tif (i !== -1) {\n\t\t\t\t$item.remove();\n\t\t\t\tif ($item.hasClass('active')) {\n\t\t\t\t\tidx = self.$activeItems.indexOf($item[0]);\n\t\t\t\t\tself.$activeItems.splice(idx, 1);\n\t\t\t\t}\n\t\n\t\t\t\tself.items.splice(i, 1);\n\t\t\t\tself.lastQuery = null;\n\t\t\t\tif (!self.settings.persist && self.userOptions.hasOwnProperty(value)) {\n                    self.removeOption(value, silent);\n\t\t\t\t}\n\t\n\t\t\t\tif (i < self.caretPos) {\n\t\t\t\t\tself.setCaret(self.caretPos - 1);\n\t\t\t\t}\n\t\n\t\t\t\tself.refreshState();\n\t\t\t\tself.updatePlaceholder();\n                self.updateOriginalInput({silent: silent});\n\t\t\t\tself.positionDropdown();\n                self.trigger('item_remove', value, $item);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Invokes the `create` method provided in the\n\t\t * selectize options that should provide the data\n\t\t * for the new item, given the user input.\n\t\t *\n\t\t * Once this completes, it will be added\n\t\t * to the item list.\n\t\t *\n         * @param {string} value\n         * @param {boolean} [triggerDropdown]\n         * @param {function} [callback]\n\t\t * @return {boolean}\n\t\t */\n        createItem: function(input, triggerDropdown) {\n\t\t\tvar self  = this;\n\t\t\tvar caret = self.caretPos;\n            input = input || $.trim(self.$control_input.val() || '');\n\n            var callback = arguments[arguments.length - 1];\n            if (typeof callback !== 'function') callback = function() {};\n\n            if (typeof triggerDropdown !== 'boolean') {\n                triggerDropdown = true;\n            }\n\n            if (!self.canCreate(input)) {\n                callback();\n                return false;\n            }\n\n\t\t\tself.lock();\n\t\n\t\t\tvar setup = (typeof self.settings.create === 'function') ? this.settings.create : function(input) {\n\t\t\t\tvar data = {};\n\t\t\t\tdata[self.settings.labelField] = input;\n\t\t\t\tdata[self.settings.valueField] = input;\n\t\t\t\treturn data;\n\t\t\t};\n\t\n\t\t\tvar create = once(function(data) {\n\t\t\t\tself.unlock();\n\t\n                if (!data || typeof data !== 'object') return callback();\n\t\t\t\tvar value = hash_key(data[self.settings.valueField]);\n                if (typeof value !== 'string') return callback();\n\t\n\t\t\t\tself.setTextboxValue('');\n\t\t\t\tself.addOption(data);\n\t\t\t\tself.setCaret(caret);\n\t\t\t\tself.addItem(value);\n                self.refreshOptions(triggerDropdown && self.settings.mode !== 'single');\n                callback(data);\n\t\t\t});\n\t\n\t\t\tvar output = setup.apply(this, [input, create]);\n\t\t\tif (typeof output !== 'undefined') {\n\t\t\t\tcreate(output);\n\t\t\t}\n\t\n\t\t\treturn true;\n\t\t},\n\t\n\t\t/**\n\t\t * Re-renders the selected item lists.\n\t\t */\n\t\trefreshItems: function() {\n\t\t\tthis.lastQuery = null;\n\t\n\t\t\tif (this.isSetup) {\n                this.addItem(this.items);\n            }\n\t\n\t\t\tthis.refreshState();\n\t\t\tthis.updateOriginalInput();\n\t\t},\n\t\n\t\t/**\n\t\t * Updates all state-dependent attributes\n\t\t * and CSS classes.\n\t\t */\n\t\trefreshState: function() {\n            this.refreshValidityState();\n            this.refreshClasses();\n        },\n\n        /**\n         * Update the `required` attribute of both input and control input.\n         *\n         * The `required` property needs to be activated on the control input\n         * for the error to be displayed at the right place. `required` also\n         * needs to be temporarily deactivated on the input since the input is\n         * hidden and can't show errors.\n         */\n        refreshValidityState: function() {\n            if (!this.isRequired) return false;\n\n            var invalid = !this.items.length;\n\n            this.isInvalid = invalid;\n            this.$control_input.prop('required', invalid);\n            this.$input.prop('required', !invalid);\n\t\t},\n\t\n\t\t/**\n\t\t * Updates all state-dependent CSS classes.\n\t\t */\n\t\trefreshClasses: function() {\n\t\t\tvar self     = this;\n\t\t\tvar isFull   = self.isFull();\n\t\t\tvar isLocked = self.isLocked;\n\t\n\t\t\tself.$wrapper\n\t\t\t\t.toggleClass('rtl', self.rtl);\n\t\n\t\t\tself.$control\n\t\t\t\t.toggleClass('focus', self.isFocused)\n\t\t\t\t.toggleClass('disabled', self.isDisabled)\n\t\t\t\t.toggleClass('required', self.isRequired)\n\t\t\t\t.toggleClass('invalid', self.isInvalid)\n\t\t\t\t.toggleClass('locked', isLocked)\n\t\t\t\t.toggleClass('full', isFull).toggleClass('not-full', !isFull)\n\t\t\t\t.toggleClass('input-active', self.isFocused && !self.isInputHidden)\n\t\t\t\t.toggleClass('dropdown-active', self.isOpen)\n\t\t\t\t.toggleClass('has-options', !$.isEmptyObject(self.options))\n\t\t\t\t.toggleClass('has-items', self.items.length > 0);\n\t\n\t\t\tself.$control_input.data('grow', !isFull && !isLocked);\n\t\t},\n\t\n\t\t/**\n\t\t * Determines whether or not more items can be added\n\t\t * to the control without exceeding the user-defined maximum.\n\t\t *\n\t\t * @returns {boolean}\n\t\t */\n\t\tisFull: function() {\n\t\t\treturn this.settings.maxItems !== null && this.items.length >= this.settings.maxItems;\n\t\t},\n\t\n\t\t/**\n\t\t * Refreshes the original <select> or <input>\n\t\t * element to reflect the current state.\n\t\t */\n        updateOriginalInput: function(opts) {\n            var i, n, options, label, optionValue, selected, self = this;\n            opts = opts || {};\n\t\n            if (self.tagType === TAG_SELECT) {\n\t\t\t\toptions = [];\n\t\t\t\tif (!this.$input.attr('multiple')) {\n\t\t\t\t\toptions.push('<option value=\"\" selected=\"selected\"></option>');\n\t\t\t\t}\n\t\t\t\tfor (var i in self.options) {\n                    label = self.options[i][self.settings.labelField] || '';\n                    optionValue = self.options[i][self.settings.valueField] || '';\n                    selected = (self.items.indexOf(optionValue) >= 0) ? 'selected=\"selected\"' : '';\n                    options.push('<option value=\"' + escape_html(optionValue) + '\" ' + selected + '>' + escape_html(label) + '</option>');\n\t\t\t\t}\n\t\t\t\tself.$input.html(options.join(''));\n\t\t\t} else {\n\t\t\t\tself.$input.val(self.getValue());\n                self.$input.attr('value',self.$input.val());\n\t\t\t}\n\t\n\t\t\tif (self.isSetup) {\n                if (!opts.silent) {\n                    self.trigger('change', self.$input.val());\n                }\n            }\n\t\t},\n\t\n\t\t/**\n\t\t * Shows/hide the input placeholder depending\n\t\t * on if there items in the list already.\n\t\t */\n\t\tupdatePlaceholder: function() {\n\t\t\tif (!this.settings.placeholder) return;\n\t\t\tvar $input = this.$control_input;\n\t\n\t\t\tif (this.items.length) {\n\t\t\t\t$input.removeAttr('placeholder');\n\t\t\t} else {\n\t\t\t\t$input.attr('placeholder', this.settings.placeholder);\n\t\t\t}\n            $input.triggerHandler('update', {force: true});\n\t\t},\n\t\n\t\t/**\n\t\t * Shows the autocomplete dropdown containing\n\t\t * the available options.\n\t\t */\n\t\topen: function() {\n\t\t\tvar self = this;\n\t\n\t\t\tif (self.isLocked || self.isOpen || (self.settings.mode === 'multi' && self.isFull())) return;\n\t\t\tself.focus();\n\t\t\tself.isOpen = true;\n\t\t\tself.refreshState();\n\t\t\tself.$dropdown.css({visibility: 'hidden', display: 'block'});\n\t\t\tself.positionDropdown();\n\t\t\tself.$dropdown.css({visibility: 'visible'});\n\t\t\tself.trigger('dropdown_open', self.$dropdown);\n\t\t},\n\t\n\t\t/**\n\t\t * Closes the autocomplete dropdown menu.\n\t\t */\n\t\tclose: function() {\n\t\t\tvar self = this;\n\t\t\tvar trigger = self.isOpen;\n\t\n\t\t\tif (self.settings.mode === 'single' && self.items.length) {\n\t\t\t\tself.hideInput();\n                setTimeout(function() {\n                    self.$control_input.blur(); // close keyboard on iOS\n                });\n\t\t\t}\n\t\n\t\t\tself.isOpen = false;\n\t\t\tself.$dropdown.hide();\n\t\t\tself.setActiveOption(null);\n\t\t\tself.refreshState();\n\t\n\t\t\tif (trigger) self.trigger('dropdown_close', self.$dropdown);\n\t\t},\n\t\n\t\t/**\n\t\t * Calculates and applies the appropriate\n\t\t * position of the dropdown.\n\t\t */\n\t\tpositionDropdown: function() {\n\t\t\tvar $control = this.$control;\n\t\t\tvar offset = this.settings.dropdownParent === 'body' ? $control.offset() : $control.position();\n\t\t\toffset.top += $control.outerHeight(true);\n\t\n\t\t\tthis.$dropdown.css({\n                width : $control[0].getBoundingClientRect().width,\n\t\t\t\ttop   : offset.top,\n\t\t\t\tleft  : offset.left\n\t\t\t});\n\t\t},\n\t\n\t\t/**\n\t\t * Resets / clears all selected items\n\t\t * from the control.\n         *\n         * @param {boolean} silent\n\t\t */\n        clear: function(silent) {\n\t\t\tvar self = this;\n\t\n\t\t\tif (!self.items.length) return;\n\t\t\tself.$control.children(':not(input)').remove();\n\t\t\tself.items = [];\n            self.lastQuery = null;\n\t\t\tself.setCaret(0);\n            self.setActiveItem(null);\n\t\t\tself.updatePlaceholder();\n            self.updateOriginalInput({silent: silent});\n\t\t\tself.refreshState();\n\t\t\tself.showInput();\n\t\t\tself.trigger('clear');\n\t\t},\n\t\n\t\t/**\n\t\t * A helper method for inserting an element\n\t\t * at the current caret position.\n\t\t *\n\t\t * @param {object} $el\n\t\t */\n\t\tinsertAtCaret: function($el) {\n\t\t\tvar caret = Math.min(this.caretPos, this.items.length);\n            var el = $el[0];\n            var target = this.buffer || this.$control[0];\n\n\t\t\tif (caret === 0) {\n\t\t\t    target.insertBefore(el, target.firstChild);\n\t\t\t} else {\n\t\t\t    target.insertBefore(el, target.childNodes[caret]);\n\t\t\t}\n\t\t\tthis.setCaret(caret + 1);\n\t\t},\n\t\n\t\t/**\n\t\t * Removes the current selected item(s).\n\t\t *\n\t\t * @param {object} e (optional)\n\t\t * @returns {boolean}\n\t\t */\n\t\tdeleteSelection: function(e) {\n\t\t\tvar i, n, direction, selection, values, caret, option_select, $option_select, $tail;\n\t\t\tvar self = this;\n\t\n\t\t\tdirection = (e && e.keyCode === KEY_DELETE) ? 1 : -1;\n\t\t\tselection = getSelection(self.$control_input[0]);\n\t\n\t\t\tif (self.$activeOption && !self.settings.hideSelected) {\n\t\t\t\toption_select = self.getAdjacentOption(self.$activeOption, -1).attr('data-value');\n\t\t\t}\n\t\n\t\t\t// determine items that will be removed\n\t\t\tvalues = [];\n\t\n\t\t\tif (self.$activeItems.length) {\n\t\t\t\t$tail = self.$control.children('.active:' + (direction > 0 ? 'last' : 'first'));\n\t\t\t\tcaret = self.$control.children(':not(input)').index($tail);\n\t\t\t\tif (direction > 0) { caret++; }\n\t\n\t\t\t\tfor (i = 0, n = self.$activeItems.length; i < n; i++) {\n\t\t\t\t\tvalues.push($(self.$activeItems[i]).attr('data-value'));\n\t\t\t\t}\n\t\t\t\tif (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t} else if ((self.isFocused || self.settings.mode === 'single') && self.items.length) {\n\t\t\t\tif (direction < 0 && selection.start === 0 && selection.length === 0) {\n\t\t\t\t\tvalues.push(self.items[self.caretPos - 1]);\n\t\t\t\t} else if (direction > 0 && selection.start === self.$control_input.val().length) {\n\t\t\t\t\tvalues.push(self.items[self.caretPos]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// allow the callback to abort\n\t\t\tif (!values.length || (typeof self.settings.onDelete === 'function' && self.settings.onDelete.apply(self, [values]) === false)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// perform removal\n\t\t\tif (typeof caret !== 'undefined') {\n\t\t\t\tself.setCaret(caret);\n\t\t\t}\n\t\t\twhile (values.length) {\n\t\t\t\tself.removeItem(values.pop());\n\t\t\t}\n\t\n\t\t\tself.showInput();\n\t\t\tself.positionDropdown();\n\t\t\tself.refreshOptions(true);\n\t\n\t\t\t// select previous option\n\t\t\tif (option_select) {\n\t\t\t\t$option_select = self.getOption(option_select);\n\t\t\t\tif ($option_select.length) {\n\t\t\t\t\tself.setActiveOption($option_select);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\treturn true;\n\t\t},\n\t\n\t\t/**\n\t\t * Selects the previous / next item (depending\n\t\t * on the `direction` argument).\n\t\t *\n\t\t * > 0 - right\n\t\t * < 0 - left\n\t\t *\n\t\t * @param {int} direction\n\t\t * @param {object} e (optional)\n\t\t */\n\t\tadvanceSelection: function(direction, e) {\n\t\t\tvar tail, selection, idx, valueLength, cursorAtEdge, $tail;\n\t\t\tvar self = this;\n\t\n\t\t\tif (direction === 0) return;\n\t\t\tif (self.rtl) direction *= -1;\n\t\n\t\t\ttail = direction > 0 ? 'last' : 'first';\n\t\t\tselection = getSelection(self.$control_input[0]);\n\t\n\t\t\tif (self.isFocused && !self.isInputHidden) {\n\t\t\t\tvalueLength = self.$control_input.val().length;\n\t\t\t\tcursorAtEdge = direction < 0\n\t\t\t\t\t? selection.start === 0 && selection.length === 0\n\t\t\t\t\t: selection.start === valueLength;\n\t\n\t\t\t\tif (cursorAtEdge && !valueLength) {\n\t\t\t\t\tself.advanceCaret(direction, e);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$tail = self.$control.children('.active:' + tail);\n\t\t\t\tif ($tail.length) {\n\t\t\t\t\tidx = self.$control.children(':not(input)').index($tail);\n\t\t\t\t\tself.setActiveItem(null);\n\t\t\t\t\tself.setCaret(direction > 0 ? idx + 1 : idx);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Moves the caret left / right.\n\t\t *\n\t\t * @param {int} direction\n\t\t * @param {object} e (optional)\n\t\t */\n\t\tadvanceCaret: function(direction, e) {\n\t\t\tvar self = this, fn, $adj;\n\t\n\t\t\tif (direction === 0) return;\n\t\n\t\t\tfn = direction > 0 ? 'next' : 'prev';\n\t\t\tif (self.isShiftDown) {\n\t\t\t\t$adj = self.$control_input[fn]();\n\t\t\t\tif ($adj.length) {\n\t\t\t\t\tself.hideInput();\n\t\t\t\t\tself.setActiveItem($adj);\n\t\t\t\t\te && e.preventDefault();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tself.setCaret(self.caretPos + direction);\n\t\t\t}\n\t\t},\n\t\n\t\t/**\n\t\t * Moves the caret to the specified index.\n\t\t *\n\t\t * @param {int} i\n\t\t */\n\t\tsetCaret: function(i) {\n\t\t\tvar self = this;\n\t\n\t\t\tif (self.settings.mode === 'single') {\n\t\t\t\ti = self.items.length;\n\t\t\t} else {\n\t\t\t\ti = Math.max(0, Math.min(self.items.length, i));\n\t\t\t}\n\t\n            if(!self.isPending) {\n                // the input must be moved by leaving it in place and moving the\n                // siblings, due to the fact that focus cannot be restored once lost\n                // on mobile webkit devices\n                var j, n, fn, $children, $child;\n                $children = self.$control.children(':not(input)');\n                for (j = 0, n = $children.length; j < n; j++) {\n                    $child = $($children[j]).detach();\n                    if (j <  i) {\n                        self.$control_input.before($child);\n                    } else {\n                        self.$control.append($child);\n                    }\n                }\n            }\n\n\t\t\tself.caretPos = i;\n\t\t},\n\t\n\t\t/**\n\t\t * Disables user input on the control. Used while\n\t\t * items are being asynchronously created.\n\t\t */\n\t\tlock: function() {\n\t\t\tthis.close();\n\t\t\tthis.isLocked = true;\n\t\t\tthis.refreshState();\n\t\t},\n\t\n\t\t/**\n\t\t * Re-enables user input on the control.\n\t\t */\n\t\tunlock: function() {\n\t\t\tthis.isLocked = false;\n\t\t\tthis.refreshState();\n\t\t},\n\t\n\t\t/**\n\t\t * Disables user input on the control completely.\n\t\t * While disabled, it cannot receive focus.\n\t\t */\n\t\tdisable: function() {\n\t\t\tvar self = this;\n\t\t\tself.$input.prop('disabled', true);\n\t\t    self.$control_input.prop('disabled', true).prop('tabindex', -1);\n\t\t\tself.isDisabled = true;\n\t\t\tself.lock();\n\t\t},\n\t\n\t\t/**\n\t\t * Enables the control so that it can respond\n\t\t * to focus and user input.\n\t\t */\n\t\tenable: function() {\n\t\t\tvar self = this;\n\t\t\tself.$input.prop('disabled', false);\n\t\t    self.$control_input.prop('disabled', false).prop('tabindex', self.tabIndex);\n\t\t\tself.isDisabled = false;\n\t\t\tself.unlock();\n\t\t},\n\t\n\t\t/**\n\t\t * Completely destroys the control and\n\t\t * unbinds all event listeners so that it can\n\t\t * be garbage collected.\n\t\t */\n\t\tdestroy: function() {\n\t\t\tvar self = this;\n\t\t\tvar eventNS = self.eventNS;\n\t\t\tvar revertSettings = self.revertSettings;\n\t\n\t\t\tself.trigger('destroy');\n\t\t\tself.off();\n\t\t\tself.$wrapper.remove();\n\t\t\tself.$dropdown.remove();\n\t\n\t\t\tself.$input\n\t\t\t\t.html('')\n\t\t\t\t.append(revertSettings.$children)\n\t\t\t\t.removeAttr('tabindex')\n                .removeClass('selectized')\n\t\t\t\t.attr({tabindex: revertSettings.tabindex})\n\t\t\t\t.show();\n\n            self.$control_input.removeData('grow');\n            self.$input.removeData('selectize');\n\n            if (--Selectize.count == 0 && Selectize.$testInput) {\n                Selectize.$testInput.remove();\n                Selectize.$testInput = undefined;\n            }\n\t\n\t\t\t$(window).off(eventNS);\n\t\t\t$(document).off(eventNS);\n\t\t\t$(document.body).off(eventNS);\n\t\n\t\t\tdelete self.$input[0].selectize;\n\t\t},\n\t\n\t\t/**\n\t\t * A helper method for rendering \"item\" and\n\t\t * \"option\" templates, given the data.\n\t\t *\n\t\t * @param {string} templateName\n\t\t * @param {object} data\n\t\t * @returns {string}\n\t\t */\n\t\trender: function(templateName, data) {\n\t\t\tvar value, id, label;\n\t\t\tvar html = '';\n\t\t\tvar cache = false;\n\t\t\tvar self = this;\n\t\t    var regex_tag = /^[\\t \\r\\n]*<([a-z][a-z0-9\\-_]*(?:\\:[a-z][a-z0-9\\-_]*)?)/i;\n\t\n\t\t\tif (templateName === 'option' || templateName === 'item') {\n\t\t\t\tvalue = hash_key(data[self.settings.valueField]);\n\t\t\t\tcache = !!value;\n\t\t\t}\n\t\n\t\t\t// pull markup from cache if it exists\n\t\t\tif (cache) {\n\t\t\t\tif (!isset(self.renderCache[templateName])) {\n\t\t\t\t\tself.renderCache[templateName] = {};\n\t\t\t\t}\n\t\t\t\tif (self.renderCache[templateName].hasOwnProperty(value)) {\n\t\t\t\t\treturn self.renderCache[templateName][value];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// render markup\n\t\t    html = $(self.settings.render[templateName].apply(this, [data, escape_html]));\n\t\n\t\t\t// add mandatory attributes\n\t\t\tif (templateName === 'option' || templateName === 'option_create') {\n                if (!data[self.settings.disabledField]) {\n                    html.attr('data-selectable', '');\n                }\n            }\n            else if (templateName === 'optgroup') {\n\t\t\t\tid = data[self.settings.optgroupValueField] || '';\n                html.attr('data-group', id);\n                if(data[self.settings.disabledField]) {\n                    html.attr('data-disabled', '');\n                }\n\t\t\t}\n\t\t\tif (templateName === 'option' || templateName === 'item') {\n\t\t\t    html.attr('data-value', value || '');\n\t\t\t}\n\t\n\t\t\t// update cache\n\t\t\tif (cache) {\n                self.renderCache[templateName][value] = html[0];\n\t\t\t}\n\n            return html[0];\n\t\t},\n\n        /**\n         * Clears the render cache for a template. If\n         * no template is given, clears all render\n         * caches.\n         *\n         * @param {string} templateName\n         */\n        clearCache: function(templateName) {\n            var self = this;\n            if (typeof templateName === 'undefined') {\n                self.renderCache = {};\n            } else {\n                delete self.renderCache[templateName];\n            }\n        },\n\n        /**\n         * Determines whether or not to display the\n         * create item prompt, given a user input.\n         *\n         * @param {string} input\n         * @return {boolean}\n         */\n        canCreate: function(input) {\n            var self = this;\n            if (!self.settings.create) return false;\n            var filter = self.settings.createFilter;\n            return input.length\n                && (typeof filter !== 'function' || filter.apply(self, [input]))\n                && (typeof filter !== 'string' || new RegExp(filter).test(input))\n                && (!(filter instanceof RegExp) || filter.test(input));\n        }\n\t\n\t});\n\n\n\tSelectize.count = 0;\n\tSelectize.defaults = {\n        options: [],\n        optgroups: [],\n\n\t\tplugins: [],\n\t\tdelimiter: ',',\n        splitOn: null, // regexp or string for splitting up values from a paste command\n\t\tpersist: true,\n\t\tdiacritics: true,\n\t\tcreate: false,\n\t\tcreateOnBlur: false,\n        createFilter: null,\n\t\thighlight: true,\n\t\topenOnFocus: true,\n\t\tmaxOptions: 1000,\n\t\tmaxItems: null,\n\t\thideSelected: null,\n\t\taddPrecedence: false,\n        selectOnTab: false,\n\t\tpreload: false,\n        allowEmptyOption: false,\n        closeAfterSelect: false,\n\n\t\tdisableSearch: false,\n\n\t\tscrollDuration: 60,\n\t\tloadThrottle: 300,\n        loadingClass: 'loading',\n\n\t\tdataAttr: 'data-data',\n\t\toptgroupField: 'optgroup',\n\t\tvalueField: 'value',\n\t\tlabelField: 'text',\n        disabledField: 'disabled',\n\t\toptgroupLabelField: 'label',\n\t\toptgroupValueField: 'value',\n        lockOptgroupOrder: false,\n\t\n\t\tsortField: '$order',\n\t\tsearchField: ['text'],\n\t\tsearchConjunction: 'and',\n\t\n\t\tmode: null,\n\t\twrapperClass: 'selectize-control',\n\t\tinputClass: 'selectize-input',\n\t\tdropdownClass: 'selectize-dropdown',\n\t\tdropdownContentClass: 'selectize-dropdown-content',\n\t\n\t\tdropdownParent: null,\n\t\n        copyClassesToDropdown: true,\n\n\t\t/*\n\t\tload            : null, // function(query, callback) { ... }\n\t\tscore           : null, // function(search) { ... }\n\t\tonInitialize    : null, // function() { ... }\n\t\tonChange        : null, // function(value) { ... }\n\t\tonItemAdd       : null, // function(value, $item) { ... }\n\t\tonItemRemove    : null, // function(value) { ... }\n\t\tonClear         : null, // function() { ... }\n\t\tonOptionAdd     : null, // function(value, data) { ... }\n\t\tonOptionRemove  : null, // function(value) { ... }\n\t\tonOptionClear   : null, // function() { ... }\n        onOptionGroupAdd     : null, // function(id, data) { ... }\n        onOptionGroupRemove  : null, // function(id) { ... }\n        onOptionGroupClear   : null, // function() { ... }\n\t\tonDropdownOpen  : null, // function($dropdown) { ... }\n\t\tonDropdownClose : null, // function($dropdown) { ... }\n\t\tonType          : null, // function(str) { ... }\n\t\tonDelete        : null, // function(values) { ... }\n\t\t*/\n\t\n\t\trender: {\n\t\t\t/*\n\t\t\titem: null,\n\t\t\toptgroup: null,\n\t\t\toptgroup_header: null,\n\t\t\toption: null,\n\t\t\toption_create: null\n\t\t\t*/\n\t\t}\n\t};\n\n\t$.fn.selectize = function(settings_user) {\n\t\tvar defaults             = $.fn.selectize.defaults;\n\t\tvar settings             = $.extend({}, defaults, settings_user);\n\t\tvar attr_data            = settings.dataAttr;\n\t\tvar field_label          = settings.labelField;\n\t\tvar field_value          = settings.valueField;\n        var field_disabled       = settings.disabledField;\n\t\tvar field_optgroup       = settings.optgroupField;\n\t\tvar field_optgroup_label = settings.optgroupLabelField;\n\t\tvar field_optgroup_value = settings.optgroupValueField;\n\t\n\t\t/**\n\t\t * Initializes selectize from a <input type=\"text\"> element.\n\t\t *\n\t\t * @param {object} $input\n\t\t * @param {object} settings_element\n\t\t */\n\t\tvar init_textbox = function($input, settings_element) {\n            var i, n, values, option;\n\t\n            var data_raw = $input.attr(attr_data);\n\n            if (!data_raw) {\n                var value = $.trim($input.val() || '');\n                if (!settings.allowEmptyOption && !value.length) return;\n                values = value.split(settings.delimiter);\n                for (i = 0, n = values.length; i < n; i++) {\n                    option = {};\n                    option[field_label] = values[i];\n                    option[field_value] = values[i];\n                    settings_element.options.push(option);\n                }\n\n                settings_element.items = values;\n            } else {\n                settings_element.options = JSON.parse(data_raw);\n                for (i = 0, n = settings_element.options.length; i < n; i++) {\n                    settings_element.items.push(settings_element.options[i][field_value]);\n                }\n            }\n\t\t};\n\t\n\t\t/**\n\t\t * Initializes selectize from a <select> element.\n\t\t *\n\t\t * @param {object} $input\n\t\t * @param {object} settings_element\n\t\t */\n\t\tvar init_select = function($input, settings_element) {\n\t\t\tvar i, n, tagName, $children, order = 0;\n\t\t\tvar options = settings_element.options;\n            var optionsMap = {};\n\n\t\t\tvar readData = function($el) {\n\t\t\t\tvar data = attr_data && $el.attr(attr_data);\n\t\t\t\tif (typeof data === 'string' && data.length) {\n\t\t\t\t\treturn JSON.parse(data);\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t};\n\t\n\t\t\tvar addOption = function($option, group) {\n\t\t\t\t$option = $($option);\n\t\n                var value = hash_key($option.val());\n                if (!value && !settings.allowEmptyOption) return;\n\t\n\t\t\t\t// if the option already exists, it's probably been\n\t\t\t\t// duplicated in another optgroup. in this case, push\n\t\t\t\t// the current group to the \"optgroup\" property on the\n\t\t\t\t// existing option so that it's rendered in both places.\n                if (optionsMap.hasOwnProperty(value)) {\n                    if (group) {\n                        var arr = optionsMap[value][field_optgroup];\n                        if (!arr) {\n                            optionsMap[value][field_optgroup] = group;\n                        } else if (!$.isArray(arr)) {\n                            optionsMap[value][field_optgroup] = [arr, group];\n\t\t\t\t\t\t} else {\n                            arr.push(group);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n                var option             = readData($option) || {};\n\t\t\t\toption[field_label]    = option[field_label] || $option.text();\n\t\t\t\toption[field_value]    = option[field_value] || value;\n                option[field_disabled] = option[field_disabled] || $option.prop('disabled');\n\t\t\t\toption[field_optgroup] = option[field_optgroup] || group;\n\t\n                optionsMap[value] = option;\n                options.push(option);\n\t\n\t\t\t\tif ($option.is(':selected')) {\n\t\t\t\t\tsettings_element.items.push(value);\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tvar addGroup = function($optgroup) {\n\t\t\t\tvar i, n, id, optgroup, $options;\n\t\n\t\t\t\t$optgroup = $($optgroup);\n\t\t\t\tid = $optgroup.attr('label');\n\t\n\t\t\t\tif (id) {\n\t\t\t\t\toptgroup = readData($optgroup) || {};\n\t\t\t\t\toptgroup[field_optgroup_label] = id;\n\t\t\t\t\toptgroup[field_optgroup_value] = id;\n                    optgroup[field_disabled] = $optgroup.prop('disabled');\n                    settings_element.optgroups.push(optgroup);\n\t\t\t\t}\n\t\n\t\t\t\t$options = $('option', $optgroup);\n\t\t\t\tfor (i = 0, n = $options.length; i < n; i++) {\n\t\t\t\t\taddOption($options[i], id);\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tsettings_element.maxItems = $input.attr('multiple') ? null : 1;\n\t\n\t\t\t$children = $input.children();\n\t\t\tfor (i = 0, n = $children.length; i < n; i++) {\n\t\t\t\ttagName = $children[i].tagName.toLowerCase();\n\t\t\t\tif (tagName === 'optgroup') {\n\t\t\t\t\taddGroup($children[i]);\n\t\t\t\t} else if (tagName === 'option') {\n\t\t\t\t\taddOption($children[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\treturn this.each(function() {\n\t\t\tif (this.selectize) return;\n\t\n\t\t\tvar instance;\n\t\t\tvar $input = $(this);\n\t\t\tvar tag_name = this.tagName.toLowerCase();\n            var placeholder = $input.attr('placeholder') || $input.attr('data-placeholder');\n            if (!placeholder && !settings.allowEmptyOption) {\n                placeholder = $input.children('option[value=\"\"]').text();\n            }\n\n\t\t\tvar settings_element = {\n                'placeholder' : placeholder,\n                'options'     : [],\n                'optgroups'   : [],\n\t\t\t\t'items'       : []\n\t\t\t};\n\t\n\t\t\tif (tag_name === 'select') {\n\t\t\t\tinit_select($input, settings_element);\n\t\t\t} else {\n\t\t\t\tinit_textbox($input, settings_element);\n\t\t\t}\n\t\n\t\t\tinstance = new Selectize($input, $.extend(true, {}, defaults, settings_element, settings_user));\n\t\t});\n\t};\n\t\n\t$.fn.selectize.defaults = Selectize.defaults;\n    $.fn.selectize.support = {\n        validity: SUPPORTS_VALIDITY_API\n    };\n\t\n\tSelectize.define('drag_drop', function(options) {\n\t\tif (!$.fn.sortable) throw new Error('The \"drag_drop\" plugin requires jQuery UI \"sortable\".');\n\t\tif (this.settings.mode !== 'multi') return;\n\t\tvar self = this;\n\t\n\t\tself.lock = (function() {\n\t\t\tvar original = self.lock;\n\t\t\treturn function() {\n\t\t\t\tvar sortable = self.$control.data('sortable');\n\t\t\t\tif (sortable) sortable.disable();\n\t\t\t\treturn original.apply(self, arguments);\n\t\t\t};\n\t\t})();\n\t\n\t\tself.unlock = (function() {\n\t\t\tvar original = self.unlock;\n\t\t\treturn function() {\n\t\t\t\tvar sortable = self.$control.data('sortable');\n\t\t\t\tif (sortable) sortable.enable();\n\t\t\t\treturn original.apply(self, arguments);\n\t\t\t};\n\t\t})();\n\t\n\t\tself.setup = (function() {\n\t\t\tvar original = self.setup;\n\t\t\treturn function() {\n\t\t\t\toriginal.apply(this, arguments);\n\t\n\t\t\t\tvar $control = self.$control.sortable({\n\t\t\t\t\titems: '[data-value]',\n\t\t\t\t\tforcePlaceholderSize: true,\n\t\t\t\t\tdisabled: self.isLocked,\n\t\t\t\t\tstart: function(e, ui) {\n\t\t\t\t\t\tui.placeholder.css('width', ui.helper.css('width'));\n\t\t\t\t\t\t$control.css({overflow: 'visible'});\n\t\t\t\t\t},\n\t\t\t\t\tstop: function() {\n\t\t\t\t\t\t$control.css({overflow: 'hidden'});\n\t\t\t\t\t\tvar active = self.$activeItems ? self.$activeItems.slice() : null;\n\t\t\t\t\t\tvar values = [];\n\t\t\t\t\t\t$control.children('[data-value]').each(function() {\n\t\t\t\t\t\t\tvalues.push($(this).attr('data-value'));\n\t\t\t\t\t\t});\n\t\t\t\t\t\tself.setValue(values);\n\t\t\t\t\t\tself.setActiveItem(active);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t})();\n\t\n\t});\n\t\n\tSelectize.define('dropdown_header', function(options) {\n\t\tvar self = this;\n\t\n\t\toptions = $.extend({\n\t\t\ttitle         : 'Untitled',\n\t\t\theaderClass   : 'selectize-dropdown-header',\n\t\t\ttitleRowClass : 'selectize-dropdown-header-title',\n\t\t\tlabelClass    : 'selectize-dropdown-header-label',\n\t\t\tcloseClass    : 'selectize-dropdown-header-close',\n\t\n\t\t\thtml: function(data) {\n\t\t\t\treturn (\n\t\t\t\t\t'<div class=\"' + data.headerClass + '\">' +\n\t\t\t\t\t\t'<div class=\"' + data.titleRowClass + '\">' +\n\t\t\t\t\t\t\t'<span class=\"' + data.labelClass + '\">' + data.title + '</span>' +\n\t\t\t\t\t\t\t'<a href=\"javascript:void(0)\" class=\"' + data.closeClass + '\">&times;</a>' +\n\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t'</div>'\n\t\t\t\t);\n\t\t\t}\n\t\t}, options);\n\t\n\t\tself.setup = (function() {\n\t\t\tvar original = self.setup;\n\t\t\treturn function() {\n\t\t\t\toriginal.apply(self, arguments);\n\t\t\t\tself.$dropdown_header = $(options.html(options));\n\t\t\t\tself.$dropdown.prepend(self.$dropdown_header);\n\t\t\t};\n\t\t})();\n\t\n\t});\n\t\n\tSelectize.define('optgroup_columns', function(options) {\n\t\tvar self = this;\n\t\n\t\toptions = $.extend({\n\t\t\tequalizeWidth  : true,\n\t\t\tequalizeHeight : true\n\t\t}, options);\n\t\n\t\tthis.getAdjacentOption = function($option, direction) {\n\t\t\tvar $options = $option.closest('[data-group]').find('[data-selectable]');\n\t\t\tvar index    = $options.index($option) + direction;\n\t\n\t\t\treturn index >= 0 && index < $options.length ? $options.eq(index) : $();\n\t\t};\n\t\n\t\tthis.onKeyDown = (function() {\n\t\t\tvar original = self.onKeyDown;\n\t\t\treturn function(e) {\n\t\t\t\tvar index, $option, $options, $optgroup;\n\t\n\t\t\t\tif (this.isOpen && (e.keyCode === KEY_LEFT || e.keyCode === KEY_RIGHT)) {\n\t\t\t\t\tself.ignoreHover = true;\n\t\t\t\t\t$optgroup = this.$activeOption.closest('[data-group]');\n\t\t\t\t\tindex = $optgroup.find('[data-selectable]').index(this.$activeOption);\n\t\n\t\t\t\t\tif(e.keyCode === KEY_LEFT) {\n\t\t\t\t\t\t$optgroup = $optgroup.prev('[data-group]');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$optgroup = $optgroup.next('[data-group]');\n\t\t\t\t\t}\n\t\n\t\t\t\t\t$options = $optgroup.find('[data-selectable]');\n\t\t\t\t\t$option  = $options.eq(Math.min($options.length - 1, index));\n\t\t\t\t\tif ($option.length) {\n\t\t\t\t\t\tthis.setActiveOption($option);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\treturn original.apply(this, arguments);\n\t\t\t};\n\t\t})();\n\t\n\t\tvar equalizeSizes = function() {\n\t\t\tvar i, n, height_max, width, width_last, width_parent, $optgroups;\n\t\n\t\t\t$optgroups = $('[data-group]', self.$dropdown_content);\n\t\t\tn = $optgroups.length;\n\t\t\tif (!n || !self.$dropdown_content.width()) return;\n\t\n\t\t\tif (options.equalizeHeight) {\n\t\t\t\theight_max = 0;\n\t\t\t\tfor (i = 0; i < n; i++) {\n\t\t\t\t\theight_max = Math.max(height_max, $optgroups.eq(i).height());\n\t\t\t\t}\n\t\t\t\t$optgroups.css({height: height_max});\n\t\t\t}\n\t\n\t\t\tif (options.equalizeWidth) {\n\t\t\t\twidth_parent = self.$dropdown_content.innerWidth();\n\t\t\t\twidth = Math.round(width_parent / n);\n\t\t\t\t$optgroups.css({width: width});\n\t\t\t\tif (n > 1) {\n\t\t\t\t\twidth_last = width_parent - width * (n - 1);\n\t\t\t\t\t$optgroups.eq(n - 1).css({width: width_last});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tif (options.equalizeHeight || options.equalizeWidth) {\n\t\t\thook.after(this, 'positionDropdown', equalizeSizes);\n\t\t\thook.after(this, 'refreshOptions', equalizeSizes);\n\t\t}\n\t\n\t\n\t});\n\t\n\tSelectize.define('remove_button', function(options) {\n\t\tif (this.settings.mode === 'single') return;\n\t\n\t\toptions = $.extend({\n\t\t\tlabel     : '&times;',\n\t\t\ttitle     : 'Remove',\n\t\t\tclassName : 'remove',\n\t\t\tappend    : true\n\t\t}, options);\n\t\n\t\tvar self = this;\n\t\tvar html = '<a href=\"javascript:void(0)\" class=\"' + options.className + '\" tabindex=\"-1\" title=\"' + escape_html(options.title) + '\">' + options.label + '</a>';\n\t\n\t\t/**\n\t\t * Appends an element as a child (with raw HTML).\n\t\t *\n\t\t * @param {string} html_container\n\t\t * @param {string} html_element\n\t\t * @return {string}\n\t\t */\n\t\tvar append = function(html_container, html_element) {\n\t\t\tvar pos = html_container.search(/(<\\/[^>]+>\\s*)$/);\n\t\t\treturn html_container.substring(0, pos) + html_element + html_container.substring(pos);\n\t\t};\n\t\n\t\tthis.setup = (function() {\n\t\t\tvar original = self.setup;\n\t\t\treturn function() {\n\t\t\t\t// override the item rendering method to add the button to each\n\t\t\t\tif (options.append) {\n\t\t\t\t\tvar render_item = self.settings.render.item;\n\t\t\t\t\tself.settings.render.item = function(data) {\n\t\t\t\t\t\treturn append(render_item.apply(this, arguments), html);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\n\t\t\t\toriginal.apply(this, arguments);\n\t\n\t\t\t\t// add event listener\n\t\t\t\tthis.$control.on('click', '.' + options.className, function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (self.isLocked) return;\n\t\n\t\t\t\t\tvar $item = $(e.target).parent();\n\t\t\t\t\tself.setActiveItem($item);\n\t\t\t\t\tif (self.deleteSelection()) {\n\t\t\t\t\t\tself.setCaret(self.items.length);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t};\n\t\t})();\n\t\n\t});\n\t\n\tSelectize.define('restore_on_backspace', function(options) {\n\t\tvar self = this;\n\t\n\t\toptions.text = options.text || function(option) {\n\t\t\treturn option[this.settings.labelField];\n\t\t};\n\t\n\t\tthis.onKeyDown = (function(e) {\n\t\t\tvar original = self.onKeyDown;\n\t\t\treturn function(e) {\n\t\t\t\tvar index, option;\n\t\t\t\tif (e.keyCode === KEY_BACKSPACE && this.$control_input.val() === '' && !this.$activeItems.length) {\n\t\t\t\t\tindex = this.caretPos - 1;\n\t\t\t\t\tif (index >= 0 && index < this.items.length) {\n\t\t\t\t\t\toption = this.options[this.items[index]];\n\t\t\t\t\t\tif (this.deleteSelection(e)) {\n\t\t\t\t\t\t\tthis.setTextboxValue(options.text.apply(this, [option]));\n\t\t\t\t\t\t\tthis.refreshOptions(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn original.apply(this, arguments);\n\t\t\t};\n\t\t})();\n\t});\n\n\treturn Selectize;\n}));","IWD_Opc/js/model/checkout-data-resolver.js":"define(\n    [\n        'Magento_Customer/js/model/address-list',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/checkout-data',\n        'Magento_Checkout/js/action/create-shipping-address',\n        'Magento_Checkout/js/action/select-shipping-address',\n        'Magento_Checkout/js/action/select-shipping-method',\n        'Magento_Checkout/js/model/payment-service',\n        'Magento_Checkout/js/action/select-payment-method',\n        'Magento_Checkout/js/model/address-converter',\n        'Magento_Checkout/js/action/select-billing-address',\n        'Magento_Checkout/js/action/create-billing-address',\n        'underscore'\n    ],\n    function (addressList,\n              quote,\n              checkoutData,\n              createShippingAddress,\n              selectShippingAddress,\n              selectShippingMethodAction,\n              paymentService,\n              selectPaymentMethodAction,\n              addressConverter,\n              selectBillingAddress,\n              createBillingAddress,\n              _) {\n        'use strict';\n\n        return {\n\n            /**\n             * Resolve estimation address. Used local storage\n             */\n            resolveEstimationAddress: function () {\n                var address;\n\n                if (checkoutData.getShippingAddressFromData()) {\n                    address = addressConverter.formAddressDataToQuoteAddress(checkoutData.getShippingAddressFromData());\n                    selectShippingAddress(address);\n                } else {\n                    this.resolveShippingAddress();\n                }\n\n                if (quote.isVirtual()) {\n                    if (checkoutData.getBillingAddressFromData()) {\n                        address = addressConverter.formAddressDataToQuoteAddress(\n                            checkoutData.getBillingAddressFromData()\n                        );\n                        selectBillingAddress(address);\n                    } else {\n                        this.resolveBillingAddress();\n                    }\n                }\n\n            },\n\n            /**\n             * Resolve shipping address. Used local storage\n             */\n            resolveShippingAddress: function () {\n                var newCustomerShippingAddress = checkoutData.getNewCustomerShippingAddress();\n\n                if (newCustomerShippingAddress) {\n                    createShippingAddress(newCustomerShippingAddress);\n                }\n\n                this.applyShippingAddress();\n            },\n\n            /**\n             * Apply resolved estimated address to quote\n             *\n             * @param {Object} isEstimatedAddress\n             */\n            applyShippingAddress: function (isEstimatedAddress) {\n                var address,\n                    shippingAddress,\n                    isConvertAddress,\n                    addressData,\n                    isShippingAddressInitialized;\n\n                if (addressList().length === 0) {\n                    address = addressConverter.formAddressDataToQuoteAddress(\n                        checkoutData.getShippingAddressFromData()\n                    );\n                    selectShippingAddress(address);\n                }\n                shippingAddress = quote.shippingAddress();\n                isConvertAddress = isEstimatedAddress || false;\n\n                if (!shippingAddress) {\n                    isShippingAddressInitialized = addressList.some(function (addressFromList) {\n                        if (checkoutData.getSelectedShippingAddress() === addressFromList.getKey()) {\n                            addressData = isConvertAddress ?\n                                addressConverter.addressToEstimationAddress(addressFromList)\n                                : addressFromList;\n                            selectShippingAddress(addressData);\n\n                            return true;\n                        }\n\n                        return false;\n                    });\n\n                    if (!isShippingAddressInitialized) {\n                        isShippingAddressInitialized = addressList.some(function (address) {\n                            if (address.isDefaultShipping()) {\n                                addressData = isConvertAddress ?\n                                    addressConverter.addressToEstimationAddress(address)\n                                    : address;\n                                selectShippingAddress(addressData);\n\n                                return true;\n                            }\n\n                            return false;\n                        });\n                    }\n\n                    if (!isShippingAddressInitialized && addressList().length === 1) {\n                        addressData = isConvertAddress ?\n                            addressConverter.addressToEstimationAddress(addressList()[0])\n                            : addressList()[0];\n                        selectShippingAddress(addressData);\n                    }\n                }\n            },\n\n            /**\n             * @param {Object} ratesData\n             */\n            resolveShippingRates: function (ratesData) {\n                var selectedShippingRate = checkoutData.getSelectedShippingRate(),\n                    availableRate = false;\n\n                if (ratesData.length === 1) {\n                    availableRate = ratesData[0];\n                }\n\n                if (!availableRate && quote.shippingMethod()) {\n                    availableRate = _.find(ratesData, function (rate) {\n                        return rate.carrier_code === quote.shippingMethod().carrier_code &&\n                            rate.method_code === quote.shippingMethod().method_code;\n                    });\n                }\n\n                if (!availableRate && selectedShippingRate) {\n                    availableRate = _.find(ratesData, function (rate) {\n                        return rate.carrier_code + '_' + rate.method_code === selectedShippingRate;\n                    });\n                }\n\n                if (!availableRate && quote.getSelectedShippingMethod()) {\n                    availableRate = quote.getSelectedShippingMethod();\n                }\n\n                if (!availableRate && quote.getDefaultShippingMethod()) {\n                    var defaultShipping = quote.getDefaultShippingMethod();\n                    availableRate = _.find(ratesData, function (rate) {\n                        return rate.carrier_code + '_' + rate.method_code === defaultShipping;\n                    });\n                }\n\n                if (!availableRate) {\n                    selectShippingMethodAction(null);\n                } else {\n                    selectShippingMethodAction(availableRate);\n                }\n            },\n\n            /**\n             * Resolve payment method. Used local storage\n             */\n            resolvePaymentMethod: function () {\n                var availablePaymentMethods = paymentService.getAvailablePaymentMethods(),\n                    selectedPaymentMethod = checkoutData.getSelectedPaymentMethod();\n\n                if (availablePaymentMethods.length === 1) {\n                    selectedPaymentMethod = availablePaymentMethods[0].method;\n                }\n\n                if (!selectedPaymentMethod && quote.getDefaultPaymentMethod()) {\n                    selectedPaymentMethod = quote.getDefaultPaymentMethod();\n                }\n\n                if (selectedPaymentMethod) {\n                    availablePaymentMethods.some(function (payment) {\n                        if (payment.method === selectedPaymentMethod) {\n                            selectPaymentMethodAction(payment);\n                            checkoutData.setSelectedPaymentMethod(selectedPaymentMethod);\n                            quote.paymentMethod.valueHasMutated();\n                        }\n                    });\n                } else {\n                    selectPaymentMethodAction(null);\n                    checkoutData.setSelectedPaymentMethod(null);\n                }\n            },\n\n            /**\n             * Resolve billing address. Used local storage\n             */\n            resolveBillingAddress: function () {\n                var selectedBillingAddress = checkoutData.getSelectedBillingAddress(),\n                    newCustomerBillingAddressData = checkoutData.getNewCustomerBillingAddress();\n\n                if (selectedBillingAddress) {\n                    if (selectedBillingAddress === 'new-customer-address' && newCustomerBillingAddressData) {\n                        selectBillingAddress(createBillingAddress(newCustomerBillingAddressData));\n                    } else {\n                        addressList.some(function (address) {\n                            if (selectedBillingAddress === address.getKey()) {\n                                selectBillingAddress(address);\n                            }\n                        });\n                    }\n                } else if (quote.isVirtual()) {\n                    this.applyBillingAddress();\n                }\n            },\n\n            /**\n             * Apply resolved billing address to quote\n             */\n            applyBillingAddress: function () {\n                var isBillingAddressInitialized = false;\n                if (addressList().length) {\n                    isBillingAddressInitialized = addressList.some(function (address) {\n                        if (address.isDefaultBilling()) {\n                            selectBillingAddress(address);\n                            return true;\n                        }\n\n                        return false;\n                    });\n\n                    if (addressList().length === 1 || !isBillingAddressInitialized) {\n                        selectBillingAddress(addressList()[0]);\n                        isBillingAddressInitialized = true;\n                    }\n                }\n\n                return isBillingAddressInitialized;\n            }\n        };\n    }\n);\n","IWD_Opc/js/model/default-post-code-resolver.js":"define([], function () {\n    /**\n     * Define necessity of using default post code value\n     */\n    var useDefaultPostCode;\n\n    return {\n\n        /**\n         * Resolve default post code\n         *\n         * @returns {string|undefined}\n         */\n        resolve: function () {\n            return useDefaultPostCode ?  window.checkoutConfig.defaultPostcode : undefined;\n        },\n\n        /**\n         * Set state to useDefaultPostCode variable\n         *\n         * @param shouldUseDefaultPostCode\n         * @returns {underscore}\n         */\n        setUseDefaultPostCode: function (shouldUseDefaultPostCode)\n        {\n            useDefaultPostCode = shouldUseDefaultPostCode;\n            return this;\n        }\n    };\n});","IWD_Opc/js/model/quote.js":"define(\n    ['ko'],\n    function (ko) {\n        'use strict';\n        var billingAddress = ko.observable(null);\n        var shippingAddress = ko.observable(null);\n        var shippingMethod = ko.observable(null);\n        var paymentMethod = ko.observable(null);\n        var quoteData = window.checkoutConfig.quoteData;\n        var basePriceFormat = window.checkoutConfig.basePriceFormat;\n        var priceFormat = window.checkoutConfig.priceFormat;\n        var storeCode = window.checkoutConfig.storeCode;\n        var totalsData = window.checkoutConfig.totalsData;\n        var totals = ko.observable(totalsData);\n        var collectedTotals = ko.observable({});\n        var opcConfig = window.checkoutConfig.iwdOpcSettings;\n        return {\n            totals: totals,\n            shippingAddress: shippingAddress,\n            shippingMethod: shippingMethod,\n            billingAddress: billingAddress,\n            paymentMethod: paymentMethod,\n            guestEmail: null,\n            isCustomerLoggedIn: function () {\n                return window.checkoutConfig.isCustomerLoggedIn;\n            },\n            getCustomerGroupId: function () {\n                return quoteData.customer_group_id;\n            },\n            getPaymentTitleType: function () {\n                return opcConfig ? opcConfig.paymentTitleType : undefined;\n            },\n            getPaymentImagePath: function (type) {\n                return opcConfig ? opcConfig.paymentLogosImages[type] : undefined;\n            },\n            isRestrictPaymentEnable: function () {\n                return opcConfig ? opcConfig.isRestrictPaymentEnable : undefined;\n            },\n            getRestrictedPaymentMethods: function () {\n                return opcConfig ? opcConfig.restrictedPaymentMethods : undefined;\n            },\n            getDefaultShippingMethod: function () {\n                return opcConfig ? opcConfig.defaultShippingMethod : undefined;\n            },\n            getDefaultPaymentMethod: function () {\n                return opcConfig ? opcConfig.defaultPaymentMethod : undefined;\n            },\n            getSelectedShippingMethod: function () {\n                return window.checkoutConfig.selectedShippingMethod;\n            },\n            setDefaultShippingMethod: function (defaultShippingMethod) {\n                if(opcConfig) {\n                    opcConfig.defaultShippingMethod = defaultShippingMethod;\n                }\n            },\n            setSelectedShippingMethod: function (selectedShippingMethod) {\n                return window.checkoutConfig.selectedShippingMethod = selectedShippingMethod;\n            },\n            getLogoutUrl: function () {\n                return opcConfig ? opcConfig.logoutUrl : undefined;\n            },\n            getForgotPasswordUrl: function () {\n                return opcConfig ? opcConfig.forgotPasswordUrl : undefined;\n            },\n            isShowLoginButton: function () {\n                return opcConfig ? opcConfig.isShowLoginButton : undefined;\n            },\n            isShowGiftMessage: function () {\n                return opcConfig ? opcConfig.isShowGiftMessage : undefined;\n            },\n            isShowComment: function () {\n                return opcConfig ? opcConfig.isShowComment : undefined;\n            },\n            isShowDiscount: function () {\n                return opcConfig ? opcConfig.isShowDiscount : undefined;\n            },\n            isShowSubscribe: function () {\n                return opcConfig ? opcConfig.isShowSubscribe : undefined;\n            },\n            isReloadShippingOnDiscount: function () {\n                return opcConfig ? opcConfig.isReloadShippingOnDiscount : undefined;\n            },\n            isSubscribeByDefault: function () {\n                return opcConfig ? opcConfig.isSubscribeByDefault : undefined;\n            },\n            getQuoteId: function () {\n                return quoteData.entity_id;\n            },\n            isVirtual: function () {\n                return !!Number(quoteData.is_virtual);\n            },\n            getPriceFormat: function () {\n                return priceFormat;\n            },\n            getBasePriceFormat: function () {\n                return basePriceFormat;\n            },\n            getItems: function () {\n                return window.checkoutConfig.quoteItemData;\n            },\n            getTotals: function () {\n                return totals;\n            },\n            setTotals: function (totalsData) {\n                if (_.isObject(totalsData) && _.isObject(totalsData.extension_attributes)) {\n                    _.each(totalsData.extension_attributes, function (element, index) {\n                        totalsData[index] = element;\n                    });\n                }\n                totals(totalsData);\n                this.setCollectedTotals('subtotal_with_discount', parseFloat(totalsData.subtotal_with_discount));\n            },\n            setPaymentMethod: function (paymentMethodCode) {\n                paymentMethod(paymentMethodCode);\n            },\n            getPaymentMethod: function () {\n                return paymentMethod;\n            },\n            getStoreCode: function () {\n                return storeCode;\n            },\n            setCollectedTotals: function (code, value) {\n                var totals = collectedTotals();\n                totals[code] = value;\n                collectedTotals(totals);\n            },\n            getCalculatedTotal: function () {\n                var total = 0.;\n                _.each(collectedTotals(), function (value) {\n                    total += value;\n                });\n                return total;\n            }\n        };\n    }\n);\n","IWD_Opc/js/model/place-order-mixin.js":"define([\n    'jquery',\n    'mage/utils/wrapper',\n    'IWD_Opc/js/model/comment-assigner',\n    'IWD_Opc/js/model/subscribe-assigner'\n], function ($, wrapper, commentAssigner, subscribeAssigner) {\n    'use strict';\n\n    return function (placeOrderAction) {\n\n        return wrapper.wrap(placeOrderAction, function (originalAction, paymentData, messageContainer) {\n            commentAssigner(paymentData);\n            subscribeAssigner(paymentData);\n\n            return originalAction(paymentData, messageContainer);\n        });\n    };\n});\n","IWD_Opc/js/model/new-customer-address.js":"define([\n    'underscore',\n    'IWD_Opc/js/model/default-post-code-resolver'\n], function (_, DefaultPostCodeResolver) {\n    'use strict';\n\n    /**\n     * @param {Object} addressData\n     * Returns new address object\n     */\n    return function (addressData) {\n        var identifier = Date.now(),\n            regionId;\n\n        if (addressData.region && addressData.region.region_id) {\n            regionId = addressData.region.region_id;\n        } else if (addressData.country_id && addressData.country_id == window.checkoutConfig.defaultCountryId) {\n            regionId = window.checkoutConfig.defaultRegionId || undefined;\n        }\n\n        return {\n            email: addressData.email,\n            countryId: addressData['country_id'] || addressData.countryId || window.checkoutConfig.defaultCountryId,\n            regionId: regionId || addressData.regionId,\n            regionCode: (addressData.region) ? addressData.region.region_code : null,\n            region: (addressData.region) ? addressData.region.region : null,\n            customerId: addressData.customer_id || addressData.customerId,\n            street: addressData.street,\n            company: addressData.company,\n            telephone: addressData.telephone,\n            fax: addressData.fax,\n            postcode: addressData.postcode ? addressData.postcode : DefaultPostCodeResolver.resolve(),\n            city: addressData.city,\n            firstname: addressData.firstname,\n            lastname: addressData.lastname,\n            middlename: addressData.middlename,\n            prefix: addressData.prefix,\n            suffix: addressData.suffix,\n            vatId: addressData.vat_id,\n            saveInAddressBook: addressData.save_in_address_book,\n            customAttributes: addressData.custom_attributes,\n            isDefaultShipping: function () {\n                return addressData.default_shipping;\n            },\n            isDefaultBilling: function () {\n                return addressData.default_billing;\n            },\n            getType: function () {\n                return 'new-customer-address';\n            },\n            getKey: function () {\n                return this.getType();\n            },\n            getCacheKey: function () {\n                return this.getType() + identifier;\n            },\n            isEditable: function () {\n                return true;\n            },\n            canUseForBilling: function () {\n                return true;\n            }\n        }\n    }\n});\n","IWD_Opc/js/model/subscribe-assigner.js":"define([\n    'jquery',\n    'IWD_Opc/js/model/quote',\n    'IWD_Opc/js/checkout-data'\n], function ($, quote, checkoutData) {\n    'use strict';\n\n    return function (paymentData) {\n        if (!quote.isShowSubscribe()) {\n            return;\n        }\n\n        if (paymentData['extension_attributes'] === undefined) {\n            paymentData['extension_attributes'] = {};\n        }\n\n        paymentData['extension_attributes']['subscribe'] = checkoutData.getIsSubscribe();\n    };\n});\n","IWD_Opc/js/model/agreement-validator.js":"define(\n    [\n        'jquery',\n        'mage/validation'\n    ],\n    function ($) {\n        'use strict';\n        var checkoutConfig = window.checkoutConfig,\n            agreementsConfig = checkoutConfig ? checkoutConfig.checkoutAgreements : {};\n\n        var agreementsInputPath = '.iwd_opc_payment_column div[data-role=checkout-agreements] input';\n\n        return {\n            /**\n             * Validate checkout agreements\n             *\n             * @returns {boolean}\n             */\n            validate: function () {\n                var isValid = true;\n\n                if (!agreementsConfig.isEnabled || $(agreementsInputPath).length === 0) {\n                    return true;\n                }\n\n                $(agreementsInputPath).each(function (index, element) {\n                    $(element).parent().children('div.mage-error[generated]').remove();\n\n                    if (!$.validator.validateSingleElement(element, {\n                            errorClass: 'mage-error',\n                            errorElement: 'div',\n                            meta: 'validate',\n                            errorPlacement: function (error, element) {\n                                var errorPlacement = element;\n                                if (element.is(':checkbox') || element.is(':radio')) {\n                                    errorPlacement = element.siblings('label').last();\n                                }\n                                errorPlacement.after(error);\n                            }\n                        })) {\n\n                        isValid = false;\n                    }\n                });\n\n                return isValid;\n            }\n        };\n    }\n);\n","IWD_Opc/js/model/shipping-rates-validator.js":"define(\n    [\n        'jquery',\n        'ko',\n        'Magento_Checkout/js/model/shipping-rates-validation-rules',\n        'Magento_Checkout/js/model/address-converter',\n        'Magento_Checkout/js/action/select-shipping-address',\n        'Magento_Checkout/js/model/postcode-validator',\n        'mage/translate',\n        'uiRegistry',\n        'Magento_Checkout/js/model/quote'\n    ],\n    function ($,\n              ko,\n              shippingRatesValidationRules,\n              addressConverter,\n              selectShippingAddress,\n              postcodeValidator,\n              $t,\n              uiRegistry,\n              quote) {\n        'use strict';\n\n        var checkoutConfig = window.checkoutConfig,\n            validators = [],\n            observedElements = [],\n            postcodeElement = null,\n            postcodeElementName = 'postcode';\n\n        return {\n            validateAddressTimeout: 0,\n            validateDelay: 1800,\n\n            /**\n             * @param {String} carrier\n             * @param {Object} validator\n             */\n            registerValidator: function (carrier, validator) {\n                if (checkoutConfig.activeCarriers.indexOf(carrier) !== -1) {\n                    validators.push(validator);\n                }\n            },\n\n            /**\n             * @param {Object} address\n             * @return {Boolean}\n             */\n            validateAddressData: function (address) {\n                return validators.some(function (validator) {\n                    return validator.validate(address);\n                });\n            },\n\n            /**\n             * Perform postponed binding for fieldset elements\n             *\n             * @param {String} formPath\n             */\n            initFields: function (formPath) {\n                var self = this,\n                    elements = shippingRatesValidationRules.getObservableFields();\n\n                if ($.inArray(postcodeElementName, elements) === -1) {\n                    // Add postcode field to observables if not exist for zip code validation support\n                    elements.push(postcodeElementName);\n                }\n\n                $.each(elements, function (index, field) {\n                    uiRegistry.async(formPath + '.' + field)(self.doElementBinding.bind(self));\n                });\n            },\n\n            /**\n             * Bind shipping rates request to form element\n             *\n             * @param {Object} element\n             * @param {Boolean} force\n             * @param {Number} delay\n             */\n            doElementBinding: function (element, force, delay) {\n                var observableFields = shippingRatesValidationRules.getObservableFields();\n\n                if (element && (observableFields.indexOf(element.index) !== -1 || force)) {\n                    if (element.index !== postcodeElementName) {\n                        this.bindHandler(element, delay);\n                    }\n                }\n\n                if (element.index === postcodeElementName) {\n                    this.bindHandler(element, delay);\n                    postcodeElement = element;\n                }\n            },\n\n            /**\n             * @param {*} elements\n             * @param {Boolean} force\n             * @param {Number} delay\n             */\n            bindChangeHandlers: function (elements, force, delay) {\n                var self = this;\n\n                $.each(elements, function (index, elem) {\n                    self.doElementBinding(elem, force, delay);\n                });\n            },\n\n            /**\n             * @param {Object} element\n             * @param {Number} delay\n             */\n            bindHandler: function (element, delay) {\n                var self = this;\n\n                delay = typeof delay === 'undefined' ? self.validateDelay : delay;\n\n                if (element.component.indexOf('/group') !== -1) {\n                    $.each(element.elems(), function (index, elem) {\n                        self.bindHandler(elem);\n                    });\n                } else {\n                    element.on('value', function () {\n                        clearTimeout(self.validateAddressTimeout);\n                        self.validateAddressTimeout = setTimeout(function () {\n                            if (self.postcodeValidation()) {\n                                self.validateFields();\n                            }\n                        }, delay);\n                    });\n                    observedElements.push(element);\n                }\n            },\n\n            /**\n             * @return {*}\n             */\n            postcodeValidation: function () {\n                var countryId = $('#co-shipping-form').find('select[name=\"country_id\"]').val(),\n                    validationResult,\n                    warnMessage;\n\n                if (postcodeElement === null || postcodeElement.value() === null) {\n                    return true;\n                }\n\n                postcodeElement.warn(null);\n                validationResult = postcodeValidator.validate(postcodeElement.value(), countryId);\n                // postcodeElement.warn(null);\n\n                if (!validationResult) {\n                    warnMessage = $t('Provided Zip/Postal Code seems to be invalid.');\n\n                    if (postcodeValidator.validatedPostCodeExample.length) {\n                        warnMessage += $t(' Example: ') + postcodeValidator.validatedPostCodeExample.join('; ') + '. ';\n                    }\n                    warnMessage += $t('If you believe it is the right one you can ignore this notice.');\n                    postcodeElement.warn(warnMessage);\n                }\n\n                return validationResult;\n            },\n\n            /**\n             * Convert form data to quote address and validate fields for shipping rates\n             */\n            validateFields: function () {\n                var addressFlat = addressConverter.formDataProviderToFlatData(\n                    this.collectObservedData(),\n                    'shippingAddress'\n                    ),\n                    address;\n\n                if (this.validateAddressData(addressFlat) && !quote.shippingAddress().customerAddressId) {\n                    addressFlat = $.extend(true, {}, quote.shippingAddress(), addressFlat);\n                    address = addressConverter.formAddressDataToQuoteAddress(addressFlat);\n                    selectShippingAddress(address);\n                }\n            },\n\n            /**\n             * Collect observed fields data to object\n             *\n             * @returns {*}\n             */\n            collectObservedData: function () {\n                var observedValues = {};\n\n                $.each(observedElements, function (index, field) {\n                    observedValues[field.dataScope] = field.value();\n                });\n\n                return observedValues;\n            }\n        };\n    }\n);\n","IWD_Opc/js/model/set-payment-information-mixin.js":"define([\n    'jquery',\n    'mage/utils/wrapper',\n    'IWD_Opc/js/model/comment-assigner',\n    'IWD_Opc/js/model/subscribe-assigner'\n], function ($, wrapper, commentAssigner, subscribeAssigner) {\n    'use strict';\n\n    return function (placeOrderAction) {\n\n        return wrapper.wrap(placeOrderAction, function (originalAction, messageContainer, paymentData) {\n            commentAssigner(paymentData);\n            subscribeAssigner(paymentData);\n\n            return originalAction(messageContainer, paymentData);\n        });\n    };\n});\n","IWD_Opc/js/model/comment-assigner.js":"define([\n    'jquery',\n    'IWD_Opc/js/model/quote',\n    'IWD_Opc/js/checkout-data'\n], function ($, quote, checkoutData) {\n    'use strict';\n\n    return function (paymentData) {\n        if (!quote.isShowComment()) {\n            return;\n        }\n\n        if (paymentData['extension_attributes'] === undefined) {\n            paymentData['extension_attributes'] = {};\n        }\n\n        paymentData['extension_attributes']['comment'] = checkoutData.getComment();\n    };\n});\n","IWD_Opc/js/model/payment-service.js":"define(\n    [\n        'underscore',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/payment/method-list',\n        'Magento_Checkout/js/action/select-payment-method'\n    ],\n    function (_, quote, methodList, selectPaymentMethod) {\n        'use strict';\n        var freeMethodCode = 'free';\n\n        return {\n            isFreeAvailable: false,\n            /**\n             * Populate the list of payment methods\n             * @param {Array} methods\n             */\n            setPaymentMethods: function (methods) {\n                var self = this,\n                    freeMethod;\n                if (quote.isRestrictPaymentEnable()) {\n                    var customerGroupId = quote.getCustomerGroupId().toString();\n                    var restrictedPaymentMethods = quote.getRestrictedPaymentMethods();\n                    if (customerGroupId && restrictedPaymentMethods) {\n                        methods = _.filter(methods, function (method) {\n                            var isAvailable = false;\n                            if (typeof(restrictedPaymentMethods[method.method]) !== 'undefined') {\n                                if (restrictedPaymentMethods[method.method].indexOf(customerGroupId) !== -1) {\n                                    isAvailable = true;\n                                }\n                            }\n\n                            return isAvailable;\n                        });\n                    }\n                }\n\n                freeMethod = _.find(methods, function (method) {\n                    return method.method === freeMethodCode;\n                });\n                this.isFreeAvailable = !!freeMethod;\n\n                if (self.isFreeAvailable && freeMethod && quote.totals().grand_total <= 0) {\n                    methods.splice(0, methods.length, freeMethod);\n                }\n\n                methodList(methods);\n            },\n            /**\n             * Get the list of available payment methods.\n             * @returns {Array}\n             */\n            getAvailablePaymentMethods: function () {\n                var methods = [],\n                    self = this;\n                _.each(methodList(), function (method) {\n                    if (self.isFreeAvailable && (\n                        quote.totals().grand_total <= 0 && method.method === freeMethodCode ||\n                        quote.totals().grand_total > 0 && method.method !== freeMethodCode\n                    ) || !self.isFreeAvailable\n                    ) {\n                        methods.push(method);\n                    }\n                });\n                if (methods.length === 1 && methods[0].method === \"free\") {\n                    var selectObject = document.getElementById(\"iwd_opc_payment_method_select\");\n                    if (selectObject != null) {\n                        for (var i = 0; i < selectObject.length; i++) {\n                            if (selectObject.options[i].value.indexOf('braintree_cc_vault') >= 0)\n                                selectObject.remove(i);\n                        }\n                    }\n                }\n                var code = {};\n                jQuery(\"#iwd_opc_payment_method_select > option\").each(function () {\n                    if (code[this.text]) {\n                        jQuery(this).remove();\n                    } else {\n                        code[this.text] = this.value;\n                    }\n                });\n                return methods;\n            }\n        };\n    }\n);\n","IWD_Opc/js/model/shipping-rate-service.js":"define(\n    [\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/shipping-rate-processor/new-address',\n        'Magento_Checkout/js/model/shipping-rate-processor/customer-address',\n        'Magento_Checkout/js/checkout-data'\n    ],\n    function (quote, defaultProcessor, customerAddressProcessor, checkoutData) {\n        'use strict';\n\n        var processors = [];\n        processors.default = defaultProcessor;\n        processors['customer-address'] = customerAddressProcessor;\n\n        quote.shippingAddress.subscribe(function () {\n            if (checkoutData.getNeedEstimateShippingRates()) {\n                var type = quote.shippingAddress().getType();\n                var address = quote.shippingAddress();\n\n                if (processors[type]) {\n                    processors[type].getRates(address);\n                } else {\n                    processors.default.getRates(address);\n                }\n            }\n        });\n\n        return {\n            registerProcessor: function (type, processor) {\n                processors[type] = processor;\n            }\n        }\n    }\n);\n","IWD_Opc/js/model/agreements-assigner.js":"define([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    var agreementsConfig = window.checkoutConfig.checkoutAgreements;\n\n    /** Override default place order action and add agreement_ids to request */\n    return function (paymentData) {\n        var agreementForm,\n            agreementData,\n            agreementIds;\n\n        if (!agreementsConfig.isEnabled) {\n            return;\n        }\n\n        agreementForm = $('.iwd_opc_payment_column div[data-role=checkout-agreements] input');\n        agreementData = agreementForm.serializeArray();\n        agreementIds = [];\n\n        agreementData.forEach(function (item) {\n            agreementIds.push(item.value);\n        });\n\n        if (paymentData['extension_attributes'] === undefined) {\n            paymentData['extension_attributes'] = {};\n        }\n\n        paymentData['extension_attributes']['agreement_ids'] = agreementIds;\n    };\n});\n","IWD_Opc/js/model/shipping/shipping-information-validator.js":"define(\n    [\n        'jquery',\n        'uiRegistry'\n    ],\n    function ($, registry) {\n        'use strict';\n\n        return {\n            validate: function () {\n                var shippingAddress = registry.get('checkout.steps.shipping-step.shippingAddress');\n                shippingAddress.canHideErrors = false;\n                return shippingAddress.validateShippingInformation(true);\n            }\n        };\n    }\n);\n","IWD_Opc/js/model/shipping-save-processor/default.js":"define(\n    [\n        'ko',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Checkout/js/model/resource-url-manager',\n        'mage/storage',\n        'Magento_Checkout/js/model/payment-service',\n        'Magento_Checkout/js/model/payment/method-converter',\n        'Magento_Checkout/js/model/error-processor',\n        'Magento_Checkout/js/model/full-screen-loader',\n        'Magento_Checkout/js/action/select-billing-address'\n    ],\n    function (\n        ko,\n        quote,\n        resourceUrlManager,\n        storage,\n        paymentService,\n        methodConverter,\n        errorProcessor,\n        fullScreenLoader,\n        selectBillingAddressAction\n    ) {\n        'use strict';\n\n        return {\n            saveShippingInformation: function () {\n                var payload;\n\n                payload = {\n                    addressInformation: {\n                        shipping_address: quote.shippingAddress(),\n                        billing_address: quote.billingAddress(),\n                        shipping_method_code: quote.shippingMethod().method_code,\n                        shipping_carrier_code: quote.shippingMethod().carrier_code\n                    }\n                };\n\n                return storage.post(\n                    resourceUrlManager.getUrlForSetShippingInformation(quote),\n                    JSON.stringify(payload)\n                ).done(\n                    function (response) {\n                        quote.setTotals(response.totals);\n                        paymentService.setPaymentMethods(methodConverter(response.payment_methods));\n                    }\n                ).fail(\n                    function (response) {\n                        errorProcessor.process(response);\n                    }\n                );\n            }\n        };\n    }\n);\n","IWD_Opc/js/model/payment/payment-method-validator.js":"define(\n    [\n        'jquery',\n        'uiRegistry'\n    ],\n    function ($, registry) {\n        'use strict';\n\n        return {\n            validate: function () {\n                var paymentMethodSelected = $('#co-payment-form').validate({\n                    errorClass: 'mage-error',\n                    errorElement: 'div',\n                    meta: 'validate'\n                }).element($('#iwd_opc_payment_method_select'));\n                var paymentMethodFormValid = true;\n                if (paymentMethodSelected) {\n                    var activeForm = $('#co-payment-form').find('.payment-method._active form:not(.co-billing-form)').first();\n                    if (activeForm.length) {\n                        activeForm.validate({\n                            errorClass: 'mage-error',\n                            errorElement: 'div',\n                            meta: 'validate'\n                        });\n                        activeForm.validation();\n                        paymentMethodFormValid = activeForm.validation('isValid');\n                    }\n                }\n\n                return paymentMethodSelected && paymentMethodFormValid;\n            }\n        };\n    }\n);\n","IWD_Opc/js/model/payment/is-loading.js":"define([\n    'ko'\n], function (ko) {\n    'use strict';\n\n    return {\n        isLoading: ko.observable(false)\n    };\n});\n","IWD_Opc/js/model/login/messageList.js":"define(\n    [\n        'Magento_Ui/js/model/messages'\n    ], function (Messages) {\n        'use strict';\n        return new Messages();\n    }\n);\n","IWD_Opc/js/model/billing/address-validator.js":"define(\n    [\n        'jquery',\n        'uiRegistry',\n        'Magento_Checkout/js/model/quote'\n    ],\n    function ($, registry, quote) {\n        'use strict';\n\n        return {\n            validate: function () {\n                var billingAddress;\n                if (quote.isVirtual()) {\n                    billingAddress = registry.get('checkout.steps.billing-step-virtual.billing-address-form');\n                } else {\n                    billingAddress = registry.get('checkout.steps.billing-step.payment.billing-address-form');\n                    if (!billingAddress && quote.paymentMethod()) {\n                        billingAddress = registry.get('checkout.steps.billing-step.payment.payments-list.' + quote.paymentMethod().method + '-form');\n                    }\n                }\n\n                if (!billingAddress || billingAddress.isAddressSameAsShipping() || !billingAddress.isAddressFormVisible()) {\n                    return true;\n                }\n\n                billingAddress.canHideErrors = false;\n                return billingAddress.validateFields(true);\n            }\n        };\n    }\n);\n","Magento_Payment/cc-type.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* @api */\ndefine([\n    'jquery',\n    'jquery/ui'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.creditCardType', {\n        options: {\n            typeCodes: ['SS', 'SM', 'SO'] // Type codes for Switch/Maestro/Solo credit cards.\n        },\n\n        /**\n         * Bind change handler to select element and trigger the event to show/hide\n         * the Switch/Maestro or Solo credit card type container for those credit card types.\n         * @private\n         */\n        _create: function () {\n            this.element.on('change', $.proxy(this._toggleCardType, this)).trigger('change');\n        },\n\n        /**\n         * Toggle the Switch/Maestro and Solo credit card type container depending on which\n         * credit card type is selected.\n         * @private\n         */\n        _toggleCardType: function () {\n            $(this.options.creditCardTypeContainer)\n                .toggle($.inArray(this.element.val(), this.options.typeCodes) !== -1);\n        }\n    });\n\n    return $.mage.creditCardType;\n});\n","Magento_Payment/transparent.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* @api */\ndefine([\n    'jquery',\n    'mage/template',\n    'Magento_Ui/js/modal/alert',\n    'jquery/ui',\n    'Magento_Payment/js/model/credit-card-validation/validator',\n    'Magento_Checkout/js/model/full-screen-loader'\n], function ($, mageTemplate, alert, ui, validator, fullScreenLoader) {\n    'use strict';\n\n    $.widget('mage.transparent', {\n        options: {\n            context: null,\n            placeOrderSelector: '[data-role=\"review-save\"]',\n            paymentFormSelector: '#co-payment-form',\n            updateSelectorPrefix: '#checkout-',\n            updateSelectorSuffix: '-load',\n            hiddenFormTmpl:\n                '<form target=\"<%= data.target %>\" action=\"<%= data.action %>\" method=\"POST\" ' +\n                'hidden enctype=\"application/x-www-form-urlencoded\" class=\"no-display\">' +\n                    '<% _.each(data.inputs, function(val, key){ %>' +\n                    '<input value=\"<%= val %>\" name=\"<%= key %>\" type=\"hidden\">' +\n                    '<% }); %>' +\n                '</form>',\n            reviewAgreementForm: '#checkout-agreements',\n            cgiUrl: null,\n            orderSaveUrl: null,\n            controller: null,\n            gateway: null,\n            dateDelim: null,\n            cardFieldsMap: null,\n            expireYearLength: 2\n        },\n\n        /**\n         * {Function}\n         * @private\n         */\n        _create: function () {\n            this.hiddenFormTmpl = mageTemplate(this.options.hiddenFormTmpl);\n\n            if (this.options.context) {\n                this.options.context.setPlaceOrderHandler($.proxy(this._orderSave, this));\n                this.options.context.setValidateHandler($.proxy(this._validateHandler, this));\n            } else {\n                $(this.options.placeOrderSelector)\n                    .off('click')\n                    .on('click', $.proxy(this._placeOrderHandler, this));\n            }\n\n            this.element.validation();\n            $('[data-container=\"' + this.options.gateway + '-cc-number\"]').on('focusout', function () {\n                $(this).valid();\n            });\n        },\n\n        /**\n         * handler for credit card validation\n         * @return {Boolean}\n         * @private\n         */\n        _validateHandler: function () {\n            return this.element.validation && this.element.validation('isValid');\n        },\n\n        /**\n         * handler for Place Order button to call gateway for credit card validation\n         * @return {Boolean}\n         * @private\n         */\n        _placeOrderHandler: function () {\n            if (this._validateHandler()) {\n                this._orderSave();\n            }\n\n            return false;\n        },\n\n        /**\n         * Save order and generate post data for gateway call\n         * @private\n         */\n        _orderSave: function () {\n            var postData = $(this.options.paymentFormSelector).serialize();\n\n            if ($(this.options.reviewAgreementForm).length) {\n                postData += '&' + $(this.options.reviewAgreementForm).serialize();\n            }\n            postData += '&controller=' + this.options.controller;\n            postData += '&cc_type=' + this.element.find(\n                '[data-container=\"' + this.options.gateway + '-cc-type\"]'\n            ).val();\n\n            return $.ajax({\n                url: this.options.orderSaveUrl,\n                type: 'post',\n                context: this,\n                data: postData,\n                dataType: 'json',\n\n                /**\n                 * {Function}\n                 */\n                beforeSend: function () {\n                    fullScreenLoader.startLoader();\n                },\n\n                /**\n                 * {Function}\n                 */\n                success: function (response) {\n                    var preparedData,\n                        msg,\n\n                        /**\n                         * {Function}\n                         */\n                        alertActionHandler = function () {\n                            // default action\n                        };\n\n                    if (response.success && response[this.options.gateway]) {\n                        preparedData = this._preparePaymentData(\n                            response[this.options.gateway].fields,\n                            this.options.cardFieldsMap\n                        );\n                        this._postPaymentToGateway(preparedData);\n                    } else {\n                        fullScreenLoader.stopLoader(true);\n\n                        msg = response['error_messages'];\n\n                        if (this.options.context) {\n                            this.options.context.clearTimeout().fail();\n                            alertActionHandler = this.options.context.alertActionHandler;\n                        }\n\n                        if (typeof msg === 'object') {\n                            msg = msg.join('\\n');\n                        }\n\n                        if (msg) {\n                            alert(\n                                {\n                                    content: msg,\n                                    actions: {\n\n                                        /**\n                                         * {Function}\n                                         */\n                                        always: alertActionHandler\n                                    }\n                                }\n                            );\n                        }\n                    }\n                }.bind(this)\n            });\n        },\n\n        /**\n         * Post data to gateway for credit card validation\n         * @param {Object} data\n         * @private\n         */\n        _postPaymentToGateway: function (data) {\n            var tmpl,\n                iframeSelector = '[data-container=\"' + this.options.gateway + '-transparent-iframe\"]';\n\n            tmpl = this.hiddenFormTmpl({\n                data: {\n                    target: $(iframeSelector).attr('name'),\n                    action: this.options.cgiUrl,\n                    inputs: data\n                }\n            });\n            $(tmpl).appendTo($(iframeSelector)).submit();\n        },\n\n        /**\n         * Add credit card fields to post data for gateway\n         * @param {Object} data\n         * @param {Object} ccfields\n         * @private\n         */\n        _preparePaymentData: function (data, ccfields) {\n            var preparedata;\n\n            if (this.element.find('[data-container=\"' + this.options.gateway + '-cc-cvv\"]').length) {\n                data[ccfields.cccvv] = this.element.find(\n                    '[data-container=\"' + this.options.gateway + '-cc-cvv\"]'\n                ).val();\n            }\n            preparedata = this._prepareExpDate();\n            data[ccfields.ccexpdate] = preparedata.month + this.options.dateDelim + preparedata.year;\n            data[ccfields.ccnum] = this.element.find(\n                '[data-container=\"' + this.options.gateway + '-cc-number\"]'\n            ).val();\n\n            return data;\n        },\n\n        /**\n         * Grab Month and Year into one\n         * @returns {Object}\n         * @private\n         */\n        _prepareExpDate: function () {\n            var year = this.element.find('[data-container=\"' + this.options.gateway + '-cc-year\"]').val(),\n                month = parseInt(\n                    this.element.find('[data-container=\"' + this.options.gateway + '-cc-month\"]').val(),\n                    10\n                );\n\n            if (year.length > this.options.expireYearLength) {\n                year = year.substring(year.length - this.options.expireYearLength);\n            }\n\n            if (month < 10) {\n                month = '0' + month;\n            }\n\n            return {\n                month: month, year: year\n            };\n        }\n    });\n\n    return $.mage.transparent;\n});\n","Magento_Payment/js/view/payment/cc-form.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* @api */\ndefine([\n    'underscore',\n    'Magento_Checkout/js/view/payment/default',\n    'Magento_Payment/js/model/credit-card-validation/credit-card-data',\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator',\n    'mage/translate'\n], function (_, Component, creditCardData, cardNumberValidator, $t) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            creditCardType: '',\n            creditCardExpYear: '',\n            creditCardExpMonth: '',\n            creditCardNumber: '',\n            creditCardSsStartMonth: '',\n            creditCardSsStartYear: '',\n            creditCardSsIssue: '',\n            creditCardVerificationNumber: '',\n            selectedCardType: null\n        },\n\n        /** @inheritdoc */\n        initObservable: function () {\n            this._super()\n                .observe([\n                    'creditCardType',\n                    'creditCardExpYear',\n                    'creditCardExpMonth',\n                    'creditCardNumber',\n                    'creditCardVerificationNumber',\n                    'creditCardSsStartMonth',\n                    'creditCardSsStartYear',\n                    'creditCardSsIssue',\n                    'selectedCardType'\n                ]);\n\n            return this;\n        },\n\n        /**\n         * Init component\n         */\n        initialize: function () {\n            var self = this;\n\n            this._super();\n\n            //Set credit card number to credit card data object\n            this.creditCardNumber.subscribe(function (value) {\n                var result;\n\n                self.selectedCardType(null);\n\n                if (value === '' || value === null) {\n                    return false;\n                }\n                result = cardNumberValidator(value);\n\n                if (!result.isPotentiallyValid && !result.isValid) {\n                    return false;\n                }\n\n                if (result.card !== null) {\n                    self.selectedCardType(result.card.type);\n                    creditCardData.creditCard = result.card;\n                }\n\n                if (result.isValid) {\n                    creditCardData.creditCardNumber = value;\n                    self.creditCardType(result.card.type);\n                }\n            });\n\n            //Set expiration year to credit card data object\n            this.creditCardExpYear.subscribe(function (value) {\n                creditCardData.expirationYear = value;\n            });\n\n            //Set expiration month to credit card data object\n            this.creditCardExpMonth.subscribe(function (value) {\n                creditCardData.expirationMonth = value;\n            });\n\n            //Set cvv code to credit card data object\n            this.creditCardVerificationNumber.subscribe(function (value) {\n                creditCardData.cvvCode = value;\n            });\n        },\n\n        /**\n         * Get code\n         * @returns {String}\n         */\n        getCode: function () {\n            return 'cc';\n        },\n\n        /**\n         * Get data\n         * @returns {Object}\n         */\n        getData: function () {\n            return {\n                'method': this.item.method,\n                'additional_data': {\n                    'cc_cid': this.creditCardVerificationNumber(),\n                    'cc_ss_start_month': this.creditCardSsStartMonth(),\n                    'cc_ss_start_year': this.creditCardSsStartYear(),\n                    'cc_ss_issue': this.creditCardSsIssue(),\n                    'cc_type': this.creditCardType(),\n                    'cc_exp_year': this.creditCardExpYear(),\n                    'cc_exp_month': this.creditCardExpMonth(),\n                    'cc_number': this.creditCardNumber()\n                }\n            };\n        },\n\n        /**\n         * Get list of available credit card types\n         * @returns {Object}\n         */\n        getCcAvailableTypes: function () {\n            return window.checkoutConfig.payment.ccform.availableTypes[this.getCode()];\n        },\n\n        /**\n         * Get payment icons\n         * @param {String} type\n         * @returns {Boolean}\n         */\n        getIcons: function (type) {\n            return window.checkoutConfig.payment.ccform.icons.hasOwnProperty(type) ?\n                window.checkoutConfig.payment.ccform.icons[type]\n                : false;\n        },\n\n        /**\n         * Get list of months\n         * @returns {Object}\n         */\n        getCcMonths: function () {\n            return window.checkoutConfig.payment.ccform.months[this.getCode()];\n        },\n\n        /**\n         * Get list of years\n         * @returns {Object}\n         */\n        getCcYears: function () {\n            return window.checkoutConfig.payment.ccform.years[this.getCode()];\n        },\n\n        /**\n         * Check if current payment has verification\n         * @returns {Boolean}\n         */\n        hasVerification: function () {\n            return window.checkoutConfig.payment.ccform.hasVerification[this.getCode()];\n        },\n\n        /**\n         * @deprecated\n         * @returns {Boolean}\n         */\n        hasSsCardType: function () {\n            return window.checkoutConfig.payment.ccform.hasSsCardType[this.getCode()];\n        },\n\n        /**\n         * Get image url for CVV\n         * @returns {String}\n         */\n        getCvvImageUrl: function () {\n            return window.checkoutConfig.payment.ccform.cvvImageUrl[this.getCode()];\n        },\n\n        /**\n         * Get image for CVV\n         * @returns {String}\n         */\n        getCvvImageHtml: function () {\n            return '<img src=\"' + this.getCvvImageUrl() +\n                '\" alt=\"' + $t('Card Verification Number Visual Reference') +\n                '\" title=\"' + $t('Card Verification Number Visual Reference') +\n                '\" />';\n        },\n\n        /**\n         * @deprecated\n         * @returns {Object}\n         */\n        getSsStartYears: function () {\n            return window.checkoutConfig.payment.ccform.ssStartYears[this.getCode()];\n        },\n\n        /**\n         * Get list of available credit card types values\n         * @returns {Object}\n         */\n        getCcAvailableTypesValues: function () {\n            return _.map(this.getCcAvailableTypes(), function (value, key) {\n                return {\n                    'value': key,\n                    'type': value\n                };\n            });\n        },\n\n        /**\n         * Get list of available month values\n         * @returns {Object}\n         */\n        getCcMonthsValues: function () {\n            return _.map(this.getCcMonths(), function (value, key) {\n                return {\n                    'value': key,\n                    'month': value\n                };\n            });\n        },\n\n        /**\n         * Get list of available year values\n         * @returns {Object}\n         */\n        getCcYearsValues: function () {\n            return _.map(this.getCcYears(), function (value, key) {\n                return {\n                    'value': key,\n                    'year': value\n                };\n            });\n        },\n\n        /**\n         * @deprecated\n         * @returns {Object}\n         */\n        getSsStartYearsValues: function () {\n            return _.map(this.getSsStartYears(), function (value, key) {\n                return {\n                    'value': key,\n                    'year': value\n                };\n            });\n        },\n\n        /**\n         * Is legend available to display\n         * @returns {Boolean}\n         */\n        isShowLegend: function () {\n            return false;\n        },\n\n        /**\n         * Get available credit card type by code\n         * @param {String} code\n         * @returns {String}\n         */\n        getCcTypeTitleByCode: function (code) {\n            var title = '',\n                keyValue = 'value',\n                keyType = 'type';\n\n            _.each(this.getCcAvailableTypesValues(), function (value) {\n                if (value[keyValue] === code) {\n                    title = value[keyType];\n                }\n            });\n\n            return title;\n        },\n\n        /**\n         * Prepare credit card number to output\n         * @param {String} number\n         * @returns {String}\n         */\n        formatDisplayCcNumber: function (number) {\n            return 'xxxx-' + number.substr(-4);\n        },\n\n        /**\n         * Get credit card details\n         * @returns {Array}\n         */\n        getInfo: function () {\n            return [\n                {\n                    'name': 'Credit Card Type', value: this.getCcTypeTitleByCode(this.creditCardType())\n                },\n                {\n                    'name': 'Credit Card Number', value: this.formatDisplayCcNumber(this.creditCardNumber())\n                }\n            ];\n        }\n    });\n});\n","Magento_Payment/js/view/payment/payments.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* @api */\ndefine([\n    'uiComponent',\n    'Magento_Checkout/js/model/payment/renderer-list'\n], function (Component, rendererList) {\n    'use strict';\n\n    rendererList.push(\n        {\n            type: 'free',\n            component: 'Magento_Payment/js/view/payment/method-renderer/free-method'\n        }\n    );\n\n    /** Add view logic here if needed */\n    return Component.extend({});\n});\n","Magento_Payment/js/view/payment/iframe.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* @api */\ndefine([\n    'jquery',\n    'Magento_Payment/js/view/payment/cc-form',\n    'Magento_Ui/js/model/messageList',\n    'mage/translate',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'Magento_Checkout/js/action/set-payment-information',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_Ui/js/modal/alert'\n], function (\n    $,\n    Component,\n    messageList,\n    $t,\n    fullScreenLoader,\n    setPaymentInformationAction,\n    additionalValidators,\n    alert\n) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Payment/payment/iframe',\n            timeoutId: null,\n            timeoutMessage: 'Sorry, but something went wrong.'\n        },\n\n        /**\n         * @returns {String}\n         */\n        getSource: function () {\n            return window.checkoutConfig.payment.iframe.source[this.getCode()];\n        },\n\n        /**\n         * @returns {String}\n         */\n        getControllerName: function () {\n            return window.checkoutConfig.payment.iframe.controllerName[this.getCode()];\n        },\n\n        /**\n         * @returns {String}\n         */\n        getPlaceOrderUrl: function () {\n            return window.checkoutConfig.payment.iframe.placeOrderUrl[this.getCode()];\n        },\n\n        /**\n         * @returns {String}\n         */\n        getCgiUrl: function () {\n            return window.checkoutConfig.payment.iframe.cgiUrl[this.getCode()];\n        },\n\n        /**\n         * @returns {String}\n         */\n        getSaveOrderUrl: function () {\n            return window.checkoutConfig.payment.iframe.saveOrderUrl[this.getCode()];\n        },\n\n        /**\n         * @returns {String}\n         */\n        getDateDelim: function () {\n            return window.checkoutConfig.payment.iframe.dateDelim[this.getCode()];\n        },\n\n        /**\n         * @returns {String}\n         */\n        getCardFieldsMap: function () {\n            return window.checkoutConfig.payment.iframe.cardFieldsMap[this.getCode()];\n        },\n\n        /**\n         * @returns {String}\n         */\n        getExpireYearLength: function () {\n            return window.checkoutConfig.payment.iframe.expireYearLength[this.getCode()];\n        },\n\n        /**\n         * @param {Object} parent\n         * @returns {Function}\n         */\n        originalPlaceOrder: function (parent) {\n            return parent.placeOrder.bind(parent);\n        },\n\n        /**\n         * @returns {Number}\n         */\n        getTimeoutTime: function () {\n            return window.checkoutConfig.payment.iframe.timeoutTime[this.getCode()];\n        },\n\n        /**\n         * @returns {String}\n         */\n        getTimeoutMessage: function () {\n            return $t(this.timeoutMessage);\n        },\n\n        /**\n         * @override\n         */\n        placeOrder: function () {\n            if (this.validateHandler() && additionalValidators.validate()) {\n\n                fullScreenLoader.startLoader();\n\n                this.isPlaceOrderActionAllowed(false);\n\n                $.when(\n                    setPaymentInformationAction(\n                        this.messageContainer,\n                        {\n                            method: this.getCode()\n                        }\n                    )\n                ).done(this.done.bind(this))\n                    .fail(this.fail.bind(this));\n\n                this.initTimeoutHandler();\n            }\n        },\n\n        /**\n         * {Function}\n         */\n        initTimeoutHandler: function () {\n            this.timeoutId = setTimeout(\n                this.timeoutHandler.bind(this),\n                this.getTimeoutTime()\n            );\n\n            $(window).off('clearTimeout')\n                .on('clearTimeout', this.clearTimeout.bind(this));\n        },\n\n        /**\n         * {Function}\n         */\n        clearTimeout: function () {\n            clearTimeout(this.timeoutId);\n            this.fail();\n\n            return this;\n        },\n\n        /**\n         * {Function}\n         */\n        timeoutHandler: function () {\n            this.clearTimeout();\n\n            alert(\n                {\n                    content: this.getTimeoutMessage(),\n                    actions: {\n\n                        /**\n                         * {Function}\n                         */\n                        always: this.alertActionHandler.bind(this)\n                    }\n                }\n            );\n\n            this.fail();\n        },\n\n        /**\n         * {Function}\n         */\n        alertActionHandler: function () {\n            fullScreenLoader.startLoader();\n            window.location.reload();\n        },\n\n        /**\n         * {Function}\n         */\n        fail: function () {\n            fullScreenLoader.stopLoader();\n            this.isPlaceOrderActionAllowed(true);\n\n            return this;\n        },\n\n        /**\n         * {Function}\n         */\n        done: function () {\n            this.placeOrderHandler().fail(function () {\n                fullScreenLoader.stopLoader();\n            });\n\n            return this;\n        }\n    });\n});\n","Magento_Payment/js/view/payment/method-renderer/free-method.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* @api */\ndefine([\n    'Magento_Checkout/js/view/payment/default',\n    'Magento_Checkout/js/model/quote'\n], function (Component, quote) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Payment/payment/free'\n        },\n\n        /** Returns is method available */\n        isAvailable: function () {\n            return quote.totals()['grand_total'] <= 0;\n        }\n    });\n});\n","Magento_Payment/js/model/credit-card-validation/credit-card-data.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* @api */\ndefine([], function () {\n    'use strict';\n\n    return {\n        creditCard: null,\n        creditCardNumber: null,\n        expirationMonth: null,\n        expirationYear: null,\n        cvvCode: null\n    };\n});\n","Magento_Payment/js/model/credit-card-validation/validator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* @api */\n(function (factory) {\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define([\n            'jquery',\n            'Magento_Payment/js/model/credit-card-validation/cvv-validator',\n            'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator',\n            'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator',\n            'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator',\n            'Magento_Payment/js/model/credit-card-validation/credit-card-data',\n            'mage/translate'\n        ], factory);\n    } else {\n        factory(jQuery);\n    }\n}(function ($, cvvValidator, creditCardNumberValidator, yearValidator, monthValidator, creditCardData) {\n    'use strict';\n\n    $.each({\n        'validate-card-type': [\n            function (number, item, allowedTypes) {\n                var cardInfo,\n                    i,\n                    l;\n\n                if (!creditCardNumberValidator(number).isValid) {\n                    return false;\n                }\n\n                cardInfo = creditCardNumberValidator(number).card;\n\n                for (i = 0, l = allowedTypes.length; i < l; i++) {\n                    if (cardInfo.title == allowedTypes[i].type) { //eslint-disable-line eqeqeq\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n            $.mage.__('Please enter a valid credit card type number.')\n        ],\n        'validate-card-number': [\n\n            /**\n             * Validate credit card number based on mod 10\n             *\n             * @param {*} number - credit card number\n             * @return {Boolean}\n             */\n            function (number) {\n                return creditCardNumberValidator(number).isValid;\n            },\n            $.mage.__('Please enter a valid credit card number.')\n        ],\n        'validate-card-date': [\n\n            /**\n             * Validate credit card expiration month\n             *\n             * @param {String} date - month\n             * @return {Boolean}\n             */\n            function (date) {\n                return monthValidator(date).isValid;\n            },\n            $.mage.__('Incorrect credit card expiration month.')\n        ],\n        'validate-card-cvv': [\n\n            /**\n             * Validate cvv\n             *\n             * @param {String} cvv - card verification value\n             * @return {Boolean}\n             */\n            function (cvv) {\n                var maxLength = creditCardData.creditCard ? creditCardData.creditCard.code.size : 3;\n\n                return cvvValidator(cvv, maxLength).isValid;\n            },\n            $.mage.__('Please enter a valid credit card verification number.')\n        ],\n        'validate-card-year': [\n\n            /**\n             * Validate credit card expiration year\n             *\n             * @param {String} date - year\n             * @return {Boolean}\n             */\n            function (date) {\n                return yearValidator(date).isValid;\n            },\n            $.mage.__('Incorrect credit card expiration year.')\n        ]\n\n    }, function (i, rule) {\n        rule.unshift(i);\n        $.validator.addMethod.apply($.validator, rule);\n    });\n}));\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* @api */\ndefine([\n    'mageUtils',\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/luhn10-validator',\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/credit-card-type'\n], function (utils, luhn10, creditCardTypes) {\n    'use strict';\n\n    /**\n     * @param {*} card\n     * @param {*} isPotentiallyValid\n     * @param {*} isValid\n     * @return {Object}\n     */\n    function resultWrapper(card, isPotentiallyValid, isValid) {\n        return {\n            card: card,\n            isValid: isValid,\n            isPotentiallyValid: isPotentiallyValid\n        };\n    }\n\n    return function (value) {\n        var potentialTypes,\n            cardType,\n            valid,\n            i,\n            maxLength;\n\n        if (utils.isEmpty(value)) {\n            return resultWrapper(null, false, false);\n        }\n\n        value = value.replace(/\\-|\\s/g, '');\n\n        if (!/^\\d*$/.test(value)) {\n            return resultWrapper(null, false, false);\n        }\n\n        potentialTypes = creditCardTypes.getCardTypes(value);\n\n        if (potentialTypes.length === 0) {\n            return resultWrapper(null, false, false);\n        } else if (potentialTypes.length !== 1) {\n            return resultWrapper(null, true, false);\n        }\n\n        cardType = potentialTypes[0];\n\n        if (cardType.type === 'unionpay') {  // UnionPay is not Luhn 10 compliant\n            valid = true;\n        } else {\n            valid = luhn10(value);\n        }\n\n        for (i = 0; i < cardType.lengths.length; i++) {\n            if (cardType.lengths[i] === value.length) {\n                return resultWrapper(cardType, valid, valid);\n            }\n        }\n\n        maxLength = Math.max.apply(null, cardType.lengths);\n\n        if (value.length < maxLength) {\n            return resultWrapper(cardType, true, false);\n        }\n\n        return resultWrapper(cardType, false, false);\n    };\n});\n","Magento_Payment/js/model/credit-card-validation/cvv-validator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* @api */\ndefine([], function () {\n    'use strict';\n\n    /**\n     * @param {*} isValid\n     * @param {*} isPotentiallyValid\n     * @return {Object}\n     */\n    function resultWrapper(isValid, isPotentiallyValid) {\n        return {\n            isValid: isValid,\n            isPotentiallyValid: isPotentiallyValid\n        };\n    }\n\n    /**\n     * CVV number validation.\n     * Validate digit count fot CVV code.\n     *\n     * @param {*} value\n     * @param {Number} maxLength\n     * @return {Object}\n     */\n    return function (value, maxLength) {\n        var DEFAULT_LENGTH = 3;\n\n        maxLength = maxLength || DEFAULT_LENGTH;\n\n        if (!/^\\d*$/.test(value)) {\n            return resultWrapper(false, false);\n        }\n\n        if (value.length === maxLength) {\n            return resultWrapper(true, true);\n        }\n\n        if (value.length < maxLength) {\n            return resultWrapper(false, true);\n        }\n\n        if (value.length > maxLength) {\n            return resultWrapper(false, false);\n        }\n    };\n});\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* @api */\ndefine([\n    'mageUtils',\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/parse-date',\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator',\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator'\n], function (utils, parseDate, expirationMonth, expirationYear) {\n    'use strict';\n\n    /**\n     * @param {*} isValid\n     * @param {*} isPotentiallyValid\n     * @param {*} month\n     * @param {*} year\n     * @return {Object}\n     */\n    function resultWrapper(isValid, isPotentiallyValid, month, year) {\n        return {\n            isValid: isValid,\n            isPotentiallyValid: isPotentiallyValid,\n            month: month,\n            year: year\n        };\n    }\n\n    return function (value) {\n        var date,\n            monthValid,\n            yearValid;\n\n        if (utils.isEmpty(value)) {\n            return resultWrapper(false, false, null, null);\n        }\n\n        value = value.replace(/^(\\d\\d) (\\d\\d(\\d\\d)?)$/, '$1/$2');\n        date = parseDate(value);\n        monthValid = expirationMonth(date.month);\n        yearValid = expirationYear(date.year);\n\n        if (monthValid.isValid && yearValid.isValid) {\n            return resultWrapper(true, true, date.month, date.year);\n        }\n\n        if (monthValid.isPotentiallyValid && yearValid.isPotentiallyValid) {\n            return resultWrapper(false, true, null, null);\n        }\n\n        return resultWrapper(false, false, null, null);\n    };\n});\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/credit-card-type.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* @api */\ndefine([\n    'jquery',\n    'mageUtils'\n], function ($, utils) {\n    'use strict';\n\n    var types = [\n        {\n            title: 'Visa',\n            type: 'VI',\n            pattern: '^4\\\\d*$',\n            gaps: [4, 8, 12],\n            lengths: [16],\n            code: {\n                name: 'CVV',\n                size: 3\n            }\n        },\n        {\n            title: 'MasterCard',\n            type: 'MC',\n            pattern: '^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$',\n            gaps: [4, 8, 12],\n            lengths: [16],\n            code: {\n                name: 'CVC',\n                size: 3\n            }\n        },\n        {\n            title: 'American Express',\n            type: 'AE',\n            pattern: '^3([47]\\\\d*)?$',\n            isAmex: true,\n            gaps: [4, 10],\n            lengths: [15],\n            code: {\n                name: 'CID',\n                size: 4\n            }\n        },\n        {\n            title: 'Diners',\n            type: 'DN',\n            pattern: '^(3(0[0-5]|095|6|[8-9]))\\\\d*$',\n            gaps: [4, 10],\n            lengths: [14, 16, 17, 18, 19],\n            code: {\n                name: 'CVV',\n                size: 3\n            }\n        },\n        {\n            title: 'Discover',\n            type: 'DI',\n            pattern: '^(6011(0|[2-4]|74|7[7-9]|8[6-9]|9)|6(4[4-9]|5))\\\\d*$',\n            gaps: [4, 8, 12],\n            lengths: [16, 17, 18, 19],\n            code: {\n                name: 'CID',\n                size: 3\n            }\n        },\n        {\n            title: 'JCB',\n            type: 'JCB',\n            pattern: '^35(2[8-9]|[3-8])\\\\d*$',\n            gaps: [4, 8, 12],\n            lengths: [16, 17, 18, 19],\n            code: {\n                name: 'CVV',\n                size: 3\n            }\n        },\n        {\n            title: 'UnionPay',\n            type: 'UN',\n            pattern: '^(622(1(2[6-9]|[3-9])|[3-8]|9([[0-1]|2[0-5]))|62[4-6]|628([2-8]))\\\\d*?$',\n            gaps: [4, 8, 12],\n            lengths: [16, 17, 18, 19],\n            code: {\n                name: 'CVN',\n                size: 3\n            }\n        },\n        {\n            title: 'Maestro International',\n            type: 'MI',\n            pattern: '^(5(0|[6-9])|63|67(?!59|6770|6774))\\\\d*$',\n            gaps: [4, 8, 12],\n            lengths: [12, 13, 14, 15, 16, 17, 18, 19],\n            code: {\n                name: 'CVC',\n                size: 3\n            }\n        },\n        {\n            title: 'Maestro Domestic',\n            type: 'MD',\n            pattern: '^6759(?!24|38|40|6[3-9]|70|76)|676770|676774\\\\d*$',\n            gaps: [4, 8, 12],\n            lengths: [12, 13, 14, 15, 16, 17, 18, 19],\n            code: {\n                name: 'CVC',\n                size: 3\n            }\n        }\n    ];\n\n    return {\n        /**\n         * @param {*} cardNumber\n         * @return {Array}\n         */\n        getCardTypes: function (cardNumber) {\n            var i, value,\n                result = [];\n\n            if (utils.isEmpty(cardNumber)) {\n                return result;\n            }\n\n            if (cardNumber === '') {\n                return $.extend(true, {}, types);\n            }\n\n            for (i = 0; i < types.length; i++) {\n                value = types[i];\n\n                if (new RegExp(value.pattern).test(cardNumber)) {\n                    result.push($.extend(true, {}, value));\n                }\n            }\n\n            return result;\n        }\n    };\n});\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/luhn10-validator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    /**\n     * Luhn algorithm verification\n     */\n    return function (a, b, c, d, e) {\n        for (d = +a[b = a.length - 1], e = 0; b--;) {\n            c = +a[b];\n            d += ++e % 2 ? 2 * c % 10 + (c > 4) : c;\n        }\n\n        return !(d % 10);\n    };\n});\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    /**\n     * @param {*} isValid\n     * @param {*} isPotentiallyValid\n     * @return {Object}\n     */\n    function resultWrapper(isValid, isPotentiallyValid) {\n        return {\n            isValid: isValid,\n            isPotentiallyValid: isPotentiallyValid\n        };\n    }\n\n    return function (value) {\n        var month,\n            monthValid;\n\n        if (value.replace(/\\s/g, '') === '' || value === '0') {\n            return resultWrapper(false, true);\n        }\n\n        if (!/^\\d*$/.test(value)) {\n            return resultWrapper(false, false);\n        }\n\n        if (isNaN(value)) {\n            return resultWrapper(false, false);\n        }\n\n        month = parseInt(value, 10);\n        monthValid = month > 0 && month < 13;\n\n        return resultWrapper(monthValid, monthValid);\n    };\n});\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    /**\n     * @param {*} isValid\n     * @param {*} isPotentiallyValid\n     * @return {Object}\n     */\n    function resultWrapper(isValid, isPotentiallyValid) {\n        return {\n            isValid: isValid,\n            isPotentiallyValid: isPotentiallyValid\n        };\n    }\n\n    return function (value) {\n        var currentYear = new Date().getFullYear(),\n            len = value.length,\n            valid,\n            expMaxLifetime = 19;\n\n        if (value.replace(/\\s/g, '') === '') {\n            return resultWrapper(false, true);\n        }\n\n        if (!/^\\d*$/.test(value)) {\n            return resultWrapper(false, false);\n        }\n\n        if (len !== 4) {\n            return resultWrapper(false, true);\n        }\n\n        value = parseInt(value, 10);\n        valid = value >= currentYear && value <= currentYear + expMaxLifetime;\n\n        return resultWrapper(valid, valid);\n    };\n});\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/parse-date.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    return function (value) {\n        var month, len;\n\n        if (value.match('/')) {\n            value = value.split(/\\s*\\/\\s*/g);\n\n            return {\n                month: value[0],\n                year: value.slice(1).join()\n            };\n        }\n\n        len = value[0] === '0' || value.length > 5 || value.length === 4 || value.length === 3 ? 2 : 1;\n        month = value.substr(0, len);\n\n        return {\n            month: month,\n            year: value.substr(month.length, 4)\n        };\n    };\n});\n","IWD_BluePay/js/view/payment/blue_pay.js":"/*\n * Copyright \u00a9 2018 IWD Agency - All rights reserved.\n * See LICENSE.txt bundled with this module for license details.\n */\ndefine(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/renderer-list'\n    ],\n    function (\n        Component,\n        rendererList\n    ) {\n        'use strict';\n        rendererList.push(\n            {\n                type: 'iwd_bluepay',\n                component: 'IWD_BluePay/js/view/payment/method-renderer/blue_pay'\n            }\n        );\n        /** Add view logic here if needed */\n        return Component.extend({});\n    }\n);","IWD_BluePay/js/view/payment/payment-form.js":"/*\n * Copyright \u00a9 2018 IWD Agency - All rights reserved.\n * See LICENSE.txt bundled with this module for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'underscore',\n        'Magento_Checkout/js/view/payment/default',\n        'Magento_Payment/js/model/credit-card-validation/credit-card-data',\n        'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator',\n        'Magento_Vault/js/view/payment/vault-enabler',\n        'mage/translate',\n        'jquery',\n        'jquery/ui'\n    ],\n    function (_, Component, creditCardData, cardNumberValidator, VaultEnabler, $t, $) {\n        function showHidePaymentFields() {\n            var code = 'iwd_bluepay',\n                paymentType = $(\"#\" + code + \"_payment_type\");\n            if (paymentType && paymentType.val() == 'ACH') {\n                $(\"[id^= '\" + code + \"_cc']\").hide();\n                $(\"[id^= '\" + code + \"_echeck']\").show();\n            } else {\n                $(\"[id^= '\" + code + \"_cc']\").show();\n                $(\"[id^= '\" + code + \"_echeck']\").hide();\n            }\n        }\n\n        return Component.extend({\n            defaults: {\n                creditCardType: '',\n                creditCardExpYear: '',\n                creditCardExpMonth: '',\n                creditCardNumber: '',\n                creditCardSsStartMonth: '',\n                creditCardSsStartYear: '',\n                creditCardVerificationNumber: '',\n                selectedCardType: null,\n                echeckAccountType: 'C',\n                echeckRoutingNumber: '',\n                echeckAccountName: '',\n                paymentType: 'CC',\n                hashStoredAccount: '',\n                saveInfo: true,\n                vaultEnabler: null\n            },\n\n            initObservable: function () {\n                this._super()\n                    .observe([\n                        'creditCardType',\n                        'creditCardExpYear',\n                        'creditCardExpMonth',\n                        'creditCardNumber',\n                        'creditCardVerificationNumber',\n                        'creditCardSsStartMonth',\n                        'creditCardSsStartYear',\n                        'selectedCardType',\n                        'echeckAccountType',\n                        'echeckRoutingNumber',\n                        'echeckAccountName',\n                        'paymentType',\n                        'hashStoredAccount',\n                        'saveInfo'\n                    ]);\n                return this;\n            },\n\n            initialize: function () {\n                var self = this;\n                this._super();\n\n                this.vaultEnabler = new VaultEnabler();\n                this.vaultEnabler.setPaymentCode(this.getVaultCode());\n\n                //Set credit card number to credit card data object\n                this.creditCardNumber.subscribe(function (value) {\n                    var result;\n                    self.selectedCardType(null);\n\n                    if (value == '' || value == null) {\n                        return false;\n                    }\n                    result = cardNumberValidator(value);\n\n                    if (!result.isPotentiallyValid && !result.isValid) {\n                        return false;\n                    }\n                    if (result.card !== null) {\n                        self.selectedCardType(result.card.type);\n                        creditCardData.creditCard = result.card;\n                    }\n\n                    if (result.isValid) {\n                        creditCardData.creditCardNumber = value;\n                        self.creditCardType(result.card.type);\n                    }\n                });\n\n                //Set expiration year to credit card data object\n                this.creditCardExpYear.subscribe(function (value) {\n                    creditCardData.expirationYear = value;\n                });\n\n                //Set expiration month to credit card data object\n                this.creditCardExpMonth.subscribe(function (value) {\n                    creditCardData.expirationMonth = value;\n                });\n\n                //Set cvv code to credit card data object\n                this.creditCardVerificationNumber.subscribe(function (value) {\n                    creditCardData.cvvCode = value;\n                });\n\n                //this.paymentType = window.checkoutConfig.payment.iwd_bluepay.paymentTypes;\n                this.paymentType = 'CC';\n\n                this.hashStoredAccount.subscribe(function (hash) {\n                    parseInt(hash) === 0 ? self.hashStoredAccount('') : self.hashStoredAccount(hash);\n                });\n\n                this.saveInfo.subscribe(function (value) {\n                    creditCardData.saveInfo = value;\n                });\n\n            },\n\n            getCode: function () {\n                return 'iwd_bluepay';\n            },\n            getData: function () {\n                var data, saveInfo = $(\"#iwd_bluepay_cc_stored_acct_cb\");\n                creditCardData.saveInfo = saveInfo.length && saveInfo.is(':checked');\n                data = {\n                    'method': this.item.method,\n                    'additional_data': {\n                        'cc_cid': this.creditCardVerificationNumber(),\n                        'cc_ss_start_month': this.creditCardSsStartMonth(),\n                        'cc_ss_start_year': this.creditCardSsStartYear(),\n                        'cc_type': this.creditCardType(),\n                        'cc_exp_month': creditCardData.expirationMonth,\n                        'cc_exp_year': creditCardData.expirationYear,\n                        'cc_number': creditCardData.creditCardNumber,\n                        'echeck_type': this.getPaymentType(),\n                        'echeck_account_type': this.echeckAccountType(),\n                        'echeck_account_name': this.echeckAccountName(),\n                        'echeck_routing_number': this.echeckRoutingNumber(),\n                        'hash': this.hashStoredAccount(),\n                        'save_payment_info': creditCardData.saveInfo\n                    }\n                };\n\n                this.vaultEnabler.visitAdditionalData(data);\n\n                return data;\n            },\n            getCcAvailableTypes: function () {\n                //return window.checkoutConfig.payment.ccform.availableTypes[this.getCode()];\n                return window.checkoutConfig.payment.iwd_bluepay.availableTypes;\n            },\n            getIcons: function (type) {\n                return window.checkoutConfig.payment.ccform.icons.hasOwnProperty(type)\n                    ? window.checkoutConfig.payment.ccform.icons[type]\n                    : false\n            },\n            getCcMonths: function () {\n                //return window.checkoutConfig.payment.ccform.months[this.getCode()];\n                return window.checkoutConfig.payment.iwd_bluepay.months;\n            },\n            getCcYears: function () {\n                //return window.checkoutConfig.payment.ccform.years[this.getCode()];\n                return window.checkoutConfig.payment.iwd_bluepay.years;\n            },\n            hasVerification: function () {\n                //return window.checkoutConfig.payment.ccform.hasVerification[this.getCode()];\n                return window.checkoutConfig.payment.iwd_bluepay.hasVerification;\n            },\n            hasSsCardType: function () {\n                //return window.checkoutConfig.payment.ccform.hasSsCardType[this.getCode()];\n                return window.checkoutConfig.payment.iwd_bluepay.hasSsCardType;\n            },\n            getCvvImageUrl: function () {\n                //return window.checkoutConfig.payment.ccform.cvvImageUrl[this.getCode()];\n                return window.checkoutConfig.payment.iwd_bluepay.cvvImageUrl;\n            },\n            getCvvImageHtml: function () {\n                return '<img src=\"' + this.getCvvImageUrl()\n                    + '\" alt=\"' + $t('Card Verification Number Visual Reference')\n                    + '\" title=\"' + $t('Card Verification Number Visual Reference')\n                    + '\" />';\n            },\n            getSsStartYears: function () {\n                //return window.checkoutConfig.payment.ccform.ssStartYears[this.getCode()];\n                return window.checkoutConfig.payment.iwd_bluepay.ssStartYears;\n            },\n            getCcAvailableTypesValues: function () {\n                return _.map(this.getCcAvailableTypes(), function (value, key) {\n                    return {\n                        'value': key,\n                        'type': value\n                    }\n                });\n            },\n            getCcMonthsValues: function () {\n                return _.map(this.getCcMonths(), function (value, key) {\n                    if (key < 10) {\n                        key = '0' + key;\n                    }\n                    return {\n                        'value': key,\n                        'month': value\n                    }\n                });\n            },\n            getCcYearsValues: function () {\n                return _.map(this.getCcYears(), function (value, key) {\n                    return {\n                        'value': key.substring(2, 4),\n                        'year': value\n                    }\n                });\n            },\n            getSsStartYearsValues: function () {\n                return _.map(this.getSsStartYears(), function (value, key) {\n                    return {\n                        'value': key,\n                        'year': value\n                    }\n                });\n            },\n            isShowLegend: function () {\n                return false;\n            },\n            getCcTypeTitleByCode: function (code) {\n                var title = '';\n                _.each(this.getCcAvailableTypesValues(), function (value) {\n                    if (value['value'] == code) {\n                        title = value['type'];\n                    }\n                });\n                return title;\n            },\n            formatDisplayCcNumber: function (number) {\n                return 'xxxx-' + number.substr(-4);\n            },\n            getInfo: function () {\n                return [\n                    {'name': $t('Credit Card Type'), value: this.getCcTypeTitleByCode(this.creditCardType())},\n                    {'name': $t('Credit Card Number'), value: this.formatDisplayCcNumber(this.creditCardNumber())}\n                ];\n            },\n            getPaymentTypes: function () {\n                return window.checkoutConfig.payment.iwd_bluepay.paymentTypes;\n            },\n            getStoredAccounts: function () {\n                var storedAccounts = window.checkoutConfig.payment.iwd_bluepay.storedAccounts;\n                return storedAccounts && storedAccounts.length ? storedAccounts : null;\n            },\n            getPaymentType: function () {\n                if ($(\"#iwd_bluepay_payment_type\")) {\n                    this.paymentType = $(\"#iwd_bluepay_payment_type\").val();\n                }\n                return this.paymentType;\n            },\n            showHidePaymentFields: function () {\n                showHidePaymentFields();\n            },\n\n            /**\n             * @returns {Boolean}\n             */\n            isCustomerLoggedIn: function() {\n                try {\n                    return window.checkoutConfig.payment.iwd_bluepay.isCustomerLoggedIn;\n                } catch (e) {\n                    return true;\n                }\n            },\n\n            /**\n             * @returns {Boolean}\n             */\n            allowAccountsStorage: function () {\n                try {\n                    return window.checkoutConfig.payment.iwd_bluepay.allowAccountsStorage;\n                } catch (e) {\n                    return false;\n                }\n            },\n\n            initPaymentFields: function () {\n                var paymentType = window.checkoutConfig.payment.iwd_bluepay.paymentTypes;\n                if (paymentType === 'CC' || paymentType === 'ACH') {\n                    $(\"#iwd_bluepay_payment_type\").val(paymentType);\n                    $(\"#iwd_bluepay_payment_type_div\").hide();\n                }\n                showHidePaymentFields();\n            },\n\n            isShowPaymentType: function () {\n                return window.checkoutConfig.payment.iwd_bluepay.isShowPaymentType;\n            },\n            /**\n             * Check hash exist in config\n             */\n            isStoredAccountSelected: function () {\n                return this.hashStoredAccount();\n            },\n\n            forceSaveInVault: function () {\n                return window.checkoutConfig.payment.iwd_bluepay.forceSaveInVault;\n            },\n\n            forceSaveInVaultMessage: function () {\n                return window.checkoutConfig.payment.iwd_bluepay.forceSaveInVaultMessage;\n            },\n\n            isInternalVaultEnabled: function () {\n                return this.isCustomerLoggedIn() && window.checkoutConfig.payment.iwd_bluepay.isInternalVaultEnabled;\n            },\n\n            /**\n             * @returns {Boolean}\n             */\n            isVaultEnabled: function () {\n                return this.vaultEnabler.isVaultEnabled();\n            },\n\n            /**\n             * @returns {String}\n             */\n            getVaultCode: function () {\n                return window.checkoutConfig.payment[this.getCode()].vaultCode;\n            }\n        });\n    }\n);","IWD_BluePay/js/view/payment/method-renderer/blue_pay.js":"/*\n * Copyright \u00a9 2018 IWD Agency - All rights reserved.\n * See LICENSE.txt bundled with this module for license details.\n */\ndefine([\n    'IWD_BluePay/js/view/payment/payment-form',\n    'jquery',\n    'Magento_Checkout/js/action/set-payment-information',\n    'Magento_Payment/js/model/credit-card-validation/validator'\n], function (Component, $, setPaymentInformationAction) {\n    'use strict';\n    return Component.extend({\n        defaults: {\n            template: 'IWD_BluePay/payment/payment-form'\n        },\n\n        getCode: function () {\n            return 'iwd_bluepay';\n        },\n\n        isActive: function () {\n            return true;\n        },\n\n        validate: function () {\n            var $form = $('#' + this.getCode() + '-form');\n            return $form.validation() && $form.validation('isValid');\n        }\n    });\n});","IWD_BluePay/js/view/payment/method-renderer/vault.js":"/*\n * Copyright \u00a9 2018 IWD Agency - All rights reserved.\n * See LICENSE.txt bundled with this module for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine([\n    'jquery',\n    'Magento_Vault/js/view/payment/method-renderer/vault'\n], function ($, VaultComponent) {\n    'use strict';\n\n    return VaultComponent.extend({\n        defaults: {\n            template: 'Magento_Vault/payment/form',\n            modules: {\n                hostedFields: '${ $.parentName }.iwd_bluepay'\n            }\n        },\n\n        /**\n         * Get last 4 digits of card\n         * @returns {String}\n         */\n        getMaskedCard: function () {\n            return this.details.maskedCC;\n        },\n\n        /**\n         * Get expiration date\n         * @returns {String}\n         */\n        getExpirationDate: function () {\n            return this.details.expirationDate;\n        },\n\n        /**\n         * Get card type\n         * @returns {String}\n         */\n        getCardType: function () {\n            return this.details.type;\n        },\n\n        /**\n         * Get hash\n         * @returns {String}\n         */\n        getToken: function () {\n            return this.publicHash;\n        }\n    });\n});\n","IWD_BluePay/js/onepage/view/payment/methods-renderers/blue_pay.js":"/*\n * Copyright \u00a9 2018 IWD Agency - All rights reserved.\n * See LICENSE.txt bundled with this module for license details.\n */\ndefine(\n    [\n        'ko',\n        'jquery',\n        'IWD_BluePay/js/view/payment/method-renderer/blue_pay',\n        'iwdOpcHelper'\n    ],\n    function (ko, $, Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'IWD_BluePay/onepage/payment/methods-renderers/blue_pay',\n                isCurrentlySecure: window.checkoutConfig.iwdOpcSettings.isCurrentlySecure\n            },\n            decorateSelect: function (uid, option) {\n                var select = $('#' + uid);\n                if (select.length) {\n                    if(option && select[0].selectize) {\n                        select[0].selectize.addOption({value: option.value, text: option.text });\n                    }\n                    else {\n                        select.decorateSelect();\n                    }\n                }\n            }\n        });\n    }\n);","Mageplaza_AjaxLayer/js/view/layer.js":"/**\r\n * Mageplaza\r\n *\r\n * NOTICE OF LICENSE\r\n *\r\n * This source file is subject to the Mageplaza.com license that is\r\n * available through the world-wide-web at this URL:\r\n * https://www.mageplaza.com/LICENSE.txt\r\n *\r\n * DISCLAIMER\r\n *\r\n * Do not edit or add to this file if you wish to upgrade this extension to newer\r\n * version in the future.\r\n *\r\n * @category    Mageplaza\r\n * @package     Mageplaza_AjaxLayer\r\n * @copyright   Copyright (c) Mageplaza (http://www.mageplaza.com/)\r\n * @license     https://www.mageplaza.com/LICENSE.txt\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Mageplaza_AjaxLayer/js/action/submit-filter',\r\n    'Magento_Catalog/js/price-utils',\r\n    'jquery/ui',\r\n    'accordion',\r\n    'productListToolbarForm'\r\n], function ($, submitFilterAction, ultil) {\r\n    \"use strict\";\r\n\r\n    $.widget('mageplaza.layer', $.mage.accordion, {\r\n        options: {\r\n            openedState: 'active',\r\n            collapsible: true,\r\n            multipleCollapsible: true,\r\n            animate: 200,\r\n            mobileShopbyElement: '#layered-filter-block .filter-title [data-role=title]',\r\n            collapsibleElement: '[data-role=ln_collapsible]',\r\n            header: '[data-role=ln_title]',\r\n            content: '[data-role=ln_content]',\r\n            isCustomerLoggedIn: false,\r\n            params: [],\r\n            active: []\r\n        },\r\n\r\n        _create: function () {\r\n            this.initActiveItems();\r\n\r\n            this._super();\r\n\r\n            this.initProductListUrl();\r\n            this.initObserve();\r\n            this.initWishlistCompare();\r\n        },\r\n\r\n        initActiveItems: function () {\r\n            var layerActives = this.options.active,\r\n                actives = [];\r\n\r\n            if (typeof window.layerActiveTabs !== 'undefined') {\r\n                layerActives = window.layerActiveTabs;\r\n            }\r\n            if (layerActives.length) {\r\n                this.element.find('.filter-options-item').each(function (index) {\r\n                    if (~$.inArray($(this).attr('attribute'), layerActives)) {\r\n                        actives.push(index);\r\n                    }\r\n                });\r\n            }\r\n\r\n            this.options.active = actives;\r\n\r\n            return this;\r\n        },\r\n\r\n        initProductListUrl: function () {\r\n            var isProcessToolbar = false;\r\n            $.mage.productListToolbarForm.prototype.changeUrl = function (paramName, paramValue, defaultValue) {\r\n                if (isProcessToolbar) {\r\n                    return;\r\n                }\r\n                isProcessToolbar = true;\r\n\r\n                var urlPaths = this.options.url.split('?'),\r\n                    baseUrl = urlPaths[0],\r\n                    urlParams = urlPaths[1] ? urlPaths[1].split('&') : [],\r\n                    paramData = {},\r\n                    parameters;\r\n                for (var i = 0; i < urlParams.length; i++) {\r\n                    parameters = urlParams[i].split('=');\r\n                    paramData[parameters[0]] = parameters[1] !== undefined\r\n                        ? window.decodeURIComponent(parameters[1].replace(/\\+/g, '%20'))\r\n                        : '';\r\n                }\r\n                paramData[paramName] = paramValue;\r\n                if (paramValue === defaultValue) {\r\n                    delete paramData[paramName];\r\n                }\r\n                paramData = $.param(paramData);\r\n                submitFilterAction(baseUrl + (paramData.length ? '?' + paramData : ''));\r\n            }\r\n        },\r\n\r\n        initObserve: function () {\r\n            var self = this;\r\n\r\n            var pageElements = $('#layer-product-list').find('.pages a');\r\n            pageElements.each(function () {\r\n                var el = $(this),\r\n                    link = self.checkUrl(el.prop('href'));\r\n                if (!link) {\r\n                    return;\r\n                }\r\n\r\n                el.bind('click', function (e) {\r\n                    submitFilterAction(link);\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                })\r\n            });\r\n\r\n            var currentElements = this.element.find('.filter-current a, .filter-actions a');\r\n            currentElements.each(function (index) {\r\n                var el = $(this),\r\n                    link = self.checkUrl(el.prop('href'));\r\n                if (!link) {\r\n                    return;\r\n                }\r\n\r\n                el.bind('click', function (e) {\r\n                    submitFilterAction(link);\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                });\r\n            });\r\n\r\n            var optionElements = this.element.find('.filter-options a');\r\n            optionElements.each(function (index) {\r\n                var el = $(this),\r\n                    link = self.checkUrl(el.prop('href'));\r\n                if (!link) {\r\n                    return;\r\n                }\r\n\r\n                el.bind('click', function (e) {\r\n                    if (el.hasClass('swatch-option-link-layered')) {\r\n                        self.selectSwatchOption(el);\r\n                    }\r\n\r\n                    self.ajaxSubmit(link);\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                });\r\n            });\r\n\r\n            var swatchElements = this.element.find('.swatch-attribute');\r\n            swatchElements.each(function (index) {\r\n                var el = $(this);\r\n                var attCode = el.attr('attribute-code');\r\n                if (attCode) {\r\n                    if (self.options.params.hasOwnProperty(attCode)) {\r\n                        var attValues = self.options.params[attCode].split(\",\");\r\n                        var swatchOptions = el.find('.swatch-option');\r\n                        swatchOptions.each(function (option) {\r\n                            var elOption = $(this);\r\n                            if ($.inArray(elOption.attr('option-id'), attValues) !== -1) {\r\n                                elOption.addClass('selected');\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        selectSwatchOption: function (el) {\r\n            var childEl = el.find('.swatch-option');\r\n            if (childEl.hasClass('selected')) {\r\n                childEl.removeClass('selected');\r\n            } else {\r\n                childEl.addClass('selected');\r\n            }\r\n        },\r\n\r\n        ajaxSubmit: function (submitUrl) {\r\n            this.element.find(this.options.mobileShopbyElement).trigger('click');\r\n\r\n            return submitFilterAction(submitUrl);\r\n        },\r\n\r\n        checkUrl: function (url) {\r\n            var regex = /(http|https):\\/\\/(\\w+:{0,1}\\w*)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%!\\-\\/]))?/;\r\n\r\n            return regex.test(url) ? url : null;\r\n        },\r\n\r\n        //Handling 'add to wishlist' & 'add to compare' event\r\n        initWishlistCompare: function () {\r\n            var isCustomerLoggedIn = this.options.isCustomerLoggedIn,\r\n                elClass = 'a.action.tocompare' + (isCustomerLoggedIn ? ',a.action.towishlist' : '');\r\n            $(elClass).each(function () {\r\n                var el = $(this);\r\n                $(el).bind('click', function (e) {\r\n                    var dataPost = $(el).data('post'),\r\n                        formKey = $('input[name=\"form_key\"]').val();\r\n                    if (formKey) {\r\n                        dataPost.data.form_key = formKey;\r\n                    }\r\n\r\n                    var paramData = $.param(dataPost.data),\r\n                        url = dataPost.action + (paramData.length ? '?' + paramData : '');\r\n\r\n                    submitFilterAction(url, true);\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                });\r\n            })\r\n        }\r\n    });\r\n\r\n    return $.mageplaza.layer;\r\n});\r\n","Mageplaza_AjaxLayer/js/action/submit-filter.js":"/**\r\n * Mageplaza\r\n *\r\n * NOTICE OF LICENSE\r\n *\r\n * This source file is subject to the Mageplaza.com license that is\r\n * available through the world-wide-web at this URL:\r\n * https://www.mageplaza.com/LICENSE.txt\r\n *\r\n * DISCLAIMER\r\n *\r\n * Do not edit or add to this file if you wish to upgrade this extension to newer\r\n * version in the future.\r\n *\r\n * @category    Mageplaza\r\n * @package     Mageplaza_AjaxLayer\r\n * @copyright   Copyright (c) Mageplaza (http://www.mageplaza.com/)\r\n * @license     https://www.mageplaza.com/LICENSE.txt\r\n */\r\n\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'mage/storage',\r\n        'Mageplaza_AjaxLayer/js/model/loader',\r\n        'mage/apply/main'\r\n    ],\r\n    function ($, storage, loader, mage) {\r\n        'use strict';\r\n\r\n        var productContainer = $('#layer-product-list'),\r\n            layerContainer = $('.layered-filter-block-container');\r\n\r\n        return function (submitUrl, isChangeUrl) {\r\n            /** save active state */\r\n            var actives = [];\r\n            $('.filter-options-item').each(function (index) {\r\n                if ($(this).hasClass('active')) {\r\n                    actives.push($(this).attr('attribute'));\r\n                }\r\n            });\r\n            window.layerActiveTabs = actives;\r\n\r\n            /** start loader */\r\n            loader.startLoader();\r\n\r\n            /** change browser url */\r\n            if (typeof window.history.pushState === 'function' && (typeof isChangeUrl === 'undefined')) {\r\n                window.history.pushState({url: submitUrl}, '', submitUrl);\r\n            }\r\n\r\n            return storage.post(submitUrl, {}).done(\r\n                function (response) {\r\n                    if (response.backUrl) {\r\n                        window.location = response.backUrl;\r\n                        return;\r\n                    }\r\n                    if (response.navigation) {\r\n                        layerContainer.html(response.navigation);\r\n                    }\r\n                    if (response.products) {\r\n                        productContainer.html(response.products);\r\n                    }\r\n\r\n                    if (mage) {\r\n                        mage.apply();\r\n                    }\r\n                }\r\n            ).fail(\r\n                function () {\r\n                    window.location.reload();\r\n                }\r\n            ).always(\r\n                function () {\r\n                    loader.stopLoader();\r\n                }\r\n            );\r\n        };\r\n    }\r\n);\r\n","Mageplaza_AjaxLayer/js/model/loader.js":"/**\r\n * Mageplaza\r\n *\r\n * NOTICE OF LICENSE\r\n *\r\n * This source file is subject to the Mageplaza.com license that is\r\n * available through the world-wide-web at this URL:\r\n * https://www.mageplaza.com/LICENSE.txt\r\n *\r\n * DISCLAIMER\r\n *\r\n * Do not edit or add to this file if you wish to upgrade this extension to newer\r\n * version in the future.\r\n *\r\n * @category    Mageplaza\r\n * @package     Mageplaza_AjaxLayer\r\n * @copyright   Copyright (c) Mageplaza (http://www.mageplaza.com/)\r\n * @license     https://www.mageplaza.com/LICENSE.txt\r\n */\r\n\r\ndefine(\r\n    [\r\n        'jquery'\r\n    ],\r\n    function ($) {\r\n        'use strict';\r\n\r\n        return {\r\n            /**\r\n             * Start full page loader action\r\n             */\r\n            startLoader: function () {\r\n                $('.ln_overlay').show();\r\n            },\r\n\r\n            /**\r\n             * Stop full page loader action\r\n             */\r\n            stopLoader: function () {\r\n                $('.ln_overlay').hide();\r\n                $('.swatch-option-tooltip').hide();\r\n            }\r\n        };\r\n    }\r\n);\r\n","Magento_Theme/menu.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/**\n * Simple Navigation with replacing old handlers.\n *\n * @param {String} id - id of ul element with navigation lists\n * @param {Object} settings - object with settings\n */\n/**\n * global mainNav\n *\n * @deprecated\n * @see lib/web/mage/menu.js\n */\ndefine([\n    'prototype'\n], function () {\n    'use strict';\n\n    /**\n     * Main nav.\n     */\n    window.mainNav = function () {\n        var main = {\n            'obj_nav':   $(arguments[0]) || $('nav'),\n            settings:  {\n                'show_delay': 0,\n                'hide_delay': 0,\n                _ie6: /MSIE 6.+Win/.test(navigator.userAgent),\n                _ie7: /MSIE 7.+Win/.test(navigator.userAgent)\n            },\n\n            /**\n             * @param {Object} obj\n             * @param {*} level\n             */\n            init: function (obj, level) {\n                obj.lists = obj.childElements();\n                obj.lists.each(function (el, ind) {\n                    main.handlNavElement(el);\n\n                    if ((main.settings._ie6 || main.settings._ie7) && level) {\n                        main.ieFixZIndex(el, ind, obj.lists.size());\n                    }\n                });\n\n                if (main.settings._ie6 && !level) {\n                    document.execCommand('BackgroundImageCache', false, true);\n                }\n            },\n\n            /**\n             * @param {Object} list\n             */\n            handlNavElement: function (list) {\n                if (list !== undefined) {\n\n                    /**\n                     * On mouse over.\n                     */\n                    list.onmouseover = function () {\n                        main.fireNavEvent(this, true);\n                    };\n\n                    /**\n                     * On mouse out.\n                     */\n                    list.onmouseout = function () {\n                        main.fireNavEvent(this, false);\n                    };\n\n                    if (list.down('ul')) {\n                        main.init(list.down('ul'), true);\n                    }\n                }\n            },\n\n            /**\n             * @param {HTMLElement} el\n             * @param {*} i\n             * @param {*} l\n             */\n            ieFixZIndex: function (el, i, l) {\n                if (el.tagName.toString().toLowerCase().indexOf('iframe') == -1) { //eslint-disable-line eqeqeq\n                    el.style.zIndex = l - i;\n                } else {\n                    el.onmouseover = 'null';\n                    el.onmouseout = 'null';\n                }\n            },\n\n            /**\n             * @param {Object} elm\n             * @param {*} ev\n             */\n            fireNavEvent: function (elm, ev) {\n                if (ev) {\n                    elm.addClassName('over');\n                    elm.down('a').addClassName('over');\n\n                    if (elm.childElements()[1]) {\n                        main.show(elm.childElements()[1]);\n                    }\n                } else {\n                    elm.removeClassName('over');\n                    elm.down('a').removeClassName('over');\n\n                    if (elm.childElements()[1]) {\n                        main.hide(elm.childElements()[1]);\n                    }\n                }\n            },\n\n            /**\n             * @param {Object} subElm\n             */\n            show: function (subElm) {\n                if (subElm['hide_time_id']) {\n                    clearTimeout(subElm['hide_time_id']);\n                }\n                subElm['show_time_id'] = setTimeout(function () {\n                    if (!subElm.hasClassName('shown-sub')) {\n                        subElm.addClassName('shown-sub');\n                    }\n                }, main.settings['show_delay']);\n            },\n\n            /**\n             * @param {Object} subElm\n             */\n            hide: function (subElm) {\n                if (subElm['show_time_id']) {\n                    clearTimeout(subElm['show_time_id']);\n                }\n                subElm['hide_time_id'] = setTimeout(function () {\n                    if (subElm.hasClassName('shown-sub')) {\n                        subElm.removeClassName('shown-sub');\n                    }\n                }, main.settings['hide_delay']);\n            }\n\n        };\n\n        if (arguments[1]) {\n            main.settings = Object.extend(main.settings, arguments[1]);\n        }\n\n        if (main['obj_nav']) {\n            main.init(main['obj_nav'], false);\n        }\n    };\n\n    document.observe('dom:loaded', function () {\n        //run navigation without delays and with default id=\"#nav\"\n        //mainNav();\n\n        //run navigation with delays\n        window.mainNav('nav', {\n            'show_delay': '100',\n            'hide_delay': '100'\n        });\n    });\n});\n","Magento_Theme/js/truncate.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * JQuery UI Widget declaration: 'mage.truncateOptions'\n *\n * @deprecated since version 2.2.0\n */\ndefine([\n    'jquery',\n    'jquery/ui'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.truncateOptions', {\n        options: {\n            detailsLink: 'a.details',\n            mouseEvents: 'mouseover mouseout',\n            truncatedFullValue: 'div.truncated.full.value'\n        },\n\n        /**\n         * Establish the event handler for mouse events on the appropriate elements.\n         *\n         * @private\n         */\n        _create: function () {\n            this.element.on(this.options.mouseEvents, $.proxy(this._toggleShow, this))\n                .find(this.options.detailsLink).on(this.options.mouseEvents, $.proxy(this._toggleShow, this));\n        },\n\n        /**\n         * Toggle the \"show\" class on the associated element.\n         *\n         * @private\n         * @param {jQuery.Event} event - Mouse over/out event.\n         */\n        _toggleShow: function (event) {\n            $(event.currentTarget).find(this.options.truncatedFullValue).toggleClass('show');\n        }\n    });\n});\n","Magento_Theme/js/theme.js":"/**\n * Copyright \u00a9 2015 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n//require([\n//    'jquery',\n//    'bootstrap/js/bootstrap.min'\n//], function ($) {\n\n//});\nrequire([\n    'jquery',\n    'mage/smart-keyboard-handler',\n    'mage/mage',\n    'mage/ie-class-fixer',\n    'domReady!'\n], function ($, keyboardHandler) {\n    'use strict';\n    $(document).ready(function(){\n        $('.cart-summary').mage('sticky', {\n            container: '#maincontent'\n        });\n\n        $('.panel.header .header.links').clone().appendTo('#store\\\\.links');\n    });\n    keyboardHandler.apply();\n});\n/******************** Init Parallax ***********************/\nrequire([\n    'jquery',\n    'js/jquery.stellar.min'\n], function ($) {\n    $(document).ready(function(){\n        $(window).stellar({\n            responsive: true,\n            scrollProperty: 'scroll',\n            parallaxElements: false,\n            horizontalScrolling: false,\n            horizontalOffset: 0,\n            verticalOffset: 0\n        });\n    });\n});\n\nrequire([\n    'jquery'\n], function ($) {\n    (function() {\n        var ev = new $.Event('classadded'),\n            orig = $.fn.addClass;\n        $.fn.addClass = function() {\n            $(this).trigger(ev, arguments);\n            return orig.apply(this, arguments);\n        }\n    })();\n    $.fn.extend({\n        scrollToMe: function(){\n            if($(this).length){\n                var top = $(this).offset().top - 100;\n                $('html,body').animate({scrollTop: top}, 300);\n            }\n        },\n        scrollToJustMe: function(){\n            if($(this).length){\n                var top = jQuery(this).offset().top;\n                $('html,body').animate({scrollTop: top}, 300);\n            }\n        }\n    });\n    $(document).ready(function(){\n        var windowScroll_t;\n        $(window).scroll(function(){\n            clearTimeout(windowScroll_t);\n            windowScroll_t = setTimeout(function(){\n                if(jQuery(this).scrollTop() > 100){\n                    $('#totop').fadeIn();\n                }else{\n                    $('#totop').fadeOut();\n                }\n            }, 500);\n        });\n        $('#totop').off(\"click\").on(\"click\",function(){\n            $('html, body').animate({scrollTop: 0}, 600);\n        });\n        if ($('body').hasClass('checkout-cart-index')) {\n            if ($('#co-shipping-method-form .fieldset.rates').length > 0 && $('#co-shipping-method-form .fieldset.rates :checked').length === 0) {\n                $('#block-shipping').on('collapsiblecreate', function () {\n                    $('#block-shipping').collapsible('forceActivate');\n                });\n            }\n        }\n        $(\".products-grid .weltpixel-quickview\").each(function(){\n            $(this).appendTo($(this).parent().parent().children(\".product-item-photo\"));\n        });\n        //$('#maincontent .columns').append($('.ln_overlay').detach());\n        $(\".word-rotate\").each(function() {\n\n            var $this = $(this),\n                itemsWrapper = $(this).find(\".word-rotate-items\"),\n                items = itemsWrapper.find(\"> span\"),\n                firstItem = items.eq(0),\n                firstItemClone = firstItem.clone(),\n                itemHeight = 0,\n                currentItem = 1,\n                currentTop = 0;\n\n            itemHeight = firstItem.height();\n\n            itemsWrapper.append(firstItemClone);\n\n            $this\n                .height(itemHeight)\n                .addClass(\"active\");\n\n            setInterval(function() {\n                currentTop = (currentItem * itemHeight);\n                \n                itemsWrapper.animate({\n                    top: -(currentTop) + \"px\"\n                }, 300, function() {\n                    currentItem++;\n                    if(currentItem > items.length) {\n                        itemsWrapper.css(\"top\", 0);\n                        currentItem = 1;\n                    }\n                });\n                \n            }, 2000);\n\n        });\n        $(\".top-links-icon\").off(\"click\").on(\"click\", function(e){\n            if($(this).parent().children(\"ul.links\").hasClass(\"show\")) {\n                $(this).parent().children(\"ul.links\").removeClass(\"show\");\n            } else {\n                $(this).parent().children(\"ul.links\").addClass(\"show\");\n            }\n            e.stopPropagation();\n        });\n        $(\".top-links-icon\").parent().click(function(e){\n            e.stopPropagation();\n        });\n        $(\".search-toggle-icon\").click(function(e){\n            if($(this).parent().children(\".block-search\").hasClass(\"show\")) {\n                $(this).parent().children(\".block-search\").removeClass(\"show\");\n            } else {\n                $(this).parent().children(\".block-search\").addClass(\"show\");\n            }\n            e.stopPropagation();\n        });\n        $(\".search-toggle-icon\").parent().click(function(e){\n            e.stopPropagation();\n        });\n        $(\"html,body\").click(function(){\n            $(\".search-toggle-icon\").parent().children(\".block-search\").removeClass(\"show\");\n            $(\".top-links-icon\").parent().children(\"ul.links\").removeClass(\"show\");\n        });\n\n        /********************* Qty Holder **************************/\n        $(document).on(\"click\", \".qtyplus\", function(e) {\n            // Stop acting like a button\n            e.preventDefault();\n            // Get its current value\n            var currentVal = parseInt($(this).parents('form').find('input[name=\"qty\"]').val());\n            // If is not undefined\n            if (!isNaN(currentVal)) {\n                // Increment\n                $(this).parents('form').find('input[name=\"qty\"]').val(currentVal + 1);\n            } else {\n                // Otherwise put a 0 there\n                $(this).parents('form').find('input[name=\"qty\"]').val(0);\n            }\n        });\n        // This button will decrement the value till 0\n        $(document).on(\"click\", \".qtyminus\", function(e) {\n            // Stop acting like a button\n            e.preventDefault();\n            // Get the field name\n            fieldName = $(this).attr('field');\n            // Get its current value\n            var currentVal = parseInt($(this).parents('form').find('input[name=\"qty\"]').val());\n            // If it isn't undefined or its greater than 0\n            if (!isNaN(currentVal) && currentVal > 0) {\n                // Decrement one\n                $(this).parents('form').find('input[name=\"qty\"]').val(currentVal - 1);\n            } else {\n                // Otherwise put a 0 there\n                $(this).parents('form').find('input[name=\"qty\"]').val(0);\n            }\n        });\n        $(\".qty-inc\").unbind('click').click(function(){\n            if($(this).parents('.field.qty').find(\"input.input-text.qty\").is(':enabled')){\n                $(this).parents('.field.qty').find(\"input.input-text.qty\").val((+$(this).parents('.field.qty').find(\"input.input-text.qty\").val() + 1) || 0);\n                $(this).parents('.field.qty').find(\"input.input-text.qty\").trigger('change');\n                $(this).focus();\n            }\n        });\n        $(\".qty-dec\").unbind('click').click(function(){\n            if($(this).parents('.field.qty').find(\"input.input-text.qty\").is(':enabled')){\n                $(this).parents('.field.qty').find(\"input.input-text.qty\").val(($(this).parents('.field.qty').find(\"input.input-text.qty\").val() - 1 > 0) ? ($(this).parents('.field.qty').find(\"input.input-text.qty\").val() - 1) : 0);\n                $(this).parents('.field.qty').find(\"input.input-text.qty\").trigger('change');\n                $(this).focus();\n            }\n        });\n        \n        /********** Fullscreen Slider ************/\n        var s_width = $(window).innerWidth();\n        var s_height = $(window).innerHeight();\n        var s_ratio = s_width/s_height;\n        var v_width=320;\n        var v_height=240;\n        var v_ratio = v_width/v_height;\n        $(\".full-screen-slider div.item\").css(\"position\",\"relative\");\n        $(\".full-screen-slider div.item\").css(\"overflow\",\"hidden\");\n        $(\".full-screen-slider div.item\").width(s_width);\n        $(\".full-screen-slider div.item\").height(s_height);\n        $(\".full-screen-slider div.item > video\").css(\"position\",\"absolute\");\n        $(\".full-screen-slider div.item > video\").bind(\"loadedmetadata\",function(){\n            v_width = this.videoWidth;\n            v_height = this.videoHeight;\n            v_ratio = v_width/v_height;\n            if(s_ratio>=v_ratio){\n                $(this).width(s_width);\n                $(this).height(\"\");\n                $(this).css(\"left\",\"0px\");\n                $(this).css(\"top\",(s_height-s_width/v_width*v_height)/2+\"px\");\n            }else{\n                $(this).width(\"\");\n                $(this).height(s_height);\n                $(this).css(\"left\",(s_width-s_height/v_height*v_width)/2+\"px\");\n                $(this).css(\"top\",\"0px\");\n            }\n            $(this).get(0).play();\n        });\n        if($(\".page-header\").hasClass(\"type10\") || $(\".page-header\").hasClass(\"type22\")) {\n            if(s_width >= 992){\n                $(\".navigation\").addClass(\"side-megamenu\")\n            } else {\n                $(\".navigation\").removeClass(\"side-megamenu\")\n            }\n        }\n        \n        $(window).resize(function(){\n            s_width = $(window).innerWidth();\n            s_height = $(window).innerHeight();\n            s_ratio = s_width/s_height;\n            $(\".full-screen-slider div.item\").width(s_width);\n            $(\".full-screen-slider div.item\").height(s_height);\n            $(\".full-screen-slider div.item > video\").each(function(){\n                if(s_ratio>=v_ratio){\n                    $(this).width(s_width);\n                    $(this).height(\"\");\n                    $(this).css(\"left\",\"0px\");\n                    $(this).css(\"top\",(s_height-s_width/v_width*v_height)/2+\"px\");\n                }else{\n                    $(this).width(\"\");\n                    $(this).height(s_height);\n                    $(this).css(\"left\",(s_width-s_height/v_height*v_width)/2+\"px\");\n                    $(this).css(\"top\",\"0px\");\n                }\n            });\n            if($(\".page-header\").hasClass(\"type10\") || $(\".page-header\").hasClass(\"type22\")) {\n                if(s_width >= 992){\n                    $(\".navigation\").addClass(\"side-megamenu\")\n                } else {\n                    $(\".navigation\").removeClass(\"side-megamenu\")\n                }\n            }\n        });\n        var breadcrumb_pos_top = 0;\n        $(window).scroll(function(){\n            if(!$(\"body\").hasClass(\"cms-index-index\")){\n                var side_header_height = $(\".page-header.type10, .page-header.type22\").innerHeight();\n                var window_height = $(window).height();\n                if(side_header_height-window_height<$(window).scrollTop()){\n                    if(!$(\".page-header.type10, .page-header.type22\").hasClass(\"fixed-bottom\"))\n                        $(\".page-header.type10, .page-header.type22\").addClass(\"fixed-bottom\");\n                }\n                if(side_header_height-window_height>=$(window).scrollTop()){\n                    if($(\".page-header.type10, .page-header.type22\").hasClass(\"fixed-bottom\"))\n                        $(\".page-header.type10, .page-header.type22\").removeClass(\"fixed-bottom\");\n                }\n            }\n            if($(\"body.side-header .page-wrapper > .breadcrumbs\").length){\n                if(!$(\"body.side-header .page-wrapper > .breadcrumbs\").hasClass(\"fixed-position\")){\n                    breadcrumb_pos_top = $(\"body.side-header .page-wrapper > .breadcrumbs\").offset().top;\n                    if($(\"body.side-header .page-wrapper > .breadcrumbs\").offset().top<$(window).scrollTop()){\n                        $(\"body.side-header .page-wrapper > .breadcrumbs\").addClass(\"fixed-position\");\n                    }\n                }else{\n                    if($(window).scrollTop()<=1){\n                        $(\"body.side-header .page-wrapper > .breadcrumbs\").removeClass(\"fixed-position\");\n                    }\n                }\n            }\n        });\n    });\n});\nrequire([\n    'jquery',\n    'js/jquery.lazyload'\n], function ($) {\n    $(document).ready(function(){\n        $(\"img.porto-lazyload:not(.porto-lazyload-loaded)\").lazyload({effect:\"fadeIn\"});\n        if ($('.porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').length) {\n            $('.porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').on('changed.owl.carousel', function() {\n                $(this).find('.porto-lazyload:not(.porto-lazyload-loaded)').trigger('appear');\n            });\n            $('.porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').on('initialized.owl.carousel', function() {\n                $(this).find('.porto-lazyload:not(.porto-lazyload-loaded)').trigger('appear');\n            });\n        }\n        window.setTimeout(function(){\n            $('.sidebar-filterproducts').find('.porto-lazyload:not(.porto-lazyload-loaded)').trigger('appear');\n        },500);\n    });\n});","Magento_Theme/js/row-builder.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * JQuery UI Widget declaration: 'mage.rowBuilder'\n *\n * @api\n */\ndefine([\n    'jquery',\n    'mage/template',\n    'jquery/ui'\n], function ($, mageTemplate) {\n    'use strict';\n\n    $.widget('mage.rowBuilder', {\n\n        /**\n         * options with default values for setting up the template\n         */\n        options: {\n            //Default template options\n            rowTemplate: '#template-registrant',\n            rowContainer: '#registrant-container',\n            //Row index used by the template rows.\n            rowIndex: 0,\n            //Row count: Should not be set externally\n            rowCount: 0,\n            rowParentElem: '<li></li>',\n            rowContainerClass: 'fields',\n            addRowBtn: '#add-registrant-button',\n            btnRemoveIdPrefix: 'btn-remove',\n            btnRemoveSelector: '.btn-remove',\n            rowIdPrefix: 'row',\n            //This class is added to rows added after the first one. Adds the dotted separator\n            additionalRowClass: 'add-row',\n\n            /*\n             This is provided during widget instantiation. eg :\n             formDataPost : {\"formData\":formData,\"templateFields\":['field1-name','field2-name'] }\n             -\"formData\" is the multi-dimensional array of form field values : [['a','b'],['c','b']]\n             received from the server and encoded\n             -\"templateFields\" are the input fields in the template with index suffixed after the field name\n             eg field1-name{index}\n             */\n            formDataPost: null,\n            //Default selectors for add element of a template\n            addEventSelector: 'button',\n            //Default selectors for remove markup elements of a template\n            remEventSelector: 'a',\n            //This option allows adding first row delete option and a row separator\n            hideFirstRowAddSeparator: true,\n            //Max rows - This option should be set when instantiating the widget\n            maxRows: 1000,\n            maxRowsMsg: '#max-registrant-message'\n        },\n\n        /**\n         * Initialize create\n         * @private\n         */\n        _create: function () {\n            this.rowTemplate = mageTemplate(this.options.rowTemplate);\n\n            this.options.rowCount = this.options.rowIndex = 0;\n\n            //On document ready related tasks\n            $($.proxy(this.ready, this));\n\n            //Binding template-wide events handlers for adding and removing rows\n            this.element.on(\n                'click',\n                this.options.addEventSelector + this.options.addRowBtn,\n                $.proxy(this.handleAdd, this)\n            );\n            this.element.on(\n                'click',\n                this.options.remEventSelector + this.options.btnRemoveSelector,\n                $.proxy(this.handleRemove, this)\n            );\n        },\n\n        /**\n         * Initialize template\n         * @public\n         */\n        ready: function () {\n            if (this.options.formDataPost &&\n                this.options.formDataPost.formData &&\n                this.options.formDataPost.formData.length\n            ) {\n                this.processFormDataArr(this.options.formDataPost);\n            } else if (this.options.rowIndex === 0 && this.options.maxRows !== 0) {\n                //If no form data , then add default row\n                this.addRow(0);\n            }\n        },\n\n        /**\n         * Process and loop through all row data to create preselected values. This is used for any error on submit.\n         * For complex implementations the inheriting widget can override this behavior\n         * @public\n         * @param {Object} formDataArr\n         */\n        processFormDataArr: function (formDataArr) {\n            var formData = formDataArr.formData,\n                templateFields = formDataArr.templateFields,\n                formRow,\n                i, j;\n\n            for (i = this.options.rowIndex = 0; i < formData.length; this.options.rowIndex = i++) {\n                this.addRow(i);\n\n                formRow = formData[i];\n\n                for (j = 0; j < formRow.length; j++) {\n                    this.setFieldById(templateFields[j] + i, formRow[j]);\n                }\n            }\n\n        },\n\n        /**\n         * Initialize and create markup for template row. Add it to the parent container.\n         * The template processing will substitute row index at all places marked with _index_ in the template\n         * using the template\n         * @public\n         * @param {Number} index - current index/count of the created template. This will be used as the id\n         * @return {*}\n         */\n        addRow: function (index) {\n            var row = $(this.options.rowParentElem),\n                tmpl;\n\n            row.addClass(this.options.rowContainerClass).attr('id', this.options.rowIdPrefix + index);\n\n            tmpl = this.rowTemplate({\n                data: {\n                    _index_: index\n                }\n            });\n\n            $(tmpl).appendTo(row);\n\n            $(this.options.rowContainer).append(row).trigger('contentUpdated');\n\n            row.addClass(this.options.additionalRowClass);\n\n            //Remove 'delete' link and additionalRowClass for first row\n            if (this.options.rowIndex === 0 && this.options.hideFirstRowAddSeparator) {\n                $('#' + this._esc(this.options.btnRemoveIdPrefix) + '0').remove();\n                $('#' + this._esc(this.options.rowIdPrefix) + '0').removeClass(this.options.additionalRowClass);\n            }\n\n            this.maxRowCheck(++this.options.rowCount);\n\n            return row;\n        },\n\n        /**\n         * Remove return item information row\n         * @public\n         * @param {*} rowIndex - return item information row index\n         * @return {Boolean}\n         */\n        removeRow: function (rowIndex) {\n            $('#' + this._esc(this.options.rowIdPrefix) + rowIndex).remove();\n            this.maxRowCheck(--this.options.rowCount);\n\n            return false;\n        },\n\n        /**\n         * Function to check if maximum rows are exceeded and render/hide maxMsg and Add btn\n         * @public\n         * @param {Number} rowIndex\n         */\n        maxRowCheck: function (rowIndex) {\n            var addRowBtn = $(this.options.addRowBtn),\n                maxRowMsg = $(this.options.maxRowsMsg);\n\n            //liIndex starts from 0\n            if (rowIndex >= this.options.maxRows) {\n                addRowBtn.hide();\n                maxRowMsg.show();\n            } else if (addRowBtn.is(':hidden')) {\n                addRowBtn.show();\n                maxRowMsg.hide();\n            }\n        },\n\n        /**\n         * Set the value on given element\n         * @public\n         * @param {String} domId\n         * @param {String} value\n         */\n        setFieldById: function (domId, value) {\n            var x = $('#' + this._esc(domId));\n\n            if (x.length) {\n\n                if (x.is(':checkbox')) {\n                    x.attr('checked', true);\n                } else if (x.is('option')) {\n                    x.attr('selected', 'selected');\n                } else {\n                    x.val(value);\n                }\n            }\n        },\n\n        /**\n         * Delegated handler for adding a row\n         * @public\n         * @return {Boolean}\n         */\n        handleAdd: function () {\n            this.addRow(++this.options.rowIndex);\n\n            return false;\n        },\n\n        /**\n         * Delegated handler for removing a selected row\n         * @public\n         * @param {Object} e - Native event object\n         * @return {Boolean}\n         */\n        handleRemove: function (e) {\n            this.removeRow($(e.currentTarget).closest('[id^=\"' + this.options.btnRemoveIdPrefix + '\"]')\n                .attr('id').replace(this.options.btnRemoveIdPrefix, ''));\n\n            return false;\n        },\n\n        /**\n         * Utility function to add escape chars for jquery selector strings\n         * @private\n         * @param {String} str - String to be processed\n         * @return {String}\n         */\n        _esc: function (str) {\n            return str ? str.replace(/([ ;&,.+*~\\':\"!\\^$\\[\\]()=>|\\/@])/g, '\\\\$1') : str;\n        }\n    });\n\n    return $.mage.rowBuilder;\n});\n","Magento_Theme/js/responsive.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'matchMedia',\n    'mage/tabs',\n    'domReady!'\n], function ($, mediaCheck) {\n    'use strict';\n\n    mediaCheck({\n        media: '(min-width: 768px)',\n\n        /**\n         * Switch to Desktop Version.\n         */\n        entry: function () {\n            var galleryElement;\n\n            (function () {\n\n                var productInfoMain = $('.product-info-main'),\n                    productInfoAdditional = $('#product-info-additional');\n\n                if (productInfoAdditional.length) {\n                    productInfoAdditional.addClass('hidden');\n                    productInfoMain.removeClass('responsive');\n                }\n\n            })();\n\n            galleryElement = $('[data-role=media-gallery]');\n\n            if (galleryElement.length && galleryElement.data('mageZoom')) {\n                galleryElement.zoom('enable');\n            }\n\n            if (galleryElement.length && galleryElement.data('mageGallery')) {\n                galleryElement.gallery('option', 'disableLinks', true);\n                galleryElement.gallery('option', 'showNav', false);\n                galleryElement.gallery('option', 'showThumbs', true);\n            }\n        },\n\n        /**\n         * Switch to Mobile Version.\n         */\n        exit: function () {\n            var galleryElement;\n\n            $('.action.toggle.checkout.progress').on('click.gotoCheckoutProgress', function () {\n                var myWrapper = '#checkout-progress-wrapper';\n\n                scrollTo(myWrapper + ' .title');\n                $(myWrapper + ' .title').addClass('active');\n                $(myWrapper + ' .content').show();\n            });\n\n            $('body').on('click.checkoutProgress', '#checkout-progress-wrapper .title', function () {\n                $(this).toggleClass('active');\n                $('#checkout-progress-wrapper .content').toggle();\n            });\n\n            galleryElement = $('[data-role=media-gallery]');\n\n            setTimeout(function () {\n                if (galleryElement.length && galleryElement.data('mageZoom')) {\n                    galleryElement.zoom('disable');\n                }\n\n                if (galleryElement.length && galleryElement.data('mageGallery')) {\n                    galleryElement.gallery('option', 'disableLinks', false);\n                    galleryElement.gallery('option', 'showNav', true);\n                    galleryElement.gallery('option', 'showThumbs', false);\n                }\n            }, 2000);\n        }\n    });\n});\n","Magento_Theme/js/view/messages.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'uiComponent',\n    'Magento_Customer/js/customer-data',\n    'underscore',\n    'jquery/jquery-storageapi'\n], function ($, Component, customerData, _) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            cookieMessages: [],\n            messages: []\n        },\n\n        /**\n         * Extends Component object by storage observable messages.\n         */\n        initialize: function () {\n            this._super();\n\n            this.cookieMessages = _.unique($.cookieStorage.get('mage-messages'), 'text');\n            this.messages = customerData.get('messages').extend({\n                disposableCustomerData: 'messages'\n            });\n\n            // Force to clean obsolete messages\n            if (!_.isEmpty(this.messages().messages)) {\n                customerData.set('messages', {});\n            }\n\n            $.cookieStorage.set('mage-messages', '');\n        }\n    });\n});\n","Magento_Theme/js/view/breadcrumbs.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/template',\n    'Magento_Theme/js/model/breadcrumb-list',\n    'text!Magento_Theme/templates/breadcrumbs.html',\n    'jquery/ui'\n], function ($, mageTemplate, breadcrumbList, tpl) {\n    'use strict';\n\n    /**\n     * Breadcrumb Widget.\n     */\n    $.widget('mage.breadcrumbs', {\n\n        /** @inheritdoc */\n        _init: function () {\n            this._super();\n            this._render();\n        },\n\n        /**\n         * Render breadcrumb.\n         *\n         * @private\n         */\n        _render: function () {\n            var html,\n                crumbs = breadcrumbList,\n                template = mageTemplate(tpl);\n\n            this._decorate(crumbs);\n\n            html = template({\n                'breadcrumbs': crumbs\n            });\n\n            if (html.length) {\n                $(this.element).html(html);\n            }\n        },\n\n        /**\n         * Decorate list.\n         *\n         * @param {Array} list\n         * @private\n         */\n        _decorate: function (list) {\n\n            if (list.length) {\n                list[0].first = true;\n            }\n\n            if (list.length > 1) {\n                list[list.length - 1].last = true;\n            }\n        }\n    });\n\n    return $.mage.breadcrumbs;\n});\n","Magento_Theme/js/view/add-home-breadcrumb.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/* eslint-disable max-nested-callbacks, no-undef */\ndefine([\n    'jquery',\n    'Magento_Theme/js/model/breadcrumb-list',\n    'mage/translate'\n], function ($, breadcrumbList) {\n    'use strict';\n\n    /**\n     * @return {Object}\n     */\n    var homeCrumb = function () {\n        return {\n            name: 'home',\n            label: $.mage.__('Home'),\n            title: $.mage.__('Go to Home Page'),\n            link: BASE_URL || ''\n        };\n    };\n\n    return function (breadcrumb) {\n\n        breadcrumbList.unshift(homeCrumb());\n\n        return breadcrumb;\n    };\n});\n","Magento_Theme/js/model/breadcrumb-list.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    return [];\n});\n","Magento_CatalogSearch/js/search-terms-log.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mageUtils'\n], function ($, utils) {\n    'use strict';\n\n    return function (data) {\n        $.ajax({\n            method: 'GET',\n            url: data.url,\n            data: {\n                'q': utils.getUrlParameters(window.location.href).q\n            }\n        });\n    };\n});\n","Magento_Shipping/js/view/checkout/shipping/shipping-policy.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'uiComponent',\n    'Magento_Shipping/js/model/config'\n\n], function (Component, config) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Shipping/checkout/shipping/shipping-policy'\n        },\n        config: config()\n    });\n});\n","Magento_Shipping/js/model/config.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    return function () {\n        return window.checkoutConfig.shippingPolicy;\n    };\n});\n","WeltPixel_Quickview/js/weltpixel_quickview.js":"var enable_quickview = true;\r\ndefine([\r\n    'jquery',\r\n    'magnificPopup'\r\n    ], function ($, magnificPopup) {\r\n    \"use strict\";\r\n\r\n    return {\r\n        displayContent: function(prodUrl) {\r\n            if (!prodUrl.length) {\r\n                return false;\r\n            }\r\n\r\n            var url = window.weltpixel_quickview.baseUrl + 'weltpixel_quickview/index/updatecart';\r\n            var showMiniCart = parseInt(window.weltpixel_quickview.showMiniCart);\r\n\r\n            window.weltpixel_quickview.showMiniCartFlag = false;\r\n\r\n            $.magnificPopup.open({\r\n                items: {\r\n                  src: prodUrl\r\n                },\r\n                type: 'iframe',\r\n                closeOnBgClick: false,\r\n                preloader: true,\r\n                tLoading: '',\r\n                callbacks: {\r\n                    open: function() {\r\n                      $('.mfp-preloader').css('display', 'block');\r\n                    },\r\n                    beforeClose: function() {\r\n                        $('[data-block=\"minicart\"]').trigger('contentLoading');\r\n                        $.ajax({\r\n                        url: url,\r\n                        method: \"POST\"\r\n                      });\r\n                    },\r\n                    close: function() {\r\n                      $('.mfp-preloader').css('display', 'none');\r\n                    },\r\n                    afterClose: function() {\r\n                        /* Show only if product was added to cart and enabled from admin */\r\n                        if (window.weltpixel_quickview.showMiniCartFlag && showMiniCart) {\r\n                            $(\"html, body\").animate({ scrollTop: 0 }, \"slow\");\r\n                            setTimeout(function(){\r\n                                $('.action.showcart').trigger('click');\r\n                            }, 1000);\r\n                        }\r\n                    }\r\n                  }\r\n            });\r\n        }\r\n    };\r\n\r\n});","WeltPixel_Quickview/js/jquery.magnific-popup.min.js":"/*! Magnific Popup - v1.1.0 - 2016-02-20\n* http://dimsemenov.com/plugins/magnific-popup/\n* Copyright (c) 2016 Dmitry Semenov; */\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(\"object\"==typeof exports?require(\"jquery\"):window.jQuery||window.Zepto)}(function(a){var b,c,d,e,f,g,h=\"Close\",i=\"BeforeClose\",j=\"AfterClose\",k=\"BeforeAppend\",l=\"MarkupParse\",m=\"Open\",n=\"Change\",o=\"mfp\",p=\".\"+o,q=\"mfp-ready\",r=\"mfp-removing\",s=\"mfp-prevent-close\",t=function(){},u=!!window.jQuery,v=a(window),w=function(a,c){b.ev.on(o+a+p,c)},x=function(b,c,d,e){var f=document.createElement(\"div\");return f.className=\"mfp-\"+b,d&&(f.innerHTML=d),e?c&&c.appendChild(f):(f=a(f),c&&f.appendTo(c)),f},y=function(c,d){b.ev.triggerHandler(o+c,d),b.st.callbacks&&(c=c.charAt(0).toLowerCase()+c.slice(1),b.st.callbacks[c]&&b.st.callbacks[c].apply(b,a.isArray(d)?d:[d]))},z=function(c){return c===g&&b.currTemplate.closeBtn||(b.currTemplate.closeBtn=a(b.st.closeMarkup.replace(\"%title%\",b.st.tClose)),g=c),b.currTemplate.closeBtn},A=function(){a.magnificPopup.instance||(b=new t,b.init(),a.magnificPopup.instance=b)},B=function(){var a=document.createElement(\"p\").style,b=[\"ms\",\"O\",\"Moz\",\"Webkit\"];if(void 0!==a.transition)return!0;for(;b.length;)if(b.pop()+\"Transition\"in a)return!0;return!1};t.prototype={constructor:t,init:function(){var c=navigator.appVersion;b.isLowIE=b.isIE8=document.all&&!document.addEventListener,b.isAndroid=/android/gi.test(c),b.isIOS=/iphone|ipad|ipod/gi.test(c),b.supportsTransition=B(),b.probablyMobile=b.isAndroid||b.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),d=a(document),b.popupsCache={}},open:function(c){var e;if(c.isObj===!1){b.items=c.items.toArray(),b.index=0;var g,h=c.items;for(e=0;e<h.length;e++)if(g=h[e],g.parsed&&(g=g.el[0]),g===c.el[0]){b.index=e;break}}else b.items=a.isArray(c.items)?c.items:[c.items],b.index=c.index||0;if(b.isOpen)return void b.updateItemHTML();b.types=[],f=\"\",c.mainEl&&c.mainEl.length?b.ev=c.mainEl.eq(0):b.ev=d,c.key?(b.popupsCache[c.key]||(b.popupsCache[c.key]={}),b.currTemplate=b.popupsCache[c.key]):b.currTemplate={},b.st=a.extend(!0,{},a.magnificPopup.defaults,c),b.fixedContentPos=\"auto\"===b.st.fixedContentPos?!b.probablyMobile:b.st.fixedContentPos,b.st.modal&&(b.st.closeOnContentClick=!1,b.st.closeOnBgClick=!1,b.st.showCloseBtn=!1,b.st.enableEscapeKey=!1),b.bgOverlay||(b.bgOverlay=x(\"bg\").on(\"click\"+p,function(){b.close()}),b.wrap=x(\"wrap\").attr(\"tabindex\",-1).on(\"click\"+p,function(a){b._checkIfClose(a.target)&&b.close()}),b.container=x(\"container\",b.wrap)),b.contentContainer=x(\"content\"),b.st.preloader&&(b.preloader=x(\"preloader\",b.container,b.st.tLoading));var i=a.magnificPopup.modules;for(e=0;e<i.length;e++){var j=i[e];j=j.charAt(0).toUpperCase()+j.slice(1),b[\"init\"+j].call(b)}y(\"BeforeOpen\"),b.st.showCloseBtn&&(b.st.closeBtnInside?(w(l,function(a,b,c,d){c.close_replaceWith=z(d.type)}),f+=\" mfp-close-btn-in\"):b.wrap.append(z())),b.st.alignTop&&(f+=\" mfp-align-top\"),b.fixedContentPos?b.wrap.css({overflow:b.st.overflowY,overflowX:\"hidden\",overflowY:b.st.overflowY}):b.wrap.css({top:v.scrollTop(),position:\"absolute\"}),(b.st.fixedBgPos===!1||\"auto\"===b.st.fixedBgPos&&!b.fixedContentPos)&&b.bgOverlay.css({height:d.height(),position:\"absolute\"}),b.st.enableEscapeKey&&d.on(\"keyup\"+p,function(a){27===a.keyCode&&b.close()}),v.on(\"resize\"+p,function(){b.updateSize()}),b.st.closeOnContentClick||(f+=\" mfp-auto-cursor\"),f&&b.wrap.addClass(f);var k=b.wH=v.height(),n={};if(b.fixedContentPos&&b._hasScrollBar(k)){var o=b._getScrollbarSize();o&&(n.marginRight=o)}b.fixedContentPos&&(b.isIE7?a(\"body, html\").css(\"overflow\",\"hidden\"):n.overflow=\"hidden\");var r=b.st.mainClass;return b.isIE7&&(r+=\" mfp-ie7\"),r&&b._addClassToMFP(r),b.updateItemHTML(),y(\"BuildControls\"),a(\"html\").css(n),b.bgOverlay.add(b.wrap).prependTo(b.st.prependTo||a(document.body)),b._lastFocusedEl=document.activeElement,setTimeout(function(){b.content?(b._addClassToMFP(q),b._setFocus()):b.bgOverlay.addClass(q),d.on(\"focusin\"+p,b._onFocusIn)},16),b.isOpen=!0,b.updateSize(k),y(m),c},close:function(){b.isOpen&&(y(i),b.isOpen=!1,b.st.removalDelay&&!b.isLowIE&&b.supportsTransition?(b._addClassToMFP(r),setTimeout(function(){b._close()},b.st.removalDelay)):b._close())},_close:function(){y(h);var c=r+\" \"+q+\" \";if(b.bgOverlay.detach(),b.wrap.detach(),b.container.empty(),b.st.mainClass&&(c+=b.st.mainClass+\" \"),b._removeClassFromMFP(c),b.fixedContentPos){var e={marginRight:\"\"};b.isIE7?a(\"body, html\").css(\"overflow\",\"\"):e.overflow=\"\",a(\"html\").css(e)}d.off(\"keyup\"+p+\" focusin\"+p),b.ev.off(p),b.wrap.attr(\"class\",\"mfp-wrap\").removeAttr(\"style\"),b.bgOverlay.attr(\"class\",\"mfp-bg\"),b.container.attr(\"class\",\"mfp-container\"),!b.st.showCloseBtn||b.st.closeBtnInside&&b.currTemplate[b.currItem.type]!==!0||b.currTemplate.closeBtn&&b.currTemplate.closeBtn.detach(),b.st.autoFocusLast&&b._lastFocusedEl&&a(b._lastFocusedEl).focus(),b.currItem=null,b.content=null,b.currTemplate=null,b.prevHeight=0,y(j)},updateSize:function(a){if(b.isIOS){var c=document.documentElement.clientWidth/window.innerWidth,d=window.innerHeight*c;b.wrap.css(\"height\",d),b.wH=d}else b.wH=a||v.height();b.fixedContentPos||b.wrap.css(\"height\",b.wH),y(\"Resize\")},updateItemHTML:function(){var c=b.items[b.index];b.contentContainer.detach(),b.content&&b.content.detach(),c.parsed||(c=b.parseEl(b.index));var d=c.type;if(y(\"BeforeChange\",[b.currItem?b.currItem.type:\"\",d]),b.currItem=c,!b.currTemplate[d]){var f=b.st[d]?b.st[d].markup:!1;y(\"FirstMarkupParse\",f),f?b.currTemplate[d]=a(f):b.currTemplate[d]=!0}e&&e!==c.type&&b.container.removeClass(\"mfp-\"+e+\"-holder\");var g=b[\"get\"+d.charAt(0).toUpperCase()+d.slice(1)](c,b.currTemplate[d]);b.appendContent(g,d),c.preloaded=!0,y(n,c),e=c.type,b.container.prepend(b.contentContainer),y(\"AfterChange\")},appendContent:function(a,c){b.content=a,a?b.st.showCloseBtn&&b.st.closeBtnInside&&b.currTemplate[c]===!0?b.content.find(\".mfp-close\").length||b.content.append(z()):b.content=a:b.content=\"\",y(k),b.container.addClass(\"mfp-\"+c+\"-holder\"),b.contentContainer.append(b.content)},parseEl:function(c){var d,e=b.items[c];if(e.tagName?e={el:a(e)}:(d=e.type,e={data:e,src:e.src}),e.el){for(var f=b.types,g=0;g<f.length;g++)if(e.el.hasClass(\"mfp-\"+f[g])){d=f[g];break}e.src=e.el.attr(\"data-mfp-src\"),e.src||(e.src=e.el.attr(\"href\"))}return e.type=d||b.st.type||\"inline\",e.index=c,e.parsed=!0,b.items[c]=e,y(\"ElementParse\",e),b.items[c]},addGroup:function(a,c){var d=function(d){d.mfpEl=this,b._openClick(d,a,c)};c||(c={});var e=\"click.magnificPopup\";c.mainEl=a,c.items?(c.isObj=!0,a.off(e).on(e,d)):(c.isObj=!1,c.delegate?a.off(e).on(e,c.delegate,d):(c.items=a,a.off(e).on(e,d)))},_openClick:function(c,d,e){var f=void 0!==e.midClick?e.midClick:a.magnificPopup.defaults.midClick;if(f||!(2===c.which||c.ctrlKey||c.metaKey||c.altKey||c.shiftKey)){var g=void 0!==e.disableOn?e.disableOn:a.magnificPopup.defaults.disableOn;if(g)if(a.isFunction(g)){if(!g.call(b))return!0}else if(v.width()<g)return!0;c.type&&(c.preventDefault(),b.isOpen&&c.stopPropagation()),e.el=a(c.mfpEl),e.delegate&&(e.items=d.find(e.delegate)),b.open(e)}},updateStatus:function(a,d){if(b.preloader){c!==a&&b.container.removeClass(\"mfp-s-\"+c),d||\"loading\"!==a||(d=b.st.tLoading);var e={status:a,text:d};y(\"UpdateStatus\",e),a=e.status,d=e.text,b.preloader.html(d),b.preloader.find(\"a\").on(\"click\",function(a){a.stopImmediatePropagation()}),b.container.addClass(\"mfp-s-\"+a),c=a}},_checkIfClose:function(c){if(!a(c).hasClass(s)){var d=b.st.closeOnContentClick,e=b.st.closeOnBgClick;if(d&&e)return!0;if(!b.content||a(c).hasClass(\"mfp-close\")||b.preloader&&c===b.preloader[0])return!0;if(c===b.content[0]||a.contains(b.content[0],c)){if(d)return!0}else if(e&&a.contains(document,c))return!0;return!1}},_addClassToMFP:function(a){b.bgOverlay.addClass(a),b.wrap.addClass(a)},_removeClassFromMFP:function(a){this.bgOverlay.removeClass(a),b.wrap.removeClass(a)},_hasScrollBar:function(a){return(b.isIE7?d.height():document.body.scrollHeight)>(a||v.height())},_setFocus:function(){(b.st.focus?b.content.find(b.st.focus).eq(0):b.wrap).focus()},_onFocusIn:function(c){return c.target===b.wrap[0]||a.contains(b.wrap[0],c.target)?void 0:(b._setFocus(),!1)},_parseMarkup:function(b,c,d){var e;d.data&&(c=a.extend(d.data,c)),y(l,[b,c,d]),a.each(c,function(c,d){if(void 0===d||d===!1)return!0;if(e=c.split(\"_\"),e.length>1){var f=b.find(p+\"-\"+e[0]);if(f.length>0){var g=e[1];\"replaceWith\"===g?f[0]!==d[0]&&f.replaceWith(d):\"img\"===g?f.is(\"img\")?f.attr(\"src\",d):f.replaceWith(a(\"<img>\").attr(\"src\",d).attr(\"class\",f.attr(\"class\"))):f.attr(e[1],d)}}else b.find(p+\"-\"+c).html(d)})},_getScrollbarSize:function(){if(void 0===b.scrollbarSize){var a=document.createElement(\"div\");a.style.cssText=\"width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;\",document.body.appendChild(a),b.scrollbarSize=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return b.scrollbarSize}},a.magnificPopup={instance:null,proto:t.prototype,modules:[],open:function(b,c){return A(),b=b?a.extend(!0,{},b):{},b.isObj=!0,b.index=c||0,this.instance.open(b)},close:function(){return a.magnificPopup.instance&&a.magnificPopup.instance.close()},registerModule:function(b,c){c.options&&(a.magnificPopup.defaults[b]=c.options),a.extend(this.proto,c.proto),this.modules.push(b)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:\"\",preloader:!0,focus:\"\",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:\"auto\",fixedBgPos:\"auto\",overflowY:\"auto\",closeMarkup:'<button title=\"%title%\" type=\"button\" class=\"mfp-close\">&#215;</button>',tClose:\"Close (Esc)\",tLoading:\"Loading...\",autoFocusLast:!0}},a.fn.magnificPopup=function(c){A();var d=a(this);if(\"string\"==typeof c)if(\"open\"===c){var e,f=u?d.data(\"magnificPopup\"):d[0].magnificPopup,g=parseInt(arguments[1],10)||0;f.items?e=f.items[g]:(e=d,f.delegate&&(e=e.find(f.delegate)),e=e.eq(g)),b._openClick({mfpEl:e},d,f)}else b.isOpen&&b[c].apply(b,Array.prototype.slice.call(arguments,1));else c=a.extend(!0,{},c),u?d.data(\"magnificPopup\",c):d[0].magnificPopup=c,b.addGroup(d,c);return d};var C,D,E,F=\"inline\",G=function(){E&&(D.after(E.addClass(C)).detach(),E=null)};a.magnificPopup.registerModule(F,{options:{hiddenClass:\"hide\",markup:\"\",tNotFound:\"Content not found\"},proto:{initInline:function(){b.types.push(F),w(h+\".\"+F,function(){G()})},getInline:function(c,d){if(G(),c.src){var e=b.st.inline,f=a(c.src);if(f.length){var g=f[0].parentNode;g&&g.tagName&&(D||(C=e.hiddenClass,D=x(C),C=\"mfp-\"+C),E=f.after(D).detach().removeClass(C)),b.updateStatus(\"ready\")}else b.updateStatus(\"error\",e.tNotFound),f=a(\"<div>\");return c.inlineElement=f,f}return b.updateStatus(\"ready\"),b._parseMarkup(d,{},c),d}}});var H,I=\"ajax\",J=function(){H&&a(document.body).removeClass(H)},K=function(){J(),b.req&&b.req.abort()};a.magnificPopup.registerModule(I,{options:{settings:null,cursor:\"mfp-ajax-cur\",tError:'<a href=\"%url%\">The content</a> could not be loaded.'},proto:{initAjax:function(){b.types.push(I),H=b.st.ajax.cursor,w(h+\".\"+I,K),w(\"BeforeChange.\"+I,K)},getAjax:function(c){H&&a(document.body).addClass(H),b.updateStatus(\"loading\");var d=a.extend({url:c.src,success:function(d,e,f){var g={data:d,xhr:f};y(\"ParseAjax\",g),b.appendContent(a(g.data),I),c.finished=!0,J(),b._setFocus(),setTimeout(function(){b.wrap.addClass(q)},16),b.updateStatus(\"ready\"),y(\"AjaxContentAdded\")},error:function(){J(),c.finished=c.loadError=!0,b.updateStatus(\"error\",b.st.ajax.tError.replace(\"%url%\",c.src))}},b.st.ajax.settings);return b.req=a.ajax(d),\"\"}}});var L,M=function(c){if(c.data&&void 0!==c.data.title)return c.data.title;var d=b.st.image.titleSrc;if(d){if(a.isFunction(d))return d.call(b,c);if(c.el)return c.el.attr(d)||\"\"}return\"\"};a.magnificPopup.registerModule(\"image\",{options:{markup:'<div class=\"mfp-figure\"><div class=\"mfp-close\"></div><figure><div class=\"mfp-img\"></div><figcaption><div class=\"mfp-bottom-bar\"><div class=\"mfp-title\"></div><div class=\"mfp-counter\"></div></div></figcaption></figure></div>',cursor:\"mfp-zoom-out-cur\",titleSrc:\"title\",verticalFit:!0,tError:'<a href=\"%url%\">The image</a> could not be loaded.'},proto:{initImage:function(){var c=b.st.image,d=\".image\";b.types.push(\"image\"),w(m+d,function(){\"image\"===b.currItem.type&&c.cursor&&a(document.body).addClass(c.cursor)}),w(h+d,function(){c.cursor&&a(document.body).removeClass(c.cursor),v.off(\"resize\"+p)}),w(\"Resize\"+d,b.resizeImage),b.isLowIE&&w(\"AfterChange\",b.resizeImage)},resizeImage:function(){var a=b.currItem;if(a&&a.img&&b.st.image.verticalFit){var c=0;b.isLowIE&&(c=parseInt(a.img.css(\"padding-top\"),10)+parseInt(a.img.css(\"padding-bottom\"),10)),a.img.css(\"max-height\",b.wH-c)}},_onImageHasSize:function(a){a.img&&(a.hasSize=!0,L&&clearInterval(L),a.isCheckingImgSize=!1,y(\"ImageHasSize\",a),a.imgHidden&&(b.content&&b.content.removeClass(\"mfp-loading\"),a.imgHidden=!1))},findImageSize:function(a){var c=0,d=a.img[0],e=function(f){L&&clearInterval(L),L=setInterval(function(){return d.naturalWidth>0?void b._onImageHasSize(a):(c>200&&clearInterval(L),c++,void(3===c?e(10):40===c?e(50):100===c&&e(500)))},f)};e(1)},getImage:function(c,d){var e=0,f=function(){c&&(c.img[0].complete?(c.img.off(\".mfploader\"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus(\"ready\")),c.hasSize=!0,c.loaded=!0,y(\"ImageLoadComplete\")):(e++,200>e?setTimeout(f,100):g()))},g=function(){c&&(c.img.off(\".mfploader\"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus(\"error\",h.tError.replace(\"%url%\",c.src))),c.hasSize=!0,c.loaded=!0,c.loadError=!0)},h=b.st.image,i=d.find(\".mfp-img\");if(i.length){var j=document.createElement(\"img\");j.className=\"mfp-img\",c.el&&c.el.find(\"img\").length&&(j.alt=c.el.find(\"img\").attr(\"alt\")),c.img=a(j).on(\"load.mfploader\",f).on(\"error.mfploader\",g),j.src=c.src,i.is(\"img\")&&(c.img=c.img.clone()),j=c.img[0],j.naturalWidth>0?c.hasSize=!0:j.width||(c.hasSize=!1)}return b._parseMarkup(d,{title:M(c),img_replaceWith:c.img},c),b.resizeImage(),c.hasSize?(L&&clearInterval(L),c.loadError?(d.addClass(\"mfp-loading\"),b.updateStatus(\"error\",h.tError.replace(\"%url%\",c.src))):(d.removeClass(\"mfp-loading\"),b.updateStatus(\"ready\")),d):(b.updateStatus(\"loading\"),c.loading=!0,c.hasSize||(c.imgHidden=!0,d.addClass(\"mfp-loading\"),b.findImageSize(c)),d)}}});var N,O=function(){return void 0===N&&(N=void 0!==document.createElement(\"p\").style.MozTransform),N};a.magnificPopup.registerModule(\"zoom\",{options:{enabled:!1,easing:\"ease-in-out\",duration:300,opener:function(a){return a.is(\"img\")?a:a.find(\"img\")}},proto:{initZoom:function(){var a,c=b.st.zoom,d=\".zoom\";if(c.enabled&&b.supportsTransition){var e,f,g=c.duration,j=function(a){var b=a.clone().removeAttr(\"style\").removeAttr(\"class\").addClass(\"mfp-animated-image\"),d=\"all \"+c.duration/1e3+\"s \"+c.easing,e={position:\"fixed\",zIndex:9999,left:0,top:0,\"-webkit-backface-visibility\":\"hidden\"},f=\"transition\";return e[\"-webkit-\"+f]=e[\"-moz-\"+f]=e[\"-o-\"+f]=e[f]=d,b.css(e),b},k=function(){b.content.css(\"visibility\",\"visible\")};w(\"BuildControls\"+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.content.css(\"visibility\",\"hidden\"),a=b._getItemToZoom(),!a)return void k();f=j(a),f.css(b._getOffset()),b.wrap.append(f),e=setTimeout(function(){f.css(b._getOffset(!0)),e=setTimeout(function(){k(),setTimeout(function(){f.remove(),a=f=null,y(\"ZoomAnimationEnded\")},16)},g)},16)}}),w(i+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.st.removalDelay=g,!a){if(a=b._getItemToZoom(),!a)return;f=j(a)}f.css(b._getOffset(!0)),b.wrap.append(f),b.content.css(\"visibility\",\"hidden\"),setTimeout(function(){f.css(b._getOffset())},16)}}),w(h+d,function(){b._allowZoom()&&(k(),f&&f.remove(),a=null)})}},_allowZoom:function(){return\"image\"===b.currItem.type},_getItemToZoom:function(){return b.currItem.hasSize?b.currItem.img:!1},_getOffset:function(c){var d;d=c?b.currItem.img:b.st.zoom.opener(b.currItem.el||b.currItem);var e=d.offset(),f=parseInt(d.css(\"padding-top\"),10),g=parseInt(d.css(\"padding-bottom\"),10);e.top-=a(window).scrollTop()-f;var h={width:d.width(),height:(u?d.innerHeight():d[0].offsetHeight)-g-f};return O()?h[\"-moz-transform\"]=h.transform=\"translate(\"+e.left+\"px,\"+e.top+\"px)\":(h.left=e.left,h.top=e.top),h}}});var P=\"iframe\",Q=\"//about:blank\",R=function(a){if(b.currTemplate[P]){var c=b.currTemplate[P].find(\"iframe\");c.length&&(a||(c[0].src=Q),b.isIE8&&c.css(\"display\",a?\"block\":\"none\"))}};a.magnificPopup.registerModule(P,{options:{markup:'<div class=\"mfp-iframe-scaler\"><div class=\"mfp-close\"></div><iframe class=\"mfp-iframe\" src=\"//about:blank\" frameborder=\"0\" allowfullscreen></iframe></div>',srcAction:\"iframe_src\",patterns:{youtube:{index:\"youtube.com\",id:\"v=\",src:\"//www.youtube.com/embed/%id%?autoplay=1\"},vimeo:{index:\"vimeo.com/\",id:\"/\",src:\"//player.vimeo.com/video/%id%?autoplay=1\"},gmaps:{index:\"//maps.google.\",src:\"%id%&output=embed\"}}},proto:{initIframe:function(){b.types.push(P),w(\"BeforeChange\",function(a,b,c){b!==c&&(b===P?R():c===P&&R(!0))}),w(h+\".\"+P,function(){R()})},getIframe:function(c,d){var e=c.src,f=b.st.iframe;a.each(f.patterns,function(){return e.indexOf(this.index)>-1?(this.id&&(e=\"string\"==typeof this.id?e.substr(e.lastIndexOf(this.id)+this.id.length,e.length):this.id.call(this,e)),e=this.src.replace(\"%id%\",e),!1):void 0});var g={};return f.srcAction&&(g[f.srcAction]=e),b._parseMarkup(d,g,c),b.updateStatus(\"ready\"),d}}});var S=function(a){var c=b.items.length;return a>c-1?a-c:0>a?c+a:a},T=function(a,b,c){return a.replace(/%curr%/gi,b+1).replace(/%total%/gi,c)};a.magnificPopup.registerModule(\"gallery\",{options:{enabled:!1,arrowMarkup:'<button title=\"%title%\" type=\"button\" class=\"mfp-arrow mfp-arrow-%dir%\"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:\"Previous (Left arrow key)\",tNext:\"Next (Right arrow key)\",tCounter:\"%curr% of %total%\"},proto:{initGallery:function(){var c=b.st.gallery,e=\".mfp-gallery\";return b.direction=!0,c&&c.enabled?(f+=\" mfp-gallery\",w(m+e,function(){c.navigateByImgClick&&b.wrap.on(\"click\"+e,\".mfp-img\",function(){return b.items.length>1?(b.next(),!1):void 0}),d.on(\"keydown\"+e,function(a){37===a.keyCode?b.prev():39===a.keyCode&&b.next()})}),w(\"UpdateStatus\"+e,function(a,c){c.text&&(c.text=T(c.text,b.currItem.index,b.items.length))}),w(l+e,function(a,d,e,f){var g=b.items.length;e.counter=g>1?T(c.tCounter,f.index,g):\"\"}),w(\"BuildControls\"+e,function(){if(b.items.length>1&&c.arrows&&!b.arrowLeft){var d=c.arrowMarkup,e=b.arrowLeft=a(d.replace(/%title%/gi,c.tPrev).replace(/%dir%/gi,\"left\")).addClass(s),f=b.arrowRight=a(d.replace(/%title%/gi,c.tNext).replace(/%dir%/gi,\"right\")).addClass(s);e.click(function(){b.prev()}),f.click(function(){b.next()}),b.container.append(e.add(f))}}),w(n+e,function(){b._preloadTimeout&&clearTimeout(b._preloadTimeout),b._preloadTimeout=setTimeout(function(){b.preloadNearbyImages(),b._preloadTimeout=null},16)}),void w(h+e,function(){d.off(e),b.wrap.off(\"click\"+e),b.arrowRight=b.arrowLeft=null})):!1},next:function(){b.direction=!0,b.index=S(b.index+1),b.updateItemHTML()},prev:function(){b.direction=!1,b.index=S(b.index-1),b.updateItemHTML()},goTo:function(a){b.direction=a>=b.index,b.index=a,b.updateItemHTML()},preloadNearbyImages:function(){var a,c=b.st.gallery.preload,d=Math.min(c[0],b.items.length),e=Math.min(c[1],b.items.length);for(a=1;a<=(b.direction?e:d);a++)b._preloadItem(b.index+a);for(a=1;a<=(b.direction?d:e);a++)b._preloadItem(b.index-a)},_preloadItem:function(c){if(c=S(c),!b.items[c].preloaded){var d=b.items[c];d.parsed||(d=b.parseEl(c)),y(\"LazyLoad\",d),\"image\"===d.type&&(d.img=a('<img class=\"mfp-img\" />').on(\"load.mfploader\",function(){d.hasSize=!0}).on(\"error.mfploader\",function(){d.hasSize=!0,d.loadError=!0,y(\"LazyLoadError\",d)}).attr(\"src\",d.src)),d.preloaded=!0}}}});var U=\"retina\";a.magnificPopup.registerModule(U,{options:{replaceSrc:function(a){return a.src.replace(/\\.\\w+$/,function(a){return\"@2x\"+a})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var a=b.st.retina,c=a.ratio;c=isNaN(c)?c():c,c>1&&(w(\"ImageHasSize.\"+U,function(a,b){b.img.css({\"max-width\":b.img[0].naturalWidth/c,width:\"100%\"})}),w(\"ElementParse.\"+U,function(b,d){d.src=a.replaceSrc(d,c)}))}}}}),A()});","Magento_Multishipping/js/payment.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/template',\n    'Magento_Ui/js/modal/alert',\n    'jquery/ui',\n    'mage/translate'\n], function ($, mageTemplate, alert) {\n    'use strict';\n\n    $.widget('mage.payment', {\n        options: {\n            continueSelector: '#payment-continue',\n            methodsContainer: '#payment-methods',\n            minBalance: 0,\n            tmpl: '<input id=\"hidden-free\" type=\"hidden\" name=\"payment[method]\" value=\"free\">'\n        },\n\n        /** @inheritdoc */\n        _create: function () {\n            this.element.find('dd [name^=\"payment[\"]').prop('disabled', true).end()\n                .on('click', this.options.continueSelector, $.proxy(this._submitHandler, this))\n                .on('updateCheckoutPrice', $.proxy(function (event, data) {\n                    //updating the checkoutPrice\n                    if (data.price) {\n                        this.options.checkoutPrice += data.price;\n                    }\n\n                    //updating total price\n                    if (data.totalPrice) {\n                        data.totalPrice = this.options.checkoutPrice;\n                    }\n\n                    if (this.options.checkoutPrice <= this.options.minBalance) {\n                        // Add free input field, hide and disable unchecked\n                        // checkbox payment method and all radio button payment methods\n                        this._disablePaymentMethods();\n                    } else {\n                        // Remove free input field, show all payment method\n                        this._enablePaymentMethods();\n                    }\n                }, this))\n                .on('click', 'dt input:radio', $.proxy(this._paymentMethodHandler, this));\n\n            if (this.options.checkoutPrice < this.options.minBalance) {\n                this._disablePaymentMethods();\n            } else {\n                this._enablePaymentMethods();\n            }\n        },\n\n        /**\n         * Display payment details when payment method radio button is checked\n         * @private\n         * @param {EventObject} e\n         */\n        _paymentMethodHandler: function (e) {\n            var element = $(e.target),\n                parentsDl = element.closest('dl');\n\n            parentsDl.find('dt input:radio').prop('checked', false);\n            parentsDl.find('dd').addClass('no-display').end()\n                .find('.items').hide()\n                .find('[name^=\"payment[\"]').prop('disabled', true);\n            element.prop('checked', true).parent()\n                .next('dd').removeClass('no-display')\n                .find('.items').show().find('[name^=\"payment[\"]').prop('disabled', false);\n        },\n\n        /**\n         * make sure one payment method is selected\n         * @private\n         * @return {Boolean}\n         */\n        _validatePaymentMethod: function () {\n            var methods = this.element.find('[name^=\"payment[\"]'),\n                isValid = false;\n\n            if (methods.length === 0) {\n                alert({\n                    content: $.mage.__('We can\\'t complete your order because you don\\'t have a payment method set up.')\n                });\n            } else if (this.options.checkoutPrice <= this.options.minBalance) {\n                isValid = true;\n            } else if (methods.filter('input:radio:checked').length) {\n                isValid = true;\n            } else {\n                alert({\n                    content: $.mage.__('Please choose a payment method.')\n                });\n            }\n\n            return isValid;\n        },\n\n        /**\n         * Disable and enable payment methods\n         * @private\n         */\n        _disablePaymentMethods: function () {\n            var tmpl = mageTemplate(this.options.tmpl, {\n                data: {}\n            });\n\n            this.element.find('input[name=\"payment[method]\"]').prop('disabled', true).end()\n                .find('input[id^=\"use\"][name^=\"payment[use\"]:not(:checked)').prop('disabled', true).parent().hide();\n            this.element.find('[name=\"payment[method]\"][value=\"free\"]').parent('dt').remove();\n            this.element.find(this.options.methodsContainer).hide().find('[name^=\"payment[\"]').prop('disabled', true);\n\n            $(tmpl).appendTo(this.element);\n        },\n\n        /**\n         * Enable and enable payment methods\n         * @private\n         */\n        _enablePaymentMethods: function () {\n            this.element.find('input[name=\"payment[method]\"]').prop('disabled', false).end()\n                .find('dt input:radio:checked').trigger('click').end()\n                .find('input[id^=\"use\"][name^=\"payment[use\"]:not(:checked)').prop('disabled', false).parent().show();\n            this.element.find(this.options.methodsContainer).show();\n        },\n\n        /**\n         * Returns checked payment method.\n         *\n         * @private\n         */\n        _getSelectedPaymentMethod: function () {\n            return this.element.find('input[name=\\'payment[method]\\']:checked');\n        },\n\n        /**\n         * Validate  before form submit\n         * @private\n         * @param {EventObject} e\n         */\n        _submitHandler: function (e) {\n            var currentMethod,\n                submitButton;\n\n            e.preventDefault();\n\n            if (this._validatePaymentMethod()) {\n                currentMethod = this._getSelectedPaymentMethod();\n                submitButton = currentMethod.parent().next('dd').find('button[type=submit]');\n\n                if (submitButton.length) {\n                    submitButton.first().trigger('click');\n                } else {\n                    this.element.submit();\n                }\n            }\n        }\n    });\n\n    return $.mage.payment;\n});\n","Magento_Multishipping/js/overview.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery/ui',\n    'mage/translate'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.orderOverview', {\n        options: {\n            opacity: 0.5, // CSS opacity for the 'Place Order' button when it's clicked and then disabled.\n            pleaseWaitLoader: 'span.please-wait', // 'Submitting order information...' Ajax loader.\n            placeOrderSubmit: 'button[type=\"submit\"]', // The 'Place Order' button.\n            agreements: '#checkout-agreements' // Container for all of the checkout agreements and terms/conditions\n        },\n\n        /**\n         * Bind a submit handler to the form.\n         * @private\n         */\n        _create: function () {\n            this.element.on('submit', $.proxy(this._showLoader, this));\n        },\n\n        /**\n         * Verify that all agreements and terms/conditions are checked. Show the Ajax loader. Disable\n         * the submit button (i.e. Place Order).\n         * @return {Boolean}\n         * @private\n         */\n        _showLoader: function () {\n            if ($(this.options.agreements).find('input[type=\"checkbox\"]:not(:checked)').length > 0) {\n                return false;\n            }\n            this.element.find(this.options.pleaseWaitLoader).show().end()\n                .find(this.options.placeOrderSubmit).prop('disabled', true).css('opacity', this.options.opacity);\n\n            return true;\n        }\n    });\n\n    return $.mage.orderOverview;\n});\n","Magento_Multishipping/js/multi-shipping.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery/ui'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.multiShipping', {\n        options: {\n            addNewAddressBtn: 'button[data-role=\"add-new-address\"]', // Add a new multishipping address.\n            addNewAddressFlag: '#add_new_address_flag', // Hidden input field with value 0 or 1.\n            canContinueBtn: 'button[data-role=\"can-continue\"]', // Continue (update quantity or go to shipping).\n            canContinueFlag: '#can_continue_flag' // Hidden input field with value 0 or 1.\n        },\n\n        /**\n         * Bind event handlers to click events for corresponding buttons.\n         * @private\n         */\n        _create: function () {\n            $(this.options.addNewAddressBtn).on('click', $.proxy(this._addNewAddress, this));\n            $(this.options.canContinueBtn).on('click', $.proxy(this._canContinue, this));\n        },\n\n        /**\n         * Add a new address. Set the hidden input field and submit the form. Then enter a new shipping address.\n         * @private\n         */\n        _addNewAddress: function () {\n            $(this.options.addNewAddressFlag).val(1);\n            this.element.submit();\n        },\n\n        /**\n         * Can the user continue to the next step? The data-flag attribute holds either 0 (no) or 1 (yes).\n         * @private\n         * @param {Event} event - Click event on the corresponding button.\n         */\n        _canContinue: function (event) {\n            $(this.options.canContinueFlag).val(parseInt($(event.currentTarget).data('flag'), 10));\n        }\n    });\n\n    return $.mage.multiShipping;\n});\n","Magento_SendFriend/back-event.js":"/**\n* Copyright \u00a9 Magento, Inc. All rights reserved.\n* See COPYING.txt for license details.\n*/\n\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    return function (config, element) {\n        $(element).on('click', function () {\n            history.back();\n\n            return false;\n        });\n    };\n});\n","Magento_CheckoutAgreements/js/view/checkout-agreements.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'ko',\n    'jquery',\n    'uiComponent',\n    'Magento_CheckoutAgreements/js/model/agreements-modal'\n], function (ko, $, Component, agreementsModal) {\n    'use strict';\n\n    var checkoutConfig = window.checkoutConfig,\n        agreementManualMode = 1,\n        agreementsConfig = checkoutConfig ? checkoutConfig.checkoutAgreements : {};\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_CheckoutAgreements/checkout/checkout-agreements'\n        },\n        isVisible: agreementsConfig.isEnabled,\n        agreements: agreementsConfig.agreements,\n        modalTitle: ko.observable(null),\n        modalContent: ko.observable(null),\n        modalWindow: null,\n\n        /**\n         * Checks if agreement required\n         *\n         * @param {Object} element\n         */\n        isAgreementRequired: function (element) {\n            return element.mode == agreementManualMode; //eslint-disable-line eqeqeq\n        },\n\n        /**\n         * Show agreement content in modal\n         *\n         * @param {Object} element\n         */\n        showContent: function (element) {\n            this.modalTitle(element.checkboxText);\n            this.modalContent(element.content);\n            agreementsModal.showModal();\n        },\n\n        /**\n         * build a unique id for the term checkbox\n         *\n         * @param {Object} context - the ko context\n         * @param {Number} agreementId\n         */\n        getCheckboxId: function (context, agreementId) {\n            var paymentMethodName = '',\n                paymentMethodRenderer = context.$parents[1];\n\n            // corresponding payment method fetched from parent context\n            if (paymentMethodRenderer) {\n                // item looks like this: {title: \"Check / Money order\", method: \"checkmo\"}\n                paymentMethodName = paymentMethodRenderer.item ?\n                  paymentMethodRenderer.item.method : '';\n            }\n\n            return 'agreement_' + paymentMethodName + '_' + agreementId;\n        },\n\n        /**\n         * Init modal window for rendered element\n         *\n         * @param {Object} element\n         */\n        initModal: function (element) {\n            agreementsModal.createModal(element);\n        }\n    });\n});\n","Magento_CheckoutAgreements/js/view/agreement-validation.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'uiComponent',\n    'Magento_Checkout/js/model/payment/additional-validators',\n    'Magento_CheckoutAgreements/js/model/agreement-validator'\n], function (Component, additionalValidators, agreementValidator) {\n    'use strict';\n\n    additionalValidators.registerValidator(agreementValidator);\n\n    return Component.extend({});\n});\n","Magento_CheckoutAgreements/js/model/place-order-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/utils/wrapper',\n    'Magento_CheckoutAgreements/js/model/agreements-assigner'\n], function ($, wrapper, agreementsAssigner) {\n    'use strict';\n\n    return function (placeOrderAction) {\n\n        /** Override default place order action and add agreement_ids to request */\n        return wrapper.wrap(placeOrderAction, function (originalAction, paymentData, messageContainer) {\n            agreementsAssigner(paymentData);\n\n            return originalAction(paymentData, messageContainer);\n        });\n    };\n});\n","Magento_CheckoutAgreements/js/model/agreements-modal.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/modal',\n    'mage/translate'\n], function ($, modal, $t) {\n    'use strict';\n\n    return {\n        modalWindow: null,\n\n        /**\n         * Create popUp window for provided element.\n         *\n         * @param {HTMLElement} element\n         */\n        createModal: function (element) {\n            var options;\n\n            this.modalWindow = element;\n            options = {\n                'type': 'popup',\n                'modalClass': 'agreements-modal',\n                'responsive': true,\n                'innerScroll': true,\n                'trigger': '.show-modal',\n                'buttons': [\n                    {\n                        text: $t('Close'),\n                        class: 'action secondary action-hide-popup',\n\n                        /** @inheritdoc */\n                        click: function () {\n                            this.closeModal();\n                        }\n                    }\n                ]\n            };\n            modal(options, $(this.modalWindow));\n        },\n\n        /** Show login popup window */\n        showModal: function () {\n            $(this.modalWindow).modal('openModal');\n        }\n    };\n});\n","Magento_CheckoutAgreements/js/model/agreement-validator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/validation'\n], function ($) {\n    'use strict';\n\n    var checkoutConfig = window.checkoutConfig,\n        agreementsConfig = checkoutConfig ? checkoutConfig.checkoutAgreements : {},\n        agreementsInputPath = '.payment-method._active div.checkout-agreements input';\n\n    return {\n        /**\n         * Validate checkout agreements\n         *\n         * @returns {Boolean}\n         */\n        validate: function () {\n            var isValid = true;\n\n            if (!agreementsConfig.isEnabled || $(agreementsInputPath).length === 0) {\n                return true;\n            }\n\n            $(agreementsInputPath).each(function (index, element) {\n                if (!$.validator.validateSingleElement(element, {\n                    errorElement: 'div'\n                })) {\n                    isValid = false;\n                }\n            });\n\n            return isValid;\n        }\n    };\n});\n","Magento_CheckoutAgreements/js/model/set-payment-information-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*global alert*/\ndefine([\n    'jquery',\n    'mage/utils/wrapper',\n    'Magento_CheckoutAgreements/js/model/agreements-assigner'\n], function ($, wrapper, agreementsAssigner) {\n    'use strict';\n\n    return function (placeOrderAction) {\n\n        /** Override place-order-mixin for set-payment-information action as they differs only by method signature */\n        return wrapper.wrap(placeOrderAction, function (originalAction, messageContainer, paymentData) {\n            agreementsAssigner(paymentData);\n\n            return originalAction(messageContainer, paymentData);\n        });\n    };\n});\n","Magento_CheckoutAgreements/js/model/agreements-assigner.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/*global alert*/\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    var agreementsConfig = window.checkoutConfig.checkoutAgreements;\n\n    /** Override default place order action and add agreement_ids to request */\n    return function (paymentData) {\n        var agreementForm,\n            agreementData,\n            agreementIds;\n\n        if (!agreementsConfig.isEnabled) {\n            return;\n        }\n\n        agreementForm = $('.payment-method._active div[data-role=checkout-agreements] input');\n        agreementData = agreementForm.serializeArray();\n        agreementIds = [];\n\n        agreementData.forEach(function (item) {\n            agreementIds.push(item.value);\n        });\n\n        if (paymentData['extension_attributes'] === undefined) {\n            paymentData['extension_attributes'] = {};\n        }\n\n        paymentData['extension_attributes']['agreement_ids'] = agreementIds;\n    };\n});\n","Amazon_Login/js/amazon-csrf.js":"/**\n * Copyright 2016 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\n\ndefine([\n    'sjcl',\n    'jquery',\n    'mage/cookies'\n], function (sjcl, $) {\n    'use strict';\n\n    return {\n        options: {\n            wordsLength: 8,\n            cookieName: 'amazon-csrf-state'\n        },\n\n        /**\n         * Create random string for Amazon CSRF cookie\n         */\n        generateNewValue: function () {\n            var randomString = sjcl.codec.base64.fromBits(sjcl.random.randomWords(this.options.wordsLength));\n\n            $.mage.cookies.set(this.options.cookieName, randomString);\n\n            return randomString;\n        },\n\n        /**\n         * Check if Amazon CSRF cookie is valid and clear cookie\n         * @param {String} stateString\n         * @returns {Boolean}\n         */\n        isValid: function (stateString) {\n            var isValid = $.mage.cookies.get(this.options.cookieName) === stateString;\n\n            this.clear(); // always clear nonce when validating\n\n            return isValid;\n        },\n\n        /**\n         * Clear Amazon CSRF cookie\n         */\n        clear: function () {\n            $.mage.cookies.clear(this.options.cookieName);\n        }\n    };\n});\n","Amazon_Login/js/amazon-logout.js":"/**\n * Copyright 2016 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\n\ndefine([\n    'jquery',\n    'amazonCore',\n    'jquery/ui',\n    'mage/cookies'\n], function ($, core) {\n    'use strict';\n\n    $.widget('amazon.AmazonLogout', {\n        options: {\n            onInit: false\n        },\n\n        /**\n         * Create Amazon Logout Widget\n         * @private\n         */\n        _create: function () {\n            if (this.options.onInit) {\n                core.AmazonLogout(); //logout amazon user on init\n                $.mage.cookies.clear('amazon_Login_accessToken');\n            }\n        },\n\n        /**\n         * Logs out a user if called directly\n         * @private\n         */\n        _logoutAmazonUser: function () {\n            core.AmazonLogout();\n            $.mage.cookies.clear('amazon_Login_accessToken');\n        }\n    });\n\n    return $.amazon.AmazonLogout;\n});\n","Amazon_Login/js/amazon-redirect.js":"/**\n * Copyright 2016 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\n\ndefine([\n    'jquery',\n    'amazonCore',\n    'amazonPaymentConfig',\n    'amazonCsrf',\n    'mage/loader',\n    'jquery/ui',\n    'mage/cookies'\n], function ($, amazonCore, amazonPaymentConfig, amazonCsrf) {\n    'use strict';\n\n    var self;\n\n    $.widget('amazon.AmazonRedirect', {\n\n        /**\n         * @private\n         */\n        _create: function () {\n\n            self = this;\n            // start the loading animation. WIll en on redirect, no explicit stop here\n            $('body').trigger('processStart');\n\n            //verify nonce first\n            this.redirectOnInvalidState();\n\n            // we don't have the customer's consent or invalid request\n            this.redirectOnRequestWithError();\n            this.setAuthStateCookies();\n            amazonCore.amazonDefined.subscribe(function () {\n                //only set this on the redirect page\n                amazon.Login.setUseCookie(true); //eslint-disable-line no-undef\n                amazonCore.verifyAmazonLoggedIn().then(function (loggedIn) {\n                    if (loggedIn) {\n                        self.redirect();\n                    }\n                }, 0);\n            }, this);\n        },\n\n        /**\n         * getURLParamater from URL for access OAuth Token\n         * @param {String} name\n         * @param {String} source\n         * @returns {String|Null}\n         */\n        getURLParameter: function (name, source) {\n            return decodeURIComponent((new RegExp('[?|&|#]' + name + '=' +\n                    '([^&]+?)(&|#|;|$)').exec(source) || [,''])[1].replace(\n                        /\\+/g,\n                        '%20'\n                    )) || null;\n        },\n\n        /**\n         * Set State Cache Auth Cookies if they aren't already set\n         * @returns {Boolean}\n         */\n        setAuthStateCookies: function () {\n            var token = this.getURLParameter('access_token', location.hash);\n\n            if (typeof token === 'string' && token.match(/^Atza/)) {\n                $.mage.cookies.set('amazon_Login_accessToken', token);\n            }\n\n            return true;\n        },\n\n        /**\n         * Redirect user to correct controller which logs them into M2 via Amazon hash\n         */\n        redirect: function () {\n            window.location = amazonPaymentConfig.getValue('redirectUrl') + '?access_token=' +\n                this.getURLParameter('access_token', location.hash);\n        },\n\n        /**\n         * Redirect user on invalid state\n         */\n        redirectOnInvalidState: function () {\n            var state = this.getURLParameter('state', location.hash);\n\n            if (!state || !amazonCsrf.isValid(state)) {\n                window.location = amazonPaymentConfig.getValue('customerLoginPageUrl');\n            }\n        },\n\n        /**\n         * Redirect user on request error\n         */\n        redirectOnRequestWithError: function () {\n            if (this.getURLParameter('error', window.location)) {\n                window.location = amazonPaymentConfig.getValue('customerLoginPageUrl');\n            }\n        }\n    });\n\n    return $.amazon.AmazonRedirect;\n});\n","Amazon_Login/js/view/login-button-wrapper.js":"/**\n * Copyright 2016 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\n\nvar registry = require('uiRegistry'),\n    amazonPayment = registry.get('amazonPayment');\n\nif (amazonPayment !== undefined && amazonPayment.allowAmLoginLoading === true) {\n    define(['require', 'Amazon_Login/js/view/login-button'], function (require) {\n        'use strict';\n\n        return require('Amazon_Login/js/view/login-button');\n    });\n} else {\n    define(['require', 'uiComponent'], function (require) {\n        'use strict';\n\n        return require('uiComponent');\n    });\n}\n\n","Amazon_Login/js/view/login-button.js":"/**\n * Copyright 2016 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n *  http://aws.amazon.com/apache2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\n\ndefine(\n    [\n        'jquery',\n        'uiComponent',\n        'ko',\n        'Magento_Customer/js/model/customer',\n        'Amazon_Payment/js/model/storage',\n        'amazonPaymentConfig'\n    ],\n    function (\n        $,\n        Component,\n        ko,\n        customer,\n        amazonStorage,\n        amazonPaymentConfig\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'Amazon_Login/login-button'\n            },\n            isCustomerLoggedIn: customer.isLoggedIn,\n            isAmazonAccountLoggedIn: amazonStorage.isAmazonAccountLoggedIn,\n            isLwaVisible: ko.observable(amazonPaymentConfig.getValue('isLwaEnabled')),\n\n            /**\n             * Initialize login button\n             */\n            initialize: function () {\n                this._super();\n            }\n        });\n    }\n);\n","Mageplaza_LayeredNavigation/js/view/layer.js":"/**\r\n * Mageplaza\r\n *\r\n * NOTICE OF LICENSE\r\n *\r\n * This source file is subject to the Mageplaza.com license sliderConfig is\r\n * available through the world-wide-web at this URL:\r\n * https://www.mageplaza.com/LICENSE.txt\r\n *\r\n * DISCLAIMER\r\n *\r\n * Do not edit or add to this file if you wish to upgrade this extension to newer\r\n * version in the future.\r\n *\r\n * @category    Mageplaza\r\n * @package     Mageplaza_LayeredNavigation\r\n * @copyright   Copyright (c) Mageplaza (https://www.mageplaza.com/)\r\n * @license     https://www.mageplaza.com/LICENSE.txt\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Mageplaza_AjaxLayer/js/action/submit-filter',\r\n    'Magento_Catalog/js/price-utils',\r\n    'jquery/ui',\r\n    'accordion',\r\n    'productListToolbarForm'\r\n], function ($, submitFilterAction, ultil) {\r\n    \"use strict\";\r\n    var next_page = \"\";\r\n    var loading = false;\r\n    var infinite_loaded_count = 0;\r\n    var active = false;\r\n\r\n    $.widget('mageplaza.layer', $.mage.accordion, {\r\n        options: {\r\n            openedState: 'active',\r\n            collapsible: true,\r\n            multipleCollapsible: true,\r\n            animate: 200,\r\n            productsListSelector: '#layer-product-list',\r\n            mobileShopbyElement: '#layered-filter-block .filter-title [data-role=title]',\r\n            collapsibleElement: '[data-role=ln_collapsible]',\r\n            header: '[data-role=ln_title]',\r\n            content: '[data-role=ln_content]',\r\n            isCustomerLoggedIn: false,\r\n            isAjax: true,\r\n            params: [],\r\n            active: [],\r\n            checkboxEl: 'input[type=checkbox]',\r\n            sliderElementPrefix: '#ln_slider_',\r\n            sliderTextElementPrefix: '#ln_slider_text_'\r\n        },\r\n\r\n        inFinite: function() {\r\n            var self = this;\r\n            next_page = \"\";\r\n            if($(self.options.productsListSelector +' .infinite-loader').length > 0){\r\n                active = true;\r\n            }\r\n            $(\".pages-items li > a.next\").each(function(){\r\n                next_page = $(this).attr(\"href\");\r\n            });\r\n            if(!next_page){\r\n                $('.infinite-loader').hide();\r\n            }\r\n            $(\".infinite-loader .btn-load-more\").click(function(){\r\n                if(!loading && next_page){\r\n                    loading = true;\r\n                    self.ajaxInfinite(next_page);\r\n                }\r\n            });\r\n        },\r\n\r\n        ajaxInfinite: function (submitUrl) {\r\n            var self = this;\r\n            infinite_loaded_count++;\r\n            $('.infinite-loader .btn-load-more').hide();\r\n            $('.infinite-loader .loading').show();\r\n            $.ajax({\r\n                url: submitUrl,\r\n                type: 'get',\r\n                beforeSend: function () {\r\n                    $('.infinite-loader .btn-load-more').hide();\r\n                    $('.infinite-loader .loading').show();\r\n                },\r\n                success: function (res) {\r\n                    loading = false;\r\n                    var $products = $(res.products);\r\n                    if (res.backUrl) {\r\n                        window.location = res.backUrl;\r\n                        return;\r\n                    }\r\n                    if($products){\r\n                        $products.each(function(i,el){\r\n                            if($(el).hasClass('products-grid')){\r\n                                var items_grid = $(this).find('.product-items .item');\r\n                                $(self.options.productsListSelector + ' .products.wrapper .product-items').append(items_grid);\r\n                                $(self.options.productsListSelector).trigger('contentUpdated');\r\n                            }\r\n                            if($(el).hasClass('products-list')){\r\n                                var items_list = $(this).find('.product-items .item');\r\n                                $(self.options.productsListSelector + ' .products.wrapper .product-items').append(items_list);\r\n                                $(self.options.productsListSelector).trigger('contentUpdated');\r\n                            }\r\n                            if($(el).hasClass('toolbar-products')){\r\n                                if($(this).find('.pages a.next').length > 0){\r\n                                    $(self.options.productsListSelector + ' .pages a.next').attr('href', $(this).find('.pages a.next').attr('href'));\r\n                                }else{\r\n                                    $(self.options.productsListSelector + ' .pages a.next').remove();\r\n                                }\r\n                            }\r\n                        });\r\n                        if($(\"form[data-role=tocart-form]\").length > 0) {\r\n                            $(\"form[data-role=tocart-form]\").catalogAddToCart();\r\n                        }\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(2n)').addClass('nth-child-2n');\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(2n+1)').addClass('nth-child-2np1');\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(3n)').addClass('nth-child-3n');\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(3n+1)').addClass('nth-child-3np1');\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(4n)').addClass('nth-child-4n');\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(4n+1)').addClass('nth-child-4np1');\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(5n)').addClass('nth-child-5n');\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(5n+1)').addClass('nth-child-5np1');\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(6n)').addClass('nth-child-6n');\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(6n+1)').addClass('nth-child-6np1');\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(7n)').addClass('nth-child-7n');\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(7n+1)').addClass('nth-child-7np1');\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(8n)').addClass('nth-child-8n');\r\n                        $('.main .products.grid .product-items li.product-item:nth-child(8n+1)').addClass('nth-child-8np1');\r\n                        var hist = submitUrl;\r\n                        if(submitUrl.indexOf(\"p=\") > -1){\r\n                            var len = submitUrl.length-submitUrl.indexOf(\"p=\");\r\n                            var str_temp = submitUrl.substr(submitUrl.indexOf(\"p=\"),len);\r\n                            var page_param = \"\";\r\n                            if(str_temp.indexOf(\"&\") == -1){\r\n                                page_param = str_temp;\r\n                            } else {\r\n                                page_param = str_temp.substr(0,str_temp.indexOf(\"&\"));\r\n                            }\r\n                            hist = submitUrl.replace(page_param, \"\");\r\n                        }\r\n                        if (typeof window.history.pushState === 'function') {\r\n                            window.history.pushState({url: hist}, '', hist);\r\n                        }\r\n                        if(typeof enable_quickview != 'undefined' && enable_quickview == true) {\r\n                            requirejs(['jquery', 'weltpixel_quickview' ],\r\n                                function($, quickview) {\r\n                                    $('.weltpixel-quickview').off('click').on('click', function() {\r\n                                        var prodUrl = $(this).attr('data-quickview-url');\r\n                                        if (prodUrl.length) {\r\n                                            quickview.displayContent(prodUrl);\r\n                                        }\r\n                                    });\r\n                                });\r\n                        }\r\n                        $(\".products-grid .weltpixel-quickview\").each(function(){\r\n                            $(this).appendTo($(this).parent().parent().children(\".product-item-photo\"));\r\n                        });\r\n                        $(\"#layer-product-list img.porto-lazyload:not(.porto-lazyload-loaded)\").lazyload({effect:\"fadeIn\"});\r\n                        if ($('#layer-product-list .porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').length) {\r\n                            $('#layer-product-list .porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').on('initialized.owl.carousel', function() {\r\n                                $(this).find('.porto-lazyload:not(.porto-lazyload-loaded)').trigger('appear');\r\n                            });\r\n                            $('#layer-product-list .porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').on('changed.owl.carousel', function() {\r\n                                $(this).find('.porto-lazyload:not(.porto-lazyload-loaded)').trigger('appear');\r\n                            });\r\n                        }\r\n                        next_page = \"\";\r\n                        $(\".pages-items li > a.next\").each(function(){\r\n                            next_page = $(this).attr(\"href\");\r\n                        });\r\n                        $('.infinite-loader .loading').hide();\r\n                        if(next_page){\r\n                            $('.infinite-loader .btn-load-more').show();\r\n                            $(\".infinite-loader .btn-load-more\").unbind(\"click\").click(function(){\r\n                                if(!loading && next_page){\r\n                                    loading = true;\r\n                                    self.ajaxInfinite(next_page);\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                },\r\n                error: function () {\r\n                    window.location.reload();\r\n                }\r\n            });\r\n        },\r\n\r\n        _create: function () {\r\n            this.initActiveItems();\r\n\r\n            this._super();\r\n\r\n            this.initProductListUrl();\r\n            this.initObserve();\r\n            this.initSlider();\r\n            this.initWishlistCompare();\r\n        },\r\n\r\n        initActiveItems: function () {\r\n            var layerActives = this.options.active,\r\n                actives = [];\r\n\r\n            if (typeof window.layerActiveTabs !== 'undefined') {\r\n                layerActives = window.layerActiveTabs;\r\n            }\r\n            if (layerActives.length) {\r\n                this.element.find('.filter-options-item').each(function (index) {\r\n                    if (~$.inArray($(this).attr('attribute'), layerActives)) {\r\n                        actives.push(index);\r\n                    }\r\n                });\r\n            }\r\n\r\n            this.options.active = actives;\r\n\r\n            return this;\r\n        },\r\n\r\n        initProductListUrl: function () {\r\n            var isProcessToolbar = false,\r\n                isAjax = this.options.isAjax;\r\n            $.mage.productListToolbarForm.prototype.changeUrl = function (paramName, paramValue, defaultValue) {\r\n                if (isProcessToolbar) {\r\n                    return;\r\n                }\r\n                if (isAjax) {\r\n                    isProcessToolbar = true;\r\n                }\r\n\r\n                var urlPaths = this.options.url.split('?'),\r\n                    baseUrl = urlPaths[0],\r\n                    urlParams = urlPaths[1] ? urlPaths[1].split('&') : [],\r\n                    paramData = {},\r\n                    parameters;\r\n                for (var i = 0; i < urlParams.length; i++) {\r\n                    parameters = urlParams[i].split('=');\r\n                    paramData[parameters[0]] = parameters[1] !== undefined\r\n                        ? window.decodeURIComponent(parameters[1].replace(/\\+/g, '%20'))\r\n                        : '';\r\n                }\r\n                paramData[paramName] = paramValue;\r\n                if (paramValue === defaultValue) {\r\n                    delete paramData[paramName];\r\n                }\r\n                paramData = $.param(paramData);\r\n                if (isAjax) {\r\n                    submitFilterAction(baseUrl + (paramData.length ? '?' + paramData : ''));\r\n                }\r\n                else location.href = baseUrl + (paramData.length ? '?' + paramData : '');\r\n            }\r\n        },\r\n\r\n        initObserve: function () {\r\n            var self = this;\r\n            var isAjax = this.options.isAjax;\r\n            infinite_loaded_count = 0;\r\n\r\n            var pageElements = $('#layer-product-list').find('.pages a');\r\n            pageElements.each(function () {\r\n                var el = $(this),\r\n                    link = self.checkUrl(el.prop('href'));\r\n                if (!link) {\r\n                    return;\r\n                }\r\n\r\n                el.bind('click', function (e) {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    if (isAjax) {\r\n                        submitFilterAction(link);\r\n                    }\r\n                    else location.href = link;\r\n                })\r\n            });\r\n\r\n            var currentElements = this.element.find('.filter-current a, .filter-actions a');\r\n            currentElements.each(function (index) {\r\n                var el = $(this),\r\n                    link = self.checkUrl(el.prop('href'));\r\n                if (!link) {\r\n                    return;\r\n                }\r\n\r\n                el.bind('click', function (e) {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    if (isAjax) {\r\n                        submitFilterAction(link);\r\n                    }\r\n                    else location.href = link;\r\n                });\r\n            });\r\n\r\n            var optionElements = this.element.find('.filter-options a');\r\n            optionElements.each(function (index) {\r\n                var el = $(this),\r\n                    link = self.checkUrl(el.prop('href'));\r\n                if (!link) {\r\n                    return;\r\n                }\r\n\r\n                el.bind('click', function (e) {\r\n                    if (el.hasClass('swatch-option-link-layered')) {\r\n                        self.selectSwatchOption(el);\r\n                    } else {\r\n                        var checkboxEl = el.siblings(self.options.checkboxEl);\r\n                        checkboxEl.prop('checked', !checkboxEl.prop('checked'));\r\n                    }\r\n\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    self.ajaxSubmit(link);\r\n                });\r\n\r\n                var checkbox = el.siblings(self.options.checkboxEl);\r\n                checkbox.bind('click', function (e) {\r\n                    e.stopPropagation();\r\n                    self.ajaxSubmit(link);\r\n                });\r\n            });\r\n\r\n            var swatchElements = this.element.find('.swatch-attribute');\r\n            swatchElements.each(function (index) {\r\n                var el = $(this);\r\n                var attCode = el.attr('attribute-code');\r\n                if (attCode) {\r\n                    if (self.options.params.hasOwnProperty(attCode)) {\r\n                        var attValues = self.options.params[attCode].split(\",\");\r\n                        var swatchOptions = el.find('.swatch-option');\r\n                        swatchOptions.each(function (option) {\r\n                            var elOption = $(this);\r\n                            if ($.inArray(elOption.attr('option-id'), attValues) !== -1) {\r\n                                elOption.addClass('selected');\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n            if(typeof enable_quickview != 'undefined' && enable_quickview == true) {\r\n                requirejs(['jquery', 'weltpixel_quickview' ],\r\n                    function($, quickview) {\r\n                        $('.weltpixel-quickview').off('click').on('click', function() {\r\n                            var prodUrl = $(this).attr('data-quickview-url');\r\n                            if (prodUrl.length) {\r\n                                quickview.displayContent(prodUrl);\r\n                            }\r\n                        });\r\n                    });\r\n            }\r\n\r\n            $(\".products-grid .weltpixel-quickview\").each(function(){\r\n                $(this).appendTo($(this).parents('.product-item-info').children(\".product-item-photo\"));\r\n            });\r\n            $(\"#layer-product-list img.porto-lazyload:not(.porto-lazyload-loaded)\").lazyload({effect:\"fadeIn\"});\r\n            if ($('#layer-product-list .porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').length) {\r\n                $('#layer-product-list .porto-lazyload:not(.porto-lazyload-loaded)').closest('.owl-carousel').on('changed.owl.carousel', function() {\r\n                    $(this).find('.porto-lazyload:not(.porto-lazyload-loaded)').trigger('appear');\r\n                });\r\n            }\r\n            if(isAjax) {\r\n                self.inFinite();\r\n            }else{\r\n                $('.infinite-loader').hide();\r\n            }\r\n\r\n        },\r\n\r\n        selectSwatchOption: function (el) {\r\n            var childEl = el.find('.swatch-option');\r\n            if (childEl.hasClass('selected')) {\r\n                childEl.removeClass('selected');\r\n            } else {\r\n                childEl.addClass('selected');\r\n            }\r\n        },\r\n\r\n        initSlider: function () {\r\n            var self = this,\r\n                slider = this.options.slider;\r\n\r\n            for (var code in slider) {\r\n                if (slider.hasOwnProperty(code)) {\r\n                    var sliderConfig = slider[code],\r\n                        sliderElement = self.element.find(this.options.sliderElementPrefix + code),\r\n                        priceFormat = sliderConfig.hasOwnProperty('priceFormat') ? JSON.parse(sliderConfig.priceFormat) : null;\r\n\r\n                    if (sliderElement.length) {\r\n                        sliderElement.slider({\r\n                            range: true,\r\n                            min: sliderConfig.minValue,\r\n                            max: sliderConfig.maxValue,\r\n                            values: [sliderConfig.selectedFrom, sliderConfig.selectedTo],\r\n                            slide: function (event, ui) {\r\n                                self.displaySliderText(code, ui.values[0], ui.values[1], priceFormat);\r\n                            },\r\n                            change: function (event, ui) {\r\n                                self.ajaxSubmit(self.getSliderUrl(sliderConfig.ajaxUrl, ui.values[0], ui.values[1]));\r\n                            }\r\n                        });\r\n                    }\r\n                    self.displaySliderText(code, sliderConfig.selectedFrom, sliderConfig.selectedTo, priceFormat);\r\n                }\r\n            }\r\n        },\r\n\r\n        displaySliderText: function (code, from, to, format) {\r\n            var textElement = this.element.find(this.options.sliderTextElementPrefix + code);\r\n            if (textElement.length) {\r\n                if (format !== null) {\r\n                    from = this.formatPrice(from, format);\r\n                    to = this.formatPrice(to, format);\r\n                }\r\n\r\n                textElement.html(from + ' - ' + to);\r\n            }\r\n        },\r\n\r\n        getSliderUrl: function (url, from, to) {\r\n            return url.replace('from-to', from + '-' + to);\r\n        },\r\n\r\n        formatPrice: function (value, format) {\r\n            return ultil.formatPrice(value, format);\r\n        },\r\n\r\n        ajaxSubmit: function (submitUrl) {\r\n            var isAjax = this.options.isAjax;\r\n            this.element.find(this.options.mobileShopbyElement).trigger('click');\r\n\r\n            if (isAjax) {\r\n                return submitFilterAction(submitUrl);\r\n            }\r\n            location.href = submitUrl;\r\n        },\r\n\r\n        checkUrl: function (url) {\r\n            var regex = /(http|https):\\/\\/(\\w+:{0,1}\\w*)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%!\\-\\/]))?/;\r\n\r\n            return regex.test(url) ? url : null;\r\n        },\r\n\r\n        //Handling 'add to wishlist' & 'add to compare' event\r\n        initWishlistCompare: function () {\r\n            var isAjax = this.options.isAjax;\r\n            var isCustomerLoggedIn = this.options.isCustomerLoggedIn,\r\n                elClass = 'a.action.tocompare' + (isCustomerLoggedIn ? ',a.action.towishlist' : '');\r\n            $(elClass).each(function () {\r\n                var el = $(this);\r\n                $(el).bind('click', function (e) {\r\n                    var dataPost = $(el).data('post'),\r\n                        formKey = $('input[name=\"form_key\"]').val();\r\n                    if (formKey) {\r\n                        dataPost.data.form_key = formKey;\r\n                    }\r\n\r\n                    var paramData = $.param(dataPost.data),\r\n                        url = dataPost.action + (paramData.length ? '?' + paramData : '');\r\n\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    if (isAjax) {\r\n                        submitFilterAction(url);\r\n                    }\r\n                    else location.href = url;\r\n                });\r\n            })\r\n        }\r\n    });\r\n\r\n    return $.mageplaza.layer;\r\n});\r\n","Magento_Customer/change-email-password.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'jquery/ui'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.changeEmailPassword', {\n        options: {\n            changeEmailSelector: '[data-role=change-email]',\n            changePasswordSelector: '[data-role=change-password]',\n            mainContainerSelector: '[data-container=change-email-password]',\n            titleSelector: '[data-title=change-email-password]',\n            emailContainerSelector: '[data-container=change-email]',\n            newPasswordContainerSelector: '[data-container=new-password]',\n            confirmPasswordContainerSelector: '[data-container=confirm-password]',\n            currentPasswordSelector: '[data-input=current-password]',\n            emailSelector: '[data-input=change-email]',\n            newPasswordSelector: '[data-input=new-password]',\n            confirmPasswordSelector: '[data-input=confirm-password]'\n        },\n\n        /**\n         * Create widget\n         * @private\n         */\n        _create: function () {\n            this.element.on('change', $.proxy(function () {\n                this._checkChoice();\n            }, this));\n\n            this._checkChoice();\n            this._bind();\n        },\n\n        /**\n         * Event binding, will monitor change, keyup and paste events.\n         * @private\n         */\n        _bind: function () {\n            this._on($(this.options.emailSelector), {\n                'change': this._updatePasswordFieldWithEmailValue,\n                'keyup': this._updatePasswordFieldWithEmailValue,\n                'paste': this._updatePasswordFieldWithEmailValue\n            });\n        },\n\n        /**\n         * Check choice\n         * @private\n         */\n        _checkChoice: function () {\n            if ($(this.options.changeEmailSelector).is(':checked') &&\n                $(this.options.changePasswordSelector).is(':checked')) {\n                this._showAll();\n            } else if ($(this.options.changeEmailSelector).is(':checked')) {\n                this._showEmail();\n            } else if ($(this.options.changePasswordSelector).is(':checked')) {\n                this._showPassword();\n            } else {\n                this._hideAll();\n            }\n        },\n\n        /**\n         * Show email and password input fields\n         * @private\n         */\n        _showAll: function () {\n            $(this.options.titleSelector).html(this.options.titleChangeEmailAndPassword);\n\n            $(this.options.mainContainerSelector).show();\n            $(this.options.emailContainerSelector).show();\n            $(this.options.newPasswordContainerSelector).show();\n            $(this.options.confirmPasswordContainerSelector).show();\n\n            $(this.options.currentPasswordSelector).attr('data-validate', '{required:true}').prop('disabled', false);\n            $(this.options.emailSelector).attr('data-validate', '{required:true}').prop('disabled', false);\n            this._updatePasswordFieldWithEmailValue();\n            $(this.options.confirmPasswordSelector).attr(\n                'data-validate',\n                '{required:true, equalTo:\"' + this.options.newPasswordSelector + '\"}'\n            ).prop('disabled', false);\n        },\n\n        /**\n         * Hide email and password input fields\n         * @private\n         */\n        _hideAll: function () {\n            $(this.options.mainContainerSelector).hide();\n            $(this.options.emailContainerSelector).hide();\n            $(this.options.newPasswordContainerSelector).hide();\n            $(this.options.confirmPasswordContainerSelector).hide();\n\n            $(this.options.currentPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n            $(this.options.emailSelector).removeAttr('data-validate').prop('disabled', true);\n            $(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n            $(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n        },\n\n        /**\n         * Show email input fields\n         * @private\n         */\n        _showEmail: function () {\n            this._showAll();\n            $(this.options.titleSelector).html(this.options.titleChangeEmail);\n\n            $(this.options.newPasswordContainerSelector).hide();\n            $(this.options.confirmPasswordContainerSelector).hide();\n\n            $(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n            $(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled', true);\n        },\n\n        /**\n         * Show password input fields\n         * @private\n         */\n        _showPassword: function () {\n            this._showAll();\n            $(this.options.titleSelector).html(this.options.titleChangePassword);\n\n            $(this.options.emailContainerSelector).hide();\n\n            $(this.options.emailSelector).removeAttr('data-validate').prop('disabled', true);\n        },\n\n        /**\n         * Update password validation rules with email input field value\n         * @private\n         */\n        _updatePasswordFieldWithEmailValue: function () {\n            $(this.options.newPasswordSelector).attr(\n                'data-validate',\n                '{required:true, ' +\n                '\\'validate-customer-password\\':true, ' +\n                '\\'password-not-equal-to-user-name\\':\\'' + $(this.options.emailSelector).val() + '\\'}'\n            ).prop('disabled', false);\n        }\n    });\n\n    return $.mage.changeEmailPassword;\n});\n","Magento_Customer/address.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/confirm',\n    'jquery/ui',\n    'mage/translate'\n], function ($, confirm) {\n    'use strict';\n\n    $.widget('mage.address', {\n        /**\n         * Options common to all instances of this widget.\n         * @type {Object}\n         */\n        options: {\n            deleteConfirmMessage: $.mage.__('Are you sure you want to delete this address?')\n        },\n\n        /**\n         * Bind event handlers for adding and deleting addresses.\n         * @private\n         */\n        _create: function () {\n            var options         = this.options,\n                addAddress      = options.addAddress,\n                deleteAddress   = options.deleteAddress;\n\n            if (addAddress) {\n                $(document).on('click', addAddress, this._addAddress.bind(this));\n            }\n\n            if (deleteAddress) {\n                $(document).on('click', deleteAddress, this._deleteAddress.bind(this));\n            }\n        },\n\n        /**\n         * Add a new address.\n         * @private\n         */\n        _addAddress: function () {\n            window.location = this.options.addAddressLocation;\n        },\n\n        /**\n         * Delete the address whose id is specified in a data attribute after confirmation from the user.\n         * @private\n         * @param {jQuery.Event} e\n         * @return {Boolean}\n         */\n        _deleteAddress: function (e) {\n            var self = this;\n\n            confirm({\n                content: this.options.deleteConfirmMessage,\n                actions: {\n\n                    /** @inheritdoc */\n                    confirm: function () {\n                        if (typeof $(e.target).parent().data('address') !== 'undefined') {\n                            window.location = self.options.deleteUrlPrefix + $(e.target).parent().data('address') +\n                                '/form_key/' + $.mage.cookies.get('form_key');\n                        } else {\n                            window.location = self.options.deleteUrlPrefix + $(e.target).data('address') +\n                                '/form_key/' + $.mage.cookies.get('form_key');\n                        }\n                    }\n                }\n            });\n\n            return false;\n        }\n    });\n\n    return $.mage.address;\n});\n","Magento_Customer/js/addressValidation.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery/ui',\n    'validation'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.addressValidation', {\n        options: {\n            selectors: {\n                button: '[data-action=save-address]'\n            }\n        },\n\n        /**\n         * Validation creation\n         * @protected\n         */\n        _create: function () {\n            var button = $(this.options.selectors.button, this.element);\n\n            this.element.validation({\n\n                /**\n                 * Submit Handler\n                 * @param {Element} form - address form\n                 */\n                submitHandler: function (form) {\n\n                    button.attr('disabled', true);\n                    form.submit();\n                }\n            });\n        }\n    });\n\n    return $.mage.addressValidation;\n});\n","Magento_Customer/js/customer-data.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'underscore',\n    'ko',\n    'Magento_Customer/js/section-config',\n    'mage/storage',\n    'jquery/jquery-storageapi'\n], function ($, _, ko, sectionConfig) {\n    'use strict';\n\n    var options,\n        storage,\n        storageInvalidation,\n        invalidateCacheBySessionTimeOut,\n        invalidateCacheByCloseCookieSession,\n        dataProvider,\n        buffer,\n        customerData;\n\n    //TODO: remove global change, in this case made for initNamespaceStorage\n    $.cookieStorage.setConf({\n        path: '/',\n        expires: 1\n    });\n\n    storage = $.initNamespaceStorage('mage-cache-storage').localStorage;\n    storageInvalidation = $.initNamespaceStorage('mage-cache-storage-section-invalidation').localStorage;\n\n    /**\n     * @param {Object} invalidateOptions\n     */\n    invalidateCacheBySessionTimeOut = function (invalidateOptions) {\n        var date;\n\n        if (new Date($.localStorage.get('mage-cache-timeout')) < new Date()) {\n            storage.removeAll();\n            date = new Date(Date.now() + parseInt(invalidateOptions.cookieLifeTime, 10) * 1000);\n            $.localStorage.set('mage-cache-timeout', date);\n        }\n    };\n\n    /**\n     * Invalidate Cache By Close Cookie Session\n     */\n    invalidateCacheByCloseCookieSession = function () {\n        if (!$.cookieStorage.isSet('mage-cache-sessid')) {\n            $.cookieStorage.set('mage-cache-sessid', true);\n            storage.removeAll();\n        }\n    };\n\n    dataProvider = {\n\n        /**\n         * @param {Object} sectionNames\n         * @return {Object}\n         */\n        getFromStorage: function (sectionNames) {\n            var result = {};\n\n            _.each(sectionNames, function (sectionName) {\n                result[sectionName] = storage.get(sectionName);\n            });\n\n            return result;\n        },\n\n        /**\n         * @param {Object} sectionNames\n         * @param {Number} updateSectionId\n         * @return {*}\n         */\n        getFromServer: function (sectionNames, updateSectionId) {\n            var parameters;\n\n            sectionNames = sectionConfig.filterClientSideSections(sectionNames);\n            parameters = _.isArray(sectionNames) ? {\n                sections: sectionNames.join(',')\n            } : [];\n            parameters['update_section_id'] = updateSectionId;\n\n            return $.getJSON(options.sectionLoadUrl, parameters).fail(function (jqXHR) {\n                throw new Error(jqXHR);\n            });\n        }\n    };\n\n    /**\n     * @param {Function} target\n     * @param {String} sectionName\n     * @return {*}\n     */\n    ko.extenders.disposableCustomerData = function (target, sectionName) {\n        var sectionDataIds, newSectionDataIds = {};\n\n        target.subscribe(function () {\n            setTimeout(function () {\n                storage.remove(sectionName);\n                sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\n                _.each(sectionDataIds, function (data, name) {\n                    if (name != sectionName) { //eslint-disable-line eqeqeq\n                        newSectionDataIds[name] = data;\n                    }\n                });\n                $.cookieStorage.set('section_data_ids', newSectionDataIds);\n            }, 3000);\n        });\n\n        return target;\n    };\n\n    buffer = {\n        data: {},\n\n        /**\n         * @param {String} sectionName\n         */\n        bind: function (sectionName) {\n            this.data[sectionName] = ko.observable({});\n        },\n\n        /**\n         * @param {String} sectionName\n         * @return {Object}\n         */\n        get: function (sectionName) {\n            if (!this.data[sectionName]) {\n                this.bind(sectionName);\n            }\n\n            return this.data[sectionName];\n        },\n\n        /**\n         * @return {Array}\n         */\n        keys: function () {\n            return _.keys(this.data);\n        },\n\n        /**\n         * @param {String} sectionName\n         * @param {Object} sectionData\n         */\n        notify: function (sectionName, sectionData) {\n            if (!this.data[sectionName]) {\n                this.bind(sectionName);\n            }\n            this.data[sectionName](sectionData);\n        },\n\n        /**\n         * @param {Object} sections\n         */\n        update: function (sections) {\n            var sectionId = 0,\n                sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\n\n            _.each(sections, function (sectionData, sectionName) {\n                sectionId = sectionData['data_id'];\n                sectionDataIds[sectionName] = sectionId;\n                storage.set(sectionName, sectionData);\n                storageInvalidation.remove(sectionName);\n                buffer.notify(sectionName, sectionData);\n            });\n            $.cookieStorage.set('section_data_ids', sectionDataIds);\n        },\n\n        /**\n         * @param {Object} sections\n         */\n        remove: function (sections) {\n            _.each(sections, function (sectionName) {\n                storage.remove(sectionName);\n\n                if (!sectionConfig.isClientSideSection(sectionName)) {\n                    storageInvalidation.set(sectionName, true);\n                }\n            });\n        }\n    };\n\n    customerData = {\n\n        /**\n         * Customer data initialization\n         */\n        init: function () {\n            var countryData,\n                privateContentVersion = 'private_content_version',\n                privateContent = $.cookieStorage.get(privateContentVersion),\n                localPrivateContent = $.localStorage.get(privateContentVersion),\n                needVersion = 'need_version',\n                expiredSectionNames = this.getExpiredSectionNames();\n\n            if (privateContent &&\n                !$.cookieStorage.isSet(privateContentVersion) &&\n                !$.localStorage.isSet(privateContentVersion)\n            ) {\n                $.cookieStorage.set(privateContentVersion, needVersion);\n                $.localStorage.set(privateContentVersion, needVersion);\n                this.reload([], false);\n            } else if (localPrivateContent !== privateContent) {\n                if (!$.cookieStorage.isSet(privateContentVersion)) {\n                    privateContent = needVersion;\n                    $.cookieStorage.set(privateContentVersion, privateContent);\n                }\n                $.localStorage.set(privateContentVersion, privateContent);\n                this.reload([], false);\n            } else if (expiredSectionNames.length > 0) {\n                _.each(dataProvider.getFromStorage(storage.keys()), function (sectionData, sectionName) {\n                    buffer.notify(sectionName, sectionData);\n                });\n                this.reload(expiredSectionNames, false);\n            } else {\n                _.each(dataProvider.getFromStorage(storage.keys()), function (sectionData, sectionName) {\n                    buffer.notify(sectionName, sectionData);\n                });\n\n                if (!_.isEmpty(storageInvalidation.keys())) {\n                    this.reload(storageInvalidation.keys(), false);\n                }\n            }\n\n            if (!_.isEmpty(privateContent)) {\n                countryData = this.get('directory-data');\n\n                if (_.isEmpty(countryData())) {\n                    customerData.reload(['directory-data'], false);\n                }\n            }\n        },\n\n        /**\n         * Retrieve the list of sections that has expired since last page reload.\n         *\n         * Sections can expire due to lifetime constraints or due to inconsistent storage information\n         * (validated by cookie data).\n         *\n         * @return {Array}\n         */\n        getExpiredSectionNames: function () {\n            var expiredSectionNames = [],\n                cookieSectionTimestamps = $.cookieStorage.get('section_data_ids') || {},\n                sectionLifetime = options.expirableSectionLifetime * 60,\n                currentTimestamp = Math.floor(Date.now() / 1000),\n                sectionData;\n\n            // process sections that can expire due to lifetime constraints\n            _.each(options.expirableSectionNames, function (sectionName) {\n                sectionData = storage.get(sectionName);\n\n                if (typeof sectionData === 'object' && sectionData['data_id'] + sectionLifetime <= currentTimestamp) {\n                    expiredSectionNames.push(sectionName);\n                }\n            });\n\n            // process sections that can expire due to storage information inconsistency\n            _.each(cookieSectionTimestamps, function (cookieSectionTimestamp, sectionName) {\n                sectionData = storage.get(sectionName);\n\n                if (typeof sectionData === 'undefined' ||\n                    typeof sectionData === 'object' &&\n                    cookieSectionTimestamp != sectionData['data_id'] //eslint-disable-line\n                ) {\n                    expiredSectionNames.push(sectionName);\n                }\n            });\n\n            return _.uniq(expiredSectionNames);\n        },\n\n        /**\n         * Check if some sections have to be reloaded.\n         *\n         * @deprecated Use getExpiredSectionNames instead.\n         *\n         * @return {Boolean}\n         */\n        needReload: function () {\n            var expiredSectionNames = this.getExpiredSectionNames();\n\n            return expiredSectionNames.length > 0;\n        },\n\n        /**\n         * Retrieve the list of expired keys.\n         *\n         * @deprecated Use getExpiredSectionNames instead.\n         *\n         * @return {Array}\n         */\n        getExpiredKeys: function () {\n            return this.getExpiredSectionNames();\n        },\n\n        /**\n         * @param {String} sectionName\n         * @return {*}\n         */\n        get: function (sectionName) {\n            return buffer.get(sectionName);\n        },\n\n        /**\n         * @param {String} sectionName\n         * @param {Object} sectionData\n         */\n        set: function (sectionName, sectionData) {\n            var data = {};\n\n            data[sectionName] = sectionData;\n            buffer.update(data);\n        },\n\n        /**\n         * @param {Array} sectionNames\n         * @param {Number} updateSectionId\n         * @return {*}\n         */\n        reload: function (sectionNames, updateSectionId) {\n            return dataProvider.getFromServer(sectionNames, updateSectionId).done(function (sections) {\n                $(document).trigger('customer-data-reload', [sectionNames]);\n                buffer.update(sections);\n            });\n        },\n\n        /**\n         * @param {Array} sectionNames\n         */\n        invalidate: function (sectionNames) {\n            var sectionDataIds,\n                sectionsNamesForInvalidation;\n\n            sectionsNamesForInvalidation = _.contains(sectionNames, '*') ? buffer.keys() : sectionNames;\n            $(document).trigger('customer-data-invalidate', [sectionsNamesForInvalidation]);\n            buffer.remove(sectionsNamesForInvalidation);\n            sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\n\n            // Invalidate section in cookie (increase version of section with 1000)\n            _.each(sectionsNamesForInvalidation, function (sectionName) {\n                if (!sectionConfig.isClientSideSection(sectionName)) {\n                    sectionDataIds[sectionName] += 1000;\n                }\n            });\n            $.cookieStorage.set('section_data_ids', sectionDataIds);\n        },\n\n        /**\n         * @param {Object} settings\n         * @constructor\n         */\n        'Magento_Customer/js/customer-data': function (settings) {\n            options = settings;\n            invalidateCacheBySessionTimeOut(settings);\n            invalidateCacheByCloseCookieSession();\n            customerData.init();\n        }\n    };\n\n    /**\n     * Events listener\n     */\n    $(document).on('ajaxComplete', function (event, xhr, settings) {\n        var sections,\n            redirects;\n\n        if (settings.type.match(/post|put|delete/i)) {\n            sections = sectionConfig.getAffectedSections(settings.url);\n\n            if (sections) {\n                customerData.invalidate(sections);\n                redirects = ['redirect', 'backUrl'];\n\n                if (_.isObject(xhr.responseJSON) && !_.isEmpty(_.pick(xhr.responseJSON, redirects))) { //eslint-disable-line\n                    return;\n                }\n                customerData.reload(sections, true);\n            }\n        }\n    });\n\n    /**\n     * Events listener\n     */\n    $(document).on('submit', function (event) {\n        var sections;\n\n        if (event.target.method.match(/post|put|delete/i)) {\n            sections = sectionConfig.getAffectedSections(event.target.action);\n\n            if (sections) {\n                customerData.invalidate(sections);\n            }\n        }\n    });\n\n    return customerData;\n});\n","Magento_Customer/js/section-config.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine(['underscore'], function (_) {\n    'use strict';\n\n    var baseUrls, sections, clientSideSections, canonize;\n\n    /**\n     * @param {String} url\n     * @return {String}\n     */\n    canonize = function (url) {\n        var route = url,\n            key;\n\n        for (key in baseUrls) { //eslint-disable-line guard-for-in\n            route = url.replace(baseUrls[key], '');\n\n            if (route != url) { //eslint-disable-line eqeqeq\n                break;\n            }\n        }\n\n        return route.replace(/^\\/?index.php\\/?/, '').toLowerCase();\n    };\n\n    return {\n        /**\n         * @param {String} url\n         * @return {Array}\n         */\n        getAffectedSections: function (url) {\n            var route = canonize(url),\n                actions = _.find(sections, function (val, section) {\n                    var matched;\n\n                    if (section.indexOf('*') >= 0) {\n                        section = section.replace(/\\*/g, '[^/]+') + '$';\n                        matched = route.match(section);\n\n                        return matched && matched[0] == route; //eslint-disable-line eqeqeq\n                    }\n\n                    return route.indexOf(section) === 0;\n                });\n\n            return _.union(_.toArray(actions), _.toArray(sections['*']));\n        },\n\n        /**\n         * @param {*} allSections\n         * @return {*}\n         */\n        filterClientSideSections: function (allSections) {\n            if (Array.isArray(allSections)) {\n                return _.difference(allSections, clientSideSections);\n            }\n\n            return allSections;\n        },\n\n        /**\n         * @param {String} sectionName\n         * @return {Boolean}\n         */\n        isClientSideSection: function (sectionName) {\n            return _.contains(clientSideSections, sectionName);\n        },\n\n        /**\n         * @param {Object} options\n         * @constructor\n         */\n        'Magento_Customer/js/section-config': function (options) {\n            baseUrls = options.baseUrls;\n            sections = options.sections;\n            clientSideSections = options.clientSideSections;\n        }\n    };\n});\n","Magento_Customer/js/invalidation-processor.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'underscore',\n    'uiElement',\n    'Magento_Customer/js/customer-data'\n], function (_, Element, customerData) {\n    'use strict';\n\n    return Element.extend({\n        /**\n         * Initialize object\n         */\n        initialize: function () {\n            this._super();\n            this.process(customerData);\n        },\n\n        /**\n         * Process all rules in loop, each rule can invalidate some sections in customer data\n         *\n         * @param {Object} customerDataObject\n         */\n        process: function (customerDataObject) {\n            _.each(this.invalidationRules, function (rule, ruleName) {\n                _.each(rule, function (ruleArgs, rulePath) {\n                    require([rulePath], function (Rule) {\n                        var currentRule = new Rule(ruleArgs);\n\n                        if (!_.isFunction(currentRule.process)) {\n                            throw new Error('Rule ' + ruleName + ' should implement invalidationProcessor interface');\n                        }\n                        currentRule.process(customerDataObject);\n                    });\n                });\n            });\n        }\n    });\n});\n","Magento_Customer/js/checkout-balance.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'jquery/ui'\n], function ($) {\n    'use strict';\n\n    $.widget('mage.checkoutBalance', {\n        /**\n         * Initialize store credit events\n         * @private\n         */\n        _create: function () {\n            this.eventData = {\n                price: this.options.balance,\n                totalPrice: 0\n            };\n            this.element.on('change', $.proxy(function (e) {\n                if ($(e.target).is(':checked')) {\n                    this.eventData.price = -1 * this.options.balance;\n                } else {\n                    if (this.options.amountSubstracted) { //eslint-disable-line no-lonely-if\n                        this.eventData.price = parseFloat(this.options.usedAmount);\n                        this.options.amountSubstracted = false;\n                    } else {\n                        this.eventData.price = parseFloat(this.options.balance);\n                    }\n                }\n                this.element.trigger('updateCheckoutPrice', this.eventData);\n            }, this));\n        }\n    });\n\n    return $.mage.checkoutBalance;\n});\n","Magento_Customer/js/logout-redirect.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/mage'\n], function ($) {\n    'use strict';\n\n    return function (data) {\n        $($.mage.redirect(data.url, 'assign', 5000));\n    };\n});\n","Magento_Customer/js/password-strength-indicator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Customer/js/zxcvbn',\n    'mage/translate',\n    'mage/validation'\n], function ($, zxcvbn, $t) {\n    'use strict';\n\n    $.widget('mage.passwordStrengthIndicator', {\n        options: {\n            cache: {},\n            passwordSelector: '[type=password]',\n            passwordStrengthMeterSelector: '[data-role=password-strength-meter]',\n            passwordStrengthMeterLabelSelector: '[data-role=password-strength-meter-label]',\n            formSelector: 'form',\n            emailSelector: 'input[type=\"email\"]'\n        },\n\n        /**\n         * Widget initialization\n         * @private\n         */\n        _create: function () {\n            this.options.cache.input = $(this.options.passwordSelector, this.element);\n            this.options.cache.meter = $(this.options.passwordStrengthMeterSelector, this.element);\n            this.options.cache.label = $(this.options.passwordStrengthMeterLabelSelector, this.element);\n\n            // We need to look outside the module for backward compatibility, since someone can already use the module.\n            // @todo Narrow this selector in 2.3 so it doesn't accidentally finds the email field from the\n            // newsletter email field or any other \"email\" field.\n            this.options.cache.email = $(this.options.formSelector).find(this.options.emailSelector);\n            this._bind();\n        },\n\n        /**\n         * Event binding, will monitor change, keyup and paste events.\n         * @private\n         */\n        _bind: function () {\n            this._on(this.options.cache.input, {\n                'change': this._calculateStrength,\n                'keyup': this._calculateStrength,\n                'paste': this._calculateStrength\n            });\n\n            if (this.options.cache.email.length) {\n                this._on(this.options.cache.email, {\n                    'change': this._calculateStrength,\n                    'keyup': this._calculateStrength,\n                    'paste': this._calculateStrength\n                });\n            }\n        },\n\n        /**\n         * Calculate password strength\n         * @private\n         */\n        _calculateStrength: function () {\n            var password = this._getPassword(),\n                isEmpty = password.length === 0,\n                zxcvbnScore,\n                displayScore,\n                isValid;\n\n            // Display score is based on combination of whether password is empty, valid, and zxcvbn strength\n            if (isEmpty) {\n                displayScore = 0;\n            } else {\n                this.options.cache.input.rules('add', {\n                    'password-not-equal-to-user-name': this.options.cache.email.val()\n                });\n\n                // We should only perform this check in case there is an email field on screen\n                if (this.options.cache.email.length &&\n                    password.toLowerCase() === this.options.cache.email.val().toLowerCase()) {\n                    displayScore = 1;\n                } else {\n                    isValid = $.validator.validateSingleElement(this.options.cache.input);\n                    zxcvbnScore = zxcvbn(password).score;\n                    displayScore = isValid ? zxcvbnScore : 1;\n                }\n            }\n\n            // Update label\n            this._displayStrength(displayScore);\n        },\n\n        /**\n         * Display strength\n         * @param {Number} displayScore\n         * @private\n         */\n        _displayStrength: function (displayScore) {\n            var strengthLabel = '',\n                className;\n\n            switch (displayScore) {\n                case 0:\n                    strengthLabel = $t('No Password');\n                    className = 'password-none';\n                    break;\n\n                case 1:\n                    strengthLabel = $t('Weak');\n                    className = 'password-weak';\n                    break;\n\n                case 2:\n                    strengthLabel = $t('Medium');\n                    className = 'password-medium';\n                    break;\n\n                case 3:\n                    strengthLabel = $t('Strong');\n                    className = 'password-strong';\n                    break;\n\n                case 4:\n                    strengthLabel = $t('Very Strong');\n                    className = 'password-very-strong';\n                    break;\n            }\n\n            this.options.cache.meter\n                .removeClass()\n                .addClass(className);\n            this.options.cache.label.text(strengthLabel);\n        },\n\n        /**\n         * Get password value\n         * @returns {*}\n         * @private\n         */\n        _getPassword: function () {\n            return this.options.cache.input.val();\n        }\n    });\n\n    return $.mage.passwordStrengthIndicator;\n});\n","Magento_Customer/js/view/customer.js":"/**\n* Copyright \u00a9 Magento, Inc. All rights reserved.\n* See COPYING.txt for license details.\n*/\n\ndefine([\n    'uiComponent',\n    'Magento_Customer/js/customer-data'\n], function (Component, customerData) {\n    'use strict';\n\n    return Component.extend({\n        /** @inheritdoc */\n        initialize: function () {\n            this._super();\n\n            this.customer = customerData.get('customer');\n        }\n    });\n});\n","Magento_Customer/js/view/authentication-popup.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'ko',\n    'Magento_Ui/js/form/form',\n    'Magento_Customer/js/action/login',\n    'Magento_Customer/js/customer-data',\n    'Magento_Customer/js/model/authentication-popup',\n    'mage/translate',\n    'mage/url',\n    'Magento_Ui/js/modal/alert',\n    'mage/validation'\n], function ($, ko, Component, loginAction, customerData, authenticationPopup, $t, url, alert) {\n    'use strict';\n\n    return Component.extend({\n        registerUrl: window.authenticationPopup.customerRegisterUrl,\n        forgotPasswordUrl: window.authenticationPopup.customerForgotPasswordUrl,\n        autocomplete: window.authenticationPopup.autocomplete,\n        modalWindow: null,\n        isLoading: ko.observable(false),\n\n        defaults: {\n            template: 'Magento_Customer/authentication-popup'\n        },\n\n        /**\n         * Init\n         */\n        initialize: function () {\n            var self = this;\n\n            this._super();\n            url.setBaseUrl(window.authenticationPopup.baseUrl);\n            loginAction.registerLoginCallback(function () {\n                self.isLoading(false);\n            });\n        },\n\n        /** Init popup login window */\n        setModalElement: function (element) {\n            if (authenticationPopup.modalWindow == null) {\n                authenticationPopup.createPopUp(element);\n            }\n        },\n\n        /** Is login form enabled for current customer */\n        isActive: function () {\n            var customer = customerData.get('customer');\n\n            return customer() == false; //eslint-disable-line eqeqeq\n        },\n\n        /** Show login popup window */\n        showModal: function () {\n            if (this.modalWindow) {\n                $(this.modalWindow).modal('openModal');\n            } else {\n                alert({\n                    content: $t('Guest checkout is disabled.')\n                });\n            }\n        },\n\n        /**\n         * Provide login action\n         *\n         * @return {Boolean}\n         */\n        login: function (formUiElement, event) {\n            var loginData = {},\n                formElement = $(event.currentTarget),\n                formDataArray = formElement.serializeArray();\n\n            event.stopPropagation();\n            formDataArray.forEach(function (entry) {\n                loginData[entry.name] = entry.value;\n            });\n\n            if (formElement.validation() &&\n                formElement.validation('isValid')\n            ) {\n                this.isLoading(true);\n                loginAction(loginData);\n            }\n\n            return false;\n        }\n    });\n});\n","Magento_Customer/js/action/check-email-availability.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'mage/storage',\n    'Magento_Checkout/js/model/url-builder'\n], function (storage, urlBuilder) {\n    'use strict';\n\n    return function (deferred, email) {\n        return storage.post(\n            urlBuilder.createUrl('/customers/isEmailAvailable', {}),\n            JSON.stringify({\n                customerEmail: email\n            }),\n            false\n        ).done(function (isEmailAvailable) {\n            if (isEmailAvailable) {\n                deferred.resolve();\n            } else {\n                deferred.reject();\n            }\n        }).fail(function () {\n            deferred.reject();\n        });\n    };\n});\n","Magento_Customer/js/action/login.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/storage',\n    'Magento_Ui/js/model/messageList',\n    'Magento_Customer/js/customer-data',\n    'mage/translate'\n], function ($, storage, globalMessageList, customerData, $t) {\n    'use strict';\n\n    var callbacks = [],\n\n        /**\n         * @param {Object} loginData\n         * @param {String} redirectUrl\n         * @param {*} isGlobal\n         * @param {Object} messageContainer\n         */\n        action = function (loginData, redirectUrl, isGlobal, messageContainer) {\n            messageContainer = messageContainer || globalMessageList;\n\n            return storage.post(\n                'customer/ajax/login',\n                JSON.stringify(loginData),\n                isGlobal\n            ).done(function (response) {\n                if (response.errors) {\n                    messageContainer.addErrorMessage(response);\n                    callbacks.forEach(function (callback) {\n                        callback(loginData);\n                    });\n                } else {\n                    callbacks.forEach(function (callback) {\n                        callback(loginData);\n                    });\n                    customerData.invalidate(['customer']);\n\n                    if (redirectUrl) {\n                        window.location.href = redirectUrl;\n                    } else if (response.redirectUrl) {\n                        window.location.href = response.redirectUrl;\n                    } else {\n                        location.reload();\n                    }\n                }\n            }).fail(function () {\n                messageContainer.addErrorMessage({\n                    'message': $t('Could not authenticate. Please try again later')\n                });\n                callbacks.forEach(function (callback) {\n                    callback(loginData);\n                });\n            });\n        };\n\n    /**\n     * @param {Function} callback\n     */\n    action.registerLoginCallback = function (callback) {\n        callbacks.push(callback);\n    };\n\n    return action;\n});\n","Magento_Customer/js/model/address-list.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'ko',\n    './customer-addresses'\n], function (ko, defaultProvider) {\n    'use strict';\n\n    return ko.observableArray(defaultProvider.getAddressItems());\n});\n","Magento_Customer/js/model/customer.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'ko',\n    'underscore',\n    './address-list'\n], function ($, ko, _, addressList) {\n    'use strict';\n\n    var isLoggedIn = ko.observable(window.isCustomerLoggedIn),\n        customerData = {};\n\n    if (isLoggedIn()) {\n        customerData = window.customerData;\n    } else {\n        customerData = {};\n    }\n\n    return {\n        customerData: customerData,\n        customerDetails: {},\n        isLoggedIn: isLoggedIn,\n\n        /**\n         * @param {Boolean} flag\n         */\n        setIsLoggedIn: function (flag) {\n            isLoggedIn(flag);\n        },\n\n        /**\n         * @return {Array}\n         */\n        getBillingAddressList: function () {\n            return addressList();\n        },\n\n        /**\n         * @return {Array}\n         */\n        getShippingAddressList: function () {\n            return addressList();\n        },\n\n        /**\n         * @param {String} fieldName\n         * @param {*} value\n         */\n        setDetails: function (fieldName, value) {\n            if (fieldName) {\n                this.customerDetails[fieldName] = value;\n            }\n        },\n\n        /**\n         * @param {String} fieldName\n         * @return {*}\n         */\n        getDetails: function (fieldName) {\n            if (fieldName) {\n                if (this.customerDetails.hasOwnProperty(fieldName)) {\n                    return this.customerDetails[fieldName];\n                }\n\n                return undefined;\n            }\n\n            return this.customerDetails;\n        },\n\n        /**\n         * @param {Array} address\n         * @return {Number}\n         */\n        addCustomerAddress: function (address) {\n            var fields = [\n                    'customer_id', 'country_id', 'street', 'company', 'telephone', 'fax', 'postcode', 'city',\n                    'firstname', 'lastname', 'middlename', 'prefix', 'suffix', 'vat_id', 'default_billing',\n                    'default_shipping'\n                ],\n                customerAddress = {},\n                hasAddress = 0,\n                existingAddress;\n\n            if (!this.customerData.addresses) {\n                this.customerData.addresses = [];\n            }\n\n            customerAddress = _.pick(address, fields);\n\n            if (address.hasOwnProperty('region_id')) {\n                customerAddress.region = {\n                    'region_id': address['region_id'],\n                    region: address.region\n                };\n            }\n\n            for (existingAddress in this.customerData.addresses) {\n                if (this.customerData.addresses.hasOwnProperty(existingAddress)) {\n                    if (_.isEqual(this.customerData.addresses[existingAddress], customerAddress)) { //eslint-disable-line\n                        hasAddress = existingAddress;\n                        break;\n                    }\n                }\n            }\n\n            if (hasAddress === 0) {\n                return this.customerData.addresses.push(customerAddress) - 1;\n            }\n\n            return hasAddress;\n        },\n\n        /**\n         * @param {*} addressId\n         * @return {Boolean}\n         */\n        setAddressAsDefaultBilling: function (addressId) {\n            if (this.customerData.addresses[addressId]) {\n                this.customerData.addresses[addressId]['default_billing'] = 1;\n\n                return true;\n            }\n\n            return false;\n        },\n\n        /**\n         * @param {*} addressId\n         * @return {Boolean}\n         */\n        setAddressAsDefaultShipping: function (addressId) {\n            if (this.customerData.addresses[addressId]) {\n                this.customerData.addresses[addressId]['default_shipping'] = 1;\n\n                return true;\n            }\n\n            return false;\n        }\n    };\n});\n","Magento_Customer/js/model/authentication-popup.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/modal/modal'\n], function ($, modal) {\n    'use strict';\n\n    return {\n        modalWindow: null,\n\n        /**\n         * Create popUp window for provided element\n         *\n         * @param {HTMLElement} element\n         */\n        createPopUp: function (element) {\n            var options = {\n                'type': 'popup',\n                'modalClass': 'popup-authentication',\n                'focus': '[name=username]',\n                'responsive': true,\n                'innerScroll': true,\n                'trigger': '.proceed-to-checkout',\n                'buttons': []\n            };\n\n            this.modalWindow = element;\n            modal(options, $(this.modalWindow));\n        },\n\n        /** Show login popup window */\n        showModal: function () {\n            $(this.modalWindow).modal('openModal').trigger('contentUpdated');\n        }\n    };\n});\n","Magento_Customer/js/model/customer-addresses.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'jquery',\n    'ko',\n    './customer/address'\n], function ($, ko, Address) {\n    'use strict';\n\n    var isLoggedIn = ko.observable(window.isCustomerLoggedIn);\n\n    return {\n        /**\n         * @return {Array}\n         */\n        getAddressItems: function () {\n            var items = [],\n                customerData = window.customerData;\n\n            if (isLoggedIn()) {\n                if (Object.keys(customerData).length) {\n                    $.each(customerData.addresses, function (key, item) {\n                        items.push(new Address(item));\n                    });\n                }\n            }\n\n            return items;\n        }\n    };\n});\n","Magento_Customer/js/model/customer/address.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([], function () {\n    'use strict';\n\n    /**\n     * Returns new address object.\n     *\n     * @param {Object} addressData\n     * @return {Object}\n     */\n    return function (addressData) {\n        var regionId;\n\n        if (addressData.region['region_id'] && addressData.region['region_id'] !== '0') {\n            regionId = addressData.region['region_id'] + '';\n        }\n\n        return {\n            customerAddressId: addressData.id,\n            email: addressData.email,\n            countryId: addressData['country_id'],\n            regionId: regionId,\n            regionCode: addressData.region['region_code'],\n            region: addressData.region.region,\n            customerId: addressData['customer_id'],\n            street: addressData.street,\n            company: addressData.company,\n            telephone: addressData.telephone,\n            fax: addressData.fax,\n            postcode: addressData.postcode,\n            city: addressData.city,\n            firstname: addressData.firstname,\n            lastname: addressData.lastname,\n            middlename: addressData.middlename,\n            prefix: addressData.prefix,\n            suffix: addressData.suffix,\n            vatId: addressData['vat_id'],\n            sameAsBilling: addressData['same_as_billing'],\n            saveInAddressBook: addressData['save_in_address_book'],\n            customAttributes: addressData['custom_attributes'],\n\n            /**\n             * @return {*}\n             */\n            isDefaultShipping: function () {\n                return addressData['default_shipping'];\n            },\n\n            /**\n             * @return {*}\n             */\n            isDefaultBilling: function () {\n                return addressData['default_billing'];\n            },\n\n            /**\n             * @return {*}\n             */\n            getAddressInline: function () {\n                return addressData.inline;\n            },\n\n            /**\n             * @return {String}\n             */\n            getType: function () {\n                return 'customer-address';\n            },\n\n            /**\n             * @return {String}\n             */\n            getKey: function () {\n                return this.getType() + this.customerAddressId;\n            },\n\n            /**\n             * @return {String}\n             */\n            getCacheKey: function () {\n                return this.getKey();\n            },\n\n            /**\n             * @return {Boolean}\n             */\n            isEditable: function () {\n                return false;\n            },\n\n            /**\n             * @return {Boolean}\n             */\n            canUseForBilling: function () {\n                return true;\n            }\n        };\n    };\n});\n","Magento_Customer/js/invalidation-rules/website-rule.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'uiClass'\n], function (Element) {\n    'use strict';\n\n    return Element.extend({\n\n        defaults: {\n            scopeConfig: {}\n        },\n\n        /**\n         * Takes website id from current customer data and compare it with current website id\n         * If customer belongs to another scope, we need to invalidate current section\n         *\n         * @param {Object} customerData\n         */\n        process: function (customerData) {\n            var customer = customerData.get('customer');\n\n            if (this.scopeConfig && customer() &&\n                ~~customer().websiteId !== ~~this.scopeConfig.websiteId && ~~customer().websiteId !== 0) {\n                customerData.reload(['customer']);\n            }\n        }\n    });\n});\n","Magento_Ups/js/view/shipping-rates-validation.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'uiComponent',\n    'Magento_Checkout/js/model/shipping-rates-validator',\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\n    'Magento_Ups/js/model/shipping-rates-validator',\n    'Magento_Ups/js/model/shipping-rates-validation-rules'\n], function (\n    Component,\n    defaultShippingRatesValidator,\n    defaultShippingRatesValidationRules,\n    upsShippingRatesValidator,\n    upsShippingRatesValidationRules\n) {\n    'use strict';\n\n    defaultShippingRatesValidator.registerValidator('ups', upsShippingRatesValidator);\n    defaultShippingRatesValidationRules.registerRules('ups', upsShippingRatesValidationRules);\n\n    return Component;\n});\n","Magento_Ups/js/model/shipping-rates-validation-rules.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    return {\n        /**\n         * @return {Object}\n         */\n        getRules: function () {\n            return {\n                'postcode': {\n                    'required': true\n                },\n                'country_id': {\n                    'required': true\n                }\n            };\n        }\n    };\n});\n","Magento_Ups/js/model/shipping-rates-validator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mageUtils',\n    'Magento_Ups/js/model/shipping-rates-validation-rules',\n    'mage/translate'\n], function ($, utils, validationRules, $t) {\n    'use strict';\n\n    return {\n        validationErrors: [],\n\n        /**\n         * @param {Object} address\n         * @return {Boolean}\n         */\n        validate: function (address) {\n            var self = this;\n\n            this.validationErrors = [];\n            $.each(validationRules.getRules(), function (field, rule) {\n                var message;\n\n                if (rule.required && utils.isEmpty(address[field])) {\n                    message = $t('Field ') + field + $t(' is required.');\n                    self.validationErrors.push(message);\n                }\n            });\n\n            return !this.validationErrors.length;\n        }\n    };\n});\n","knockoutjs/knockout-repeat.js":"// REPEAT binding for Knockout http://knockoutjs.com/\n// (c) Michael Best\n// License: MIT (http://www.opensource.org/licenses/mit-license.php)\n// Version 2.1.0\n\n(function(factory) {\n    if (typeof define === 'function' && define.amd) {\n        // [1] AMD anonymous module\n        define(['knockout'], factory);\n    } else if (typeof exports === 'object') {\n        // [2] commonJS\n        factory(require('knockout'));\n    } else {\n        // [3] No module loader (plain <script> tag) - put directly in global namespace\n        factory(window.ko);\n    }\n})(function(ko) {\n\nif (!ko.virtualElements)\n    throw Error('Repeat requires at least Knockout 2.1');\n\nvar ko_bindingFlags = ko.bindingFlags || {};\nvar ko_unwrap = ko.utils.unwrapObservable;\n\nvar koProtoName = '__ko_proto__';\n\nif (ko.version >= \"3.0.0\") {\n    // In Knockout 3.0.0, use the node preprocessor to replace a node with a repeat binding with a virtual element\n    var provider = ko.bindingProvider.instance, previousPreprocessFn = provider.preprocessNode;\n    provider.preprocessNode = function(node) {\n        var newNodes, nodeBinding;\n        if (!previousPreprocessFn || !(newNodes = previousPreprocessFn.call(this, node))) {\n            if (node.nodeType === 1 && (nodeBinding = node.getAttribute('data-bind'))) {\n                if (/^\\s*repeat\\s*:/.test(nodeBinding)) {\n                    var leadingComment = node.ownerDocument.createComment('ko ' + nodeBinding),\n                        trailingComment = node.ownerDocument.createComment('/ko');\n                    node.parentNode.insertBefore(leadingComment, node);\n                    node.parentNode.insertBefore(trailingComment, node.nextSibling);\n                    node.removeAttribute('data-bind');\n                    newNodes = [leadingComment, node, trailingComment];\n                }\n            }\n        }\n        return newNodes;\n    };\n}\n\nko.virtualElements.allowedBindings.repeat = true;\nko.bindingHandlers.repeat = {\n    flags: ko_bindingFlags.contentBind | ko_bindingFlags.canUseVirtual,\n    init: function(element, valueAccessor, allBindingsAccessor, xxx, bindingContext) {\n\n        // Read and set fixed options--these options cannot be changed\n        var repeatParam = ko_unwrap(valueAccessor());\n        if (repeatParam && typeof repeatParam == 'object' && !('length' in repeatParam)) {\n            var repeatIndex = repeatParam.index,\n                repeatData = repeatParam.item,\n                repeatStep = repeatParam.step,\n                repeatReversed = repeatParam.reverse,\n                repeatBind = repeatParam.bind,\n                repeatInit = repeatParam.init,\n                repeatUpdate = repeatParam.update;\n        }\n        // Set default values for options that need it\n        repeatIndex = repeatIndex || '$index';\n        repeatData = repeatData || ko.bindingHandlers.repeat.itemName || '$item';\n        repeatStep = repeatStep || 1;\n        repeatReversed = repeatReversed || false;\n\n        var parent = element.parentNode, placeholder;\n        if (element.nodeType == 8) {    // virtual element\n            // Extract the \"children\" and find the single element node\n            var childNodes = ko.utils.arrayFilter(ko.virtualElements.childNodes(element), function(node) { return node.nodeType == 1;});\n            if (childNodes.length !== 1) {\n                throw Error(\"Repeat binding requires a single element to repeat\");\n            }\n            ko.virtualElements.emptyNode(element);\n\n            // The placeholder is the closing comment normally, or the opening comment if reversed\n            placeholder = repeatReversed ? element : element.nextSibling;\n            // The element to repeat is the contained element\n            element = childNodes[0];\n        } else {    // regular element\n            // First clean the element node and remove node's binding\n            var origBindString = element.getAttribute('data-bind');\n            ko.cleanNode(element);\n            element.removeAttribute('data-bind');\n\n            // Original element is no longer needed: delete it and create a placeholder comment\n            placeholder = element.ownerDocument.createComment('ko_repeatplaceholder ' + origBindString);\n            parent.replaceChild(placeholder, element);\n        }\n\n        // extract and remove a data-repeat-bind attribute, if present\n        if (!repeatBind) {\n            repeatBind = element.getAttribute('data-repeat-bind');\n            if (repeatBind) {\n                element.removeAttribute('data-repeat-bind');\n            }\n        }\n\n        // Make a copy of the element node to be copied for each repetition\n        var cleanNode = element.cloneNode(true);\n        if (typeof repeatBind == \"string\") {\n            cleanNode.setAttribute('data-bind', repeatBind);\n            repeatBind = null;\n        }\n\n        // Set up persistent data\n        var lastRepeatCount = 0,\n            notificationObservable = ko.observable(),\n            repeatArray, arrayObservable;\n\n        if (repeatInit) {\n            repeatInit(parent);\n        }\n\n        var subscribable = ko.computed(function() {\n            function makeArrayItemAccessor(index) {\n                var f = function(newValue) {\n                    var item = repeatArray[index];\n                    // Reading the value of the item\n                    if (!arguments.length) {\n                        notificationObservable();   // for dependency tracking\n                        return ko_unwrap(item);\n                    }\n                    // Writing a value to the item\n                    if (ko.isObservable(item)) {\n                        item(newValue);\n                    } else if (arrayObservable && arrayObservable.splice) {\n                        arrayObservable.splice(index, 1, newValue);\n                    } else {\n                        repeatArray[index] = newValue;\n                    }\n                    return this;\n                };\n                // Pretend that our accessor function is an observable\n                f[koProtoName] = ko.observable;\n                return f;\n            }\n\n            function makeBinding(item, index, context) {\n                return repeatArray\n                    ? function() { return repeatBind.call(bindingContext.$data, item, index, context); }\n                    : function() { return repeatBind.call(bindingContext.$data, index, context); }\n            }\n\n            // Read and set up variable options--these options can change and will update the binding\n            var paramObservable = valueAccessor(), repeatParam = ko_unwrap(paramObservable), repeatCount = 0;\n            if (repeatParam && typeof repeatParam == 'object') {\n                if ('length' in repeatParam) {\n                    repeatArray = repeatParam;\n                    repeatCount = repeatArray.length;\n                } else {\n                    if ('foreach' in repeatParam) {\n                        repeatArray = ko_unwrap(paramObservable = repeatParam.foreach);\n                        if (repeatArray && typeof repeatArray == 'object' && 'length' in repeatArray) {\n                            repeatCount = repeatArray.length || 0;\n                        } else {\n                            repeatCount = repeatArray || 0;\n                            repeatArray = null;\n                        }\n                    }\n                    // If a count value is provided (>0), always output that number of items\n                    if ('count' in repeatParam)\n                        repeatCount = ko_unwrap(repeatParam.count) || repeatCount;\n                    // If a limit is provided, don't output more than the limit\n                    if ('limit' in repeatParam)\n                        repeatCount = Math.min(repeatCount, ko_unwrap(repeatParam.limit)) || repeatCount;\n                }\n                arrayObservable = repeatArray && ko.isObservable(paramObservable) ? paramObservable : null;\n            } else {\n                repeatCount = repeatParam || 0;\n            }\n\n            // Remove nodes from end if array is shorter\n            for (; lastRepeatCount > repeatCount; lastRepeatCount-=repeatStep) {\n                ko.removeNode(repeatReversed ? placeholder.nextSibling : placeholder.previousSibling);\n            }\n\n            // Notify existing nodes of change\n            notificationObservable.notifySubscribers();\n\n            // Add nodes to end if array is longer (also initially populates nodes)\n            for (; lastRepeatCount < repeatCount; lastRepeatCount+=repeatStep) {\n                // Clone node and add to document\n                var newNode = cleanNode.cloneNode(true);\n                parent.insertBefore(newNode, repeatReversed ? placeholder.nextSibling : placeholder);\n                newNode.setAttribute('data-repeat-index', lastRepeatCount);\n\n                // Apply bindings to inserted node\n                if (repeatArray && repeatData == '$data') {\n                    var newContext = bindingContext.createChildContext(makeArrayItemAccessor(lastRepeatCount));\n                } else {\n                    var newContext = bindingContext.extend();\n                    if (repeatArray)\n                        newContext[repeatData] = makeArrayItemAccessor(lastRepeatCount);\n                }\n                newContext[repeatIndex] = lastRepeatCount;\n                if (repeatBind) {\n                    var result = ko.applyBindingsToNode(newNode, makeBinding(newContext[repeatData], lastRepeatCount, newContext), newContext, true),\n                        shouldBindDescendants = result && result.shouldBindDescendants;\n                }\n                if (!repeatBind || (result && shouldBindDescendants !== false)) {\n                    ko.applyBindings(newContext, newNode);\n                }\n            }\n            if (repeatUpdate) {\n                repeatUpdate(parent);\n            }\n        }, null, {disposeWhenNodeIsRemoved: placeholder});\n\n        return { controlsDescendantBindings: true, subscribable: subscribable };\n    }\n};\n});"}
}});
